var lp=Object.defineProperty;var $l=b=>{throw TypeError(b)};var cp=(b,g,_)=>g in b?lp(b,g,{enumerable:!0,configurable:!0,writable:!0,value:_}):b[g]=_;var $r=(b,g,_)=>cp(b,typeof g!="symbol"?g+"":g,_),To=(b,g,_)=>g.has(b)||$l("Cannot "+_);var yt=(b,g,_)=>(To(b,g,"read from private field"),_?_.call(b):g.get(b)),fn=(b,g,_)=>g.has(b)?$l("Cannot add the same private member more than once"):g instanceof WeakSet?g.add(b):g.set(b,_),pn=(b,g,_,j)=>(To(b,g,"write to private field"),j?j.call(b,_):g.set(b,_),_),Qt=(b,g,_)=>(To(b,g,"access private method"),_);var Is=(b,g,_,j)=>({set _($){pn(b,g,$,_)},get _(){return yt(b,g,j)}});function _mergeNamespaces(b,g){for(var _=0;_<g.length;_++){const j=g[_];if(typeof j!="string"&&!Array.isArray(j)){for(const $ in j)if($!=="default"&&!($ in b)){const _e=Object.getOwnPropertyDescriptor(j,$);_e&&Object.defineProperty(b,$,_e.get?_e:{enumerable:!0,get:()=>j[$]})}}}return Object.freeze(Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))j($);new MutationObserver($=>{for(const _e of $)if(_e.type==="childList")for(const et of _e.addedNodes)et.tagName==="LINK"&&et.rel==="modulepreload"&&j(et)}).observe(document,{childList:!0,subtree:!0});function _($){const _e={};return $.integrity&&(_e.integrity=$.integrity),$.referrerPolicy&&(_e.referrerPolicy=$.referrerPolicy),$.crossOrigin==="use-credentials"?_e.credentials="include":$.crossOrigin==="anonymous"?_e.credentials="omit":_e.credentials="same-origin",_e}function j($){if($.ep)return;$.ep=!0;const _e=_($);fetch($.href,_e)}})();function getDefaultExportFromCjs$1(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function getAugmentedNamespace(b){if(b.__esModule)return b;var g=b.default;if(typeof g=="function"){var _=function j(){return this instanceof j?Reflect.construct(g,arguments,this.constructor):g.apply(this,arguments)};_.prototype=g.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(b).forEach(function(j){var $=Object.getOwnPropertyDescriptor(b,j);Object.defineProperty(_,j,$.get?$:{enumerable:!0,get:function(){return b[j]}})}),_}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(b){return b===null||typeof b!="object"?null:(b=z$1&&b[z$1]||b["@@iterator"],typeof b=="function"?b:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(b,g,_){this.props=b,this.context=g,this.refs=D$1,this.updater=_||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(b,g){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,g,"setState")};E$1.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(b,g,_){this.props=b,this.context=g,this.refs=D$1,this.updater=_||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(b,g,_){var j,$={},_e=null,et=null;if(g!=null)for(j in g.ref!==void 0&&(et=g.ref),g.key!==void 0&&(_e=""+g.key),g)J.call(g,j)&&!L$1.hasOwnProperty(j)&&($[j]=g[j]);var tt=arguments.length-2;if(tt===1)$.children=_;else if(1<tt){for(var nt=Array(tt),rt=0;rt<tt;rt++)nt[rt]=arguments[rt+2];$.children=nt}if(b&&b.defaultProps)for(j in tt=b.defaultProps,tt)$[j]===void 0&&($[j]=tt[j]);return{$$typeof:l$2,type:b,key:_e,ref:et,props:$,_owner:K$1.current}}function N$1(b,g){return{$$typeof:l$2,type:b.type,key:g,ref:b.ref,props:b.props,_owner:b._owner}}function O$1(b){return typeof b=="object"&&b!==null&&b.$$typeof===l$2}function escape$1(b){var g={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(_){return g[_]})}var P$1=/\/+/g;function Q$1(b,g){return typeof b=="object"&&b!==null&&b.key!=null?escape$1(""+b.key):g.toString(36)}function R$1(b,g,_,j,$){var _e=typeof b;(_e==="undefined"||_e==="boolean")&&(b=null);var et=!1;if(b===null)et=!0;else switch(_e){case"string":case"number":et=!0;break;case"object":switch(b.$$typeof){case l$2:case n$3:et=!0}}if(et)return et=b,$=$(et),b=j===""?"."+Q$1(et,0):j,I$1($)?(_="",b!=null&&(_=b.replace(P$1,"$&/")+"/"),R$1($,g,_,"",function(rt){return rt})):$!=null&&(O$1($)&&($=N$1($,_+(!$.key||et&&et.key===$.key?"":(""+$.key).replace(P$1,"$&/")+"/")+b)),g.push($)),1;if(et=0,j=j===""?".":j+":",I$1(b))for(var tt=0;tt<b.length;tt++){_e=b[tt];var nt=j+Q$1(_e,tt);et+=R$1(_e,g,_,nt,$)}else if(nt=A$1(b),typeof nt=="function")for(b=nt.call(b),tt=0;!(_e=b.next()).done;)_e=_e.value,nt=j+Q$1(_e,tt++),et+=R$1(_e,g,_,nt,$);else if(_e==="object")throw g=String(b),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return et}function S$1(b,g,_){if(b==null)return b;var j=[],$=0;return R$1(b,j,"","",function(_e){return g.call(_,_e,$++)}),j}function T$1(b){if(b._status===-1){var g=b._result;g=g(),g.then(function(_){(b._status===0||b._status===-1)&&(b._status=1,b._result=_)},function(_){(b._status===0||b._status===-1)&&(b._status=2,b._result=_)}),b._status===-1&&(b._status=0,b._result=g)}if(b._status===1)return b._result.default;throw b._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(b,g,_){S$1(b,function(){g.apply(this,arguments)},_)},count:function(b){var g=0;return S$1(b,function(){g++}),g},toArray:function(b){return S$1(b,function(g){return g})||[]},only:function(b){if(!O$1(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(b,g,_){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var j=C$1({},b.props),$=b.key,_e=b.ref,et=b._owner;if(g!=null){if(g.ref!==void 0&&(_e=g.ref,et=K$1.current),g.key!==void 0&&($=""+g.key),b.type&&b.type.defaultProps)var tt=b.type.defaultProps;for(nt in g)J.call(g,nt)&&!L$1.hasOwnProperty(nt)&&(j[nt]=g[nt]===void 0&&tt!==void 0?tt[nt]:g[nt])}var nt=arguments.length-2;if(nt===1)j.children=_;else if(1<nt){tt=Array(nt);for(var rt=0;rt<nt;rt++)tt[rt]=arguments[rt+2];j.children=tt}return{$$typeof:l$2,type:b.type,key:$,ref:_e,props:j,_owner:et}};react_production_min.createContext=function(b){return b={$$typeof:u$2,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:t$2,_context:b},b.Consumer=b};react_production_min.createElement=M$1;react_production_min.createFactory=function(b){var g=M$1.bind(null,b);return g.type=b,g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(b){return{$$typeof:v$1,render:b}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(b){return{$$typeof:y,_payload:{_status:-1,_result:b},_init:T$1}};react_production_min.memo=function(b,g){return{$$typeof:x,type:b,compare:g===void 0?null:g}};react_production_min.startTransition=function(b){var g=V$1.transition;V$1.transition={};try{b()}finally{V$1.transition=g}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(b,g){return U$1.current.useCallback(b,g)};react_production_min.useContext=function(b){return U$1.current.useContext(b)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(b){return U$1.current.useDeferredValue(b)};react_production_min.useEffect=function(b,g){return U$1.current.useEffect(b,g)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(b,g,_){return U$1.current.useImperativeHandle(b,g,_)};react_production_min.useInsertionEffect=function(b,g){return U$1.current.useInsertionEffect(b,g)};react_production_min.useLayoutEffect=function(b,g){return U$1.current.useLayoutEffect(b,g)};react_production_min.useMemo=function(b,g){return U$1.current.useMemo(b,g)};react_production_min.useReducer=function(b,g,_){return U$1.current.useReducer(b,g,_)};react_production_min.useRef=function(b){return U$1.current.useRef(b)};react_production_min.useState=function(b){return U$1.current.useState(b)};react_production_min.useSyncExternalStore=function(b,g,_){return U$1.current.useSyncExternalStore(b,g,_)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React=getDefaultExportFromCjs$1(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$2=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(b,g,_){var j,$={},_e=null,et=null;_!==void 0&&(_e=""+_),g.key!==void 0&&(_e=""+g.key),g.ref!==void 0&&(et=g.ref);for(j in g)m$1.call(g,j)&&!p$2.hasOwnProperty(j)&&($[j]=g[j]);if(b&&b.defaultProps)for(j in g=b.defaultProps,g)$[j]===void 0&&($[j]=g[j]);return{$$typeof:k,type:b,key:_e,ref:et,props:$,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(b){function g(Ht,Rt){var jt=Ht.length;Ht.push(Rt);e:for(;0<jt;){var Zt=jt-1>>>1,Ot=Ht[Zt];if(0<$(Ot,Rt))Ht[Zt]=Rt,Ht[jt]=Ot,jt=Zt;else break e}}function _(Ht){return Ht.length===0?null:Ht[0]}function j(Ht){if(Ht.length===0)return null;var Rt=Ht[0],jt=Ht.pop();if(jt!==Rt){Ht[0]=jt;e:for(var Zt=0,Ot=Ht.length,wt=Ot>>>1;Zt<wt;){var Ct=2*(Zt+1)-1,_t=Ht[Ct],Nt=Ct+1,Lt=Ht[Nt];if(0>$(_t,jt))Nt<Ot&&0>$(Lt,_t)?(Ht[Zt]=Lt,Ht[Nt]=jt,Zt=Nt):(Ht[Zt]=_t,Ht[Ct]=jt,Zt=Ct);else if(Nt<Ot&&0>$(Lt,jt))Ht[Zt]=Lt,Ht[Nt]=jt,Zt=Nt;else break e}}return Rt}function $(Ht,Rt){var jt=Ht.sortIndex-Rt.sortIndex;return jt!==0?jt:Ht.id-Rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _e=performance;b.unstable_now=function(){return _e.now()}}else{var et=Date,tt=et.now();b.unstable_now=function(){return et.now()-tt}}var nt=[],rt=[],it=1,st=null,ot=3,lt=!1,at=!1,ut=!1,dt=typeof setTimeout=="function"?setTimeout:null,ct=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pt(Ht){for(var Rt=_(rt);Rt!==null;){if(Rt.callback===null)j(rt);else if(Rt.startTime<=Ht)j(rt),Rt.sortIndex=Rt.expirationTime,g(nt,Rt);else break;Rt=_(rt)}}function mt(Ht){if(ut=!1,pt(Ht),!at)if(_(nt)!==null)at=!0,Jt(ft);else{var Rt=_(rt);Rt!==null&&zt(mt,Rt.startTime-Ht)}}function ft(Ht,Rt){at=!1,ut&&(ut=!1,ct(vt),vt=-1),lt=!0;var jt=ot;try{for(pt(Rt),st=_(nt);st!==null&&(!(st.expirationTime>Rt)||Ht&&!bt());){var Zt=st.callback;if(typeof Zt=="function"){st.callback=null,ot=st.priorityLevel;var Ot=Zt(st.expirationTime<=Rt);Rt=b.unstable_now(),typeof Ot=="function"?st.callback=Ot:st===_(nt)&&j(nt),pt(Rt)}else j(nt);st=_(nt)}if(st!==null)var wt=!0;else{var Ct=_(rt);Ct!==null&&zt(mt,Ct.startTime-Rt),wt=!1}return wt}finally{st=null,ot=jt,lt=!1}}var gt=!1,xt=null,vt=-1,St=5,Tt=-1;function bt(){return!(b.unstable_now()-Tt<St)}function At(){if(xt!==null){var Ht=b.unstable_now();Tt=Ht;var Rt=!0;try{Rt=xt(!0,Ht)}finally{Rt?Pt():(gt=!1,xt=null)}}else gt=!1}var Pt;if(typeof ht=="function")Pt=function(){ht(At)};else if(typeof MessageChannel<"u"){var en=new MessageChannel,Wt=en.port2;en.port1.onmessage=At,Pt=function(){Wt.postMessage(null)}}else Pt=function(){dt(At,0)};function Jt(Ht){xt=Ht,gt||(gt=!0,Pt())}function zt(Ht,Rt){vt=dt(function(){Ht(b.unstable_now())},Rt)}b.unstable_IdlePriority=5,b.unstable_ImmediatePriority=1,b.unstable_LowPriority=4,b.unstable_NormalPriority=3,b.unstable_Profiling=null,b.unstable_UserBlockingPriority=2,b.unstable_cancelCallback=function(Ht){Ht.callback=null},b.unstable_continueExecution=function(){at||lt||(at=!0,Jt(ft))},b.unstable_forceFrameRate=function(Ht){0>Ht||125<Ht?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):St=0<Ht?Math.floor(1e3/Ht):5},b.unstable_getCurrentPriorityLevel=function(){return ot},b.unstable_getFirstCallbackNode=function(){return _(nt)},b.unstable_next=function(Ht){switch(ot){case 1:case 2:case 3:var Rt=3;break;default:Rt=ot}var jt=ot;ot=Rt;try{return Ht()}finally{ot=jt}},b.unstable_pauseExecution=function(){},b.unstable_requestPaint=function(){},b.unstable_runWithPriority=function(Ht,Rt){switch(Ht){case 1:case 2:case 3:case 4:case 5:break;default:Ht=3}var jt=ot;ot=Ht;try{return Rt()}finally{ot=jt}},b.unstable_scheduleCallback=function(Ht,Rt,jt){var Zt=b.unstable_now();switch(typeof jt=="object"&&jt!==null?(jt=jt.delay,jt=typeof jt=="number"&&0<jt?Zt+jt:Zt):jt=Zt,Ht){case 1:var Ot=-1;break;case 2:Ot=250;break;case 5:Ot=1073741823;break;case 4:Ot=1e4;break;default:Ot=5e3}return Ot=jt+Ot,Ht={id:it++,callback:Rt,priorityLevel:Ht,startTime:jt,expirationTime:Ot,sortIndex:-1},jt>Zt?(Ht.sortIndex=jt,g(rt,Ht),_(nt)===null&&Ht===_(rt)&&(ut?(ct(vt),vt=-1):ut=!0,zt(mt,jt-Zt))):(Ht.sortIndex=Ot,g(nt,Ht),at||lt||(at=!0,Jt(ft))),Ht},b.unstable_shouldYield=bt,b.unstable_wrapCallback=function(Ht){var Rt=ot;return function(){var jt=ot;ot=Rt;try{return Ht.apply(this,arguments)}finally{ot=jt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(b){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+b,_=1;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+b+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(b,g){ha(b,g),ha(b+"Capture",g)}function ha(b,g){for(ea[b]=g,b=0;b<g.length;b++)da.add(g[b])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(b){return ja.call(ma,b)?!0:ja.call(la,b)?!1:ka.test(b)?ma[b]=!0:(la[b]=!0,!1)}function pa(b,g,_,j){if(_!==null&&_.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return j?!1:_!==null?!_.acceptsBooleans:(b=b.toLowerCase().slice(0,5),b!=="data-"&&b!=="aria-");default:return!1}}function qa(b,g,_,j){if(g===null||typeof g>"u"||pa(b,g,_,j))return!0;if(j)return!1;if(_!==null)switch(_.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v(b,g,_,j,$,_e,et){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=j,this.attributeNamespace=$,this.mustUseProperty=_,this.propertyName=b,this.type=g,this.sanitizeURL=_e,this.removeEmptyString=et}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(b){z[b]=new v(b,0,!1,b,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(b){var g=b[0];z[g]=new v(g,1,!1,b[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(b){z[b]=new v(b,2,!1,b.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(b){z[b]=new v(b,2,!1,b,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(b){z[b]=new v(b,3,!1,b.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(b){z[b]=new v(b,3,!0,b,null,!1,!1)});["capture","download"].forEach(function(b){z[b]=new v(b,4,!1,b,null,!1,!1)});["cols","rows","size","span"].forEach(function(b){z[b]=new v(b,6,!1,b,null,!1,!1)});["rowSpan","start"].forEach(function(b){z[b]=new v(b,5,!1,b.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(b){return b[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(b){var g=b.replace(ra,sa);z[g]=new v(g,1,!1,b,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(b){var g=b.replace(ra,sa);z[g]=new v(g,1,!1,b,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(b){var g=b.replace(ra,sa);z[g]=new v(g,1,!1,b,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(b){z[b]=new v(b,1,!1,b.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(b){z[b]=new v(b,1,!1,b.toLowerCase(),null,!0,!0)});function ta(b,g,_,j){var $=z.hasOwnProperty(g)?z[g]:null;($!==null?$.type!==0:j||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(qa(g,_,$,j)&&(_=null),j||$===null?oa(g)&&(_===null?b.removeAttribute(g):b.setAttribute(g,""+_)):$.mustUseProperty?b[$.propertyName]=_===null?$.type===3?!1:"":_:(g=$.attributeName,j=$.attributeNamespace,_===null?b.removeAttribute(g):($=$.type,_=$===3||$===4&&_===!0?"":""+_,j?b.setAttributeNS(j,g,_):b.setAttribute(g,_))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(b){return b===null||typeof b!="object"?null:(b=Ja&&b[Ja]||b["@@iterator"],typeof b=="function"?b:null)}var A=Object.assign,La;function Ma(b){if(La===void 0)try{throw Error()}catch(_){var g=_.stack.trim().match(/\n( *(at )?)/);La=g&&g[1]||""}return`
`+La+b}var Na=!1;function Oa(b,g){if(!b||Na)return"";Na=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(rt){var j=rt}Reflect.construct(b,[],g)}else{try{g.call()}catch(rt){j=rt}b.call(g.prototype)}else{try{throw Error()}catch(rt){j=rt}b()}}catch(rt){if(rt&&j&&typeof rt.stack=="string"){for(var $=rt.stack.split(`
`),_e=j.stack.split(`
`),et=$.length-1,tt=_e.length-1;1<=et&&0<=tt&&$[et]!==_e[tt];)tt--;for(;1<=et&&0<=tt;et--,tt--)if($[et]!==_e[tt]){if(et!==1||tt!==1)do if(et--,tt--,0>tt||$[et]!==_e[tt]){var nt=`
`+$[et].replace(" at new "," at ");return b.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",b.displayName)),nt}while(1<=et&&0<=tt);break}}}finally{Na=!1,Error.prepareStackTrace=_}return(b=b?b.displayName||b.name:"")?Ma(b):""}function Pa(b){switch(b.tag){case 5:return Ma(b.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return b=Oa(b.type,!1),b;case 11:return b=Oa(b.type.render,!1),b;case 1:return b=Oa(b.type,!0),b;default:return""}}function Qa(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case Ca:return(b.displayName||"Context")+".Consumer";case Ba:return(b._context.displayName||"Context")+".Provider";case Da:var g=b.render;return b=b.displayName,b||(b=g.displayName||g.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case Ga:return g=b.displayName||null,g!==null?g:Qa(b.type)||"Memo";case Ha:g=b._payload,b=b._init;try{return Qa(b(g))}catch{}}return null}function Ra(b){var g=b.type;switch(b.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=g.render,b=b.displayName||b.name||"",g.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(g);case 8:return g===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Sa(b){switch(typeof b){case"boolean":case"number":case"string":case"undefined":return b;case"object":return b;default:return""}}function Ta(b){var g=b.type;return(b=b.nodeName)&&b.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ua(b){var g=Ta(b)?"checked":"value",_=Object.getOwnPropertyDescriptor(b.constructor.prototype,g),j=""+b[g];if(!b.hasOwnProperty(g)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var $=_.get,_e=_.set;return Object.defineProperty(b,g,{configurable:!0,get:function(){return $.call(this)},set:function(et){j=""+et,_e.call(this,et)}}),Object.defineProperty(b,g,{enumerable:_.enumerable}),{getValue:function(){return j},setValue:function(et){j=""+et},stopTracking:function(){b._valueTracker=null,delete b[g]}}}}function Va(b){b._valueTracker||(b._valueTracker=Ua(b))}function Wa(b){if(!b)return!1;var g=b._valueTracker;if(!g)return!0;var _=g.getValue(),j="";return b&&(j=Ta(b)?b.checked?"true":"false":b.value),b=j,b!==_?(g.setValue(b),!0):!1}function Xa(b){if(b=b||(typeof document<"u"?document:void 0),typeof b>"u")return null;try{return b.activeElement||b.body}catch{return b.body}}function Ya(b,g){var _=g.checked;return A({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_??b._wrapperState.initialChecked})}function Za(b,g){var _=g.defaultValue==null?"":g.defaultValue,j=g.checked!=null?g.checked:g.defaultChecked;_=Sa(g.value!=null?g.value:_),b._wrapperState={initialChecked:j,initialValue:_,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ab(b,g){g=g.checked,g!=null&&ta(b,"checked",g,!1)}function bb(b,g){ab(b,g);var _=Sa(g.value),j=g.type;if(_!=null)j==="number"?(_===0&&b.value===""||b.value!=_)&&(b.value=""+_):b.value!==""+_&&(b.value=""+_);else if(j==="submit"||j==="reset"){b.removeAttribute("value");return}g.hasOwnProperty("value")?cb(b,g.type,_):g.hasOwnProperty("defaultValue")&&cb(b,g.type,Sa(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(b.defaultChecked=!!g.defaultChecked)}function db(b,g,_){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var j=g.type;if(!(j!=="submit"&&j!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+b._wrapperState.initialValue,_||g===b.value||(b.value=g),b.defaultValue=g}_=b.name,_!==""&&(b.name=""),b.defaultChecked=!!b._wrapperState.initialChecked,_!==""&&(b.name=_)}function cb(b,g,_){(g!=="number"||Xa(b.ownerDocument)!==b)&&(_==null?b.defaultValue=""+b._wrapperState.initialValue:b.defaultValue!==""+_&&(b.defaultValue=""+_))}var eb=Array.isArray;function fb(b,g,_,j){if(b=b.options,g){g={};for(var $=0;$<_.length;$++)g["$"+_[$]]=!0;for(_=0;_<b.length;_++)$=g.hasOwnProperty("$"+b[_].value),b[_].selected!==$&&(b[_].selected=$),$&&j&&(b[_].defaultSelected=!0)}else{for(_=""+Sa(_),g=null,$=0;$<b.length;$++){if(b[$].value===_){b[$].selected=!0,j&&(b[$].defaultSelected=!0);return}g!==null||b[$].disabled||(g=b[$])}g!==null&&(g.selected=!0)}}function gb(b,g){if(g.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A({},g,{value:void 0,defaultValue:void 0,children:""+b._wrapperState.initialValue})}function hb(b,g){var _=g.value;if(_==null){if(_=g.children,g=g.defaultValue,_!=null){if(g!=null)throw Error(p$1(92));if(eb(_)){if(1<_.length)throw Error(p$1(93));_=_[0]}g=_}g==null&&(g=""),_=g}b._wrapperState={initialValue:Sa(_)}}function ib(b,g){var _=Sa(g.value),j=Sa(g.defaultValue);_!=null&&(_=""+_,_!==b.value&&(b.value=_),g.defaultValue==null&&b.defaultValue!==_&&(b.defaultValue=_)),j!=null&&(b.defaultValue=""+j)}function jb(b){var g=b.textContent;g===b._wrapperState.initialValue&&g!==""&&g!==null&&(b.value=g)}function kb(b){switch(b){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(b,g){return b==null||b==="http://www.w3.org/1999/xhtml"?kb(g):b==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":b}var mb,nb=function(b){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,_,j,$){MSApp.execUnsafeLocalFunction(function(){return b(g,_,j,$)})}:b}(function(b,g){if(b.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in b)b.innerHTML=g;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=mb.firstChild;b.firstChild;)b.removeChild(b.firstChild);for(;g.firstChild;)b.appendChild(g.firstChild)}});function ob(b,g){if(g){var _=b.firstChild;if(_&&_===b.lastChild&&_.nodeType===3){_.nodeValue=g;return}}b.textContent=g}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(b){qb.forEach(function(g){g=g+b.charAt(0).toUpperCase()+b.substring(1),pb[g]=pb[b]})});function rb(b,g,_){return g==null||typeof g=="boolean"||g===""?"":_||typeof g!="number"||g===0||pb.hasOwnProperty(b)&&pb[b]?(""+g).trim():g+"px"}function sb(b,g){b=b.style;for(var _ in g)if(g.hasOwnProperty(_)){var j=_.indexOf("--")===0,$=rb(_,g[_],j);_==="float"&&(_="cssFloat"),j?b.setProperty(_,$):b[_]=$}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(b,g){if(g){if(tb[b]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(p$1(137,b));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(p$1(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(p$1(61))}if(g.style!=null&&typeof g.style!="object")throw Error(p$1(62))}}function vb(b,g){if(b.indexOf("-")===-1)return typeof g.is=="string";switch(b){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(b){return b=b.target||b.srcElement||window,b.correspondingUseElement&&(b=b.correspondingUseElement),b.nodeType===3?b.parentNode:b}var yb=null,zb=null,Ab=null;function Bb(b){if(b=Cb(b)){if(typeof yb!="function")throw Error(p$1(280));var g=b.stateNode;g&&(g=Db(g),yb(b.stateNode,b.type,g))}}function Eb(b){zb?Ab?Ab.push(b):Ab=[b]:zb=b}function Fb(){if(zb){var b=zb,g=Ab;if(Ab=zb=null,Bb(b),g)for(b=0;b<g.length;b++)Bb(g[b])}}function Gb(b,g){return b(g)}function Hb(){}var Ib=!1;function Jb(b,g,_){if(Ib)return b(g,_);Ib=!0;try{return Gb(b,g,_)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(b,g){var _=b.stateNode;if(_===null)return null;var j=Db(_);if(j===null)return null;_=j[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(b=b.type,j=!(b==="button"||b==="input"||b==="select"||b==="textarea")),b=!j;break e;default:b=!1}if(b)return null;if(_&&typeof _!="function")throw Error(p$1(231,g,typeof _));return _}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(b,g,_,j,$,_e,et,tt,nt){var rt=Array.prototype.slice.call(arguments,3);try{g.apply(_,rt)}catch(it){this.onError(it)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(b){Ob=!0,Pb=b}};function Tb(b,g,_,j,$,_e,et,tt,nt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(b,g,_,j,$,_e,et,tt,nt){if(Tb.apply(this,arguments),Ob){if(Ob){var rt=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=rt)}}function Vb(b){var g=b,_=b;if(b.alternate)for(;g.return;)g=g.return;else{b=g;do g=b,g.flags&4098&&(_=g.return),b=g.return;while(b)}return g.tag===3?_:null}function Wb(b){if(b.tag===13){var g=b.memoizedState;if(g===null&&(b=b.alternate,b!==null&&(g=b.memoizedState)),g!==null)return g.dehydrated}return null}function Xb(b){if(Vb(b)!==b)throw Error(p$1(188))}function Yb(b){var g=b.alternate;if(!g){if(g=Vb(b),g===null)throw Error(p$1(188));return g!==b?null:b}for(var _=b,j=g;;){var $=_.return;if($===null)break;var _e=$.alternate;if(_e===null){if(j=$.return,j!==null){_=j;continue}break}if($.child===_e.child){for(_e=$.child;_e;){if(_e===_)return Xb($),b;if(_e===j)return Xb($),g;_e=_e.sibling}throw Error(p$1(188))}if(_.return!==j.return)_=$,j=_e;else{for(var et=!1,tt=$.child;tt;){if(tt===_){et=!0,_=$,j=_e;break}if(tt===j){et=!0,j=$,_=_e;break}tt=tt.sibling}if(!et){for(tt=_e.child;tt;){if(tt===_){et=!0,_=_e,j=$;break}if(tt===j){et=!0,j=_e,_=$;break}tt=tt.sibling}if(!et)throw Error(p$1(189))}}if(_.alternate!==j)throw Error(p$1(190))}if(_.tag!==3)throw Error(p$1(188));return _.stateNode.current===_?b:g}function Zb(b){return b=Yb(b),b!==null?$b(b):null}function $b(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var g=$b(b);if(g!==null)return g;b=b.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(b){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,b,void 0,(b.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(b){return b>>>=0,b===0?32:31-(pc(b)/qc|0)|0}var rc=64,sc=4194304;function tc(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function uc(b,g){var _=b.pendingLanes;if(_===0)return 0;var j=0,$=b.suspendedLanes,_e=b.pingedLanes,et=_&268435455;if(et!==0){var tt=et&~$;tt!==0?j=tc(tt):(_e&=et,_e!==0&&(j=tc(_e)))}else et=_&~$,et!==0?j=tc(et):_e!==0&&(j=tc(_e));if(j===0)return 0;if(g!==0&&g!==j&&!(g&$)&&($=j&-j,_e=g&-g,$>=_e||$===16&&(_e&4194240)!==0))return g;if(j&4&&(j|=_&16),g=b.entangledLanes,g!==0)for(b=b.entanglements,g&=j;0<g;)_=31-oc(g),$=1<<_,j|=b[_],g&=~$;return j}function vc(b,g){switch(b){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(b,g){for(var _=b.suspendedLanes,j=b.pingedLanes,$=b.expirationTimes,_e=b.pendingLanes;0<_e;){var et=31-oc(_e),tt=1<<et,nt=$[et];nt===-1?(!(tt&_)||tt&j)&&($[et]=vc(tt,g)):nt<=g&&(b.expiredLanes|=tt),_e&=~tt}}function xc(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function yc(){var b=rc;return rc<<=1,!(rc&4194240)&&(rc=64),b}function zc(b){for(var g=[],_=0;31>_;_++)g.push(b);return g}function Ac(b,g,_){b.pendingLanes|=g,g!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,g=31-oc(g),b[g]=_}function Bc(b,g){var _=b.pendingLanes&~g;b.pendingLanes=g,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=g,b.mutableReadLanes&=g,b.entangledLanes&=g,g=b.entanglements;var j=b.eventTimes;for(b=b.expirationTimes;0<_;){var $=31-oc(_),_e=1<<$;g[$]=0,j[$]=-1,b[$]=-1,_&=~_e}}function Cc(b,g){var _=b.entangledLanes|=g;for(b=b.entanglements;_;){var j=31-oc(_),$=1<<j;$&g|b[j]&g&&(b[j]|=g),_&=~$}}var C=0;function Dc(b){return b&=-b,1<b?4<b?b&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(b,g){switch(b){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(g.pointerId)}}function Tc(b,g,_,j,$,_e){return b===null||b.nativeEvent!==_e?(b={blockedOn:g,domEventName:_,eventSystemFlags:j,nativeEvent:_e,targetContainers:[$]},g!==null&&(g=Cb(g),g!==null&&Fc(g)),b):(b.eventSystemFlags|=j,g=b.targetContainers,$!==null&&g.indexOf($)===-1&&g.push($),b)}function Uc(b,g,_,j,$){switch(g){case"focusin":return Lc=Tc(Lc,b,g,_,j,$),!0;case"dragenter":return Mc=Tc(Mc,b,g,_,j,$),!0;case"mouseover":return Nc=Tc(Nc,b,g,_,j,$),!0;case"pointerover":var _e=$.pointerId;return Oc.set(_e,Tc(Oc.get(_e)||null,b,g,_,j,$)),!0;case"gotpointercapture":return _e=$.pointerId,Pc.set(_e,Tc(Pc.get(_e)||null,b,g,_,j,$)),!0}return!1}function Vc(b){var g=Wc(b.target);if(g!==null){var _=Vb(g);if(_!==null){if(g=_.tag,g===13){if(g=Wb(_),g!==null){b.blockedOn=g,Ic(b.priority,function(){Gc(_)});return}}else if(g===3&&_.stateNode.current.memoizedState.isDehydrated){b.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}b.blockedOn=null}function Xc(b){if(b.blockedOn!==null)return!1;for(var g=b.targetContainers;0<g.length;){var _=Yc(b.domEventName,b.eventSystemFlags,g[0],b.nativeEvent);if(_===null){_=b.nativeEvent;var j=new _.constructor(_.type,_);wb=j,_.target.dispatchEvent(j),wb=null}else return g=Cb(_),g!==null&&Fc(g),b.blockedOn=_,!1;g.shift()}return!0}function Zc(b,g,_){Xc(b)&&_.delete(g)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(b,g){b.blockedOn===g&&(b.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(b){function g($){return ad($,b)}if(0<Kc.length){ad(Kc[0],b);for(var _=1;_<Kc.length;_++){var j=Kc[_];j.blockedOn===b&&(j.blockedOn=null)}}for(Lc!==null&&ad(Lc,b),Mc!==null&&ad(Mc,b),Nc!==null&&ad(Nc,b),Oc.forEach(g),Pc.forEach(g),_=0;_<Qc.length;_++)j=Qc[_],j.blockedOn===b&&(j.blockedOn=null);for(;0<Qc.length&&(_=Qc[0],_.blockedOn===null);)Vc(_),_.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(b,g,_,j){var $=C,_e=cd.transition;cd.transition=null;try{C=1,fd(b,g,_,j)}finally{C=$,cd.transition=_e}}function gd(b,g,_,j){var $=C,_e=cd.transition;cd.transition=null;try{C=4,fd(b,g,_,j)}finally{C=$,cd.transition=_e}}function fd(b,g,_,j){if(dd){var $=Yc(b,g,_,j);if($===null)hd(b,g,j,id$2,_),Sc(b,j);else if(Uc($,b,g,_,j))j.stopPropagation();else if(Sc(b,j),g&4&&-1<Rc.indexOf(b)){for(;$!==null;){var _e=Cb($);if(_e!==null&&Ec(_e),_e=Yc(b,g,_,j),_e===null&&hd(b,g,j,id$2,_),_e===$)break;$=_e}$!==null&&j.stopPropagation()}else hd(b,g,j,null,_)}}var id$2=null;function Yc(b,g,_,j){if(id$2=null,b=xb(j),b=Wc(b),b!==null)if(g=Vb(b),g===null)b=null;else if(_=g.tag,_===13){if(b=Wb(g),b!==null)return b;b=null}else if(_===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;b=null}else g!==b&&(b=null);return id$2=b,null}function jd(b){switch(b){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var b,g=ld,_=g.length,j,$="value"in kd?kd.value:kd.textContent,_e=$.length;for(b=0;b<_&&g[b]===$[b];b++);var et=_-b;for(j=1;j<=et&&g[_-j]===$[_e-j];j++);return md=$.slice(b,1<j?1-j:void 0)}function od(b){var g=b.keyCode;return"charCode"in b?(b=b.charCode,b===0&&g===13&&(b=13)):b=g,b===10&&(b=13),32<=b||b===13?b:0}function pd(){return!0}function qd(){return!1}function rd(b){function g(_,j,$,_e,et){this._reactName=_,this._targetInst=$,this.type=j,this.nativeEvent=_e,this.target=et,this.currentTarget=null;for(var tt in b)b.hasOwnProperty(tt)&&(_=b[tt],this[tt]=_?_(_e):_e[tt]);return this.isDefaultPrevented=(_e.defaultPrevented!=null?_e.defaultPrevented:_e.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(b){return b.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(b){return b.relatedTarget===void 0?b.fromElement===b.srcElement?b.toElement:b.fromElement:b.relatedTarget},movementX:function(b){return"movementX"in b?b.movementX:(b!==yd&&(yd&&b.type==="mousemove"?(wd=b.screenX-yd.screenX,xd=b.screenY-yd.screenY):xd=wd=0,yd=b),wd)},movementY:function(b){return"movementY"in b?b.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(b){return"clipboardData"in b?b.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(b){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(b):(b=Od[b])?!!g[b]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(b){if(b.key){var g=Md[b.key]||b.key;if(g!=="Unidentified")return g}return b.type==="keypress"?(b=od(b),b===13?"Enter":String.fromCharCode(b)):b.type==="keydown"||b.type==="keyup"?Nd[b.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(b){return b.type==="keypress"?od(b):0},keyCode:function(b){return b.type==="keydown"||b.type==="keyup"?b.keyCode:0},which:function(b){return b.type==="keypress"?od(b):b.type==="keydown"||b.type==="keyup"?b.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(b){return"deltaX"in b?b.deltaX:"wheelDeltaX"in b?-b.wheelDeltaX:0},deltaY:function(b){return"deltaY"in b?b.deltaY:"wheelDeltaY"in b?-b.wheelDeltaY:"wheelDelta"in b?-b.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(b,g){switch(b){case"keyup":return $d.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(b){return b=b.detail,typeof b=="object"&&"data"in b?b.data:null}var ie$2=!1;function je(b,g){switch(b){case"compositionend":return he(g);case"keypress":return g.which!==32?null:(fe=!0,ee);case"textInput":return b=g.data,b===ee&&fe?null:b;default:return null}}function ke(b,g){if(ie$2)return b==="compositionend"||!ae&&ge(b,g)?(b=nd(),md=ld=kd=null,ie$2=!1,b):null;switch(b){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return de&&g.locale!=="ko"?null:g.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(b){var g=b&&b.nodeName&&b.nodeName.toLowerCase();return g==="input"?!!le[b.type]:g==="textarea"}function ne(b,g,_,j){Eb(j),g=oe(g,"onChange"),0<g.length&&(_=new td("onChange","change",null,_,j),b.push({event:_,listeners:g}))}var pe=null,qe=null;function re(b){se(b,0)}function te(b){var g=ue(b);if(Wa(g))return b}function ve(b,g){if(b==="change")return g}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(b){if(b.propertyName==="value"&&te(qe)){var g=[];ne(g,qe,b,xb(b)),Jb(re,g)}}function Ce(b,g,_){b==="focusin"?(Ae(),pe=g,qe=_,pe.attachEvent("onpropertychange",Be)):b==="focusout"&&Ae()}function De(b){if(b==="selectionchange"||b==="keyup"||b==="keydown")return te(qe)}function Ee(b,g){if(b==="click")return te(g)}function Fe(b,g){if(b==="input"||b==="change")return te(g)}function Ge(b,g){return b===g&&(b!==0||1/b===1/g)||b!==b&&g!==g}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(b,g){if(He(b,g))return!0;if(typeof b!="object"||b===null||typeof g!="object"||g===null)return!1;var _=Object.keys(b),j=Object.keys(g);if(_.length!==j.length)return!1;for(j=0;j<_.length;j++){var $=_[j];if(!ja.call(g,$)||!He(b[$],g[$]))return!1}return!0}function Je(b){for(;b&&b.firstChild;)b=b.firstChild;return b}function Ke(b,g){var _=Je(b);b=0;for(var j;_;){if(_.nodeType===3){if(j=b+_.textContent.length,b<=g&&j>=g)return{node:_,offset:g-b};b=j}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=Je(_)}}function Le(b,g){return b&&g?b===g?!0:b&&b.nodeType===3?!1:g&&g.nodeType===3?Le(b,g.parentNode):"contains"in b?b.contains(g):b.compareDocumentPosition?!!(b.compareDocumentPosition(g)&16):!1:!1}function Me(){for(var b=window,g=Xa();g instanceof b.HTMLIFrameElement;){try{var _=typeof g.contentWindow.location.href=="string"}catch{_=!1}if(_)b=g.contentWindow;else break;g=Xa(b.document)}return g}function Ne(b){var g=b&&b.nodeName&&b.nodeName.toLowerCase();return g&&(g==="input"&&(b.type==="text"||b.type==="search"||b.type==="tel"||b.type==="url"||b.type==="password")||g==="textarea"||b.contentEditable==="true")}function Oe(b){var g=Me(),_=b.focusedElem,j=b.selectionRange;if(g!==_&&_&&_.ownerDocument&&Le(_.ownerDocument.documentElement,_)){if(j!==null&&Ne(_)){if(g=j.start,b=j.end,b===void 0&&(b=g),"selectionStart"in _)_.selectionStart=g,_.selectionEnd=Math.min(b,_.value.length);else if(b=(g=_.ownerDocument||document)&&g.defaultView||window,b.getSelection){b=b.getSelection();var $=_.textContent.length,_e=Math.min(j.start,$);j=j.end===void 0?_e:Math.min(j.end,$),!b.extend&&_e>j&&($=j,j=_e,_e=$),$=Ke(_,_e);var et=Ke(_,j);$&&et&&(b.rangeCount!==1||b.anchorNode!==$.node||b.anchorOffset!==$.offset||b.focusNode!==et.node||b.focusOffset!==et.offset)&&(g=g.createRange(),g.setStart($.node,$.offset),b.removeAllRanges(),_e>j?(b.addRange(g),b.extend(et.node,et.offset)):(g.setEnd(et.node,et.offset),b.addRange(g)))}}for(g=[],b=_;b=b.parentNode;)b.nodeType===1&&g.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<g.length;_++)b=g[_],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(b,g,_){var j=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;Te||Qe==null||Qe!==Xa(j)||(j=Qe,"selectionStart"in j&&Ne(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Se&&Ie(Se,j)||(Se=j,j=oe(Re,"onSelect"),0<j.length&&(g=new td("onSelect","select",null,g,_),b.push({event:g,listeners:j}),g.target=Qe)))}function Ve(b,g){var _={};return _[b.toLowerCase()]=g.toLowerCase(),_["Webkit"+b]="webkit"+g,_["Moz"+b]="moz"+g,_}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(b){if(Xe[b])return Xe[b];if(!We[b])return b;var g=We[b],_;for(_ in g)if(g.hasOwnProperty(_)&&_ in Ye)return Xe[b]=g[_];return b}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(b,g){df.set(b,g),fa(g,[b])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(b,g,_){var j=b.type||"unknown-event";b.currentTarget=_,Ub(j,g,void 0,b),b.currentTarget=null}function se(b,g){g=(g&4)!==0;for(var _=0;_<b.length;_++){var j=b[_],$=j.event;j=j.listeners;e:{var _e=void 0;if(g)for(var et=j.length-1;0<=et;et--){var tt=j[et],nt=tt.instance,rt=tt.currentTarget;if(tt=tt.listener,nt!==_e&&$.isPropagationStopped())break e;nf($,tt,rt),_e=nt}else for(et=0;et<j.length;et++){if(tt=j[et],nt=tt.instance,rt=tt.currentTarget,tt=tt.listener,nt!==_e&&$.isPropagationStopped())break e;nf($,tt,rt),_e=nt}}}if(Qb)throw b=Rb,Qb=!1,Rb=null,b}function D(b,g){var _=g[of];_===void 0&&(_=g[of]=new Set);var j=b+"__bubble";_.has(j)||(pf(g,b,2,!1),_.add(j))}function qf(b,g,_){var j=0;g&&(j|=4),pf(_,b,j,g)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(b){if(!b[rf]){b[rf]=!0,da.forEach(function(_){_!=="selectionchange"&&(mf.has(_)||qf(_,!1,b),qf(_,!0,b))});var g=b.nodeType===9?b:b.ownerDocument;g===null||g[rf]||(g[rf]=!0,qf("selectionchange",!1,g))}}function pf(b,g,_,j){switch(jd(g)){case 1:var $=ed;break;case 4:$=gd;break;default:$=fd}_=$.bind(null,g,_,b),$=void 0,!Lb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||($=!0),j?$!==void 0?b.addEventListener(g,_,{capture:!0,passive:$}):b.addEventListener(g,_,!0):$!==void 0?b.addEventListener(g,_,{passive:$}):b.addEventListener(g,_,!1)}function hd(b,g,_,j,$){var _e=j;if(!(g&1)&&!(g&2)&&j!==null)e:for(;;){if(j===null)return;var et=j.tag;if(et===3||et===4){var tt=j.stateNode.containerInfo;if(tt===$||tt.nodeType===8&&tt.parentNode===$)break;if(et===4)for(et=j.return;et!==null;){var nt=et.tag;if((nt===3||nt===4)&&(nt=et.stateNode.containerInfo,nt===$||nt.nodeType===8&&nt.parentNode===$))return;et=et.return}for(;tt!==null;){if(et=Wc(tt),et===null)return;if(nt=et.tag,nt===5||nt===6){j=_e=et;continue e}tt=tt.parentNode}}j=j.return}Jb(function(){var rt=_e,it=xb(_),st=[];e:{var ot=df.get(b);if(ot!==void 0){var lt=td,at=b;switch(b){case"keypress":if(od(_)===0)break e;case"keydown":case"keyup":lt=Rd;break;case"focusin":at="focus",lt=Fd;break;case"focusout":at="blur",lt=Fd;break;case"beforeblur":case"afterblur":lt=Fd;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Vd;break;case $e:case af:case bf:lt=Hd;break;case cf:lt=Xd;break;case"scroll":lt=vd;break;case"wheel":lt=Zd;break;case"copy":case"cut":case"paste":lt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Td}var ut=(g&4)!==0,dt=!ut&&b==="scroll",ct=ut?ot!==null?ot+"Capture":null:ot;ut=[];for(var ht=rt,pt;ht!==null;){pt=ht;var mt=pt.stateNode;if(pt.tag===5&&mt!==null&&(pt=mt,ct!==null&&(mt=Kb(ht,ct),mt!=null&&ut.push(tf(ht,mt,pt)))),dt)break;ht=ht.return}0<ut.length&&(ot=new lt(ot,at,null,_,it),st.push({event:ot,listeners:ut}))}}if(!(g&7)){e:{if(ot=b==="mouseover"||b==="pointerover",lt=b==="mouseout"||b==="pointerout",ot&&_!==wb&&(at=_.relatedTarget||_.fromElement)&&(Wc(at)||at[uf]))break e;if((lt||ot)&&(ot=it.window===it?it:(ot=it.ownerDocument)?ot.defaultView||ot.parentWindow:window,lt?(at=_.relatedTarget||_.toElement,lt=rt,at=at?Wc(at):null,at!==null&&(dt=Vb(at),at!==dt||at.tag!==5&&at.tag!==6)&&(at=null)):(lt=null,at=rt),lt!==at)){if(ut=Bd,mt="onMouseLeave",ct="onMouseEnter",ht="mouse",(b==="pointerout"||b==="pointerover")&&(ut=Td,mt="onPointerLeave",ct="onPointerEnter",ht="pointer"),dt=lt==null?ot:ue(lt),pt=at==null?ot:ue(at),ot=new ut(mt,ht+"leave",lt,_,it),ot.target=dt,ot.relatedTarget=pt,mt=null,Wc(it)===rt&&(ut=new ut(ct,ht+"enter",at,_,it),ut.target=pt,ut.relatedTarget=dt,mt=ut),dt=mt,lt&&at)t:{for(ut=lt,ct=at,ht=0,pt=ut;pt;pt=vf(pt))ht++;for(pt=0,mt=ct;mt;mt=vf(mt))pt++;for(;0<ht-pt;)ut=vf(ut),ht--;for(;0<pt-ht;)ct=vf(ct),pt--;for(;ht--;){if(ut===ct||ct!==null&&ut===ct.alternate)break t;ut=vf(ut),ct=vf(ct)}ut=null}else ut=null;lt!==null&&wf(st,ot,lt,ut,!1),at!==null&&dt!==null&&wf(st,dt,at,ut,!0)}}e:{if(ot=rt?ue(rt):window,lt=ot.nodeName&&ot.nodeName.toLowerCase(),lt==="select"||lt==="input"&&ot.type==="file")var ft=ve;else if(me(ot))if(we)ft=Fe;else{ft=De;var gt=Ce}else(lt=ot.nodeName)&&lt.toLowerCase()==="input"&&(ot.type==="checkbox"||ot.type==="radio")&&(ft=Ee);if(ft&&(ft=ft(b,rt))){ne(st,ft,_,it);break e}gt&&gt(b,ot,rt),b==="focusout"&&(gt=ot._wrapperState)&&gt.controlled&&ot.type==="number"&&cb(ot,"number",ot.value)}switch(gt=rt?ue(rt):window,b){case"focusin":(me(gt)||gt.contentEditable==="true")&&(Qe=gt,Re=rt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(st,_,it);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(st,_,it)}var xt;if(ae)e:{switch(b){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie$2?ge(b,_)&&(vt="onCompositionEnd"):b==="keydown"&&_.keyCode===229&&(vt="onCompositionStart");vt&&(de&&_.locale!=="ko"&&(ie$2||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie$2&&(xt=nd()):(kd=it,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),gt=oe(rt,vt),0<gt.length&&(vt=new Ld(vt,b,null,_,it),st.push({event:vt,listeners:gt}),xt?vt.data=xt:(xt=he(_),xt!==null&&(vt.data=xt)))),(xt=ce?je(b,_):ke(b,_))&&(rt=oe(rt,"onBeforeInput"),0<rt.length&&(it=new Ld("onBeforeInput","beforeinput",null,_,it),st.push({event:it,listeners:rt}),it.data=xt))}se(st,g)})}function tf(b,g,_){return{instance:b,listener:g,currentTarget:_}}function oe(b,g){for(var _=g+"Capture",j=[];b!==null;){var $=b,_e=$.stateNode;$.tag===5&&_e!==null&&($=_e,_e=Kb(b,_),_e!=null&&j.unshift(tf(b,_e,$)),_e=Kb(b,g),_e!=null&&j.push(tf(b,_e,$))),b=b.return}return j}function vf(b){if(b===null)return null;do b=b.return;while(b&&b.tag!==5);return b||null}function wf(b,g,_,j,$){for(var _e=g._reactName,et=[];_!==null&&_!==j;){var tt=_,nt=tt.alternate,rt=tt.stateNode;if(nt!==null&&nt===j)break;tt.tag===5&&rt!==null&&(tt=rt,$?(nt=Kb(_,_e),nt!=null&&et.unshift(tf(_,nt,tt))):$||(nt=Kb(_,_e),nt!=null&&et.push(tf(_,nt,tt)))),_=_.return}et.length!==0&&b.push({event:g,listeners:et})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(b){return(typeof b=="string"?b:""+b).replace(xf,`
`).replace(yf,"")}function Af(b,g,_){if(g=zf(g),zf(b)!==g&&_)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(b,g){return b==="textarea"||b==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(b){return Hf.resolve(null).then(b).catch(If)}:Ff;function If(b){setTimeout(function(){throw b})}function Kf(b,g){var _=g,j=0;do{var $=_.nextSibling;if(b.removeChild(_),$&&$.nodeType===8)if(_=$.data,_==="/$"){if(j===0){b.removeChild($),bd(g);return}j--}else _!=="$"&&_!=="$?"&&_!=="$!"||j++;_=$}while(_);bd(g)}function Lf(b){for(;b!=null;b=b.nextSibling){var g=b.nodeType;if(g===1||g===3)break;if(g===8){if(g=b.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return b}function Mf(b){b=b.previousSibling;for(var g=0;b;){if(b.nodeType===8){var _=b.data;if(_==="$"||_==="$!"||_==="$?"){if(g===0)return b;g--}else _==="/$"&&g++}b=b.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(b){var g=b[Of];if(g)return g;for(var _=b.parentNode;_;){if(g=_[uf]||_[Of]){if(_=g.alternate,g.child!==null||_!==null&&_.child!==null)for(b=Mf(b);b!==null;){if(_=b[Of])return _;b=Mf(b)}return g}b=_,_=b.parentNode}return null}function Cb(b){return b=b[Of]||b[uf],!b||b.tag!==5&&b.tag!==6&&b.tag!==13&&b.tag!==3?null:b}function ue(b){if(b.tag===5||b.tag===6)return b.stateNode;throw Error(p$1(33))}function Db(b){return b[Pf]||null}var Sf=[],Tf=-1;function Uf(b){return{current:b}}function E(b){0>Tf||(b.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(b,g){Tf++,Sf[Tf]=b.current,b.current=g}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(b,g){var _=b.type.contextTypes;if(!_)return Vf;var j=b.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===g)return j.__reactInternalMemoizedMaskedChildContext;var $={},_e;for(_e in _)$[_e]=g[_e];return j&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=g,b.__reactInternalMemoizedMaskedChildContext=$),$}function Zf(b){return b=b.childContextTypes,b!=null}function $f(){E(Wf),E(H)}function ag(b,g,_){if(H.current!==Vf)throw Error(p$1(168));G(H,g),G(Wf,_)}function bg(b,g,_){var j=b.stateNode;if(g=g.childContextTypes,typeof j.getChildContext!="function")return _;j=j.getChildContext();for(var $ in j)if(!($ in g))throw Error(p$1(108,Ra(b)||"Unknown",$));return A({},_,j)}function cg(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,b),G(Wf,Wf.current),!0}function dg(b,g,_){var j=b.stateNode;if(!j)throw Error(p$1(169));_?(b=bg(b,g,Xf),j.__reactInternalMemoizedMergedChildContext=b,E(Wf),E(H),G(H,b)):E(Wf),G(Wf,_)}var eg=null,fg=!1,gg=!1;function hg(b){eg===null?eg=[b]:eg.push(b)}function ig(b){fg=!0,hg(b)}function jg(){if(!gg&&eg!==null){gg=!0;var b=0,g=C;try{var _=eg;for(C=1;b<_.length;b++){var j=_[b];do j=j(!0);while(j!==null)}eg=null,fg=!1}catch($){throw eg!==null&&(eg=eg.slice(b+1)),ac(fc,jg),$}finally{C=g,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(b,g){kg[lg++]=ng,kg[lg++]=mg,mg=b,ng=g}function ug(b,g,_){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=b;var j=rg;b=sg;var $=32-oc(j)-1;j&=~(1<<$),_+=1;var _e=32-oc(g)+$;if(30<_e){var et=$-$%5;_e=(j&(1<<et)-1).toString(32),j>>=et,$-=et,rg=1<<32-oc(g)+$|_<<$|j,sg=_e+b}else rg=1<<_e|_<<$|j,sg=b}function vg(b){b.return!==null&&(tg(b,1),ug(b,1,0))}function wg(b){for(;b===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;b===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(b,g){var _=Bg(5,null,null,0);_.elementType="DELETED",_.stateNode=g,_.return=b,g=b.deletions,g===null?(b.deletions=[_],b.flags|=16):g.push(_)}function Cg(b,g){switch(b.tag){case 5:var _=b.type;return g=g.nodeType!==1||_.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(b.stateNode=g,xg=b,yg=Lf(g.firstChild),!0):!1;case 6:return g=b.pendingProps===""||g.nodeType!==3?null:g,g!==null?(b.stateNode=g,xg=b,yg=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(_=qg!==null?{id:rg,overflow:sg}:null,b.memoizedState={dehydrated:g,treeContext:_,retryLane:1073741824},_=Bg(18,null,null,0),_.stateNode=g,_.return=b,b.child=_,xg=b,yg=null,!0):!1;default:return!1}}function Dg(b){return(b.mode&1)!==0&&(b.flags&128)===0}function Eg(b){if(I){var g=yg;if(g){var _=g;if(!Cg(b,g)){if(Dg(b))throw Error(p$1(418));g=Lf(_.nextSibling);var j=xg;g&&Cg(b,g)?Ag(j,_):(b.flags=b.flags&-4097|2,I=!1,xg=b)}}else{if(Dg(b))throw Error(p$1(418));b.flags=b.flags&-4097|2,I=!1,xg=b}}}function Fg(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;xg=b}function Gg(b){if(b!==xg)return!1;if(!I)return Fg(b),I=!0,!1;var g;if((g=b.tag!==3)&&!(g=b.tag!==5)&&(g=b.type,g=g!=="head"&&g!=="body"&&!Ef(b.type,b.memoizedProps)),g&&(g=yg)){if(Dg(b))throw Hg(),Error(p$1(418));for(;g;)Ag(b,g),g=Lf(g.nextSibling)}if(Fg(b),b.tag===13){if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(p$1(317));e:{for(b=b.nextSibling,g=0;b;){if(b.nodeType===8){var _=b.data;if(_==="/$"){if(g===0){yg=Lf(b.nextSibling);break e}g--}else _!=="$"&&_!=="$!"&&_!=="$?"||g++}b=b.nextSibling}yg=null}}else yg=xg?Lf(b.stateNode.nextSibling):null;return!0}function Hg(){for(var b=yg;b;)b=Lf(b.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(b){zg===null?zg=[b]:zg.push(b)}var Kg=ua.ReactCurrentBatchConfig;function Lg(b,g,_){if(b=_.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(p$1(309));var j=_.stateNode}if(!j)throw Error(p$1(147,b));var $=j,_e=""+b;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===_e?g.ref:(g=function(et){var tt=$.refs;et===null?delete tt[_e]:tt[_e]=et},g._stringRef=_e,g)}if(typeof b!="string")throw Error(p$1(284));if(!_._owner)throw Error(p$1(290,b))}return b}function Mg(b,g){throw b=Object.prototype.toString.call(g),Error(p$1(31,b==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":b))}function Ng(b){var g=b._init;return g(b._payload)}function Og(b){function g(ct,ht){if(b){var pt=ct.deletions;pt===null?(ct.deletions=[ht],ct.flags|=16):pt.push(ht)}}function _(ct,ht){if(!b)return null;for(;ht!==null;)g(ct,ht),ht=ht.sibling;return null}function j(ct,ht){for(ct=new Map;ht!==null;)ht.key!==null?ct.set(ht.key,ht):ct.set(ht.index,ht),ht=ht.sibling;return ct}function $(ct,ht){return ct=Pg(ct,ht),ct.index=0,ct.sibling=null,ct}function _e(ct,ht,pt){return ct.index=pt,b?(pt=ct.alternate,pt!==null?(pt=pt.index,pt<ht?(ct.flags|=2,ht):pt):(ct.flags|=2,ht)):(ct.flags|=1048576,ht)}function et(ct){return b&&ct.alternate===null&&(ct.flags|=2),ct}function tt(ct,ht,pt,mt){return ht===null||ht.tag!==6?(ht=Qg(pt,ct.mode,mt),ht.return=ct,ht):(ht=$(ht,pt),ht.return=ct,ht)}function nt(ct,ht,pt,mt){var ft=pt.type;return ft===ya?it(ct,ht,pt.props.children,mt,pt.key):ht!==null&&(ht.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===ht.type)?(mt=$(ht,pt.props),mt.ref=Lg(ct,ht,pt),mt.return=ct,mt):(mt=Rg(pt.type,pt.key,pt.props,null,ct.mode,mt),mt.ref=Lg(ct,ht,pt),mt.return=ct,mt)}function rt(ct,ht,pt,mt){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==pt.containerInfo||ht.stateNode.implementation!==pt.implementation?(ht=Sg(pt,ct.mode,mt),ht.return=ct,ht):(ht=$(ht,pt.children||[]),ht.return=ct,ht)}function it(ct,ht,pt,mt,ft){return ht===null||ht.tag!==7?(ht=Tg(pt,ct.mode,mt,ft),ht.return=ct,ht):(ht=$(ht,pt),ht.return=ct,ht)}function st(ct,ht,pt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=Qg(""+ht,ct.mode,pt),ht.return=ct,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return pt=Rg(ht.type,ht.key,ht.props,null,ct.mode,pt),pt.ref=Lg(ct,null,ht),pt.return=ct,pt;case wa:return ht=Sg(ht,ct.mode,pt),ht.return=ct,ht;case Ha:var mt=ht._init;return st(ct,mt(ht._payload),pt)}if(eb(ht)||Ka(ht))return ht=Tg(ht,ct.mode,pt,null),ht.return=ct,ht;Mg(ct,ht)}return null}function ot(ct,ht,pt,mt){var ft=ht!==null?ht.key:null;if(typeof pt=="string"&&pt!==""||typeof pt=="number")return ft!==null?null:tt(ct,ht,""+pt,mt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:return pt.key===ft?nt(ct,ht,pt,mt):null;case wa:return pt.key===ft?rt(ct,ht,pt,mt):null;case Ha:return ft=pt._init,ot(ct,ht,ft(pt._payload),mt)}if(eb(pt)||Ka(pt))return ft!==null?null:it(ct,ht,pt,mt,null);Mg(ct,pt)}return null}function lt(ct,ht,pt,mt,ft){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return ct=ct.get(pt)||null,tt(ht,ct,""+mt,ft);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return ct=ct.get(mt.key===null?pt:mt.key)||null,nt(ht,ct,mt,ft);case wa:return ct=ct.get(mt.key===null?pt:mt.key)||null,rt(ht,ct,mt,ft);case Ha:var gt=mt._init;return lt(ct,ht,pt,gt(mt._payload),ft)}if(eb(mt)||Ka(mt))return ct=ct.get(pt)||null,it(ht,ct,mt,ft,null);Mg(ht,mt)}return null}function at(ct,ht,pt,mt){for(var ft=null,gt=null,xt=ht,vt=ht=0,St=null;xt!==null&&vt<pt.length;vt++){xt.index>vt?(St=xt,xt=null):St=xt.sibling;var Tt=ot(ct,xt,pt[vt],mt);if(Tt===null){xt===null&&(xt=St);break}b&&xt&&Tt.alternate===null&&g(ct,xt),ht=_e(Tt,ht,vt),gt===null?ft=Tt:gt.sibling=Tt,gt=Tt,xt=St}if(vt===pt.length)return _(ct,xt),I&&tg(ct,vt),ft;if(xt===null){for(;vt<pt.length;vt++)xt=st(ct,pt[vt],mt),xt!==null&&(ht=_e(xt,ht,vt),gt===null?ft=xt:gt.sibling=xt,gt=xt);return I&&tg(ct,vt),ft}for(xt=j(ct,xt);vt<pt.length;vt++)St=lt(xt,ct,vt,pt[vt],mt),St!==null&&(b&&St.alternate!==null&&xt.delete(St.key===null?vt:St.key),ht=_e(St,ht,vt),gt===null?ft=St:gt.sibling=St,gt=St);return b&&xt.forEach(function(bt){return g(ct,bt)}),I&&tg(ct,vt),ft}function ut(ct,ht,pt,mt){var ft=Ka(pt);if(typeof ft!="function")throw Error(p$1(150));if(pt=ft.call(pt),pt==null)throw Error(p$1(151));for(var gt=ft=null,xt=ht,vt=ht=0,St=null,Tt=pt.next();xt!==null&&!Tt.done;vt++,Tt=pt.next()){xt.index>vt?(St=xt,xt=null):St=xt.sibling;var bt=ot(ct,xt,Tt.value,mt);if(bt===null){xt===null&&(xt=St);break}b&&xt&&bt.alternate===null&&g(ct,xt),ht=_e(bt,ht,vt),gt===null?ft=bt:gt.sibling=bt,gt=bt,xt=St}if(Tt.done)return _(ct,xt),I&&tg(ct,vt),ft;if(xt===null){for(;!Tt.done;vt++,Tt=pt.next())Tt=st(ct,Tt.value,mt),Tt!==null&&(ht=_e(Tt,ht,vt),gt===null?ft=Tt:gt.sibling=Tt,gt=Tt);return I&&tg(ct,vt),ft}for(xt=j(ct,xt);!Tt.done;vt++,Tt=pt.next())Tt=lt(xt,ct,vt,Tt.value,mt),Tt!==null&&(b&&Tt.alternate!==null&&xt.delete(Tt.key===null?vt:Tt.key),ht=_e(Tt,ht,vt),gt===null?ft=Tt:gt.sibling=Tt,gt=Tt);return b&&xt.forEach(function(At){return g(ct,At)}),I&&tg(ct,vt),ft}function dt(ct,ht,pt,mt){if(typeof pt=="object"&&pt!==null&&pt.type===ya&&pt.key===null&&(pt=pt.props.children),typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:e:{for(var ft=pt.key,gt=ht;gt!==null;){if(gt.key===ft){if(ft=pt.type,ft===ya){if(gt.tag===7){_(ct,gt.sibling),ht=$(gt,pt.props.children),ht.return=ct,ct=ht;break e}}else if(gt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===gt.type){_(ct,gt.sibling),ht=$(gt,pt.props),ht.ref=Lg(ct,gt,pt),ht.return=ct,ct=ht;break e}_(ct,gt);break}else g(ct,gt);gt=gt.sibling}pt.type===ya?(ht=Tg(pt.props.children,ct.mode,mt,pt.key),ht.return=ct,ct=ht):(mt=Rg(pt.type,pt.key,pt.props,null,ct.mode,mt),mt.ref=Lg(ct,ht,pt),mt.return=ct,ct=mt)}return et(ct);case wa:e:{for(gt=pt.key;ht!==null;){if(ht.key===gt)if(ht.tag===4&&ht.stateNode.containerInfo===pt.containerInfo&&ht.stateNode.implementation===pt.implementation){_(ct,ht.sibling),ht=$(ht,pt.children||[]),ht.return=ct,ct=ht;break e}else{_(ct,ht);break}else g(ct,ht);ht=ht.sibling}ht=Sg(pt,ct.mode,mt),ht.return=ct,ct=ht}return et(ct);case Ha:return gt=pt._init,dt(ct,ht,gt(pt._payload),mt)}if(eb(pt))return at(ct,ht,pt,mt);if(Ka(pt))return ut(ct,ht,pt,mt);Mg(ct,pt)}return typeof pt=="string"&&pt!==""||typeof pt=="number"?(pt=""+pt,ht!==null&&ht.tag===6?(_(ct,ht.sibling),ht=$(ht,pt),ht.return=ct,ct=ht):(_(ct,ht),ht=Qg(pt,ct.mode,mt),ht.return=ct,ct=ht),et(ct)):_(ct,ht)}return dt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(b){var g=Wg.current;E(Wg),b._currentValue=g}function bh(b,g,_){for(;b!==null;){var j=b.alternate;if((b.childLanes&g)!==g?(b.childLanes|=g,j!==null&&(j.childLanes|=g)):j!==null&&(j.childLanes&g)!==g&&(j.childLanes|=g),b===_)break;b=b.return}}function ch(b,g){Xg=b,Zg=Yg=null,b=b.dependencies,b!==null&&b.firstContext!==null&&(b.lanes&g&&(dh=!0),b.firstContext=null)}function eh(b){var g=b._currentValue;if(Zg!==b)if(b={context:b,memoizedValue:g,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=b,Xg.dependencies={lanes:0,firstContext:b}}else Yg=Yg.next=b;return g}var fh=null;function gh(b){fh===null?fh=[b]:fh.push(b)}function hh(b,g,_,j){var $=g.interleaved;return $===null?(_.next=_,gh(g)):(_.next=$.next,$.next=_),g.interleaved=_,ih(b,j)}function ih(b,g){b.lanes|=g;var _=b.alternate;for(_!==null&&(_.lanes|=g),_=b,b=b.return;b!==null;)b.childLanes|=g,_=b.alternate,_!==null&&(_.childLanes|=g),_=b,b=b.return;return _.tag===3?_.stateNode:null}var jh=!1;function kh(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(b,g){b=b.updateQueue,g.updateQueue===b&&(g.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function mh(b,g){return{eventTime:b,lane:g,tag:0,payload:null,callback:null,next:null}}function nh(b,g,_){var j=b.updateQueue;if(j===null)return null;if(j=j.shared,K&2){var $=j.pending;return $===null?g.next=g:(g.next=$.next,$.next=g),j.pending=g,ih(b,_)}return $=j.interleaved,$===null?(g.next=g,gh(j)):(g.next=$.next,$.next=g),j.interleaved=g,ih(b,_)}function oh(b,g,_){if(g=g.updateQueue,g!==null&&(g=g.shared,(_&4194240)!==0)){var j=g.lanes;j&=b.pendingLanes,_|=j,g.lanes=_,Cc(b,_)}}function ph(b,g){var _=b.updateQueue,j=b.alternate;if(j!==null&&(j=j.updateQueue,_===j)){var $=null,_e=null;if(_=_.firstBaseUpdate,_!==null){do{var et={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};_e===null?$=_e=et:_e=_e.next=et,_=_.next}while(_!==null);_e===null?$=_e=g:_e=_e.next=g}else $=_e=g;_={baseState:j.baseState,firstBaseUpdate:$,lastBaseUpdate:_e,shared:j.shared,effects:j.effects},b.updateQueue=_;return}b=_.lastBaseUpdate,b===null?_.firstBaseUpdate=g:b.next=g,_.lastBaseUpdate=g}function qh(b,g,_,j){var $=b.updateQueue;jh=!1;var _e=$.firstBaseUpdate,et=$.lastBaseUpdate,tt=$.shared.pending;if(tt!==null){$.shared.pending=null;var nt=tt,rt=nt.next;nt.next=null,et===null?_e=rt:et.next=rt,et=nt;var it=b.alternate;it!==null&&(it=it.updateQueue,tt=it.lastBaseUpdate,tt!==et&&(tt===null?it.firstBaseUpdate=rt:tt.next=rt,it.lastBaseUpdate=nt))}if(_e!==null){var st=$.baseState;et=0,it=rt=nt=null,tt=_e;do{var ot=tt.lane,lt=tt.eventTime;if((j&ot)===ot){it!==null&&(it=it.next={eventTime:lt,lane:0,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null});e:{var at=b,ut=tt;switch(ot=g,lt=_,ut.tag){case 1:if(at=ut.payload,typeof at=="function"){st=at.call(lt,st,ot);break e}st=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ut.payload,ot=typeof at=="function"?at.call(lt,st,ot):at,ot==null)break e;st=A({},st,ot);break e;case 2:jh=!0}}tt.callback!==null&&tt.lane!==0&&(b.flags|=64,ot=$.effects,ot===null?$.effects=[tt]:ot.push(tt))}else lt={eventTime:lt,lane:ot,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},it===null?(rt=it=lt,nt=st):it=it.next=lt,et|=ot;if(tt=tt.next,tt===null){if(tt=$.shared.pending,tt===null)break;ot=tt,tt=ot.next,ot.next=null,$.lastBaseUpdate=ot,$.shared.pending=null}}while(!0);if(it===null&&(nt=st),$.baseState=nt,$.firstBaseUpdate=rt,$.lastBaseUpdate=it,g=$.shared.interleaved,g!==null){$=g;do et|=$.lane,$=$.next;while($!==g)}else _e===null&&($.shared.lanes=0);rh|=et,b.lanes=et,b.memoizedState=st}}function sh(b,g,_){if(b=g.effects,g.effects=null,b!==null)for(g=0;g<b.length;g++){var j=b[g],$=j.callback;if($!==null){if(j.callback=null,j=_,typeof $!="function")throw Error(p$1(191,$));$.call(j)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(b){if(b===th)throw Error(p$1(174));return b}function yh(b,g){switch(G(wh,g),G(vh$1,b),G(uh,th),b=g.nodeType,b){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:lb(null,"");break;default:b=b===8?g.parentNode:g,g=b.namespaceURI||null,b=b.tagName,g=lb(g,b)}E(uh),G(uh,g)}function zh(){E(uh),E(vh$1),E(wh)}function Ah(b){xh(wh.current);var g=xh(uh.current),_=lb(g,b.type);g!==_&&(G(vh$1,b),G(uh,_))}function Bh(b){vh$1.current===b&&(E(uh),E(vh$1))}var L=Uf(0);function Ch(b){for(var g=b;g!==null;){if(g.tag===13){var _=g.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||_.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===b)break;for(;g.sibling===null;){if(g.return===null||g.return===b)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dh=[];function Eh(){for(var b=0;b<Dh.length;b++)Dh[b]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$1(321))}function Mh(b,g){if(g===null)return!1;for(var _=0;_<g.length&&_<b.length;_++)if(!He(b[_],g[_]))return!1;return!0}function Nh(b,g,_,j,$,_e){if(Hh=_e,M=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Fh.current=b===null||b.memoizedState===null?Oh:Ph,b=_(j,$),Jh){_e=0;do{if(Jh=!1,Kh=0,25<=_e)throw Error(p$1(301));_e+=1,O=N=null,g.updateQueue=null,Fh.current=Qh,b=_(j,$)}while(Jh)}if(Fh.current=Rh,g=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,g)throw Error(p$1(300));return b}function Sh(){var b=Kh!==0;return Kh=0,b}function Th(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=b:O=O.next=b,O}function Uh(){if(N===null){var b=M.alternate;b=b!==null?b.memoizedState:null}else b=N.next;var g=O===null?M.memoizedState:O.next;if(g!==null)O=g,N=b;else{if(b===null)throw Error(p$1(310));N=b,b={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=b:O=O.next=b}return O}function Vh(b,g){return typeof g=="function"?g(b):g}function Wh(b){var g=Uh(),_=g.queue;if(_===null)throw Error(p$1(311));_.lastRenderedReducer=b;var j=N,$=j.baseQueue,_e=_.pending;if(_e!==null){if($!==null){var et=$.next;$.next=_e.next,_e.next=et}j.baseQueue=$=_e,_.pending=null}if($!==null){_e=$.next,j=j.baseState;var tt=et=null,nt=null,rt=_e;do{var it=rt.lane;if((Hh&it)===it)nt!==null&&(nt=nt.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),j=rt.hasEagerState?rt.eagerState:b(j,rt.action);else{var st={lane:it,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};nt===null?(tt=nt=st,et=j):nt=nt.next=st,M.lanes|=it,rh|=it}rt=rt.next}while(rt!==null&&rt!==_e);nt===null?et=j:nt.next=tt,He(j,g.memoizedState)||(dh=!0),g.memoizedState=j,g.baseState=et,g.baseQueue=nt,_.lastRenderedState=j}if(b=_.interleaved,b!==null){$=b;do _e=$.lane,M.lanes|=_e,rh|=_e,$=$.next;while($!==b)}else $===null&&(_.lanes=0);return[g.memoizedState,_.dispatch]}function Xh(b){var g=Uh(),_=g.queue;if(_===null)throw Error(p$1(311));_.lastRenderedReducer=b;var j=_.dispatch,$=_.pending,_e=g.memoizedState;if($!==null){_.pending=null;var et=$=$.next;do _e=b(_e,et.action),et=et.next;while(et!==$);He(_e,g.memoizedState)||(dh=!0),g.memoizedState=_e,g.baseQueue===null&&(g.baseState=_e),_.lastRenderedState=_e}return[_e,j]}function Yh(){}function Zh(b,g){var _=M,j=Uh(),$=g(),_e=!He(j.memoizedState,$);if(_e&&(j.memoizedState=$,dh=!0),j=j.queue,$h(ai.bind(null,_,j,b),[b]),j.getSnapshot!==g||_e||O!==null&&O.memoizedState.tag&1){if(_.flags|=2048,bi(9,ci.bind(null,_,j,$,g),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(_,g,$)}return $}function di(b,g,_){b.flags|=16384,b={getSnapshot:g,value:_},g=M.updateQueue,g===null?(g={lastEffect:null,stores:null},M.updateQueue=g,g.stores=[b]):(_=g.stores,_===null?g.stores=[b]:_.push(b))}function ci(b,g,_,j){g.value=_,g.getSnapshot=j,ei(g)&&fi(b)}function ai(b,g,_){return _(function(){ei(g)&&fi(b)})}function ei(b){var g=b.getSnapshot;b=b.value;try{var _=g();return!He(b,_)}catch{return!0}}function fi(b){var g=ih(b,1);g!==null&&gi(g,b,1,-1)}function hi(b){var g=Th();return typeof b=="function"&&(b=b()),g.memoizedState=g.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:b},g.queue=b,b=b.dispatch=ii.bind(null,M,b),[g.memoizedState,b]}function bi(b,g,_,j){return b={tag:b,create:g,destroy:_,deps:j,next:null},g=M.updateQueue,g===null?(g={lastEffect:null,stores:null},M.updateQueue=g,g.lastEffect=b.next=b):(_=g.lastEffect,_===null?g.lastEffect=b.next=b:(j=_.next,_.next=b,b.next=j,g.lastEffect=b)),b}function ji(){return Uh().memoizedState}function ki(b,g,_,j){var $=Th();M.flags|=b,$.memoizedState=bi(1|g,_,void 0,j===void 0?null:j)}function li(b,g,_,j){var $=Uh();j=j===void 0?null:j;var _e=void 0;if(N!==null){var et=N.memoizedState;if(_e=et.destroy,j!==null&&Mh(j,et.deps)){$.memoizedState=bi(g,_,_e,j);return}}M.flags|=b,$.memoizedState=bi(1|g,_,_e,j)}function mi(b,g){return ki(8390656,8,b,g)}function $h(b,g){return li(2048,8,b,g)}function ni(b,g){return li(4,2,b,g)}function oi(b,g){return li(4,4,b,g)}function pi(b,g){if(typeof g=="function")return b=b(),g(b),function(){g(null)};if(g!=null)return b=b(),g.current=b,function(){g.current=null}}function qi(b,g,_){return _=_!=null?_.concat([b]):null,li(4,4,pi.bind(null,g,b),_)}function ri(){}function si(b,g){var _=Uh();g=g===void 0?null:g;var j=_.memoizedState;return j!==null&&g!==null&&Mh(g,j[1])?j[0]:(_.memoizedState=[b,g],b)}function ti(b,g){var _=Uh();g=g===void 0?null:g;var j=_.memoizedState;return j!==null&&g!==null&&Mh(g,j[1])?j[0]:(b=b(),_.memoizedState=[b,g],b)}function ui(b,g,_){return Hh&21?(He(_,g)||(_=yc(),M.lanes|=_,rh|=_,b.baseState=!0),g):(b.baseState&&(b.baseState=!1,dh=!0),b.memoizedState=_)}function vi(b,g){var _=C;C=_!==0&&4>_?_:4,b(!0);var j=Gh.transition;Gh.transition={};try{b(!1),g()}finally{C=_,Gh.transition=j}}function wi(){return Uh().memoizedState}function xi(b,g,_){var j=yi(b);if(_={lane:j,action:_,hasEagerState:!1,eagerState:null,next:null},zi(b))Ai(g,_);else if(_=hh(b,g,_,j),_!==null){var $=R();gi(_,b,j,$),Bi(_,g,j)}}function ii(b,g,_){var j=yi(b),$={lane:j,action:_,hasEagerState:!1,eagerState:null,next:null};if(zi(b))Ai(g,$);else{var _e=b.alternate;if(b.lanes===0&&(_e===null||_e.lanes===0)&&(_e=g.lastRenderedReducer,_e!==null))try{var et=g.lastRenderedState,tt=_e(et,_);if($.hasEagerState=!0,$.eagerState=tt,He(tt,et)){var nt=g.interleaved;nt===null?($.next=$,gh(g)):($.next=nt.next,nt.next=$),g.interleaved=$;return}}catch{}finally{}_=hh(b,g,$,j),_!==null&&($=R(),gi(_,b,j,$),Bi(_,g,j))}}function zi(b){var g=b.alternate;return b===M||g!==null&&g===M}function Ai(b,g){Jh=Ih=!0;var _=b.pending;_===null?g.next=g:(g.next=_.next,_.next=g),b.pending=g}function Bi(b,g,_){if(_&4194240){var j=g.lanes;j&=b.pendingLanes,_|=j,g.lanes=_,Cc(b,_)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(b,g){return Th().memoizedState=[b,g===void 0?null:g],b},useContext:eh,useEffect:mi,useImperativeHandle:function(b,g,_){return _=_!=null?_.concat([b]):null,ki(4194308,4,pi.bind(null,g,b),_)},useLayoutEffect:function(b,g){return ki(4194308,4,b,g)},useInsertionEffect:function(b,g){return ki(4,2,b,g)},useMemo:function(b,g){var _=Th();return g=g===void 0?null:g,b=b(),_.memoizedState=[b,g],b},useReducer:function(b,g,_){var j=Th();return g=_!==void 0?_(g):g,j.memoizedState=j.baseState=g,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:g},j.queue=b,b=b.dispatch=xi.bind(null,M,b),[j.memoizedState,b]},useRef:function(b){var g=Th();return b={current:b},g.memoizedState=b},useState:hi,useDebugValue:ri,useDeferredValue:function(b){return Th().memoizedState=b},useTransition:function(){var b=hi(!1),g=b[0];return b=vi.bind(null,b[1]),Th().memoizedState=b,[g,b]},useMutableSource:function(){},useSyncExternalStore:function(b,g,_){var j=M,$=Th();if(I){if(_===void 0)throw Error(p$1(407));_=_()}else{if(_=g(),Q===null)throw Error(p$1(349));Hh&30||di(j,g,_)}$.memoizedState=_;var _e={value:_,getSnapshot:g};return $.queue=_e,mi(ai.bind(null,j,_e,b),[b]),j.flags|=2048,bi(9,ci.bind(null,j,_e,_,g),void 0,null),_},useId:function(){var b=Th(),g=Q.identifierPrefix;if(I){var _=sg,j=rg;_=(j&~(1<<32-oc(j)-1)).toString(32)+_,g=":"+g+"R"+_,_=Kh++,0<_&&(g+="H"+_.toString(32)),g+=":"}else _=Lh++,g=":"+g+"r"+_.toString(32)+":";return b.memoizedState=g},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(b){var g=Uh();return ui(g,N.memoizedState,b)},useTransition:function(){var b=Wh(Vh)[0],g=Uh().memoizedState;return[b,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(b){var g=Uh();return N===null?g.memoizedState=b:ui(g,N.memoizedState,b)},useTransition:function(){var b=Xh(Vh)[0],g=Uh().memoizedState;return[b,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(b,g){if(b&&b.defaultProps){g=A({},g),b=b.defaultProps;for(var _ in b)g[_]===void 0&&(g[_]=b[_]);return g}return g}function Di(b,g,_,j){g=b.memoizedState,_=_(j,g),_=_==null?g:A({},g,_),b.memoizedState=_,b.lanes===0&&(b.updateQueue.baseState=_)}var Ei={isMounted:function(b){return(b=b._reactInternals)?Vb(b)===b:!1},enqueueSetState:function(b,g,_){b=b._reactInternals;var j=R(),$=yi(b),_e=mh(j,$);_e.payload=g,_!=null&&(_e.callback=_),g=nh(b,_e,$),g!==null&&(gi(g,b,$,j),oh(g,b,$))},enqueueReplaceState:function(b,g,_){b=b._reactInternals;var j=R(),$=yi(b),_e=mh(j,$);_e.tag=1,_e.payload=g,_!=null&&(_e.callback=_),g=nh(b,_e,$),g!==null&&(gi(g,b,$,j),oh(g,b,$))},enqueueForceUpdate:function(b,g){b=b._reactInternals;var _=R(),j=yi(b),$=mh(_,j);$.tag=2,g!=null&&($.callback=g),g=nh(b,$,j),g!==null&&(gi(g,b,j,_),oh(g,b,j))}};function Fi(b,g,_,j,$,_e,et){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(j,_e,et):g.prototype&&g.prototype.isPureReactComponent?!Ie(_,j)||!Ie($,_e):!0}function Gi(b,g,_){var j=!1,$=Vf,_e=g.contextType;return typeof _e=="object"&&_e!==null?_e=eh(_e):($=Zf(g)?Xf:H.current,j=g.contextTypes,_e=(j=j!=null)?Yf(b,$):Vf),g=new g(_,_e),b.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ei,b.stateNode=g,g._reactInternals=b,j&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=$,b.__reactInternalMemoizedMaskedChildContext=_e),g}function Hi(b,g,_,j){b=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(_,j),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(_,j),g.state!==b&&Ei.enqueueReplaceState(g,g.state,null)}function Ii(b,g,_,j){var $=b.stateNode;$.props=_,$.state=b.memoizedState,$.refs={},kh(b);var _e=g.contextType;typeof _e=="object"&&_e!==null?$.context=eh(_e):(_e=Zf(g)?Xf:H.current,$.context=Yf(b,_e)),$.state=b.memoizedState,_e=g.getDerivedStateFromProps,typeof _e=="function"&&(Di(b,g,_e,_),$.state=b.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(g=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),g!==$.state&&Ei.enqueueReplaceState($,$.state,null),qh(b,_,$,j),$.state=b.memoizedState),typeof $.componentDidMount=="function"&&(b.flags|=4194308)}function Ji(b,g){try{var _="",j=g;do _+=Pa(j),j=j.return;while(j);var $=_}catch(_e){$=`
Error generating stack: `+_e.message+`
`+_e.stack}return{value:b,source:g,stack:$,digest:null}}function Ki(b,g,_){return{value:b,source:null,stack:_??null,digest:g??null}}function Li(b,g){try{console.error(g.value)}catch(_){setTimeout(function(){throw _})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(b,g,_){_=mh(-1,_),_.tag=3,_.payload={element:null};var j=g.value;return _.callback=function(){Oi||(Oi=!0,Pi=j),Li(b,g)},_}function Qi(b,g,_){_=mh(-1,_),_.tag=3;var j=b.type.getDerivedStateFromError;if(typeof j=="function"){var $=g.value;_.payload=function(){return j($)},_.callback=function(){Li(b,g)}}var _e=b.stateNode;return _e!==null&&typeof _e.componentDidCatch=="function"&&(_.callback=function(){Li(b,g),typeof j!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var et=g.stack;this.componentDidCatch(g.value,{componentStack:et!==null?et:""})}),_}function Si(b,g,_){var j=b.pingCache;if(j===null){j=b.pingCache=new Mi;var $=new Set;j.set(g,$)}else $=j.get(g),$===void 0&&($=new Set,j.set(g,$));$.has(_)||($.add(_),b=Ti.bind(null,b,g,_),g.then(b,b))}function Ui(b){do{var g;if((g=b.tag===13)&&(g=b.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return b;b=b.return}while(b!==null);return null}function Vi(b,g,_,j,$){return b.mode&1?(b.flags|=65536,b.lanes=$,b):(b===g?b.flags|=65536:(b.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(g=mh(-1,1),g.tag=2,nh(_,g,1))),_.lanes|=1),b)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(b,g,_,j){g.child=b===null?Vg(g,null,_,j):Ug(g,b.child,_,j)}function Yi(b,g,_,j,$){_=_.render;var _e=g.ref;return ch(g,$),j=Nh(b,g,_,j,_e,$),_=Sh(),b!==null&&!dh?(g.updateQueue=b.updateQueue,g.flags&=-2053,b.lanes&=~$,Zi(b,g,$)):(I&&_&&vg(g),g.flags|=1,Xi(b,g,j,$),g.child)}function $i(b,g,_,j,$){if(b===null){var _e=_.type;return typeof _e=="function"&&!aj(_e)&&_e.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(g.tag=15,g.type=_e,bj(b,g,_e,j,$)):(b=Rg(_.type,null,j,g,g.mode,$),b.ref=g.ref,b.return=g,g.child=b)}if(_e=b.child,!(b.lanes&$)){var et=_e.memoizedProps;if(_=_.compare,_=_!==null?_:Ie,_(et,j)&&b.ref===g.ref)return Zi(b,g,$)}return g.flags|=1,b=Pg(_e,j),b.ref=g.ref,b.return=g,g.child=b}function bj(b,g,_,j,$){if(b!==null){var _e=b.memoizedProps;if(Ie(_e,j)&&b.ref===g.ref)if(dh=!1,g.pendingProps=j=_e,(b.lanes&$)!==0)b.flags&131072&&(dh=!0);else return g.lanes=b.lanes,Zi(b,g,$)}return cj(b,g,_,j,$)}function dj(b,g,_){var j=g.pendingProps,$=j.children,_e=b!==null?b.memoizedState:null;if(j.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=_;else{if(!(_&1073741824))return b=_e!==null?_e.baseLanes|_:_,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:b,cachePool:null,transitions:null},g.updateQueue=null,G(ej,fj),fj|=b,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=_e!==null?_e.baseLanes:_,G(ej,fj),fj|=j}else _e!==null?(j=_e.baseLanes|_,g.memoizedState=null):j=_,G(ej,fj),fj|=j;return Xi(b,g,$,_),g.child}function gj(b,g){var _=g.ref;(b===null&&_!==null||b!==null&&b.ref!==_)&&(g.flags|=512,g.flags|=2097152)}function cj(b,g,_,j,$){var _e=Zf(_)?Xf:H.current;return _e=Yf(g,_e),ch(g,$),_=Nh(b,g,_,j,_e,$),j=Sh(),b!==null&&!dh?(g.updateQueue=b.updateQueue,g.flags&=-2053,b.lanes&=~$,Zi(b,g,$)):(I&&j&&vg(g),g.flags|=1,Xi(b,g,_,$),g.child)}function hj(b,g,_,j,$){if(Zf(_)){var _e=!0;cg(g)}else _e=!1;if(ch(g,$),g.stateNode===null)ij(b,g),Gi(g,_,j),Ii(g,_,j,$),j=!0;else if(b===null){var et=g.stateNode,tt=g.memoizedProps;et.props=tt;var nt=et.context,rt=_.contextType;typeof rt=="object"&&rt!==null?rt=eh(rt):(rt=Zf(_)?Xf:H.current,rt=Yf(g,rt));var it=_.getDerivedStateFromProps,st=typeof it=="function"||typeof et.getSnapshotBeforeUpdate=="function";st||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(tt!==j||nt!==rt)&&Hi(g,et,j,rt),jh=!1;var ot=g.memoizedState;et.state=ot,qh(g,j,et,$),nt=g.memoizedState,tt!==j||ot!==nt||Wf.current||jh?(typeof it=="function"&&(Di(g,_,it,j),nt=g.memoizedState),(tt=jh||Fi(g,_,tt,j,ot,nt,rt))?(st||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount()),typeof et.componentDidMount=="function"&&(g.flags|=4194308)):(typeof et.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=j,g.memoizedState=nt),et.props=j,et.state=nt,et.context=rt,j=tt):(typeof et.componentDidMount=="function"&&(g.flags|=4194308),j=!1)}else{et=g.stateNode,lh(b,g),tt=g.memoizedProps,rt=g.type===g.elementType?tt:Ci(g.type,tt),et.props=rt,st=g.pendingProps,ot=et.context,nt=_.contextType,typeof nt=="object"&&nt!==null?nt=eh(nt):(nt=Zf(_)?Xf:H.current,nt=Yf(g,nt));var lt=_.getDerivedStateFromProps;(it=typeof lt=="function"||typeof et.getSnapshotBeforeUpdate=="function")||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(tt!==st||ot!==nt)&&Hi(g,et,j,nt),jh=!1,ot=g.memoizedState,et.state=ot,qh(g,j,et,$);var at=g.memoizedState;tt!==st||ot!==at||Wf.current||jh?(typeof lt=="function"&&(Di(g,_,lt,j),at=g.memoizedState),(rt=jh||Fi(g,_,rt,j,ot,at,nt)||!1)?(it||typeof et.UNSAFE_componentWillUpdate!="function"&&typeof et.componentWillUpdate!="function"||(typeof et.componentWillUpdate=="function"&&et.componentWillUpdate(j,at,nt),typeof et.UNSAFE_componentWillUpdate=="function"&&et.UNSAFE_componentWillUpdate(j,at,nt)),typeof et.componentDidUpdate=="function"&&(g.flags|=4),typeof et.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof et.componentDidUpdate!="function"||tt===b.memoizedProps&&ot===b.memoizedState||(g.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||tt===b.memoizedProps&&ot===b.memoizedState||(g.flags|=1024),g.memoizedProps=j,g.memoizedState=at),et.props=j,et.state=at,et.context=nt,j=rt):(typeof et.componentDidUpdate!="function"||tt===b.memoizedProps&&ot===b.memoizedState||(g.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||tt===b.memoizedProps&&ot===b.memoizedState||(g.flags|=1024),j=!1)}return jj(b,g,_,j,_e,$)}function jj(b,g,_,j,$,_e){gj(b,g);var et=(g.flags&128)!==0;if(!j&&!et)return $&&dg(g,_,!1),Zi(b,g,_e);j=g.stateNode,Wi.current=g;var tt=et&&typeof _.getDerivedStateFromError!="function"?null:j.render();return g.flags|=1,b!==null&&et?(g.child=Ug(g,b.child,null,_e),g.child=Ug(g,null,tt,_e)):Xi(b,g,tt,_e),g.memoizedState=j.state,$&&dg(g,_,!0),g.child}function kj(b){var g=b.stateNode;g.pendingContext?ag(b,g.pendingContext,g.pendingContext!==g.context):g.context&&ag(b,g.context,!1),yh(b,g.containerInfo)}function lj(b,g,_,j,$){return Ig(),Jg($),g.flags|=256,Xi(b,g,_,j),g.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(b){return{baseLanes:b,cachePool:null,transitions:null}}function oj(b,g,_){var j=g.pendingProps,$=L.current,_e=!1,et=(g.flags&128)!==0,tt;if((tt=et)||(tt=b!==null&&b.memoizedState===null?!1:($&2)!==0),tt?(_e=!0,g.flags&=-129):(b===null||b.memoizedState!==null)&&($|=1),G(L,$&1),b===null)return Eg(g),b=g.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?(g.mode&1?b.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(et=j.children,b=j.fallback,_e?(j=g.mode,_e=g.child,et={mode:"hidden",children:et},!(j&1)&&_e!==null?(_e.childLanes=0,_e.pendingProps=et):_e=pj(et,j,0,null),b=Tg(b,j,_,null),_e.return=g,b.return=g,_e.sibling=b,g.child=_e,g.child.memoizedState=nj(_),g.memoizedState=mj,b):qj(g,et));if($=b.memoizedState,$!==null&&(tt=$.dehydrated,tt!==null))return rj(b,g,et,j,tt,$,_);if(_e){_e=j.fallback,et=g.mode,$=b.child,tt=$.sibling;var nt={mode:"hidden",children:j.children};return!(et&1)&&g.child!==$?(j=g.child,j.childLanes=0,j.pendingProps=nt,g.deletions=null):(j=Pg($,nt),j.subtreeFlags=$.subtreeFlags&14680064),tt!==null?_e=Pg(tt,_e):(_e=Tg(_e,et,_,null),_e.flags|=2),_e.return=g,j.return=g,j.sibling=_e,g.child=j,j=_e,_e=g.child,et=b.child.memoizedState,et=et===null?nj(_):{baseLanes:et.baseLanes|_,cachePool:null,transitions:et.transitions},_e.memoizedState=et,_e.childLanes=b.childLanes&~_,g.memoizedState=mj,j}return _e=b.child,b=_e.sibling,j=Pg(_e,{mode:"visible",children:j.children}),!(g.mode&1)&&(j.lanes=_),j.return=g,j.sibling=null,b!==null&&(_=g.deletions,_===null?(g.deletions=[b],g.flags|=16):_.push(b)),g.child=j,g.memoizedState=null,j}function qj(b,g){return g=pj({mode:"visible",children:g},b.mode,0,null),g.return=b,b.child=g}function sj(b,g,_,j){return j!==null&&Jg(j),Ug(g,b.child,null,_),b=qj(g,g.pendingProps.children),b.flags|=2,g.memoizedState=null,b}function rj(b,g,_,j,$,_e,et){if(_)return g.flags&256?(g.flags&=-257,j=Ki(Error(p$1(422))),sj(b,g,et,j)):g.memoizedState!==null?(g.child=b.child,g.flags|=128,null):(_e=j.fallback,$=g.mode,j=pj({mode:"visible",children:j.children},$,0,null),_e=Tg(_e,$,et,null),_e.flags|=2,j.return=g,_e.return=g,j.sibling=_e,g.child=j,g.mode&1&&Ug(g,b.child,null,et),g.child.memoizedState=nj(et),g.memoizedState=mj,_e);if(!(g.mode&1))return sj(b,g,et,null);if($.data==="$!"){if(j=$.nextSibling&&$.nextSibling.dataset,j)var tt=j.dgst;return j=tt,_e=Error(p$1(419)),j=Ki(_e,j,void 0),sj(b,g,et,j)}if(tt=(et&b.childLanes)!==0,dh||tt){if(j=Q,j!==null){switch(et&-et){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=$&(j.suspendedLanes|et)?0:$,$!==0&&$!==_e.retryLane&&(_e.retryLane=$,ih(b,$),gi(j,b,$,-1))}return tj(),j=Ki(Error(p$1(421))),sj(b,g,et,j)}return $.data==="$?"?(g.flags|=128,g.child=b.child,g=uj.bind(null,b),$._reactRetry=g,null):(b=_e.treeContext,yg=Lf($.nextSibling),xg=g,I=!0,zg=null,b!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=b.id,sg=b.overflow,qg=g),g=qj(g,j.children),g.flags|=4096,g)}function vj(b,g,_){b.lanes|=g;var j=b.alternate;j!==null&&(j.lanes|=g),bh(b.return,g,_)}function wj(b,g,_,j,$){var _e=b.memoizedState;_e===null?b.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:j,tail:_,tailMode:$}:(_e.isBackwards=g,_e.rendering=null,_e.renderingStartTime=0,_e.last=j,_e.tail=_,_e.tailMode=$)}function xj(b,g,_){var j=g.pendingProps,$=j.revealOrder,_e=j.tail;if(Xi(b,g,j.children,_),j=L.current,j&2)j=j&1|2,g.flags|=128;else{if(b!==null&&b.flags&128)e:for(b=g.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&vj(b,_,g);else if(b.tag===19)vj(b,_,g);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break e;for(;b.sibling===null;){if(b.return===null||b.return===g)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}j&=1}if(G(L,j),!(g.mode&1))g.memoizedState=null;else switch($){case"forwards":for(_=g.child,$=null;_!==null;)b=_.alternate,b!==null&&Ch(b)===null&&($=_),_=_.sibling;_=$,_===null?($=g.child,g.child=null):($=_.sibling,_.sibling=null),wj(g,!1,$,_,_e);break;case"backwards":for(_=null,$=g.child,g.child=null;$!==null;){if(b=$.alternate,b!==null&&Ch(b)===null){g.child=$;break}b=$.sibling,$.sibling=_,_=$,$=b}wj(g,!0,_,null,_e);break;case"together":wj(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ij(b,g){!(g.mode&1)&&b!==null&&(b.alternate=null,g.alternate=null,g.flags|=2)}function Zi(b,g,_){if(b!==null&&(g.dependencies=b.dependencies),rh|=g.lanes,!(_&g.childLanes))return null;if(b!==null&&g.child!==b.child)throw Error(p$1(153));if(g.child!==null){for(b=g.child,_=Pg(b,b.pendingProps),g.child=_,_.return=g;b.sibling!==null;)b=b.sibling,_=_.sibling=Pg(b,b.pendingProps),_.return=g;_.sibling=null}return g.child}function yj(b,g,_){switch(g.tag){case 3:kj(g),Ig();break;case 5:Ah(g);break;case 1:Zf(g.type)&&cg(g);break;case 4:yh(g,g.stateNode.containerInfo);break;case 10:var j=g.type._context,$=g.memoizedProps.value;G(Wg,j._currentValue),j._currentValue=$;break;case 13:if(j=g.memoizedState,j!==null)return j.dehydrated!==null?(G(L,L.current&1),g.flags|=128,null):_&g.child.childLanes?oj(b,g,_):(G(L,L.current&1),b=Zi(b,g,_),b!==null?b.sibling:null);G(L,L.current&1);break;case 19:if(j=(_&g.childLanes)!==0,b.flags&128){if(j)return xj(b,g,_);g.flags|=128}if($=g.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),G(L,L.current),j)break;return null;case 22:case 23:return g.lanes=0,dj(b,g,_)}return Zi(b,g,_)}var zj,Aj,Bj,Cj;zj=function(b,g){for(var _=g.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===g)break;for(;_.sibling===null;){if(_.return===null||_.return===g)return;_=_.return}_.sibling.return=_.return,_=_.sibling}};Aj=function(){};Bj=function(b,g,_,j){var $=b.memoizedProps;if($!==j){b=g.stateNode,xh(uh.current);var _e=null;switch(_){case"input":$=Ya(b,$),j=Ya(b,j),_e=[];break;case"select":$=A({},$,{value:void 0}),j=A({},j,{value:void 0}),_e=[];break;case"textarea":$=gb(b,$),j=gb(b,j),_e=[];break;default:typeof $.onClick!="function"&&typeof j.onClick=="function"&&(b.onclick=Bf)}ub(_,j);var et;_=null;for(rt in $)if(!j.hasOwnProperty(rt)&&$.hasOwnProperty(rt)&&$[rt]!=null)if(rt==="style"){var tt=$[rt];for(et in tt)tt.hasOwnProperty(et)&&(_||(_={}),_[et]="")}else rt!=="dangerouslySetInnerHTML"&&rt!=="children"&&rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?_e||(_e=[]):(_e=_e||[]).push(rt,null));for(rt in j){var nt=j[rt];if(tt=$!=null?$[rt]:void 0,j.hasOwnProperty(rt)&&nt!==tt&&(nt!=null||tt!=null))if(rt==="style")if(tt){for(et in tt)!tt.hasOwnProperty(et)||nt&&nt.hasOwnProperty(et)||(_||(_={}),_[et]="");for(et in nt)nt.hasOwnProperty(et)&&tt[et]!==nt[et]&&(_||(_={}),_[et]=nt[et])}else _||(_e||(_e=[]),_e.push(rt,_)),_=nt;else rt==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,tt=tt?tt.__html:void 0,nt!=null&&tt!==nt&&(_e=_e||[]).push(rt,nt)):rt==="children"?typeof nt!="string"&&typeof nt!="number"||(_e=_e||[]).push(rt,""+nt):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(rt)?(nt!=null&&rt==="onScroll"&&D("scroll",b),_e||tt===nt||(_e=[])):(_e=_e||[]).push(rt,nt))}_&&(_e=_e||[]).push("style",_);var rt=_e;(g.updateQueue=rt)&&(g.flags|=4)}};Cj=function(b,g,_,j){_!==j&&(g.flags|=4)};function Dj(b,g){if(!I)switch(b.tailMode){case"hidden":g=b.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?b.tail=null:_.sibling=null;break;case"collapsed":_=b.tail;for(var j=null;_!==null;)_.alternate!==null&&(j=_),_=_.sibling;j===null?g||b.tail===null?b.tail=null:b.tail.sibling=null:j.sibling=null}}function S(b){var g=b.alternate!==null&&b.alternate.child===b.child,_=0,j=0;if(g)for(var $=b.child;$!==null;)_|=$.lanes|$.childLanes,j|=$.subtreeFlags&14680064,j|=$.flags&14680064,$.return=b,$=$.sibling;else for($=b.child;$!==null;)_|=$.lanes|$.childLanes,j|=$.subtreeFlags,j|=$.flags,$.return=b,$=$.sibling;return b.subtreeFlags|=j,b.childLanes=_,g}function Ej(b,g,_){var j=g.pendingProps;switch(wg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(g),null;case 1:return Zf(g.type)&&$f(),S(g),null;case 3:return j=g.stateNode,zh(),E(Wf),E(H),Eh(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(b===null||b.child===null)&&(Gg(g)?g.flags|=4:b===null||b.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(b,g),S(g),null;case 5:Bh(g);var $=xh(wh.current);if(_=g.type,b!==null&&g.stateNode!=null)Bj(b,g,_,j,$),b.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!j){if(g.stateNode===null)throw Error(p$1(166));return S(g),null}if(b=xh(uh.current),Gg(g)){j=g.stateNode,_=g.type;var _e=g.memoizedProps;switch(j[Of]=g,j[Pf]=_e,b=(g.mode&1)!==0,_){case"dialog":D("cancel",j),D("close",j);break;case"iframe":case"object":case"embed":D("load",j);break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],j);break;case"source":D("error",j);break;case"img":case"image":case"link":D("error",j),D("load",j);break;case"details":D("toggle",j);break;case"input":Za(j,_e),D("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!_e.multiple},D("invalid",j);break;case"textarea":hb(j,_e),D("invalid",j)}ub(_,_e),$=null;for(var et in _e)if(_e.hasOwnProperty(et)){var tt=_e[et];et==="children"?typeof tt=="string"?j.textContent!==tt&&(_e.suppressHydrationWarning!==!0&&Af(j.textContent,tt,b),$=["children",tt]):typeof tt=="number"&&j.textContent!==""+tt&&(_e.suppressHydrationWarning!==!0&&Af(j.textContent,tt,b),$=["children",""+tt]):ea.hasOwnProperty(et)&&tt!=null&&et==="onScroll"&&D("scroll",j)}switch(_){case"input":Va(j),db(j,_e,!0);break;case"textarea":Va(j),jb(j);break;case"select":case"option":break;default:typeof _e.onClick=="function"&&(j.onclick=Bf)}j=$,g.updateQueue=j,j!==null&&(g.flags|=4)}else{et=$.nodeType===9?$:$.ownerDocument,b==="http://www.w3.org/1999/xhtml"&&(b=kb(_)),b==="http://www.w3.org/1999/xhtml"?_==="script"?(b=et.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild)):typeof j.is=="string"?b=et.createElement(_,{is:j.is}):(b=et.createElement(_),_==="select"&&(et=b,j.multiple?et.multiple=!0:j.size&&(et.size=j.size))):b=et.createElementNS(b,_),b[Of]=g,b[Pf]=j,zj(b,g,!1,!1),g.stateNode=b;e:{switch(et=vb(_,j),_){case"dialog":D("cancel",b),D("close",b),$=j;break;case"iframe":case"object":case"embed":D("load",b),$=j;break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],b);$=j;break;case"source":D("error",b),$=j;break;case"img":case"image":case"link":D("error",b),D("load",b),$=j;break;case"details":D("toggle",b),$=j;break;case"input":Za(b,j),$=Ya(b,j),D("invalid",b);break;case"option":$=j;break;case"select":b._wrapperState={wasMultiple:!!j.multiple},$=A({},j,{value:void 0}),D("invalid",b);break;case"textarea":hb(b,j),$=gb(b,j),D("invalid",b);break;default:$=j}ub(_,$),tt=$;for(_e in tt)if(tt.hasOwnProperty(_e)){var nt=tt[_e];_e==="style"?sb(b,nt):_e==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,nt!=null&&nb(b,nt)):_e==="children"?typeof nt=="string"?(_!=="textarea"||nt!=="")&&ob(b,nt):typeof nt=="number"&&ob(b,""+nt):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(ea.hasOwnProperty(_e)?nt!=null&&_e==="onScroll"&&D("scroll",b):nt!=null&&ta(b,_e,nt,et))}switch(_){case"input":Va(b),db(b,j,!1);break;case"textarea":Va(b),jb(b);break;case"option":j.value!=null&&b.setAttribute("value",""+Sa(j.value));break;case"select":b.multiple=!!j.multiple,_e=j.value,_e!=null?fb(b,!!j.multiple,_e,!1):j.defaultValue!=null&&fb(b,!!j.multiple,j.defaultValue,!0);break;default:typeof $.onClick=="function"&&(b.onclick=Bf)}switch(_){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return S(g),null;case 6:if(b&&g.stateNode!=null)Cj(b,g,b.memoizedProps,j);else{if(typeof j!="string"&&g.stateNode===null)throw Error(p$1(166));if(_=xh(wh.current),xh(uh.current),Gg(g)){if(j=g.stateNode,_=g.memoizedProps,j[Of]=g,(_e=j.nodeValue!==_)&&(b=xg,b!==null))switch(b.tag){case 3:Af(j.nodeValue,_,(b.mode&1)!==0);break;case 5:b.memoizedProps.suppressHydrationWarning!==!0&&Af(j.nodeValue,_,(b.mode&1)!==0)}_e&&(g.flags|=4)}else j=(_.nodeType===9?_:_.ownerDocument).createTextNode(j),j[Of]=g,g.stateNode=j}return S(g),null;case 13:if(E(L),j=g.memoizedState,b===null||b.memoizedState!==null&&b.memoizedState.dehydrated!==null){if(I&&yg!==null&&g.mode&1&&!(g.flags&128))Hg(),Ig(),g.flags|=98560,_e=!1;else if(_e=Gg(g),j!==null&&j.dehydrated!==null){if(b===null){if(!_e)throw Error(p$1(318));if(_e=g.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$1(317));_e[Of]=g}else Ig(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;S(g),_e=!1}else zg!==null&&(Fj(zg),zg=null),_e=!0;if(!_e)return g.flags&65536?g:null}return g.flags&128?(g.lanes=_,g):(j=j!==null,j!==(b!==null&&b.memoizedState!==null)&&j&&(g.child.flags|=8192,g.mode&1&&(b===null||L.current&1?T===0&&(T=3):tj())),g.updateQueue!==null&&(g.flags|=4),S(g),null);case 4:return zh(),Aj(b,g),b===null&&sf(g.stateNode.containerInfo),S(g),null;case 10:return ah(g.type._context),S(g),null;case 17:return Zf(g.type)&&$f(),S(g),null;case 19:if(E(L),_e=g.memoizedState,_e===null)return S(g),null;if(j=(g.flags&128)!==0,et=_e.rendering,et===null)if(j)Dj(_e,!1);else{if(T!==0||b!==null&&b.flags&128)for(b=g.child;b!==null;){if(et=Ch(b),et!==null){for(g.flags|=128,Dj(_e,!1),j=et.updateQueue,j!==null&&(g.updateQueue=j,g.flags|=4),g.subtreeFlags=0,j=_,_=g.child;_!==null;)_e=_,b=j,_e.flags&=14680066,et=_e.alternate,et===null?(_e.childLanes=0,_e.lanes=b,_e.child=null,_e.subtreeFlags=0,_e.memoizedProps=null,_e.memoizedState=null,_e.updateQueue=null,_e.dependencies=null,_e.stateNode=null):(_e.childLanes=et.childLanes,_e.lanes=et.lanes,_e.child=et.child,_e.subtreeFlags=0,_e.deletions=null,_e.memoizedProps=et.memoizedProps,_e.memoizedState=et.memoizedState,_e.updateQueue=et.updateQueue,_e.type=et.type,b=et.dependencies,_e.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),_=_.sibling;return G(L,L.current&1|2),g.child}b=b.sibling}_e.tail!==null&&B()>Gj&&(g.flags|=128,j=!0,Dj(_e,!1),g.lanes=4194304)}else{if(!j)if(b=Ch(et),b!==null){if(g.flags|=128,j=!0,_=b.updateQueue,_!==null&&(g.updateQueue=_,g.flags|=4),Dj(_e,!0),_e.tail===null&&_e.tailMode==="hidden"&&!et.alternate&&!I)return S(g),null}else 2*B()-_e.renderingStartTime>Gj&&_!==1073741824&&(g.flags|=128,j=!0,Dj(_e,!1),g.lanes=4194304);_e.isBackwards?(et.sibling=g.child,g.child=et):(_=_e.last,_!==null?_.sibling=et:g.child=et,_e.last=et)}return _e.tail!==null?(g=_e.tail,_e.rendering=g,_e.tail=g.sibling,_e.renderingStartTime=B(),g.sibling=null,_=L.current,G(L,j?_&1|2:_&1),g):(S(g),null);case 22:case 23:return Hj(),j=g.memoizedState!==null,b!==null&&b.memoizedState!==null!==j&&(g.flags|=8192),j&&g.mode&1?fj&1073741824&&(S(g),g.subtreeFlags&6&&(g.flags|=8192)):S(g),null;case 24:return null;case 25:return null}throw Error(p$1(156,g.tag))}function Ij(b,g){switch(wg(g),g.tag){case 1:return Zf(g.type)&&$f(),b=g.flags,b&65536?(g.flags=b&-65537|128,g):null;case 3:return zh(),E(Wf),E(H),Eh(),b=g.flags,b&65536&&!(b&128)?(g.flags=b&-65537|128,g):null;case 5:return Bh(g),null;case 13:if(E(L),b=g.memoizedState,b!==null&&b.dehydrated!==null){if(g.alternate===null)throw Error(p$1(340));Ig()}return b=g.flags,b&65536?(g.flags=b&-65537|128,g):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(g.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(b,g){var _=b.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(j){W(b,g,j)}else _.current=null}function Mj(b,g,_){try{_()}catch(j){W(b,g,j)}}var Nj=!1;function Oj(b,g){if(Cf=dd,b=Me(),Ne(b)){if("selectionStart"in b)var _={start:b.selectionStart,end:b.selectionEnd};else e:{_=(_=b.ownerDocument)&&_.defaultView||window;var j=_.getSelection&&_.getSelection();if(j&&j.rangeCount!==0){_=j.anchorNode;var $=j.anchorOffset,_e=j.focusNode;j=j.focusOffset;try{_.nodeType,_e.nodeType}catch{_=null;break e}var et=0,tt=-1,nt=-1,rt=0,it=0,st=b,ot=null;t:for(;;){for(var lt;st!==_||$!==0&&st.nodeType!==3||(tt=et+$),st!==_e||j!==0&&st.nodeType!==3||(nt=et+j),st.nodeType===3&&(et+=st.nodeValue.length),(lt=st.firstChild)!==null;)ot=st,st=lt;for(;;){if(st===b)break t;if(ot===_&&++rt===$&&(tt=et),ot===_e&&++it===j&&(nt=et),(lt=st.nextSibling)!==null)break;st=ot,ot=st.parentNode}st=lt}_=tt===-1||nt===-1?null:{start:tt,end:nt}}else _=null}_=_||{start:0,end:0}}else _=null;for(Df={focusedElem:b,selectionRange:_},dd=!1,V=g;V!==null;)if(g=V,b=g.child,(g.subtreeFlags&1028)!==0&&b!==null)b.return=g,V=b;else for(;V!==null;){g=V;try{var at=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ut=at.memoizedProps,dt=at.memoizedState,ct=g.stateNode,ht=ct.getSnapshotBeforeUpdate(g.elementType===g.type?ut:Ci(g.type,ut),dt);ct.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var pt=g.stateNode.containerInfo;pt.nodeType===1?pt.textContent="":pt.nodeType===9&&pt.documentElement&&pt.removeChild(pt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(mt){W(g,g.return,mt)}if(b=g.sibling,b!==null){b.return=g.return,V=b;break}V=g.return}return at=Nj,Nj=!1,at}function Pj(b,g,_){var j=g.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var $=j=j.next;do{if(($.tag&b)===b){var _e=$.destroy;$.destroy=void 0,_e!==void 0&&Mj(g,_,_e)}$=$.next}while($!==j)}}function Qj(b,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var _=g=g.next;do{if((_.tag&b)===b){var j=_.create;_.destroy=j()}_=_.next}while(_!==g)}}function Rj(b){var g=b.ref;if(g!==null){var _=b.stateNode;switch(b.tag){case 5:b=_;break;default:b=_}typeof g=="function"?g(b):g.current=b}}function Sj(b){var g=b.alternate;g!==null&&(b.alternate=null,Sj(g)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(g=b.stateNode,g!==null&&(delete g[Of],delete g[Pf],delete g[of],delete g[Qf],delete g[Rf])),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function Tj(b){return b.tag===5||b.tag===3||b.tag===4}function Uj(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||Tj(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function Vj(b,g,_){var j=b.tag;if(j===5||j===6)b=b.stateNode,g?_.nodeType===8?_.parentNode.insertBefore(b,g):_.insertBefore(b,g):(_.nodeType===8?(g=_.parentNode,g.insertBefore(b,_)):(g=_,g.appendChild(b)),_=_._reactRootContainer,_!=null||g.onclick!==null||(g.onclick=Bf));else if(j!==4&&(b=b.child,b!==null))for(Vj(b,g,_),b=b.sibling;b!==null;)Vj(b,g,_),b=b.sibling}function Wj(b,g,_){var j=b.tag;if(j===5||j===6)b=b.stateNode,g?_.insertBefore(b,g):_.appendChild(b);else if(j!==4&&(b=b.child,b!==null))for(Wj(b,g,_),b=b.sibling;b!==null;)Wj(b,g,_),b=b.sibling}var X=null,Xj=!1;function Yj(b,g,_){for(_=_.child;_!==null;)Zj(b,g,_),_=_.sibling}function Zj(b,g,_){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_)}catch{}switch(_.tag){case 5:U||Lj(_,g);case 6:var j=X,$=Xj;X=null,Yj(b,g,_),X=j,Xj=$,X!==null&&(Xj?(b=X,_=_.stateNode,b.nodeType===8?b.parentNode.removeChild(_):b.removeChild(_)):X.removeChild(_.stateNode));break;case 18:X!==null&&(Xj?(b=X,_=_.stateNode,b.nodeType===8?Kf(b.parentNode,_):b.nodeType===1&&Kf(b,_),bd(b)):Kf(X,_.stateNode));break;case 4:j=X,$=Xj,X=_.stateNode.containerInfo,Xj=!0,Yj(b,g,_),X=j,Xj=$;break;case 0:case 11:case 14:case 15:if(!U&&(j=_.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){$=j=j.next;do{var _e=$,et=_e.destroy;_e=_e.tag,et!==void 0&&(_e&2||_e&4)&&Mj(_,g,et),$=$.next}while($!==j)}Yj(b,g,_);break;case 1:if(!U&&(Lj(_,g),j=_.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=_.memoizedProps,j.state=_.memoizedState,j.componentWillUnmount()}catch(tt){W(_,g,tt)}Yj(b,g,_);break;case 21:Yj(b,g,_);break;case 22:_.mode&1?(U=(j=U)||_.memoizedState!==null,Yj(b,g,_),U=j):Yj(b,g,_);break;default:Yj(b,g,_)}}function ak(b){var g=b.updateQueue;if(g!==null){b.updateQueue=null;var _=b.stateNode;_===null&&(_=b.stateNode=new Kj),g.forEach(function(j){var $=bk.bind(null,b,j);_.has(j)||(_.add(j),j.then($,$))})}}function ck(b,g){var _=g.deletions;if(_!==null)for(var j=0;j<_.length;j++){var $=_[j];try{var _e=b,et=g,tt=et;e:for(;tt!==null;){switch(tt.tag){case 5:X=tt.stateNode,Xj=!1;break e;case 3:X=tt.stateNode.containerInfo,Xj=!0;break e;case 4:X=tt.stateNode.containerInfo,Xj=!0;break e}tt=tt.return}if(X===null)throw Error(p$1(160));Zj(_e,et,$),X=null,Xj=!1;var nt=$.alternate;nt!==null&&(nt.return=null),$.return=null}catch(rt){W($,g,rt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)dk(g,b),g=g.sibling}function dk(b,g){var _=b.alternate,j=b.flags;switch(b.tag){case 0:case 11:case 14:case 15:if(ck(g,b),ek(b),j&4){try{Pj(3,b,b.return),Qj(3,b)}catch(ut){W(b,b.return,ut)}try{Pj(5,b,b.return)}catch(ut){W(b,b.return,ut)}}break;case 1:ck(g,b),ek(b),j&512&&_!==null&&Lj(_,_.return);break;case 5:if(ck(g,b),ek(b),j&512&&_!==null&&Lj(_,_.return),b.flags&32){var $=b.stateNode;try{ob($,"")}catch(ut){W(b,b.return,ut)}}if(j&4&&($=b.stateNode,$!=null)){var _e=b.memoizedProps,et=_!==null?_.memoizedProps:_e,tt=b.type,nt=b.updateQueue;if(b.updateQueue=null,nt!==null)try{tt==="input"&&_e.type==="radio"&&_e.name!=null&&ab($,_e),vb(tt,et);var rt=vb(tt,_e);for(et=0;et<nt.length;et+=2){var it=nt[et],st=nt[et+1];it==="style"?sb($,st):it==="dangerouslySetInnerHTML"?nb($,st):it==="children"?ob($,st):ta($,it,st,rt)}switch(tt){case"input":bb($,_e);break;case"textarea":ib($,_e);break;case"select":var ot=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!_e.multiple;var lt=_e.value;lt!=null?fb($,!!_e.multiple,lt,!1):ot!==!!_e.multiple&&(_e.defaultValue!=null?fb($,!!_e.multiple,_e.defaultValue,!0):fb($,!!_e.multiple,_e.multiple?[]:"",!1))}$[Pf]=_e}catch(ut){W(b,b.return,ut)}}break;case 6:if(ck(g,b),ek(b),j&4){if(b.stateNode===null)throw Error(p$1(162));$=b.stateNode,_e=b.memoizedProps;try{$.nodeValue=_e}catch(ut){W(b,b.return,ut)}}break;case 3:if(ck(g,b),ek(b),j&4&&_!==null&&_.memoizedState.isDehydrated)try{bd(g.containerInfo)}catch(ut){W(b,b.return,ut)}break;case 4:ck(g,b),ek(b);break;case 13:ck(g,b),ek(b),$=b.child,$.flags&8192&&(_e=$.memoizedState!==null,$.stateNode.isHidden=_e,!_e||$.alternate!==null&&$.alternate.memoizedState!==null||(fk=B())),j&4&&ak(b);break;case 22:if(it=_!==null&&_.memoizedState!==null,b.mode&1?(U=(rt=U)||it,ck(g,b),U=rt):ck(g,b),ek(b),j&8192){if(rt=b.memoizedState!==null,(b.stateNode.isHidden=rt)&&!it&&b.mode&1)for(V=b,it=b.child;it!==null;){for(st=V=it;V!==null;){switch(ot=V,lt=ot.child,ot.tag){case 0:case 11:case 14:case 15:Pj(4,ot,ot.return);break;case 1:Lj(ot,ot.return);var at=ot.stateNode;if(typeof at.componentWillUnmount=="function"){j=ot,_=ot.return;try{g=j,at.props=g.memoizedProps,at.state=g.memoizedState,at.componentWillUnmount()}catch(ut){W(j,_,ut)}}break;case 5:Lj(ot,ot.return);break;case 22:if(ot.memoizedState!==null){gk(st);continue}}lt!==null?(lt.return=ot,V=lt):gk(st)}it=it.sibling}e:for(it=null,st=b;;){if(st.tag===5){if(it===null){it=st;try{$=st.stateNode,rt?(_e=$.style,typeof _e.setProperty=="function"?_e.setProperty("display","none","important"):_e.display="none"):(tt=st.stateNode,nt=st.memoizedProps.style,et=nt!=null&&nt.hasOwnProperty("display")?nt.display:null,tt.style.display=rb("display",et))}catch(ut){W(b,b.return,ut)}}}else if(st.tag===6){if(it===null)try{st.stateNode.nodeValue=rt?"":st.memoizedProps}catch(ut){W(b,b.return,ut)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===b)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===b)break e;for(;st.sibling===null;){if(st.return===null||st.return===b)break e;it===st&&(it=null),st=st.return}it===st&&(it=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:ck(g,b),ek(b),j&4&&ak(b);break;case 21:break;default:ck(g,b),ek(b)}}function ek(b){var g=b.flags;if(g&2){try{e:{for(var _=b.return;_!==null;){if(Tj(_)){var j=_;break e}_=_.return}throw Error(p$1(160))}switch(j.tag){case 5:var $=j.stateNode;j.flags&32&&(ob($,""),j.flags&=-33);var _e=Uj(b);Wj(b,_e,$);break;case 3:case 4:var et=j.stateNode.containerInfo,tt=Uj(b);Vj(b,tt,et);break;default:throw Error(p$1(161))}}catch(nt){W(b,b.return,nt)}b.flags&=-3}g&4096&&(b.flags&=-4097)}function hk(b,g,_){V=b,ik(b)}function ik(b,g,_){for(var j=(b.mode&1)!==0;V!==null;){var $=V,_e=$.child;if($.tag===22&&j){var et=$.memoizedState!==null||Jj;if(!et){var tt=$.alternate,nt=tt!==null&&tt.memoizedState!==null||U;tt=Jj;var rt=U;if(Jj=et,(U=nt)&&!rt)for(V=$;V!==null;)et=V,nt=et.child,et.tag===22&&et.memoizedState!==null?jk($):nt!==null?(nt.return=et,V=nt):jk($);for(;_e!==null;)V=_e,ik(_e),_e=_e.sibling;V=$,Jj=tt,U=rt}kk(b)}else $.subtreeFlags&8772&&_e!==null?(_e.return=$,V=_e):kk(b)}}function kk(b){for(;V!==null;){var g=V;if(g.flags&8772){var _=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:U||Qj(5,g);break;case 1:var j=g.stateNode;if(g.flags&4&&!U)if(_===null)j.componentDidMount();else{var $=g.elementType===g.type?_.memoizedProps:Ci(g.type,_.memoizedProps);j.componentDidUpdate($,_.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var _e=g.updateQueue;_e!==null&&sh(g,_e,j);break;case 3:var et=g.updateQueue;if(et!==null){if(_=null,g.child!==null)switch(g.child.tag){case 5:_=g.child.stateNode;break;case 1:_=g.child.stateNode}sh(g,et,_)}break;case 5:var tt=g.stateNode;if(_===null&&g.flags&4){_=tt;var nt=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":nt.autoFocus&&_.focus();break;case"img":nt.src&&(_.src=nt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var rt=g.alternate;if(rt!==null){var it=rt.memoizedState;if(it!==null){var st=it.dehydrated;st!==null&&bd(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||g.flags&512&&Rj(g)}catch(ot){W(g,g.return,ot)}}if(g===b){V=null;break}if(_=g.sibling,_!==null){_.return=g.return,V=_;break}V=g.return}}function gk(b){for(;V!==null;){var g=V;if(g===b){V=null;break}var _=g.sibling;if(_!==null){_.return=g.return,V=_;break}V=g.return}}function jk(b){for(;V!==null;){var g=V;try{switch(g.tag){case 0:case 11:case 15:var _=g.return;try{Qj(4,g)}catch(nt){W(g,_,nt)}break;case 1:var j=g.stateNode;if(typeof j.componentDidMount=="function"){var $=g.return;try{j.componentDidMount()}catch(nt){W(g,$,nt)}}var _e=g.return;try{Rj(g)}catch(nt){W(g,_e,nt)}break;case 5:var et=g.return;try{Rj(g)}catch(nt){W(g,et,nt)}}}catch(nt){W(g,g.return,nt)}if(g===b){V=null;break}var tt=g.sibling;if(tt!==null){tt.return=g.return,V=tt;break}V=g.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(b){return b.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(b=C,b!==0||(b=window.event,b=b===void 0?16:jd(b.type)),b):1}function gi(b,g,_,j){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(b,_,j),(!(K&2)||b!==Q)&&(b===Q&&(!(K&2)&&(qk|=_),T===4&&Ck(b,Z)),Dk(b,j),_===1&&K===0&&!(g.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(b,g){var _=b.callbackNode;wc(b,g);var j=uc(b,b===Q?Z:0);if(j===0)_!==null&&bc(_),b.callbackNode=null,b.callbackPriority=0;else if(g=j&-j,b.callbackPriority!==g){if(_!=null&&bc(_),g===1)b.tag===0?ig(Ek.bind(null,b)):hg(Ek.bind(null,b)),Jf(function(){!(K&6)&&jg()}),_=null;else{switch(Dc(j)){case 1:_=fc;break;case 4:_=gc;break;case 16:_=hc;break;case 536870912:_=jc;break;default:_=hc}_=Fk(_,Gk.bind(null,b))}b.callbackPriority=g,b.callbackNode=_}}function Gk(b,g){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var _=b.callbackNode;if(Hk()&&b.callbackNode!==_)return null;var j=uc(b,b===Q?Z:0);if(j===0)return null;if(j&30||j&b.expiredLanes||g)g=Ik(b,j);else{g=j;var $=K;K|=2;var _e=Jk();(Q!==b||Z!==g)&&(uk=null,Gj=B()+500,Kk(b,g));do try{Lk();break}catch(tt){Mk(b,tt)}while(!0);$g(),mk.current=_e,K=$,Y!==null?g=0:(Q=null,Z=0,g=T)}if(g!==0){if(g===2&&($=xc(b),$!==0&&(j=$,g=Nk(b,$))),g===1)throw _=pk,Kk(b,0),Ck(b,j),Dk(b,B()),_;if(g===6)Ck(b,j);else{if($=b.current.alternate,!(j&30)&&!Ok($)&&(g=Ik(b,j),g===2&&(_e=xc(b),_e!==0&&(j=_e,g=Nk(b,_e))),g===1))throw _=pk,Kk(b,0),Ck(b,j),Dk(b,B()),_;switch(b.finishedWork=$,b.finishedLanes=j,g){case 0:case 1:throw Error(p$1(345));case 2:Pk(b,tk,uk);break;case 3:if(Ck(b,j),(j&130023424)===j&&(g=fk+500-B(),10<g)){if(uc(b,0)!==0)break;if($=b.suspendedLanes,($&j)!==j){R(),b.pingedLanes|=b.suspendedLanes&$;break}b.timeoutHandle=Ff(Pk.bind(null,b,tk,uk),g);break}Pk(b,tk,uk);break;case 4:if(Ck(b,j),(j&4194240)===j)break;for(g=b.eventTimes,$=-1;0<j;){var et=31-oc(j);_e=1<<et,et=g[et],et>$&&($=et),j&=~_e}if(j=$,j=B()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*lk(j/1960))-j,10<j){b.timeoutHandle=Ff(Pk.bind(null,b,tk,uk),j);break}Pk(b,tk,uk);break;case 5:Pk(b,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(b,B()),b.callbackNode===_?Gk.bind(null,b):null}function Nk(b,g){var _=sk;return b.current.memoizedState.isDehydrated&&(Kk(b,g).flags|=256),b=Ik(b,g),b!==2&&(g=tk,tk=_,g!==null&&Fj(g)),b}function Fj(b){tk===null?tk=b:tk.push.apply(tk,b)}function Ok(b){for(var g=b;;){if(g.flags&16384){var _=g.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var j=0;j<_.length;j++){var $=_[j],_e=$.getSnapshot;$=$.value;try{if(!He(_e(),$))return!1}catch{return!1}}}if(_=g.child,g.subtreeFlags&16384&&_!==null)_.return=g,g=_;else{if(g===b)break;for(;g.sibling===null;){if(g.return===null||g.return===b)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ck(b,g){for(g&=~rk,g&=~qk,b.suspendedLanes|=g,b.pingedLanes&=~g,b=b.expirationTimes;0<g;){var _=31-oc(g),j=1<<_;b[_]=-1,g&=~j}}function Ek(b){if(K&6)throw Error(p$1(327));Hk();var g=uc(b,0);if(!(g&1))return Dk(b,B()),null;var _=Ik(b,g);if(b.tag!==0&&_===2){var j=xc(b);j!==0&&(g=j,_=Nk(b,j))}if(_===1)throw _=pk,Kk(b,0),Ck(b,g),Dk(b,B()),_;if(_===6)throw Error(p$1(345));return b.finishedWork=b.current.alternate,b.finishedLanes=g,Pk(b,tk,uk),Dk(b,B()),null}function Qk(b,g){var _=K;K|=1;try{return b(g)}finally{K=_,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(b){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var g=K;K|=1;var _=ok.transition,j=C;try{if(ok.transition=null,C=1,b)return b()}finally{C=j,ok.transition=_,K=g,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(b,g){b.finishedWork=null,b.finishedLanes=0;var _=b.timeoutHandle;if(_!==-1&&(b.timeoutHandle=-1,Gf(_)),Y!==null)for(_=Y.return;_!==null;){var j=_;switch(wg(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(j);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(j.type._context);break;case 22:case 23:Hj()}_=_.return}if(Q=b,Y=b=Pg(b.current,null),Z=fj=g,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(g=0;g<fh.length;g++)if(_=fh[g],j=_.interleaved,j!==null){_.interleaved=null;var $=j.next,_e=_.pending;if(_e!==null){var et=_e.next;_e.next=$,j.next=et}_.pending=j}fh=null}return b}function Mk(b,g){do{var _=Y;try{if($g(),Fh.current=Rh,Ih){for(var j=M.memoizedState;j!==null;){var $=j.queue;$!==null&&($.pending=null),j=j.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,_===null||_.return===null){T=1,pk=g,Y=null;break}e:{var _e=b,et=_.return,tt=_,nt=g;if(g=Z,tt.flags|=32768,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var rt=nt,it=tt,st=it.tag;if(!(it.mode&1)&&(st===0||st===11||st===15)){var ot=it.alternate;ot?(it.updateQueue=ot.updateQueue,it.memoizedState=ot.memoizedState,it.lanes=ot.lanes):(it.updateQueue=null,it.memoizedState=null)}var lt=Ui(et);if(lt!==null){lt.flags&=-257,Vi(lt,et,tt,_e,g),lt.mode&1&&Si(_e,rt,g),g=lt,nt=rt;var at=g.updateQueue;if(at===null){var ut=new Set;ut.add(nt),g.updateQueue=ut}else at.add(nt);break e}else{if(!(g&1)){Si(_e,rt,g),tj();break e}nt=Error(p$1(426))}}else if(I&&tt.mode&1){var dt=Ui(et);if(dt!==null){!(dt.flags&65536)&&(dt.flags|=256),Vi(dt,et,tt,_e,g),Jg(Ji(nt,tt));break e}}_e=nt=Ji(nt,tt),T!==4&&(T=2),sk===null?sk=[_e]:sk.push(_e),_e=et;do{switch(_e.tag){case 3:_e.flags|=65536,g&=-g,_e.lanes|=g;var ct=Ni(_e,nt,g);ph(_e,ct);break e;case 1:tt=nt;var ht=_e.type,pt=_e.stateNode;if(!(_e.flags&128)&&(typeof ht.getDerivedStateFromError=="function"||pt!==null&&typeof pt.componentDidCatch=="function"&&(Ri===null||!Ri.has(pt)))){_e.flags|=65536,g&=-g,_e.lanes|=g;var mt=Qi(_e,tt,g);ph(_e,mt);break e}}_e=_e.return}while(_e!==null)}Sk(_)}catch(ft){g=ft,Y===_&&_!==null&&(Y=_=_.return);continue}break}while(!0)}function Jk(){var b=mk.current;return mk.current=Rh,b===null?Rh:b}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(b,g){var _=K;K|=2;var j=Jk();(Q!==b||Z!==g)&&(uk=null,Kk(b,g));do try{Tk();break}catch($){Mk(b,$)}while(!0);if($g(),K=_,mk.current=j,Y!==null)throw Error(p$1(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(b){var g=Vk(b.alternate,b,fj);b.memoizedProps=b.pendingProps,g===null?Sk(b):Y=g,nk.current=null}function Sk(b){var g=b;do{var _=g.alternate;if(b=g.return,g.flags&32768){if(_=Ij(_,g),_!==null){_.flags&=32767,Y=_;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{T=6,Y=null;return}}else if(_=Ej(_,g,fj),_!==null){Y=_;return}if(g=g.sibling,g!==null){Y=g;return}Y=g=b}while(g!==null);T===0&&(T=5)}function Pk(b,g,_){var j=C,$=ok.transition;try{ok.transition=null,C=1,Wk(b,g,_,j)}finally{ok.transition=$,C=j}return null}function Wk(b,g,_,j){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));_=b.finishedWork;var $=b.finishedLanes;if(_===null)return null;if(b.finishedWork=null,b.finishedLanes=0,_===b.current)throw Error(p$1(177));b.callbackNode=null,b.callbackPriority=0;var _e=_.lanes|_.childLanes;if(Bc(b,_e),b===Q&&(Y=Q=null,Z=0),!(_.subtreeFlags&2064)&&!(_.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),_e=(_.flags&15990)!==0,_.subtreeFlags&15990||_e){_e=ok.transition,ok.transition=null;var et=C;C=1;var tt=K;K|=4,nk.current=null,Oj(b,_),dk(_,b),Oe(Df),dd=!!Cf,Df=Cf=null,b.current=_,hk(_),dc(),K=tt,C=et,ok.transition=_e}else b.current=_;if(vk&&(vk=!1,wk=b,xk=$),_e=b.pendingLanes,_e===0&&(Ri=null),mc(_.stateNode),Dk(b,B()),g!==null)for(j=b.onRecoverableError,_=0;_<g.length;_++)$=g[_],j($.value,{componentStack:$.stack,digest:$.digest});if(Oi)throw Oi=!1,b=Pi,Pi=null,b;return xk&1&&b.tag!==0&&Hk(),_e=b.pendingLanes,_e&1?b===zk?yk++:(yk=0,zk=b):yk=0,jg(),null}function Hk(){if(wk!==null){var b=Dc(xk),g=ok.transition,_=C;try{if(ok.transition=null,C=16>b?16:b,wk===null)var j=!1;else{if(b=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var $=K;for(K|=4,V=b.current;V!==null;){var _e=V,et=_e.child;if(V.flags&16){var tt=_e.deletions;if(tt!==null){for(var nt=0;nt<tt.length;nt++){var rt=tt[nt];for(V=rt;V!==null;){var it=V;switch(it.tag){case 0:case 11:case 15:Pj(8,it,_e)}var st=it.child;if(st!==null)st.return=it,V=st;else for(;V!==null;){it=V;var ot=it.sibling,lt=it.return;if(Sj(it),it===rt){V=null;break}if(ot!==null){ot.return=lt,V=ot;break}V=lt}}}var at=_e.alternate;if(at!==null){var ut=at.child;if(ut!==null){at.child=null;do{var dt=ut.sibling;ut.sibling=null,ut=dt}while(ut!==null)}}V=_e}}if(_e.subtreeFlags&2064&&et!==null)et.return=_e,V=et;else e:for(;V!==null;){if(_e=V,_e.flags&2048)switch(_e.tag){case 0:case 11:case 15:Pj(9,_e,_e.return)}var ct=_e.sibling;if(ct!==null){ct.return=_e.return,V=ct;break e}V=_e.return}}var ht=b.current;for(V=ht;V!==null;){et=V;var pt=et.child;if(et.subtreeFlags&2064&&pt!==null)pt.return=et,V=pt;else e:for(et=ht;V!==null;){if(tt=V,tt.flags&2048)try{switch(tt.tag){case 0:case 11:case 15:Qj(9,tt)}}catch(ft){W(tt,tt.return,ft)}if(tt===et){V=null;break e}var mt=tt.sibling;if(mt!==null){mt.return=tt.return,V=mt;break e}V=tt.return}}if(K=$,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,b)}catch{}j=!0}return j}finally{C=_,ok.transition=g}}return!1}function Xk(b,g,_){g=Ji(_,g),g=Ni(b,g,1),b=nh(b,g,1),g=R(),b!==null&&(Ac(b,1,g),Dk(b,g))}function W(b,g,_){if(b.tag===3)Xk(b,b,_);else for(;g!==null;){if(g.tag===3){Xk(g,b,_);break}else if(g.tag===1){var j=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(Ri===null||!Ri.has(j))){b=Ji(_,b),b=Qi(g,b,1),g=nh(g,b,1),b=R(),g!==null&&(Ac(g,1,b),Dk(g,b));break}}g=g.return}}function Ti(b,g,_){var j=b.pingCache;j!==null&&j.delete(g),g=R(),b.pingedLanes|=b.suspendedLanes&_,Q===b&&(Z&_)===_&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(b,0):rk|=_),Dk(b,g)}function Yk(b,g){g===0&&(b.mode&1?(g=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):g=1);var _=R();b=ih(b,g),b!==null&&(Ac(b,g,_),Dk(b,_))}function uj(b){var g=b.memoizedState,_=0;g!==null&&(_=g.retryLane),Yk(b,_)}function bk(b,g){var _=0;switch(b.tag){case 13:var j=b.stateNode,$=b.memoizedState;$!==null&&(_=$.retryLane);break;case 19:j=b.stateNode;break;default:throw Error(p$1(314))}j!==null&&j.delete(g),Yk(b,_)}var Vk;Vk=function(b,g,_){if(b!==null)if(b.memoizedProps!==g.pendingProps||Wf.current)dh=!0;else{if(!(b.lanes&_)&&!(g.flags&128))return dh=!1,yj(b,g,_);dh=!!(b.flags&131072)}else dh=!1,I&&g.flags&1048576&&ug(g,ng,g.index);switch(g.lanes=0,g.tag){case 2:var j=g.type;ij(b,g),b=g.pendingProps;var $=Yf(g,H.current);ch(g,_),$=Nh(null,g,j,b,$,_);var _e=Sh();return g.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Zf(j)?(_e=!0,cg(g)):_e=!1,g.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,kh(g),$.updater=Ei,g.stateNode=$,$._reactInternals=g,Ii(g,j,b,_),g=jj(null,g,j,!0,_e,_)):(g.tag=0,I&&_e&&vg(g),Xi(null,g,$,_),g=g.child),g;case 16:j=g.elementType;e:{switch(ij(b,g),b=g.pendingProps,$=j._init,j=$(j._payload),g.type=j,$=g.tag=Zk(j),b=Ci(j,b),$){case 0:g=cj(null,g,j,b,_);break e;case 1:g=hj(null,g,j,b,_);break e;case 11:g=Yi(null,g,j,b,_);break e;case 14:g=$i(null,g,j,Ci(j.type,b),_);break e}throw Error(p$1(306,j,""))}return g;case 0:return j=g.type,$=g.pendingProps,$=g.elementType===j?$:Ci(j,$),cj(b,g,j,$,_);case 1:return j=g.type,$=g.pendingProps,$=g.elementType===j?$:Ci(j,$),hj(b,g,j,$,_);case 3:e:{if(kj(g),b===null)throw Error(p$1(387));j=g.pendingProps,_e=g.memoizedState,$=_e.element,lh(b,g),qh(g,j,null,_);var et=g.memoizedState;if(j=et.element,_e.isDehydrated)if(_e={element:j,isDehydrated:!1,cache:et.cache,pendingSuspenseBoundaries:et.pendingSuspenseBoundaries,transitions:et.transitions},g.updateQueue.baseState=_e,g.memoizedState=_e,g.flags&256){$=Ji(Error(p$1(423)),g),g=lj(b,g,j,_,$);break e}else if(j!==$){$=Ji(Error(p$1(424)),g),g=lj(b,g,j,_,$);break e}else for(yg=Lf(g.stateNode.containerInfo.firstChild),xg=g,I=!0,zg=null,_=Vg(g,null,j,_),g.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Ig(),j===$){g=Zi(b,g,_);break e}Xi(b,g,j,_)}g=g.child}return g;case 5:return Ah(g),b===null&&Eg(g),j=g.type,$=g.pendingProps,_e=b!==null?b.memoizedProps:null,et=$.children,Ef(j,$)?et=null:_e!==null&&Ef(j,_e)&&(g.flags|=32),gj(b,g),Xi(b,g,et,_),g.child;case 6:return b===null&&Eg(g),null;case 13:return oj(b,g,_);case 4:return yh(g,g.stateNode.containerInfo),j=g.pendingProps,b===null?g.child=Ug(g,null,j,_):Xi(b,g,j,_),g.child;case 11:return j=g.type,$=g.pendingProps,$=g.elementType===j?$:Ci(j,$),Yi(b,g,j,$,_);case 7:return Xi(b,g,g.pendingProps,_),g.child;case 8:return Xi(b,g,g.pendingProps.children,_),g.child;case 12:return Xi(b,g,g.pendingProps.children,_),g.child;case 10:e:{if(j=g.type._context,$=g.pendingProps,_e=g.memoizedProps,et=$.value,G(Wg,j._currentValue),j._currentValue=et,_e!==null)if(He(_e.value,et)){if(_e.children===$.children&&!Wf.current){g=Zi(b,g,_);break e}}else for(_e=g.child,_e!==null&&(_e.return=g);_e!==null;){var tt=_e.dependencies;if(tt!==null){et=_e.child;for(var nt=tt.firstContext;nt!==null;){if(nt.context===j){if(_e.tag===1){nt=mh(-1,_&-_),nt.tag=2;var rt=_e.updateQueue;if(rt!==null){rt=rt.shared;var it=rt.pending;it===null?nt.next=nt:(nt.next=it.next,it.next=nt),rt.pending=nt}}_e.lanes|=_,nt=_e.alternate,nt!==null&&(nt.lanes|=_),bh(_e.return,_,g),tt.lanes|=_;break}nt=nt.next}}else if(_e.tag===10)et=_e.type===g.type?null:_e.child;else if(_e.tag===18){if(et=_e.return,et===null)throw Error(p$1(341));et.lanes|=_,tt=et.alternate,tt!==null&&(tt.lanes|=_),bh(et,_,g),et=_e.sibling}else et=_e.child;if(et!==null)et.return=_e;else for(et=_e;et!==null;){if(et===g){et=null;break}if(_e=et.sibling,_e!==null){_e.return=et.return,et=_e;break}et=et.return}_e=et}Xi(b,g,$.children,_),g=g.child}return g;case 9:return $=g.type,j=g.pendingProps.children,ch(g,_),$=eh($),j=j($),g.flags|=1,Xi(b,g,j,_),g.child;case 14:return j=g.type,$=Ci(j,g.pendingProps),$=Ci(j.type,$),$i(b,g,j,$,_);case 15:return bj(b,g,g.type,g.pendingProps,_);case 17:return j=g.type,$=g.pendingProps,$=g.elementType===j?$:Ci(j,$),ij(b,g),g.tag=1,Zf(j)?(b=!0,cg(g)):b=!1,ch(g,_),Gi(g,j,$),Ii(g,j,$,_),jj(null,g,j,!0,b,_);case 19:return xj(b,g,_);case 22:return dj(b,g,_)}throw Error(p$1(156,g.tag))};function Fk(b,g){return ac(b,g)}function $k(b,g,_,j){this.tag=b,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(b,g,_,j){return new $k(b,g,_,j)}function aj(b){return b=b.prototype,!(!b||!b.isReactComponent)}function Zk(b){if(typeof b=="function")return aj(b)?1:0;if(b!=null){if(b=b.$$typeof,b===Da)return 11;if(b===Ga)return 14}return 2}function Pg(b,g){var _=b.alternate;return _===null?(_=Bg(b.tag,g,b.key,b.mode),_.elementType=b.elementType,_.type=b.type,_.stateNode=b.stateNode,_.alternate=b,b.alternate=_):(_.pendingProps=g,_.type=b.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=b.flags&14680064,_.childLanes=b.childLanes,_.lanes=b.lanes,_.child=b.child,_.memoizedProps=b.memoizedProps,_.memoizedState=b.memoizedState,_.updateQueue=b.updateQueue,g=b.dependencies,_.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},_.sibling=b.sibling,_.index=b.index,_.ref=b.ref,_}function Rg(b,g,_,j,$,_e){var et=2;if(j=b,typeof b=="function")aj(b)&&(et=1);else if(typeof b=="string")et=5;else e:switch(b){case ya:return Tg(_.children,$,_e,g);case za:et=8,$|=8;break;case Aa:return b=Bg(12,_,g,$|2),b.elementType=Aa,b.lanes=_e,b;case Ea:return b=Bg(13,_,g,$),b.elementType=Ea,b.lanes=_e,b;case Fa:return b=Bg(19,_,g,$),b.elementType=Fa,b.lanes=_e,b;case Ia:return pj(_,$,_e,g);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case Ba:et=10;break e;case Ca:et=9;break e;case Da:et=11;break e;case Ga:et=14;break e;case Ha:et=16,j=null;break e}throw Error(p$1(130,b==null?b:typeof b,""))}return g=Bg(et,_,g,$),g.elementType=b,g.type=j,g.lanes=_e,g}function Tg(b,g,_,j){return b=Bg(7,b,j,g),b.lanes=_,b}function pj(b,g,_,j){return b=Bg(22,b,j,g),b.elementType=Ia,b.lanes=_,b.stateNode={isHidden:!1},b}function Qg(b,g,_){return b=Bg(6,b,null,g),b.lanes=_,b}function Sg(b,g,_){return g=Bg(4,b.children!==null?b.children:[],b.key,g),g.lanes=_,g.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},g}function al(b,g,_,j,$){this.tag=g,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=j,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function bl(b,g,_,j,$,_e,et,tt,nt){return b=new al(b,g,_,tt,nt),g===1?(g=1,_e===!0&&(g|=8)):g=0,_e=Bg(3,null,null,g),b.current=_e,_e.stateNode=b,_e.memoizedState={element:j,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(_e),b}function cl(b,g,_){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:j==null?null:""+j,children:b,containerInfo:g,implementation:_}}function dl(b){if(!b)return Vf;b=b._reactInternals;e:{if(Vb(b)!==b||b.tag!==1)throw Error(p$1(170));var g=b;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Zf(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(p$1(171))}if(b.tag===1){var _=b.type;if(Zf(_))return bg(b,_,g)}return g}function el(b,g,_,j,$,_e,et,tt,nt){return b=bl(_,j,!0,b,$,_e,et,tt,nt),b.context=dl(null),_=b.current,j=R(),$=yi(_),_e=mh(j,$),_e.callback=g??null,nh(_,_e,$),b.current.lanes=$,Ac(b,$,j),Dk(b,j),b}function fl(b,g,_,j){var $=g.current,_e=R(),et=yi($);return _=dl(_),g.context===null?g.context=_:g.pendingContext=_,g=mh(_e,et),g.payload={element:b},j=j===void 0?null:j,j!==null&&(g.callback=j),b=nh($,g,et),b!==null&&(gi(b,$,et,_e),oh(b,$,et)),et}function gl(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return b.child.stateNode;default:return b.child.stateNode}}function hl(b,g){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var _=b.retryLane;b.retryLane=_!==0&&_<g?_:g}}function il(b,g){hl(b,g),(b=b.alternate)&&hl(b,g)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(b){console.error(b)};function ll(b){this._internalRoot=b}ml.prototype.render=ll.prototype.render=function(b){var g=this._internalRoot;if(g===null)throw Error(p$1(409));fl(b,g,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var b=this._internalRoot;if(b!==null){this._internalRoot=null;var g=b.containerInfo;Rk(function(){fl(null,b,null,null)}),g[uf]=null}};function ml(b){this._internalRoot=b}ml.prototype.unstable_scheduleHydration=function(b){if(b){var g=Hc();b={blockedOn:null,target:b,priority:g};for(var _=0;_<Qc.length&&g!==0&&g<Qc[_].priority;_++);Qc.splice(_,0,b),_===0&&Vc(b)}};function nl(b){return!(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)}function ol(b){return!(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11&&(b.nodeType!==8||b.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(b,g,_,j,$){if($){if(typeof j=="function"){var _e=j;j=function(){var rt=gl(et);_e.call(rt)}}var et=el(g,j,b,0,null,!1,!1,"",pl);return b._reactRootContainer=et,b[uf]=et.current,sf(b.nodeType===8?b.parentNode:b),Rk(),et}for(;$=b.lastChild;)b.removeChild($);if(typeof j=="function"){var tt=j;j=function(){var rt=gl(nt);tt.call(rt)}}var nt=bl(b,0,!1,null,null,!1,!1,"",pl);return b._reactRootContainer=nt,b[uf]=nt.current,sf(b.nodeType===8?b.parentNode:b),Rk(function(){fl(g,nt,_,j)}),nt}function rl(b,g,_,j,$){var _e=_._reactRootContainer;if(_e){var et=_e;if(typeof $=="function"){var tt=$;$=function(){var nt=gl(et);tt.call(nt)}}fl(g,et,b,$)}else et=ql(_,g,b,$,j);return gl(et)}Ec=function(b){switch(b.tag){case 3:var g=b.stateNode;if(g.current.memoizedState.isDehydrated){var _=tc(g.pendingLanes);_!==0&&(Cc(g,_|1),Dk(g,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var j=ih(b,1);if(j!==null){var $=R();gi(j,b,1,$)}}),il(b,1)}};Fc=function(b){if(b.tag===13){var g=ih(b,134217728);if(g!==null){var _=R();gi(g,b,134217728,_)}il(b,134217728)}};Gc=function(b){if(b.tag===13){var g=yi(b),_=ih(b,g);if(_!==null){var j=R();gi(_,b,g,j)}il(b,g)}};Hc=function(){return C};Ic=function(b,g){var _=C;try{return C=b,g()}finally{C=_}};yb=function(b,g,_){switch(g){case"input":if(bb(b,_),g=_.name,_.type==="radio"&&g!=null){for(_=b;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<_.length;g++){var j=_[g];if(j!==b&&j.form===b.form){var $=Db(j);if(!$)throw Error(p$1(90));Wa(j),bb(j,$)}}}break;case"textarea":ib(b,_);break;case"select":g=_.value,g!=null&&fb(b,!!_.multiple,g,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(b){return b=Zb(b),b===null?null:b.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(b,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(g))throw Error(p$1(200));return cl(b,g,null,_)};reactDom_production_min.createRoot=function(b,g){if(!nl(b))throw Error(p$1(299));var _=!1,j="",$=kl;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onRecoverableError!==void 0&&($=g.onRecoverableError)),g=bl(b,1,!1,null,null,_,!1,j,$),b[uf]=g.current,sf(b.nodeType===8?b.parentNode:b),new ll(g)};reactDom_production_min.findDOMNode=function(b){if(b==null)return null;if(b.nodeType===1)return b;var g=b._reactInternals;if(g===void 0)throw typeof b.render=="function"?Error(p$1(188)):(b=Object.keys(b).join(","),Error(p$1(268,b)));return b=Zb(g),b=b===null?null:b.stateNode,b};reactDom_production_min.flushSync=function(b){return Rk(b)};reactDom_production_min.hydrate=function(b,g,_){if(!ol(g))throw Error(p$1(200));return rl(null,b,g,!0,_)};reactDom_production_min.hydrateRoot=function(b,g,_){if(!nl(b))throw Error(p$1(405));var j=_!=null&&_.hydratedSources||null,$=!1,_e="",et=kl;if(_!=null&&(_.unstable_strictMode===!0&&($=!0),_.identifierPrefix!==void 0&&(_e=_.identifierPrefix),_.onRecoverableError!==void 0&&(et=_.onRecoverableError)),g=el(g,null,b,1,_??null,$,!1,_e,et),b[uf]=g.current,sf(b),j)for(b=0;b<j.length;b++)_=j[b],$=_._getVersion,$=$(_._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[_,$]:g.mutableSourceEagerHydrationData.push(_,$);return new ml(g)};reactDom_production_min.render=function(b,g,_){if(!ol(g))throw Error(p$1(200));return rl(null,b,g,!1,_)};reactDom_production_min.unmountComponentAtNode=function(b){if(!ol(b))throw Error(p$1(40));return b._reactRootContainer?(Rk(function(){rl(null,null,b,!1,function(){b._reactRootContainer=null,b[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(b,g,_,j){if(!ol(_))throw Error(p$1(200));if(b==null||b._reactInternals===void 0)throw Error(p$1(38));return rl(b,g,_,!1,j)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(b){console.error(b)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);var createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var _=arguments[g];for(var j in _)Object.prototype.hasOwnProperty.call(_,j)&&(b[j]=_[j])}return b},_extends$3.apply(this,arguments)}var Action;(function(b){b.Pop="POP",b.Push="PUSH",b.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(b){b===void 0&&(b={});function g(j,$){let{pathname:_e,search:et,hash:tt}=j.location;return createLocation("",{pathname:_e,search:et,hash:tt},$.state&&$.state.usr||null,$.state&&$.state.key||"default")}function _(j,$){return typeof $=="string"?$:createPath($)}return getUrlBasedHistory(g,_,null,b)}function invariant$1(b,g){if(b===!1||b===null||typeof b>"u")throw new Error(g)}function warning(b,g){if(!b){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(b,g){return{usr:b.state,key:b.key,idx:g}}function createLocation(b,g,_,j){return _===void 0&&(_=null),_extends$3({pathname:typeof b=="string"?b:b.pathname,search:"",hash:""},typeof g=="string"?parsePath(g):g,{state:_,key:g&&g.key||j||createKey$1()})}function createPath(b){let{pathname:g="/",search:_="",hash:j=""}=b;return _&&_!=="?"&&(g+=_.charAt(0)==="?"?_:"?"+_),j&&j!=="#"&&(g+=j.charAt(0)==="#"?j:"#"+j),g}function parsePath(b){let g={};if(b){let _=b.indexOf("#");_>=0&&(g.hash=b.substr(_),b=b.substr(0,_));let j=b.indexOf("?");j>=0&&(g.search=b.substr(j),b=b.substr(0,j)),b&&(g.pathname=b)}return g}function getUrlBasedHistory(b,g,_,j){j===void 0&&(j={});let{window:$=document.defaultView,v5Compat:_e=!1}=j,et=$.history,tt=Action.Pop,nt=null,rt=it();rt==null&&(rt=0,et.replaceState(_extends$3({},et.state,{idx:rt}),""));function it(){return(et.state||{idx:null}).idx}function st(){tt=Action.Pop;let dt=it(),ct=dt==null?null:dt-rt;rt=dt,nt&&nt({action:tt,location:ut.location,delta:ct})}function ot(dt,ct){tt=Action.Push;let ht=createLocation(ut.location,dt,ct);rt=it()+1;let pt=getHistoryState(ht,rt),mt=ut.createHref(ht);try{et.pushState(pt,"",mt)}catch(ft){if(ft instanceof DOMException&&ft.name==="DataCloneError")throw ft;$.location.assign(mt)}_e&&nt&&nt({action:tt,location:ut.location,delta:1})}function lt(dt,ct){tt=Action.Replace;let ht=createLocation(ut.location,dt,ct);rt=it();let pt=getHistoryState(ht,rt),mt=ut.createHref(ht);et.replaceState(pt,"",mt),_e&&nt&&nt({action:tt,location:ut.location,delta:0})}function at(dt){let ct=$.location.origin!=="null"?$.location.origin:$.location.href,ht=typeof dt=="string"?dt:createPath(dt);return ht=ht.replace(/ $/,"%20"),invariant$1(ct,"No window.location.(origin|href) available to create URL for href: "+ht),new URL(ht,ct)}let ut={get action(){return tt},get location(){return b($,et)},listen(dt){if(nt)throw new Error("A history only accepts one active listener");return $.addEventListener(PopStateEventType,st),nt=dt,()=>{$.removeEventListener(PopStateEventType,st),nt=null}},createHref(dt){return g($,dt)},createURL:at,encodeLocation(dt){let ct=at(dt);return{pathname:ct.pathname,search:ct.search,hash:ct.hash}},push:ot,replace:lt,go(dt){return et.go(dt)}};return ut}var ResultType;(function(b){b.data="data",b.deferred="deferred",b.redirect="redirect",b.error="error"})(ResultType||(ResultType={}));function matchRoutes(b,g,_){return _===void 0&&(_="/"),matchRoutesImpl(b,g,_,!1)}function matchRoutesImpl(b,g,_,j){let $=typeof g=="string"?parsePath(g):g,_e=stripBasename($.pathname||"/",_);if(_e==null)return null;let et=flattenRoutes(b);rankRouteBranches(et);let tt=null;for(let nt=0;tt==null&&nt<et.length;++nt){let rt=decodePath(_e);tt=matchRouteBranch(et[nt],rt,j)}return tt}function flattenRoutes(b,g,_,j){g===void 0&&(g=[]),_===void 0&&(_=[]),j===void 0&&(j="");let $=(_e,et,tt)=>{let nt={relativePath:tt===void 0?_e.path||"":tt,caseSensitive:_e.caseSensitive===!0,childrenIndex:et,route:_e};nt.relativePath.startsWith("/")&&(invariant$1(nt.relativePath.startsWith(j),'Absolute route path "'+nt.relativePath+'" nested under path '+('"'+j+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),nt.relativePath=nt.relativePath.slice(j.length));let rt=joinPaths([j,nt.relativePath]),it=_.concat(nt);_e.children&&_e.children.length>0&&(invariant$1(_e.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+rt+'".')),flattenRoutes(_e.children,g,it,rt)),!(_e.path==null&&!_e.index)&&g.push({path:rt,score:computeScore(rt,_e.index),routesMeta:it})};return b.forEach((_e,et)=>{var tt;if(_e.path===""||!((tt=_e.path)!=null&&tt.includes("?")))$(_e,et);else for(let nt of explodeOptionalSegments(_e.path))$(_e,et,nt)}),g}function explodeOptionalSegments(b){let g=b.split("/");if(g.length===0)return[];let[_,...j]=g,$=_.endsWith("?"),_e=_.replace(/\?$/,"");if(j.length===0)return $?[_e,""]:[_e];let et=explodeOptionalSegments(j.join("/")),tt=[];return tt.push(...et.map(nt=>nt===""?_e:[_e,nt].join("/"))),$&&tt.push(...et),tt.map(nt=>b.startsWith("/")&&nt===""?"/":nt)}function rankRouteBranches(b){b.sort((g,_)=>g.score!==_.score?_.score-g.score:compareIndexes(g.routesMeta.map(j=>j.childrenIndex),_.routesMeta.map(j=>j.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=b=>b==="*";function computeScore(b,g){let _=b.split("/"),j=_.length;return _.some(isSplat)&&(j+=splatPenalty),g&&(j+=indexRouteValue),_.filter($=>!isSplat($)).reduce(($,_e)=>$+(paramRe.test(_e)?dynamicSegmentValue:_e===""?emptySegmentValue:staticSegmentValue),j)}function compareIndexes(b,g){return b.length===g.length&&b.slice(0,-1).every((j,$)=>j===g[$])?b[b.length-1]-g[g.length-1]:0}function matchRouteBranch(b,g,_){let{routesMeta:j}=b,$={},_e="/",et=[];for(let tt=0;tt<j.length;++tt){let nt=j[tt],rt=tt===j.length-1,it=_e==="/"?g:g.slice(_e.length)||"/",st=matchPath({path:nt.relativePath,caseSensitive:nt.caseSensitive,end:rt},it),ot=nt.route;if(!st&&rt&&_&&!j[j.length-1].route.index&&(st=matchPath({path:nt.relativePath,caseSensitive:nt.caseSensitive,end:!1},it)),!st)return null;Object.assign($,st.params),et.push({params:$,pathname:joinPaths([_e,st.pathname]),pathnameBase:normalizePathname(joinPaths([_e,st.pathnameBase])),route:ot}),st.pathnameBase!=="/"&&(_e=joinPaths([_e,st.pathnameBase]))}return et}function matchPath(b,g){typeof b=="string"&&(b={path:b,caseSensitive:!1,end:!0});let[_,j]=compilePath(b.path,b.caseSensitive,b.end),$=g.match(_);if(!$)return null;let _e=$[0],et=_e.replace(/(.)\/+$/,"$1"),tt=$.slice(1);return{params:j.reduce((rt,it,st)=>{let{paramName:ot,isOptional:lt}=it;if(ot==="*"){let ut=tt[st]||"";et=_e.slice(0,_e.length-ut.length).replace(/(.)\/+$/,"$1")}const at=tt[st];return lt&&!at?rt[ot]=void 0:rt[ot]=(at||"").replace(/%2F/g,"/"),rt},{}),pathname:_e,pathnameBase:et,pattern:b}}function compilePath(b,g,_){g===void 0&&(g=!1),_===void 0&&(_=!0),warning(b==="*"||!b.endsWith("*")||b.endsWith("/*"),'Route path "'+b+'" will be treated as if it were '+('"'+b.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+b.replace(/\*$/,"/*")+'".'));let j=[],$="^"+b.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(et,tt,nt)=>(j.push({paramName:tt,isOptional:nt!=null}),nt?"/?([^\\/]+)?":"/([^\\/]+)"));return b.endsWith("*")?(j.push({paramName:"*"}),$+=b==="*"||b==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_?$+="\\/*$":b!==""&&b!=="/"&&($+="(?:(?=\\/|$))"),[new RegExp($,g?void 0:"i"),j]}function decodePath(b){try{return b.split("/").map(g=>decodeURIComponent(g).replace(/\//g,"%2F")).join("/")}catch(g){return warning(!1,'The URL path "'+b+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),b}}function stripBasename(b,g){if(g==="/")return b;if(!b.toLowerCase().startsWith(g.toLowerCase()))return null;let _=g.endsWith("/")?g.length-1:g.length,j=b.charAt(_);return j&&j!=="/"?null:b.slice(_)||"/"}const joinPaths=b=>b.join("/").replace(/\/\/+/g,"/"),normalizePathname=b=>b.replace(/\/+$/,"").replace(/^\/*/,"/");function isRouteErrorResponse(b){return b!=null&&typeof b.status=="number"&&typeof b.statusText=="string"&&typeof b.internal=="boolean"&&"data"in b}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var _=arguments[g];for(var j in _)Object.prototype.hasOwnProperty.call(_,j)&&(b[j]=_[j])}return b},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useParams(){let{matches:b}=reactExports.useContext(RouteContext),g=b[b.length-1];return g?g.params:{}}function useRoutes(b,g){return useRoutesImpl(b,g)}function useRoutesImpl(b,g,_,j){useInRouterContext()||invariant$1(!1);let{navigator:$}=reactExports.useContext(NavigationContext),{matches:_e}=reactExports.useContext(RouteContext),et=_e[_e.length-1],tt=et?et.params:{};et&&et.pathname;let nt=et?et.pathnameBase:"/";et&&et.route;let rt=useLocation(),it;if(g){var st;let dt=typeof g=="string"?parsePath(g):g;nt==="/"||(st=dt.pathname)!=null&&st.startsWith(nt)||invariant$1(!1),it=dt}else it=rt;let ot=it.pathname||"/",lt=ot;if(nt!=="/"){let dt=nt.replace(/^\//,"").split("/");lt="/"+ot.replace(/^\//,"").split("/").slice(dt.length).join("/")}let at=matchRoutes(b,{pathname:lt}),ut=_renderMatches(at&&at.map(dt=>Object.assign({},dt,{params:Object.assign({},tt,dt.params),pathname:joinPaths([nt,$.encodeLocation?$.encodeLocation(dt.pathname).pathname:dt.pathname]),pathnameBase:dt.pathnameBase==="/"?nt:joinPaths([nt,$.encodeLocation?$.encodeLocation(dt.pathnameBase).pathname:dt.pathnameBase])})),_e,_,j);return g&&ut?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},it),navigationType:Action.Pop}},ut):ut}function DefaultErrorComponent(){let b=useRouteError(),g=isRouteErrorResponse(b)?b.status+" "+b.statusText:b instanceof Error?b.message:JSON.stringify(b),_=b instanceof Error?b.stack:null,$={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},g),_?reactExports.createElement("pre",{style:$},_):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,_){return _.location!==g.location||_.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:_.error,location:_.location,revalidation:g.revalidation||_.revalidation}}componentDidCatch(g,_){console.error("React Router caught the following error during render",g,_)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(b){let{routeContext:g,match:_,children:j}=b,$=reactExports.useContext(DataRouterContext);return $&&$.static&&$.staticContext&&(_.route.errorElement||_.route.ErrorBoundary)&&($.staticContext._deepestRenderedBoundaryId=_.route.id),reactExports.createElement(RouteContext.Provider,{value:g},j)}function _renderMatches(b,g,_,j){var $;if(g===void 0&&(g=[]),_===void 0&&(_=null),j===void 0&&(j=null),b==null){var _e;if(!_)return null;if(_.errors)b=_.matches;else if((_e=j)!=null&&_e.v7_partialHydration&&g.length===0&&!_.initialized&&_.matches.length>0)b=_.matches;else return null}let et=b,tt=($=_)==null?void 0:$.errors;if(tt!=null){let it=et.findIndex(st=>st.route.id&&(tt==null?void 0:tt[st.route.id])!==void 0);it>=0||invariant$1(!1),et=et.slice(0,Math.min(et.length,it+1))}let nt=!1,rt=-1;if(_&&j&&j.v7_partialHydration)for(let it=0;it<et.length;it++){let st=et[it];if((st.route.HydrateFallback||st.route.hydrateFallbackElement)&&(rt=it),st.route.id){let{loaderData:ot,errors:lt}=_,at=st.route.loader&&ot[st.route.id]===void 0&&(!lt||lt[st.route.id]===void 0);if(st.route.lazy||at){nt=!0,rt>=0?et=et.slice(0,rt+1):et=[et[0]];break}}}return et.reduceRight((it,st,ot)=>{let lt,at=!1,ut=null,dt=null;_&&(lt=tt&&st.route.id?tt[st.route.id]:void 0,ut=st.route.errorElement||defaultErrorElement,nt&&(rt<0&&ot===0?(at=!0,dt=null):rt===ot&&(at=!0,dt=st.route.hydrateFallbackElement||null)));let ct=g.concat(et.slice(0,ot+1)),ht=()=>{let pt;return lt?pt=ut:at?pt=dt:st.route.Component?pt=reactExports.createElement(st.route.Component,null):st.route.element?pt=st.route.element:pt=it,reactExports.createElement(RenderedRoute,{match:st,routeContext:{outlet:it,matches:ct,isDataRoute:_!=null},children:pt})};return _&&(st.route.ErrorBoundary||st.route.errorElement||ot===0)?reactExports.createElement(RenderErrorBoundary,{location:_.location,revalidation:_.revalidation,component:ut,error:lt,children:ht(),routeContext:{outlet:null,matches:ct,isDataRoute:!0}}):ht()},null)}var DataRouterStateHook$1=function(b){return b.UseBlocker="useBlocker",b.UseLoaderData="useLoaderData",b.UseActionData="useActionData",b.UseRouteError="useRouteError",b.UseNavigation="useNavigation",b.UseRouteLoaderData="useRouteLoaderData",b.UseMatches="useMatches",b.UseRevalidator="useRevalidator",b.UseNavigateStable="useNavigate",b.UseRouteId="useRouteId",b}(DataRouterStateHook$1||{});function useDataRouterState(b){let g=reactExports.useContext(DataRouterStateContext);return g||invariant$1(!1),g}function useRouteContext(b){let g=reactExports.useContext(RouteContext);return g||invariant$1(!1),g}function useCurrentRouteId(b){let g=useRouteContext(),_=g.matches[g.matches.length-1];return _.route.id||invariant$1(!1),_.route.id}function useRouteError(){var b;let g=reactExports.useContext(RouteErrorContext),_=useDataRouterState(DataRouterStateHook$1.UseRouteError),j=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return g!==void 0?g:(b=_.errors)==null?void 0:b[j]}function Route(b){invariant$1(!1)}function Router(b){let{basename:g="/",children:_=null,location:j,navigationType:$=Action.Pop,navigator:_e,static:et=!1,future:tt}=b;useInRouterContext()&&invariant$1(!1);let nt=g.replace(/^\/*/,"/"),rt=reactExports.useMemo(()=>({basename:nt,navigator:_e,static:et,future:_extends$2({v7_relativeSplatPath:!1},tt)}),[nt,tt,_e,et]);typeof j=="string"&&(j=parsePath(j));let{pathname:it="/",search:st="",hash:ot="",state:lt=null,key:at="default"}=j,ut=reactExports.useMemo(()=>{let dt=stripBasename(it,nt);return dt==null?null:{location:{pathname:dt,search:st,hash:ot,state:lt,key:at},navigationType:$}},[nt,it,st,ot,lt,at,$]);return ut==null?null:reactExports.createElement(NavigationContext.Provider,{value:rt},reactExports.createElement(LocationContext.Provider,{children:_,value:ut}))}function Routes(b){let{children:g,location:_}=b;return useRoutes(createRoutesFromChildren(g),_)}new Promise(()=>{});function createRoutesFromChildren(b,g){g===void 0&&(g=[]);let _=[];return reactExports.Children.forEach(b,(j,$)=>{if(!reactExports.isValidElement(j))return;let _e=[...g,$];if(j.type===reactExports.Fragment){_.push.apply(_,createRoutesFromChildren(j.props.children,_e));return}j.type!==Route&&invariant$1(!1),!j.props.index||!j.props.children||invariant$1(!1);let et={id:j.props.id||_e.join("-"),caseSensitive:j.props.caseSensitive,element:j.props.element,Component:j.props.Component,index:j.props.index,path:j.props.path,loader:j.props.loader,action:j.props.action,errorElement:j.props.errorElement,ErrorBoundary:j.props.ErrorBoundary,hasErrorBoundary:j.props.ErrorBoundary!=null||j.props.errorElement!=null,shouldRevalidate:j.props.shouldRevalidate,handle:j.props.handle,lazy:j.props.lazy};j.props.children&&(et.children=createRoutesFromChildren(j.props.children,_e)),_.push(et)}),_}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(b){let{basename:g,children:_,future:j,window:$}=b,_e=reactExports.useRef();_e.current==null&&(_e.current=createBrowserHistory({window:$,v5Compat:!0}));let et=_e.current,[tt,nt]=reactExports.useState({action:et.action,location:et.location}),{v7_startTransition:rt}=j||{},it=reactExports.useCallback(st=>{rt&&startTransitionImpl?startTransitionImpl(()=>nt(st)):nt(st)},[nt,rt]);return reactExports.useLayoutEffect(()=>et.listen(it),[et,it]),reactExports.createElement(Router,{basename:g,children:_,location:tt.location,navigationType:tt.action,navigator:et,future:j})}var DataRouterHook;(function(b){b.UseScrollRestoration="useScrollRestoration",b.UseSubmit="useSubmit",b.UseSubmitFetcher="useSubmitFetcher",b.UseFetcher="useFetcher",b.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(b){b.UseFetcher="useFetcher",b.UseFetchers="useFetchers",b.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function createDOMMotionComponentProxy(b){if(typeof Proxy>"u")return b;const g=new Map,_=(...j)=>b(...j);return new Proxy(_,{get:(j,$)=>$==="create"?b:(g.has($)||g.set($,b($)),g.get($))})}function isAnimationControls(b){return b!==null&&typeof b=="object"&&typeof b.start=="function"}const isKeyframesTarget=b=>Array.isArray(b);function shallowCompare(b,g){if(!Array.isArray(g))return!1;const _=g.length;if(_!==b.length)return!1;for(let j=0;j<_;j++)if(g[j]!==b[j])return!1;return!0}function isVariantLabel(b){return typeof b=="string"||Array.isArray(b)}function getValueState(b){const g=[{},{}];return b==null||b.values.forEach((_,j)=>{g[0][j]=_.get(),g[1][j]=_.getVelocity()}),g}function resolveVariantFromProps(b,g,_,j){if(typeof g=="function"){const[$,_e]=getValueState(j);g=g(_!==void 0?_:b.custom,$,_e)}if(typeof g=="string"&&(g=b.variants&&b.variants[g]),typeof g=="function"){const[$,_e]=getValueState(j);g=g(_!==void 0?_:b.custom,$,_e)}return g}function resolveVariant(b,g,_){const j=b.getProps();return resolveVariantFromProps(j,g,_!==void 0?_:j.custom,b)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=b=>b*1e3,millisecondsToSeconds=b=>b/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=b=>({type:"spring",stiffness:550,damping:b===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(b,{keyframes:g})=>g.length>2?keyframesTransition:transformProps.has(b)?b.startsWith("scale")?criticallyDampedSpring(g[1]):underDampedSpring:ease;function getValueTransition(b,g){return b?b[g]||b.default||b:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=b=>b!==null;function getFinalKeyframe(b,{repeat:g,repeatType:_="loop"},j){const $=b.filter(isNotNull),_e=g&&_!=="loop"&&g%2===1?0:$.length-1;return!_e||j===void 0?$[_e]:j}const noop$1=b=>b;function createRenderStep(b){let g=new Set,_=new Set,j=!1,$=!1;const _e=new WeakSet;let et={delta:0,timestamp:0,isProcessing:!1};function tt(rt){_e.has(rt)&&(nt.schedule(rt),b()),rt(et)}const nt={schedule:(rt,it=!1,st=!1)=>{const lt=st&&j?g:_;return it&&_e.add(rt),lt.has(rt)||lt.add(rt),rt},cancel:rt=>{_.delete(rt),_e.delete(rt)},process:rt=>{if(et=rt,j){$=!0;return}j=!0,[g,_]=[_,g],_.clear(),g.forEach(tt),j=!1,$&&($=!1,nt.process(rt))}};return nt}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(b,g){let _=!1,j=!0;const $={delta:0,timestamp:0,isProcessing:!1},_e=()=>_=!0,et=stepsOrder.reduce((ct,ht)=>(ct[ht]=createRenderStep(_e),ct),{}),{read:tt,resolveKeyframes:nt,update:rt,preRender:it,render:st,postRender:ot}=et,lt=()=>{const ct=performance.now();_=!1,$.delta=j?1e3/60:Math.max(Math.min(ct-$.timestamp,maxElapsed),1),$.timestamp=ct,$.isProcessing=!0,tt.process($),nt.process($),rt.process($),it.process($),st.process($),ot.process($),$.isProcessing=!1,_&&g&&(j=!1,b(lt))},at=()=>{_=!0,j=!0,$.isProcessing||b(lt)};return{schedule:stepsOrder.reduce((ct,ht)=>{const pt=et[ht];return ct[ht]=(mt,ft=!1,gt=!1)=>(_||at(),pt.schedule(mt,ft,gt)),ct},{}),cancel:ct=>{for(let ht=0;ht<stepsOrder.length;ht++)et[stepsOrder[ht]].cancel(ct)},state:$,steps:et}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0),calcBezier=(b,g,_)=>(((1-3*_+3*g)*b+(3*_-6*g))*b+3*g)*b,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(b,g,_,j,$){let _e,et,tt=0;do et=g+(_-g)/2,_e=calcBezier(et,j,$)-b,_e>0?_=et:g=et;while(Math.abs(_e)>subdivisionPrecision&&++tt<subdivisionMaxIterations);return et}function cubicBezier(b,g,_,j){if(b===g&&_===j)return noop$1;const $=_e=>binarySubdivide(_e,0,1,b,_);return _e=>_e===0||_e===1?_e:calcBezier($(_e),g,j)}const mirrorEasing=b=>g=>g<=.5?b(2*g)/2:(2-b(2*(1-g)))/2,reverseEasing=b=>g=>1-b(1-g),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=b=>(b*=2)<1?.5*backIn(b):.5*(2-Math.pow(2,-10*(b-1))),circIn=b=>1-Math.sin(Math.acos(b)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=b=>/^0[^.\s]+$/u.test(b);function isNone(b){return typeof b=="number"?b===0:b!==null?b==="none"||b==="0"||isZeroValueString(b):!0}let invariant=noop$1;const isNumericalString=b=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(b),checkStringStartsWith=b=>g=>typeof g=="string"&&g.startsWith(b),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=b=>startsAsVariableToken(b)?singleCssVariableRegex.test(b.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(b){const g=splitCSSVariableRegex.exec(b);if(!g)return[,];const[,_,j,$]=g;return[`--${_??j}`,$]}function getVariableValue(b,g,_=1){const[j,$]=parseCSSVariable(b);if(!j)return;const _e=window.getComputedStyle(g).getPropertyValue(j);if(_e){const et=_e.trim();return isNumericalString(et)?parseFloat(et):et}return isCSSVariableToken($)?getVariableValue($,g,_+1):$}const clamp=(b,g,_)=>_>g?g:_<b?b:_,number={test:b=>typeof b=="number",parse:parseFloat,transform:b=>b},alpha={...number,transform:b=>clamp(0,1,b)},scale={...number,default:1},createUnitType=b=>({test:g=>typeof g=="string"&&g.endsWith(b)&&g.split(" ").length===1,parse:parseFloat,transform:g=>`${g}${b}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:b=>percent.parse(b)/100,transform:b=>percent.transform(b*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=b=>b===number||b===px,getPosFromMatrix=(b,g)=>parseFloat(b.split(", ")[g]),getTranslateFromMatrix=(b,g)=>(_,{transform:j})=>{if(j==="none"||!j)return 0;const $=j.match(/^matrix3d\((.+)\)$/u);if($)return getPosFromMatrix($[1],g);{const _e=j.match(/^matrix\((.+)\)$/u);return _e?getPosFromMatrix(_e[1],b):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(b=>!transformKeys.has(b));function removeNonTranslationalTransform(b){const g=[];return nonTranslationalTransformKeys.forEach(_=>{const j=b.getValue(_);j!==void 0&&(g.push([_,j.get()]),j.set(_.startsWith("scale")?1:0))}),g}const positionalValues={width:({x:b},{paddingLeft:g="0",paddingRight:_="0"})=>b.max-b.min-parseFloat(g)-parseFloat(_),height:({y:b},{paddingTop:g="0",paddingBottom:_="0"})=>b.max-b.min-parseFloat(g)-parseFloat(_),top:(b,{top:g})=>parseFloat(g),left:(b,{left:g})=>parseFloat(g),bottom:({y:b},{top:g})=>parseFloat(g)+(b.max-b.min),right:({x:b},{left:g})=>parseFloat(g)+(b.max-b.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=b=>g=>g.test(b),auto={test:b=>b==="auto",parse:b=>b},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=b=>dimensionValueTypes.find(testValueType(b)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const b=Array.from(toResolve).filter(j=>j.needsMeasurement),g=new Set(b.map(j=>j.element)),_=new Map;g.forEach(j=>{const $=removeNonTranslationalTransform(j);$.length&&(_.set(j,$),j.render())}),b.forEach(j=>j.measureInitialState()),g.forEach(j=>{j.render();const $=_.get(j);$&&$.forEach(([_e,et])=>{var tt;(tt=j.getValue(_e))===null||tt===void 0||tt.set(et)})}),b.forEach(j=>j.measureEndState()),b.forEach(j=>{j.suspendedScrollY!==void 0&&window.scrollTo(0,j.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(b=>b.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(b=>{b.readKeyframes(),b.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(g,_,j,$,_e,et=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...g],this.onComplete=_,this.name=j,this.motionValue=$,this.element=_e,this.isAsync=et}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:g,name:_,element:j,motionValue:$}=this;for(let _e=0;_e<g.length;_e++)if(g[_e]===null)if(_e===0){const et=$==null?void 0:$.get(),tt=g[g.length-1];if(et!==void 0)g[0]=et;else if(j&&_){const nt=j.readValue(_,tt);nt!=null&&(g[0]=nt)}g[0]===void 0&&(g[0]=tt),$&&et===void 0&&$.set(g[0])}else g[_e]=g[_e-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=b=>Math.round(b*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(b){return b==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(b,g)=>_=>!!(typeof _=="string"&&singleColorRegex.test(_)&&_.startsWith(b)||g&&!isNullish(_)&&Object.prototype.hasOwnProperty.call(_,g)),splitColor=(b,g,_)=>j=>{if(typeof j!="string")return j;const[$,_e,et,tt]=j.match(floatRegex);return{[b]:parseFloat($),[g]:parseFloat(_e),[_]:parseFloat(et),alpha:tt!==void 0?parseFloat(tt):1}},clampRgbUnit=b=>clamp(0,255,b),rgbUnit={...number,transform:b=>Math.round(clampRgbUnit(b))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:b,green:g,blue:_,alpha:j=1})=>"rgba("+rgbUnit.transform(b)+", "+rgbUnit.transform(g)+", "+rgbUnit.transform(_)+", "+sanitize(alpha.transform(j))+")"};function parseHex(b){let g="",_="",j="",$="";return b.length>5?(g=b.substring(1,3),_=b.substring(3,5),j=b.substring(5,7),$=b.substring(7,9)):(g=b.substring(1,2),_=b.substring(2,3),j=b.substring(3,4),$=b.substring(4,5),g+=g,_+=_,j+=j,$+=$),{red:parseInt(g,16),green:parseInt(_,16),blue:parseInt(j,16),alpha:$?parseInt($,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:b,saturation:g,lightness:_,alpha:j=1})=>"hsla("+Math.round(b)+", "+percent.transform(sanitize(g))+", "+percent.transform(sanitize(_))+", "+sanitize(alpha.transform(j))+")"},color={test:b=>rgba.test(b)||hex.test(b)||hsla.test(b),parse:b=>rgba.test(b)?rgba.parse(b):hsla.test(b)?hsla.parse(b):hex.parse(b),transform:b=>typeof b=="string"?b:b.hasOwnProperty("red")?rgba.transform(b):hsla.transform(b)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(b){var g,_;return isNaN(b)&&typeof b=="string"&&(((g=b.match(floatRegex))===null||g===void 0?void 0:g.length)||0)+(((_=b.match(colorRegex))===null||_===void 0?void 0:_.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(b){const g=b.toString(),_=[],j={color:[],number:[],var:[]},$=[];let _e=0;const tt=g.replace(complexRegex,nt=>(color.test(nt)?(j.color.push(_e),$.push(COLOR_TOKEN),_.push(color.parse(nt))):nt.startsWith(VAR_FUNCTION_TOKEN)?(j.var.push(_e),$.push(VAR_TOKEN),_.push(nt)):(j.number.push(_e),$.push(NUMBER_TOKEN),_.push(parseFloat(nt))),++_e,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:_,split:tt,indexes:j,types:$}}function parseComplexValue(b){return analyseComplexValue(b).values}function createTransformer(b){const{split:g,types:_}=analyseComplexValue(b),j=g.length;return $=>{let _e="";for(let et=0;et<j;et++)if(_e+=g[et],$[et]!==void 0){const tt=_[et];tt===NUMBER_TOKEN?_e+=sanitize($[et]):tt===COLOR_TOKEN?_e+=color.transform($[et]):_e+=$[et]}return _e}}const convertNumbersToZero=b=>typeof b=="number"?0:b;function getAnimatableNone$1(b){const g=parseComplexValue(b);return createTransformer(b)(g.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(b){const[g,_]=b.slice(0,-1).split("(");if(g==="drop-shadow")return b;const[j]=_.match(floatRegex)||[];if(!j)return b;const $=_.replace(j,"");let _e=maxDefaults.has(g)?1:0;return j!==_&&(_e*=100),g+"("+_e+$+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:b=>{const g=b.match(functionRegex);return g?g.map(applyDefaultFilter).join(" "):b}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=b=>defaultValueTypes[b];function getAnimatableNone(b,g){let _=getDefaultValueType(b);return _!==filter&&(_=complex),_.getAnimatableNone?_.getAnimatableNone(g):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(b,g,_){let j=0,$;for(;j<b.length&&!$;){const _e=b[j];typeof _e=="string"&&!invalidTemplates.has(_e)&&analyseComplexValue(_e).values.length&&($=b[j]),j++}if($&&_)for(const _e of g)b[_e]=getAnimatableNone(_,$)}class DOMKeyframesResolver extends KeyframeResolver{constructor(g,_,j,$,_e){super(g,_,j,$,_e,!0)}readKeyframes(){const{unresolvedKeyframes:g,element:_,name:j}=this;if(!_||!_.current)return;super.readKeyframes();for(let nt=0;nt<g.length;nt++){let rt=g[nt];if(typeof rt=="string"&&(rt=rt.trim(),isCSSVariableToken(rt))){const it=getVariableValue(rt,_.current);it!==void 0&&(g[nt]=it),nt===g.length-1&&(this.finalKeyframe=rt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(j)||g.length!==2)return;const[$,_e]=g,et=findDimensionValueType($),tt=findDimensionValueType(_e);if(et!==tt)if(isNumOrPxType(et)&&isNumOrPxType(tt))for(let nt=0;nt<g.length;nt++){const rt=g[nt];typeof rt=="string"&&(g[nt]=parseFloat(rt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:g,name:_}=this,j=[];for(let $=0;$<g.length;$++)isNone(g[$])&&j.push($);j.length&&makeNoneKeyframesAnimatable(g,j,_)}measureInitialState(){const{element:g,unresolvedKeyframes:_,name:j}=this;if(!g||!g.current)return;j==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[j](g.measureViewportBox(),window.getComputedStyle(g.current)),_[0]=this.measuredOrigin;const $=_[_.length-1];$!==void 0&&g.getValue(j,$).jump($,!1)}measureEndState(){var g;const{element:_,name:j,unresolvedKeyframes:$}=this;if(!_||!_.current)return;const _e=_.getValue(j);_e&&_e.jump(this.measuredOrigin,!1);const et=$.length-1,tt=$[et];$[et]=positionalValues[j](_.measureViewportBox(),window.getComputedStyle(_.current)),tt!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=tt),!((g=this.removedTransforms)===null||g===void 0)&&g.length&&this.removedTransforms.forEach(([nt,rt])=>{_.getValue(nt).set(rt)}),this.resolveNoneKeyframes()}}function isGenerator(b){return typeof b=="function"}let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:b=>{now$1=b,queueMicrotask(clearTime)}},isAnimatable=(b,g)=>g==="zIndex"?!1:!!(typeof b=="number"||Array.isArray(b)||typeof b=="string"&&(complex.test(b)||b==="0")&&!b.startsWith("url("));function hasKeyframesChanged(b){const g=b[0];if(b.length===1)return!0;for(let _=0;_<b.length;_++)if(b[_]!==g)return!0}function canAnimate(b,g,_,j){const $=b[0];if($===null)return!1;if(g==="display"||g==="visibility")return!0;const _e=b[b.length-1],et=isAnimatable($,g),tt=isAnimatable(_e,g);return!et||!tt?!1:hasKeyframesChanged(b)||(_==="spring"||isGenerator(_))&&j}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:g=!0,delay:_=0,type:j="keyframes",repeat:$=0,repeatDelay:_e=0,repeatType:et="loop",...tt}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:g,delay:_,type:j,repeat:$,repeatDelay:_e,repeatType:et,...tt},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(g,_){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:j,type:$,velocity:_e,delay:et,onComplete:tt,onUpdate:nt,isGenerator:rt}=this.options;if(!rt&&!canAnimate(g,j,$,_e))if(et)this.options.duration=0;else{nt==null||nt(getFinalKeyframe(g,this.options,_)),tt==null||tt(),this.resolveFinishedPromise();return}const it=this.initPlayback(g,_);it!==!1&&(this._resolved={keyframes:g,finalKeyframe:_,...it},this.onPostResolved())}onPostResolved(){}then(g,_){return this.currentFinishedPromise.then(g,_)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(g=>{this.resolveFinishedPromise=g})}}function velocityPerSecond(b,g){return g?b*(1e3/g):0}const velocitySampleDuration=5;function calcGeneratorVelocity(b,g,_){const j=Math.max(g-velocitySampleDuration,0);return velocityPerSecond(_-b(j),g-j)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:b=800,bounce:g=.25,velocity:_=0,mass:j=1}){let $,_e,et=1-g;et=clamp(minDamping,maxDamping,et),b=clamp(minDuration,maxDuration$1,millisecondsToSeconds(b)),et<1?($=rt=>{const it=rt*et,st=it*b,ot=it-_,lt=calcAngularFreq(rt,et),at=Math.exp(-st);return safeMin-ot/lt*at},_e=rt=>{const st=rt*et*b,ot=st*_+_,lt=Math.pow(et,2)*Math.pow(rt,2)*b,at=Math.exp(-st),ut=calcAngularFreq(Math.pow(rt,2),et);return(-$(rt)+safeMin>0?-1:1)*((ot-lt)*at)/ut}):($=rt=>{const it=Math.exp(-rt*b),st=(rt-_)*b+1;return-safeMin+it*st},_e=rt=>{const it=Math.exp(-rt*b),st=(_-rt)*(b*b);return it*st});const tt=5/b,nt=approximateRoot($,_e,tt);if(b=secondsToMilliseconds(b),isNaN(nt))return{stiffness:100,damping:10,duration:b};{const rt=Math.pow(nt,2)*j;return{stiffness:rt,damping:et*2*Math.sqrt(j*rt),duration:b}}}const rootIterations=12;function approximateRoot(b,g,_){let j=_;for(let $=1;$<rootIterations;$++)j=j-b(j)/g(j);return j}function calcAngularFreq(b,g){return b*Math.sqrt(1-g*g)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(b,g){return g.some(_=>b[_]!==void 0)}function getSpringOptions(b){let g={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...b};if(!isSpringType(b,physicsKeys)&&isSpringType(b,durationKeys)){const _=findSpring(b);g={...g,..._,mass:1},g.isResolvedFromDuration=!0}return g}function spring({keyframes:b,restDelta:g,restSpeed:_,...j}){const $=b[0],_e=b[b.length-1],et={done:!1,value:$},{stiffness:tt,damping:nt,mass:rt,duration:it,velocity:st,isResolvedFromDuration:ot}=getSpringOptions({...j,velocity:-millisecondsToSeconds(j.velocity||0)}),lt=st||0,at=nt/(2*Math.sqrt(tt*rt)),ut=_e-$,dt=millisecondsToSeconds(Math.sqrt(tt/rt)),ct=Math.abs(ut)<5;_||(_=ct?.01:2),g||(g=ct?.005:.5);let ht;if(at<1){const pt=calcAngularFreq(dt,at);ht=mt=>{const ft=Math.exp(-at*dt*mt);return _e-ft*((lt+at*dt*ut)/pt*Math.sin(pt*mt)+ut*Math.cos(pt*mt))}}else if(at===1)ht=pt=>_e-Math.exp(-dt*pt)*(ut+(lt+dt*ut)*pt);else{const pt=dt*Math.sqrt(at*at-1);ht=mt=>{const ft=Math.exp(-at*dt*mt),gt=Math.min(pt*mt,300);return _e-ft*((lt+at*dt*ut)*Math.sinh(gt)+pt*ut*Math.cosh(gt))/pt}}return{calculatedDuration:ot&&it||null,next:pt=>{const mt=ht(pt);if(ot)et.done=pt>=it;else{let ft=0;at<1&&(ft=pt===0?secondsToMilliseconds(lt):calcGeneratorVelocity(ht,pt,mt));const gt=Math.abs(ft)<=_,xt=Math.abs(_e-mt)<=g;et.done=gt&&xt}return et.value=et.done?_e:mt,et}}}function inertia({keyframes:b,velocity:g=0,power:_=.8,timeConstant:j=325,bounceDamping:$=10,bounceStiffness:_e=500,modifyTarget:et,min:tt,max:nt,restDelta:rt=.5,restSpeed:it}){const st=b[0],ot={done:!1,value:st},lt=vt=>tt!==void 0&&vt<tt||nt!==void 0&&vt>nt,at=vt=>tt===void 0?nt:nt===void 0||Math.abs(tt-vt)<Math.abs(nt-vt)?tt:nt;let ut=_*g;const dt=st+ut,ct=et===void 0?dt:et(dt);ct!==dt&&(ut=ct-st);const ht=vt=>-ut*Math.exp(-vt/j),pt=vt=>ct+ht(vt),mt=vt=>{const St=ht(vt),Tt=pt(vt);ot.done=Math.abs(St)<=rt,ot.value=ot.done?ct:Tt};let ft,gt;const xt=vt=>{lt(ot.value)&&(ft=vt,gt=spring({keyframes:[ot.value,at(ot.value)],velocity:calcGeneratorVelocity(pt,vt,ot.value),damping:$,stiffness:_e,restDelta:rt,restSpeed:it}))};return xt(0),{calculatedDuration:null,next:vt=>{let St=!1;return!gt&&ft===void 0&&(St=!0,mt(vt),xt(vt)),ft!==void 0&&vt>=ft?gt.next(vt-ft):(!St&&mt(vt),ot)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=b=>Array.isArray(b)&&typeof b[0]!="number",isBezierDefinition=b=>Array.isArray(b)&&typeof b[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=b=>{if(isBezierDefinition(b)){invariant(b.length===4);const[g,_,j,$]=b;return cubicBezier(g,_,j,$)}else if(typeof b=="string")return invariant(easingLookup[b]!==void 0),easingLookup[b];return b},combineFunctions=(b,g)=>_=>g(b(_)),pipe=(...b)=>b.reduce(combineFunctions),progress=(b,g,_)=>{const j=g-b;return j===0?1:(_-b)/j},mixNumber$1=(b,g,_)=>b+(g-b)*_;function hueToRgb(b,g,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?b+(g-b)*6*_:_<1/2?g:_<2/3?b+(g-b)*(2/3-_)*6:b}function hslaToRgba({hue:b,saturation:g,lightness:_,alpha:j}){b/=360,g/=100,_/=100;let $=0,_e=0,et=0;if(!g)$=_e=et=_;else{const tt=_<.5?_*(1+g):_+g-_*g,nt=2*_-tt;$=hueToRgb(nt,tt,b+1/3),_e=hueToRgb(nt,tt,b),et=hueToRgb(nt,tt,b-1/3)}return{red:Math.round($*255),green:Math.round(_e*255),blue:Math.round(et*255),alpha:j}}function mixImmediate(b,g){return _=>_>0?g:b}const mixLinearColor=(b,g,_)=>{const j=b*b,$=_*(g*g-j)+j;return $<0?0:Math.sqrt($)},colorTypes=[hex,rgba,hsla],getColorType=b=>colorTypes.find(g=>g.test(b));function asRGBA(b){const g=getColorType(b);if(!g)return!1;let _=g.parse(b);return g===hsla&&(_=hslaToRgba(_)),_}const mixColor=(b,g)=>{const _=asRGBA(b),j=asRGBA(g);if(!_||!j)return mixImmediate(b,g);const $={..._};return _e=>($.red=mixLinearColor(_.red,j.red,_e),$.green=mixLinearColor(_.green,j.green,_e),$.blue=mixLinearColor(_.blue,j.blue,_e),$.alpha=mixNumber$1(_.alpha,j.alpha,_e),rgba.transform($))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(b,g){return invisibleValues.has(b)?_=>_<=0?b:g:_=>_>=1?g:b}function mixNumber(b,g){return _=>mixNumber$1(b,g,_)}function getMixer(b){return typeof b=="number"?mixNumber:typeof b=="string"?isCSSVariableToken(b)?mixImmediate:color.test(b)?mixColor:mixComplex:Array.isArray(b)?mixArray:typeof b=="object"?color.test(b)?mixColor:mixObject:mixImmediate}function mixArray(b,g){const _=[...b],j=_.length,$=b.map((_e,et)=>getMixer(_e)(_e,g[et]));return _e=>{for(let et=0;et<j;et++)_[et]=$[et](_e);return _}}function mixObject(b,g){const _={...b,...g},j={};for(const $ in _)b[$]!==void 0&&g[$]!==void 0&&(j[$]=getMixer(b[$])(b[$],g[$]));return $=>{for(const _e in j)_[_e]=j[_e]($);return _}}function matchOrder(b,g){var _;const j=[],$={color:0,var:0,number:0};for(let _e=0;_e<g.values.length;_e++){const et=g.types[_e],tt=b.indexes[et][$[et]],nt=(_=b.values[tt])!==null&&_!==void 0?_:0;j[_e]=nt,$[et]++}return j}const mixComplex=(b,g)=>{const _=complex.createTransformer(g),j=analyseComplexValue(b),$=analyseComplexValue(g);return j.indexes.var.length===$.indexes.var.length&&j.indexes.color.length===$.indexes.color.length&&j.indexes.number.length>=$.indexes.number.length?invisibleValues.has(b)&&!$.values.length||invisibleValues.has(g)&&!j.values.length?mixVisibility(b,g):pipe(mixArray(matchOrder(j,$),$.values),_):mixImmediate(b,g)};function mix(b,g,_){return typeof b=="number"&&typeof g=="number"&&typeof _=="number"?mixNumber$1(b,g,_):getMixer(b)(b,g)}function createMixers(b,g,_){const j=[],$=_||mix,_e=b.length-1;for(let et=0;et<_e;et++){let tt=$(b[et],b[et+1]);if(g){const nt=Array.isArray(g)?g[et]||noop$1:g;tt=pipe(nt,tt)}j.push(tt)}return j}function interpolate(b,g,{clamp:_=!0,ease:j,mixer:$}={}){const _e=b.length;if(invariant(_e===g.length),_e===1)return()=>g[0];if(_e===2&&b[0]===b[1])return()=>g[1];b[0]>b[_e-1]&&(b=[...b].reverse(),g=[...g].reverse());const et=createMixers(g,j,$),tt=et.length,nt=rt=>{let it=0;if(tt>1)for(;it<b.length-2&&!(rt<b[it+1]);it++);const st=progress(b[it],b[it+1],rt);return et[it](st)};return _?rt=>nt(clamp(b[0],b[_e-1],rt)):nt}function fillOffset(b,g){const _=b[b.length-1];for(let j=1;j<=g;j++){const $=progress(0,g,j);b.push(mixNumber$1(_,1,$))}}function defaultOffset(b){const g=[0];return fillOffset(g,b.length-1),g}function convertOffsetToTimes(b,g){return b.map(_=>_*g)}function defaultEasing(b,g){return b.map(()=>g||easeInOut).splice(0,b.length-1)}function keyframes({duration:b=300,keyframes:g,times:_,ease:j="easeInOut"}){const $=isEasingArray(j)?j.map(easingDefinitionToFunction):easingDefinitionToFunction(j),_e={done:!1,value:g[0]},et=convertOffsetToTimes(_&&_.length===g.length?_:defaultOffset(g),b),tt=interpolate(et,g,{ease:Array.isArray($)?$:defaultEasing(g,$)});return{calculatedDuration:b,next:nt=>(_e.value=tt(nt),_e.done=nt>=b,_e)}}const maxGeneratorDuration=2e4;function calcGeneratorDuration(b){let g=0;const _=50;let j=b.next(g);for(;!j.done&&g<maxGeneratorDuration;)g+=_,j=b.next(g);return g>=maxGeneratorDuration?1/0:g}const frameloopDriver=b=>{const g=({timestamp:_})=>b(_);return{start:()=>frame.update(g,!0),stop:()=>cancelFrame(g),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=b=>b/100;class MainThreadAnimation extends BaseAnimation{constructor(g){super(g),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:nt}=this.options;nt&&nt()};const{name:_,motionValue:j,element:$,keyframes:_e}=this.options,et=($==null?void 0:$.KeyframeResolver)||KeyframeResolver,tt=(nt,rt)=>this.onKeyframesResolved(nt,rt);this.resolver=new et(_e,tt,_,j,$),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(g){const{type:_="keyframes",repeat:j=0,repeatDelay:$=0,repeatType:_e,velocity:et=0}=this.options,tt=isGenerator(_)?_:generators[_]||keyframes;let nt,rt;tt!==keyframes&&typeof g[0]!="number"&&(nt=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const it=tt({...this.options,keyframes:g});_e==="mirror"&&(rt=tt({...this.options,keyframes:[...g].reverse(),velocity:-et})),it.calculatedDuration===null&&(it.calculatedDuration=calcGeneratorDuration(it));const{calculatedDuration:st}=it,ot=st+$,lt=ot*(j+1)-$;return{generator:it,mirroredGenerator:rt,mapPercentToKeyframes:nt,calculatedDuration:st,resolvedDuration:ot,totalDuration:lt}}onPostResolved(){const{autoplay:g=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!g?this.pause():this.state=this.pendingPlayState}tick(g,_=!1){const{resolved:j}=this;if(!j){const{keyframes:vt}=this.options;return{done:!0,value:vt[vt.length-1]}}const{finalKeyframe:$,generator:_e,mirroredGenerator:et,mapPercentToKeyframes:tt,keyframes:nt,calculatedDuration:rt,totalDuration:it,resolvedDuration:st}=j;if(this.startTime===null)return _e.next(0);const{delay:ot,repeat:lt,repeatType:at,repeatDelay:ut,onUpdate:dt}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,g):this.speed<0&&(this.startTime=Math.min(g-it/this.speed,this.startTime)),_?this.currentTime=g:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(g-this.startTime)*this.speed;const ct=this.currentTime-ot*(this.speed>=0?1:-1),ht=this.speed>=0?ct<0:ct>it;this.currentTime=Math.max(ct,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=it);let pt=this.currentTime,mt=_e;if(lt){const vt=Math.min(this.currentTime,it)/st;let St=Math.floor(vt),Tt=vt%1;!Tt&&vt>=1&&(Tt=1),Tt===1&&St--,St=Math.min(St,lt+1),!!(St%2)&&(at==="reverse"?(Tt=1-Tt,ut&&(Tt-=ut/st)):at==="mirror"&&(mt=et)),pt=clamp(0,1,Tt)*st}const ft=ht?{done:!1,value:nt[0]}:mt.next(pt);tt&&(ft.value=tt(ft.value));let{done:gt}=ft;!ht&&rt!==null&&(gt=this.speed>=0?this.currentTime>=it:this.currentTime<=0);const xt=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&gt);return xt&&$!==void 0&&(ft.value=getFinalKeyframe(nt,this.options,$)),dt&&dt(ft.value),xt&&this.finish(),ft}get duration(){const{resolved:g}=this;return g?millisecondsToSeconds(g.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(g){g=secondsToMilliseconds(g),this.currentTime=g,this.holdTime!==null||this.speed===0?this.holdTime=g:this.driver&&(this.startTime=this.driver.now()-g/this.speed)}get speed(){return this.playbackSpeed}set speed(g){const _=this.playbackSpeed!==g;this.playbackSpeed=g,_&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:g=frameloopDriver,onPlay:_,startTime:j}=this.options;this.driver||(this.driver=g(_e=>this.tick(_e))),_&&_();const $=this.driver.now();this.holdTime!==null?this.startTime=$-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=$):this.startTime=j??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var g;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(g=this.currentTime)!==null&&g!==void 0?g:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:g}=this.options;g&&g()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(g){return this.startTime=0,this.tick(g,!0)}}function animateValue(b){return new MainThreadAnimation(b)}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),resolution=10,generateLinearEasing=(b,g)=>{let _="";const j=Math.max(Math.round(g/resolution),2);for(let $=0;$<j;$++)_+=b(progress(0,j-1,$))+", ";return`linear(${_.substring(0,_.length-2)})`};function memo(b){let g;return()=>(g===void 0&&(g=b()),g)}const supportsFlags={linearEasing:void 0};function memoSupports(b,g){const _=memo(b);return()=>{var j;return(j=supportsFlags[g])!==null&&j!==void 0?j:_()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(b){return!!(typeof b=="function"&&supportsLinearEasing()||!b||typeof b=="string"&&(b in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(b)||Array.isArray(b)&&b.every(isWaapiSupportedEasing))}const cubicBezierAsString=([b,g,_,j])=>`cubic-bezier(${b}, ${g}, ${_}, ${j})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(b,g){if(b)return typeof b=="function"&&supportsLinearEasing()?generateLinearEasing(b,g):isBezierDefinition(b)?cubicBezierAsString(b):Array.isArray(b)?b.map(_=>mapEasingToNativeEasing(_,g)||supportedWaapiEasing.easeOut):supportedWaapiEasing[b]}function startWaapiAnimation(b,g,_,{delay:j=0,duration:$=300,repeat:_e=0,repeatType:et="loop",ease:tt="easeInOut",times:nt}={}){const rt={[g]:_};nt&&(rt.offset=nt);const it=mapEasingToNativeEasing(tt,$);return Array.isArray(it)&&(rt.easing=it),b.animate(rt,{delay:j,duration:$,easing:Array.isArray(it)?"linear":it,fill:"both",iterations:_e+1,direction:et==="reverse"?"alternate":"normal"})}function attachTimeline(b,g){b.timeline=g,b.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(b){return isGenerator(b.type)||b.type==="spring"||!isWaapiSupportedEasing(b.ease)}function pregenerateKeyframes(b,g){const _=new MainThreadAnimation({...g,keyframes:b,repeat:0,delay:0,isGenerator:!0});let j={done:!1,value:b[0]};const $=[];let _e=0;for(;!j.done&&_e<maxDuration;)j=_.sample(_e),$.push(j.value),_e+=sampleDelta;return{times:void 0,keyframes:$,duration:_e-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(b){return b in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(g){super(g);const{name:_,motionValue:j,element:$,keyframes:_e}=this.options;this.resolver=new DOMKeyframesResolver(_e,(et,tt)=>this.onKeyframesResolved(et,tt),_,j,$),this.resolver.scheduleResolve()}initPlayback(g,_){var j;let{duration:$=300,times:_e,ease:et,type:tt,motionValue:nt,name:rt,startTime:it}=this.options;if(!(!((j=nt.owner)===null||j===void 0)&&j.current))return!1;if(typeof et=="string"&&supportsLinearEasing()&&isUnsupportedEase(et)&&(et=unsupportedEasingFunctions[et]),requiresPregeneratedKeyframes(this.options)){const{onComplete:ot,onUpdate:lt,motionValue:at,element:ut,...dt}=this.options,ct=pregenerateKeyframes(g,dt);g=ct.keyframes,g.length===1&&(g[1]=g[0]),$=ct.duration,_e=ct.times,et=ct.ease,tt="keyframes"}const st=startWaapiAnimation(nt.owner.current,rt,g,{...this.options,duration:$,times:_e,ease:et});return st.startTime=it??this.calcStartTime(),this.pendingTimeline?(attachTimeline(st,this.pendingTimeline),this.pendingTimeline=void 0):st.onfinish=()=>{const{onComplete:ot}=this.options;nt.set(getFinalKeyframe(g,this.options,_)),ot&&ot(),this.cancel(),this.resolveFinishedPromise()},{animation:st,duration:$,times:_e,type:tt,ease:et,keyframes:g}}get duration(){const{resolved:g}=this;if(!g)return 0;const{duration:_}=g;return millisecondsToSeconds(_)}get time(){const{resolved:g}=this;if(!g)return 0;const{animation:_}=g;return millisecondsToSeconds(_.currentTime||0)}set time(g){const{resolved:_}=this;if(!_)return;const{animation:j}=_;j.currentTime=secondsToMilliseconds(g)}get speed(){const{resolved:g}=this;if(!g)return 1;const{animation:_}=g;return _.playbackRate}set speed(g){const{resolved:_}=this;if(!_)return;const{animation:j}=_;j.playbackRate=g}get state(){const{resolved:g}=this;if(!g)return"idle";const{animation:_}=g;return _.playState}get startTime(){const{resolved:g}=this;if(!g)return null;const{animation:_}=g;return _.startTime}attachTimeline(g){if(!this._resolved)this.pendingTimeline=g;else{const{resolved:_}=this;if(!_)return noop$1;const{animation:j}=_;attachTimeline(j,g)}return noop$1}play(){if(this.isStopped)return;const{resolved:g}=this;if(!g)return;const{animation:_}=g;_.playState==="finished"&&this.updateFinishedPromise(),_.play()}pause(){const{resolved:g}=this;if(!g)return;const{animation:_}=g;_.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:g}=this;if(!g)return;const{animation:_,keyframes:j,duration:$,type:_e,ease:et,times:tt}=g;if(_.playState==="idle"||_.playState==="finished")return;if(this.time){const{motionValue:rt,onUpdate:it,onComplete:st,element:ot,...lt}=this.options,at=new MainThreadAnimation({...lt,keyframes:j,duration:$,type:_e,ease:et,times:tt,isGenerator:!0}),ut=secondsToMilliseconds(this.time);rt.setWithVelocity(at.sample(ut-sampleDelta).value,at.sample(ut).value,sampleDelta)}const{onStop:nt}=this.options;nt&&nt(),this.cancel()}complete(){const{resolved:g}=this;g&&g.animation.finish()}cancel(){const{resolved:g}=this;g&&g.animation.cancel()}static supports(g){const{motionValue:_,name:j,repeatDelay:$,repeatType:_e,damping:et,type:tt}=g;return supportsWaapi()&&j&&acceleratedValues.has(j)&&_&&_.owner&&_.owner.current instanceof HTMLElement&&!_.owner.getProps().onUpdate&&!$&&_e!=="mirror"&&et!==0&&tt!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(g){this.stop=()=>this.runAll("stop"),this.animations=g.filter(Boolean)}then(g,_){return Promise.all(this.animations).then(g).catch(_)}getAll(g){return this.animations[0][g]}setAll(g,_){for(let j=0;j<this.animations.length;j++)this.animations[j][g]=_}attachTimeline(g,_){const j=this.animations.map($=>supportsScrollTimeline()&&$.attachTimeline?$.attachTimeline(g):_($));return()=>{j.forEach(($,_e)=>{$&&$(),this.animations[_e].stop()})}}get time(){return this.getAll("time")}set time(g){this.setAll("time",g)}get speed(){return this.getAll("speed")}set speed(g){this.setAll("speed",g)}get startTime(){return this.getAll("startTime")}get duration(){let g=0;for(let _=0;_<this.animations.length;_++)g=Math.max(g,this.animations[_].duration);return g}runAll(g){this.animations.forEach(_=>_[g]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:b,delay:g,delayChildren:_,staggerChildren:j,staggerDirection:$,repeat:_e,repeatType:et,repeatDelay:tt,from:nt,elapsed:rt,...it}){return!!Object.keys(it).length}const animateMotionValue=(b,g,_,j={},$,_e)=>et=>{const tt=getValueTransition(j,b)||{},nt=tt.delay||j.delay||0;let{elapsed:rt=0}=j;rt=rt-secondsToMilliseconds(nt);let it={keyframes:Array.isArray(_)?_:[null,_],ease:"easeOut",velocity:g.getVelocity(),...tt,delay:-rt,onUpdate:ot=>{g.set(ot),tt.onUpdate&&tt.onUpdate(ot)},onComplete:()=>{et(),tt.onComplete&&tt.onComplete()},name:b,motionValue:g,element:_e?void 0:$};isTransitionDefined(tt)||(it={...it,...getDefaultTransition(b,it)}),it.duration&&(it.duration=secondsToMilliseconds(it.duration)),it.repeatDelay&&(it.repeatDelay=secondsToMilliseconds(it.repeatDelay)),it.from!==void 0&&(it.keyframes[0]=it.from);let st=!1;if((it.type===!1||it.duration===0&&!it.repeatDelay)&&(it.duration=0,it.delay===0&&(st=!0)),st&&!_e&&g.get()!==void 0){const ot=getFinalKeyframe(it.keyframes,tt);if(ot!==void 0)return frame.update(()=>{it.onUpdate(ot),it.onComplete()}),new GroupPlaybackControls([])}return!_e&&AcceleratedAnimation.supports(it)?new AcceleratedAnimation(it):new MainThreadAnimation(it)},isCustomValue=b=>!!(b&&typeof b=="object"&&b.mix&&b.toValue),resolveFinalValueInKeyframes=b=>isKeyframesTarget(b)?b[b.length-1]||0:b;function addUniqueItem(b,g){b.indexOf(g)===-1&&b.push(g)}function removeItem(b,g){const _=b.indexOf(g);_>-1&&b.splice(_,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(g){return addUniqueItem(this.subscriptions,g),()=>removeItem(this.subscriptions,g)}notify(g,_,j){const $=this.subscriptions.length;if($)if($===1)this.subscriptions[0](g,_,j);else for(let _e=0;_e<$;_e++){const et=this.subscriptions[_e];et&&et(g,_,j)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=b=>!isNaN(parseFloat(b));class MotionValue{constructor(g,_={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(j,$=!0)=>{const _e=time.now();this.updatedAt!==_e&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(j),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),$&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(g),this.owner=_.owner}setCurrent(g){this.current=g,this.updatedAt=time.now(),this.canTrackVelocity===null&&g!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(g=this.current){this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt}onChange(g){return this.on("change",g)}on(g,_){this.events[g]||(this.events[g]=new SubscriptionManager);const j=this.events[g].add(_);return g==="change"?()=>{j(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:j}clearListeners(){for(const g in this.events)this.events[g].clear()}attach(g,_){this.passiveEffect=g,this.stopPassiveEffect=_}set(g,_=!0){!_||!this.passiveEffect?this.updateAndNotify(g,_):this.passiveEffect(g,this.updateAndNotify)}setWithVelocity(g,_,j){this.set(_),this.prev=void 0,this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt-j}jump(g,_=!0){this.updateAndNotify(g),this.prev=g,this.prevUpdatedAt=this.prevFrameValue=void 0,_&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const g=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||g-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const _=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),_)}start(g){return this.stop(),new Promise(_=>{this.hasAnimated=!0,this.animation=g(_),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(b,g){return new MotionValue(b,g)}function setMotionValue(b,g,_){b.hasValue(g)?b.getValue(g).set(_):b.addValue(g,motionValue(_))}function setTarget(b,g){const _=resolveVariant(b,g);let{transitionEnd:j={},transition:$={},..._e}=_||{};_e={..._e,...j};for(const et in _e){const tt=resolveFinalValueInKeyframes(_e[et]);setMotionValue(b,et,tt)}}const camelToDash=b=>b.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(b){return b.props[optimizedAppearDataAttribute]}const isMotionValue=b=>!!(b&&b.getVelocity);function isWillChangeMotionValue(b){return!!(isMotionValue(b)&&b.add)}function addValueToWillChange(b,g){const _=b.getValue("willChange");if(isWillChangeMotionValue(_))return _.add(g)}function shouldBlockAnimation({protectedKeys:b,needsAnimating:g},_){const j=b.hasOwnProperty(_)&&g[_]!==!0;return g[_]=!1,j}function animateTarget(b,g,{delay:_=0,transitionOverride:j,type:$}={}){var _e;let{transition:et=b.getDefaultTransition(),transitionEnd:tt,...nt}=g;j&&(et=j);const rt=[],it=$&&b.animationState&&b.animationState.getState()[$];for(const st in nt){const ot=b.getValue(st,(_e=b.latestValues[st])!==null&&_e!==void 0?_e:null),lt=nt[st];if(lt===void 0||it&&shouldBlockAnimation(it,st))continue;const at={delay:_,...getValueTransition(et||{},st)};let ut=!1;if(window.MotionHandoffAnimation){const ct=getOptimisedAppearId(b);if(ct){const ht=window.MotionHandoffAnimation(ct,st,frame);ht!==null&&(at.startTime=ht,ut=!0)}}addValueToWillChange(b,st),ot.start(animateMotionValue(st,ot,lt,b.shouldReduceMotion&&transformProps.has(st)?{type:!1}:at,b,ut));const dt=ot.animation;dt&&rt.push(dt)}return tt&&Promise.all(rt).then(()=>{frame.update(()=>{tt&&setTarget(b,tt)})}),rt}function animateVariant(b,g,_={}){var j;const $=resolveVariant(b,g,_.type==="exit"?(j=b.presenceContext)===null||j===void 0?void 0:j.custom:void 0);let{transition:_e=b.getDefaultTransition()||{}}=$||{};_.transitionOverride&&(_e=_.transitionOverride);const et=$?()=>Promise.all(animateTarget(b,$,_)):()=>Promise.resolve(),tt=b.variantChildren&&b.variantChildren.size?(rt=0)=>{const{delayChildren:it=0,staggerChildren:st,staggerDirection:ot}=_e;return animateChildren(b,g,it+rt,st,ot,_)}:()=>Promise.resolve(),{when:nt}=_e;if(nt){const[rt,it]=nt==="beforeChildren"?[et,tt]:[tt,et];return rt().then(()=>it())}else return Promise.all([et(),tt(_.delay)])}function animateChildren(b,g,_=0,j=0,$=1,_e){const et=[],tt=(b.variantChildren.size-1)*j,nt=$===1?(rt=0)=>rt*j:(rt=0)=>tt-rt*j;return Array.from(b.variantChildren).sort(sortByTreeOrder).forEach((rt,it)=>{rt.notify("AnimationStart",g),et.push(animateVariant(rt,g,{..._e,delay:_+nt(it)}).then(()=>rt.notify("AnimationComplete",g)))}),Promise.all(et)}function sortByTreeOrder(b,g){return b.sortNodePosition(g)}function animateVisualElement(b,g,_={}){b.notify("AnimationStart",g);let j;if(Array.isArray(g)){const $=g.map(_e=>animateVariant(b,_e,_));j=Promise.all($)}else if(typeof g=="string")j=animateVariant(b,g,_);else{const $=typeof g=="function"?resolveVariant(b,g,_.custom):g;j=Promise.all(animateTarget(b,$,_))}return j.then(()=>{b.notify("AnimationComplete",g)})}const numVariantProps=variantProps.length;function getVariantContext(b){if(!b)return;if(!b.isControllingVariants){const _=b.parent?getVariantContext(b.parent)||{}:{};return b.props.initial!==void 0&&(_.initial=b.props.initial),_}const g={};for(let _=0;_<numVariantProps;_++){const j=variantProps[_],$=b.props[j];(isVariantLabel($)||$===!1)&&(g[j]=$)}return g}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(b){return g=>Promise.all(g.map(({animation:_,options:j})=>animateVisualElement(b,_,j)))}function createAnimationState(b){let g=animateList(b),_=createState(),j=!0;const $=nt=>(rt,it)=>{var st;const ot=resolveVariant(b,it,nt==="exit"?(st=b.presenceContext)===null||st===void 0?void 0:st.custom:void 0);if(ot){const{transition:lt,transitionEnd:at,...ut}=ot;rt={...rt,...ut,...at}}return rt};function _e(nt){g=nt(b)}function et(nt){const{props:rt}=b,it=getVariantContext(b.parent)||{},st=[],ot=new Set;let lt={},at=1/0;for(let dt=0;dt<numAnimationTypes;dt++){const ct=reversePriorityOrder[dt],ht=_[ct],pt=rt[ct]!==void 0?rt[ct]:it[ct],mt=isVariantLabel(pt),ft=ct===nt?ht.isActive:null;ft===!1&&(at=dt);let gt=pt===it[ct]&&pt!==rt[ct]&&mt;if(gt&&j&&b.manuallyAnimateOnMount&&(gt=!1),ht.protectedKeys={...lt},!ht.isActive&&ft===null||!pt&&!ht.prevProp||isAnimationControls(pt)||typeof pt=="boolean")continue;const xt=checkVariantsDidChange(ht.prevProp,pt);let vt=xt||ct===nt&&ht.isActive&&!gt&&mt||dt>at&&mt,St=!1;const Tt=Array.isArray(pt)?pt:[pt];let bt=Tt.reduce($(ct),{});ft===!1&&(bt={});const{prevResolvedValues:At={}}=ht,Pt={...At,...bt},en=zt=>{vt=!0,ot.has(zt)&&(St=!0,ot.delete(zt)),ht.needsAnimating[zt]=!0;const Ht=b.getValue(zt);Ht&&(Ht.liveStyle=!1)};for(const zt in Pt){const Ht=bt[zt],Rt=At[zt];if(lt.hasOwnProperty(zt))continue;let jt=!1;isKeyframesTarget(Ht)&&isKeyframesTarget(Rt)?jt=!shallowCompare(Ht,Rt):jt=Ht!==Rt,jt?Ht!=null?en(zt):ot.add(zt):Ht!==void 0&&ot.has(zt)?en(zt):ht.protectedKeys[zt]=!0}ht.prevProp=pt,ht.prevResolvedValues=bt,ht.isActive&&(lt={...lt,...bt}),j&&b.blockInitialAnimation&&(vt=!1),vt&&(!(gt&&xt)||St)&&st.push(...Tt.map(zt=>({animation:zt,options:{type:ct}})))}if(ot.size){const dt={};ot.forEach(ct=>{const ht=b.getBaseTarget(ct),pt=b.getValue(ct);pt&&(pt.liveStyle=!0),dt[ct]=ht??null}),st.push({animation:dt})}let ut=!!st.length;return j&&(rt.initial===!1||rt.initial===rt.animate)&&!b.manuallyAnimateOnMount&&(ut=!1),j=!1,ut?g(st):Promise.resolve()}function tt(nt,rt){var it;if(_[nt].isActive===rt)return Promise.resolve();(it=b.variantChildren)===null||it===void 0||it.forEach(ot=>{var lt;return(lt=ot.animationState)===null||lt===void 0?void 0:lt.setActive(nt,rt)}),_[nt].isActive=rt;const st=et(nt);for(const ot in _)_[ot].protectedKeys={};return st}return{animateChanges:et,setActive:tt,setAnimateFunction:_e,getState:()=>_,reset:()=>{_=createState(),j=!0}}}function checkVariantsDidChange(b,g){return typeof g=="string"?g!==b:Array.isArray(g)?!shallowCompare(g,b):!1}function createTypeState(b=!1){return{isActive:b,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(g){this.isMounted=!1,this.node=g}update(){}}class AnimationFeature extends Feature{constructor(g){super(g),g.animationState||(g.animationState=createAnimationState(g))}updateAnimationControlsSubscription(){const{animate:g}=this.node.getProps();isAnimationControls(g)&&(this.unmountControls=g.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:g}=this.node.getProps(),{animate:_}=this.node.prevProps||{};g!==_&&this.updateAnimationControlsSubscription()}unmount(){var g;this.node.animationState.reset(),(g=this.unmountControls)===null||g===void 0||g.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:g,onExitComplete:_}=this.node.presenceContext,{isPresent:j}=this.node.prevPresenceContext||{};if(!this.node.animationState||g===j)return;const $=this.node.animationState.setActive("exit",!g);_&&!g&&$.then(()=>_(this.id))}mount(){const{register:g}=this.node.presenceContext||{};g&&(this.unmount=g(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isPrimaryPointer=b=>b.pointerType==="mouse"?typeof b.button!="number"||b.button<=0:b.isPrimary!==!1;function extractEventInfo(b,g="page"){return{point:{x:b[`${g}X`],y:b[`${g}Y`]}}}const addPointerInfo=b=>g=>isPrimaryPointer(g)&&b(g,extractEventInfo(g));function addDomEvent(b,g,_,j={passive:!0}){return b.addEventListener(g,_,j),()=>b.removeEventListener(g,_)}function addPointerEvent(b,g,_,j){return addDomEvent(b,g,addPointerInfo(_),j)}const distance=(b,g)=>Math.abs(b-g);function distance2D(b,g){const _=distance(b.x,g.x),j=distance(b.y,g.y);return Math.sqrt(_**2+j**2)}class PanSession{constructor(g,_,{transformPagePoint:j,contextWindow:$,dragSnapToOrigin:_e=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const st=getPanInfo(this.lastMoveEventInfo,this.history),ot=this.startEvent!==null,lt=distance2D(st.offset,{x:0,y:0})>=3;if(!ot&&!lt)return;const{point:at}=st,{timestamp:ut}=frameData;this.history.push({...at,timestamp:ut});const{onStart:dt,onMove:ct}=this.handlers;ot||(dt&&dt(this.lastMoveEvent,st),this.startEvent=this.lastMoveEvent),ct&&ct(this.lastMoveEvent,st)},this.handlePointerMove=(st,ot)=>{this.lastMoveEvent=st,this.lastMoveEventInfo=transformPoint(ot,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(st,ot)=>{this.end();const{onEnd:lt,onSessionEnd:at,resumeAnimation:ut}=this.handlers;if(this.dragSnapToOrigin&&ut&&ut(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const dt=getPanInfo(st.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(ot,this.transformPagePoint),this.history);this.startEvent&&lt&&lt(st,dt),at&&at(st,dt)},!isPrimaryPointer(g))return;this.dragSnapToOrigin=_e,this.handlers=_,this.transformPagePoint=j,this.contextWindow=$||window;const et=extractEventInfo(g),tt=transformPoint(et,this.transformPagePoint),{point:nt}=tt,{timestamp:rt}=frameData;this.history=[{...nt,timestamp:rt}];const{onSessionStart:it}=_;it&&it(g,getPanInfo(tt,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(g){this.handlers=g}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(b,g){return g?{point:g(b.point)}:b}function subtractPoint(b,g){return{x:b.x-g.x,y:b.y-g.y}}function getPanInfo({point:b},g){return{point:b,delta:subtractPoint(b,lastDevicePoint(g)),offset:subtractPoint(b,startDevicePoint(g)),velocity:getVelocity(g,.1)}}function startDevicePoint(b){return b[0]}function lastDevicePoint(b){return b[b.length-1]}function getVelocity(b,g){if(b.length<2)return{x:0,y:0};let _=b.length-1,j=null;const $=lastDevicePoint(b);for(;_>=0&&(j=b[_],!($.timestamp-j.timestamp>secondsToMilliseconds(g)));)_--;if(!j)return{x:0,y:0};const _e=millisecondsToSeconds($.timestamp-j.timestamp);if(_e===0)return{x:0,y:0};const et={x:($.x-j.x)/_e,y:($.y-j.y)/_e};return et.x===1/0&&(et.x=0),et.y===1/0&&(et.y=0),et}function createLock(b){let g=null;return()=>{const _=()=>{g=null};return g===null?(g=b,_):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(b){let g=!1;if(b==="y")g=globalVerticalLock();else if(b==="x")g=globalHorizontalLock();else{const _=globalHorizontalLock(),j=globalVerticalLock();_&&j?g=()=>{_(),j()}:(_&&_(),j&&j())}return g}function isDragActive(){const b=getGlobalLock(!0);return b?(b(),!1):!0}function isRefObject(b){return b&&typeof b=="object"&&Object.prototype.hasOwnProperty.call(b,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(b){return b.max-b.min}function isNear$1(b,g,_){return Math.abs(b-g)<=_}function calcAxisDelta(b,g,_,j=.5){b.origin=j,b.originPoint=mixNumber$1(g.min,g.max,b.origin),b.scale=calcLength(_)/calcLength(g),b.translate=mixNumber$1(_.min,_.max,b.origin)-b.originPoint,(b.scale>=SCALE_MIN&&b.scale<=SCALE_MAX||isNaN(b.scale))&&(b.scale=1),(b.translate>=TRANSLATE_MIN&&b.translate<=TRANSLATE_MAX||isNaN(b.translate))&&(b.translate=0)}function calcBoxDelta(b,g,_,j){calcAxisDelta(b.x,g.x,_.x,j?j.originX:void 0),calcAxisDelta(b.y,g.y,_.y,j?j.originY:void 0)}function calcRelativeAxis(b,g,_){b.min=_.min+g.min,b.max=b.min+calcLength(g)}function calcRelativeBox(b,g,_){calcRelativeAxis(b.x,g.x,_.x),calcRelativeAxis(b.y,g.y,_.y)}function calcRelativeAxisPosition(b,g,_){b.min=g.min-_.min,b.max=b.min+calcLength(g)}function calcRelativePosition(b,g,_){calcRelativeAxisPosition(b.x,g.x,_.x),calcRelativeAxisPosition(b.y,g.y,_.y)}function applyConstraints(b,{min:g,max:_},j){return g!==void 0&&b<g?b=j?mixNumber$1(g,b,j.min):Math.max(b,g):_!==void 0&&b>_&&(b=j?mixNumber$1(_,b,j.max):Math.min(b,_)),b}function calcRelativeAxisConstraints(b,g,_){return{min:g!==void 0?b.min+g:void 0,max:_!==void 0?b.max+_-(b.max-b.min):void 0}}function calcRelativeConstraints(b,{top:g,left:_,bottom:j,right:$}){return{x:calcRelativeAxisConstraints(b.x,_,$),y:calcRelativeAxisConstraints(b.y,g,j)}}function calcViewportAxisConstraints(b,g){let _=g.min-b.min,j=g.max-b.max;return g.max-g.min<b.max-b.min&&([_,j]=[j,_]),{min:_,max:j}}function calcViewportConstraints(b,g){return{x:calcViewportAxisConstraints(b.x,g.x),y:calcViewportAxisConstraints(b.y,g.y)}}function calcOrigin$1(b,g){let _=.5;const j=calcLength(b),$=calcLength(g);return $>j?_=progress(g.min,g.max-j,b.min):j>$&&(_=progress(b.min,b.max-$,g.min)),clamp(0,1,_)}function rebaseAxisConstraints(b,g){const _={};return g.min!==void 0&&(_.min=g.min-b.min),g.max!==void 0&&(_.max=g.max-b.min),_}const defaultElastic=.35;function resolveDragElastic(b=defaultElastic){return b===!1?b=0:b===!0&&(b=defaultElastic),{x:resolveAxisElastic(b,"left","right"),y:resolveAxisElastic(b,"top","bottom")}}function resolveAxisElastic(b,g,_){return{min:resolvePointElastic(b,g),max:resolvePointElastic(b,_)}}function resolvePointElastic(b,g){return typeof b=="number"?b:b[g]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(b){return[b("x"),b("y")]}function convertBoundingBoxToBox({top:b,left:g,right:_,bottom:j}){return{x:{min:g,max:_},y:{min:b,max:j}}}function convertBoxToBoundingBox({x:b,y:g}){return{top:g.min,right:b.max,bottom:g.max,left:b.min}}function transformBoxPoints(b,g){if(!g)return b;const _=g({x:b.left,y:b.top}),j=g({x:b.right,y:b.bottom});return{top:_.y,left:_.x,bottom:j.y,right:j.x}}function isIdentityScale(b){return b===void 0||b===1}function hasScale({scale:b,scaleX:g,scaleY:_}){return!isIdentityScale(b)||!isIdentityScale(g)||!isIdentityScale(_)}function hasTransform(b){return hasScale(b)||has2DTranslate(b)||b.z||b.rotate||b.rotateX||b.rotateY||b.skewX||b.skewY}function has2DTranslate(b){return is2DTranslate(b.x)||is2DTranslate(b.y)}function is2DTranslate(b){return b&&b!=="0%"}function scalePoint(b,g,_){const j=b-_,$=g*j;return _+$}function applyPointDelta(b,g,_,j,$){return $!==void 0&&(b=scalePoint(b,$,j)),scalePoint(b,_,j)+g}function applyAxisDelta(b,g=0,_=1,j,$){b.min=applyPointDelta(b.min,g,_,j,$),b.max=applyPointDelta(b.max,g,_,j,$)}function applyBoxDelta(b,{x:g,y:_}){applyAxisDelta(b.x,g.translate,g.scale,g.originPoint),applyAxisDelta(b.y,_.translate,_.scale,_.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(b,g,_,j=!1){const $=_.length;if(!$)return;g.x=g.y=1;let _e,et;for(let tt=0;tt<$;tt++){_e=_[tt],et=_e.projectionDelta;const{visualElement:nt}=_e.options;nt&&nt.props.style&&nt.props.style.display==="contents"||(j&&_e.options.layoutScroll&&_e.scroll&&_e!==_e.root&&transformBox(b,{x:-_e.scroll.offset.x,y:-_e.scroll.offset.y}),et&&(g.x*=et.x.scale,g.y*=et.y.scale,applyBoxDelta(b,et)),j&&hasTransform(_e.latestValues)&&transformBox(b,_e.latestValues))}g.x<TREE_SCALE_SNAP_MAX&&g.x>TREE_SCALE_SNAP_MIN&&(g.x=1),g.y<TREE_SCALE_SNAP_MAX&&g.y>TREE_SCALE_SNAP_MIN&&(g.y=1)}function translateAxis(b,g){b.min=b.min+g,b.max=b.max+g}function transformAxis(b,g,_,j,$=.5){const _e=mixNumber$1(b.min,b.max,$);applyAxisDelta(b,g,_,_e,j)}function transformBox(b,g){transformAxis(b.x,g.x,g.scaleX,g.scale,g.originX),transformAxis(b.y,g.y,g.scaleY,g.scale,g.originY)}function measureViewportBox(b,g){return convertBoundingBoxToBox(transformBoxPoints(b.getBoundingClientRect(),g))}function measurePageBox(b,g,_){const j=measureViewportBox(b,_),{scroll:$}=g;return $&&(translateAxis(j.x,$.offset.x),translateAxis(j.y,$.offset.y)),j}const getContextWindow=({current:b})=>b?b.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(g){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=g}start(g,{snapToCursor:_=!1}={}){const{presenceContext:j}=this.visualElement;if(j&&j.isPresent===!1)return;const $=it=>{const{dragSnapToOrigin:st}=this.getProps();st?this.pauseAnimation():this.stopAnimation(),_&&this.snapToCursor(extractEventInfo(it,"page").point)},_e=(it,st)=>{const{drag:ot,dragPropagation:lt,onDragStart:at}=this.getProps();if(ot&&!lt&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(ot),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(dt=>{let ct=this.getAxisMotionValue(dt).get()||0;if(percent.test(ct)){const{projection:ht}=this.visualElement;if(ht&&ht.layout){const pt=ht.layout.layoutBox[dt];pt&&(ct=calcLength(pt)*(parseFloat(ct)/100))}}this.originPoint[dt]=ct}),at&&frame.postRender(()=>at(it,st)),addValueToWillChange(this.visualElement,"transform");const{animationState:ut}=this.visualElement;ut&&ut.setActive("whileDrag",!0)},et=(it,st)=>{const{dragPropagation:ot,dragDirectionLock:lt,onDirectionLock:at,onDrag:ut}=this.getProps();if(!ot&&!this.openGlobalLock)return;const{offset:dt}=st;if(lt&&this.currentDirection===null){this.currentDirection=getCurrentDirection(dt),this.currentDirection!==null&&at&&at(this.currentDirection);return}this.updateAxis("x",st.point,dt),this.updateAxis("y",st.point,dt),this.visualElement.render(),ut&&ut(it,st)},tt=(it,st)=>this.stop(it,st),nt=()=>eachAxis(it=>{var st;return this.getAnimationState(it)==="paused"&&((st=this.getAxisMotionValue(it).animation)===null||st===void 0?void 0:st.play())}),{dragSnapToOrigin:rt}=this.getProps();this.panSession=new PanSession(g,{onSessionStart:$,onStart:_e,onMove:et,onSessionEnd:tt,resumeAnimation:nt},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:rt,contextWindow:getContextWindow(this.visualElement)})}stop(g,_){const j=this.isDragging;if(this.cancel(),!j)return;const{velocity:$}=_;this.startAnimation($);const{onDragEnd:_e}=this.getProps();_e&&frame.postRender(()=>_e(g,_))}cancel(){this.isDragging=!1;const{projection:g,animationState:_}=this.visualElement;g&&(g.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:j}=this.getProps();!j&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),_&&_.setActive("whileDrag",!1)}updateAxis(g,_,j){const{drag:$}=this.getProps();if(!j||!shouldDrag(g,$,this.currentDirection))return;const _e=this.getAxisMotionValue(g);let et=this.originPoint[g]+j[g];this.constraints&&this.constraints[g]&&(et=applyConstraints(et,this.constraints[g],this.elastic[g])),_e.set(et)}resolveConstraints(){var g;const{dragConstraints:_,dragElastic:j}=this.getProps(),$=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)===null||g===void 0?void 0:g.layout,_e=this.constraints;_&&isRefObject(_)?this.constraints||(this.constraints=this.resolveRefConstraints()):_&&$?this.constraints=calcRelativeConstraints($.layoutBox,_):this.constraints=!1,this.elastic=resolveDragElastic(j),_e!==this.constraints&&$&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(et=>{this.constraints!==!1&&this.getAxisMotionValue(et)&&(this.constraints[et]=rebaseAxisConstraints($.layoutBox[et],this.constraints[et]))})}resolveRefConstraints(){const{dragConstraints:g,onMeasureDragConstraints:_}=this.getProps();if(!g||!isRefObject(g))return!1;const j=g.current,{projection:$}=this.visualElement;if(!$||!$.layout)return!1;const _e=measurePageBox(j,$.root,this.visualElement.getTransformPagePoint());let et=calcViewportConstraints($.layout.layoutBox,_e);if(_){const tt=_(convertBoxToBoundingBox(et));this.hasMutatedConstraints=!!tt,tt&&(et=convertBoundingBoxToBox(tt))}return et}startAnimation(g){const{drag:_,dragMomentum:j,dragElastic:$,dragTransition:_e,dragSnapToOrigin:et,onDragTransitionEnd:tt}=this.getProps(),nt=this.constraints||{},rt=eachAxis(it=>{if(!shouldDrag(it,_,this.currentDirection))return;let st=nt&&nt[it]||{};et&&(st={min:0,max:0});const ot=$?200:1e6,lt=$?40:1e7,at={type:"inertia",velocity:j?g[it]:0,bounceStiffness:ot,bounceDamping:lt,timeConstant:750,restDelta:1,restSpeed:10,..._e,...st};return this.startAxisValueAnimation(it,at)});return Promise.all(rt).then(tt)}startAxisValueAnimation(g,_){const j=this.getAxisMotionValue(g);return addValueToWillChange(this.visualElement,g),j.start(animateMotionValue(g,j,0,_,this.visualElement,!1))}stopAnimation(){eachAxis(g=>this.getAxisMotionValue(g).stop())}pauseAnimation(){eachAxis(g=>{var _;return(_=this.getAxisMotionValue(g).animation)===null||_===void 0?void 0:_.pause()})}getAnimationState(g){var _;return(_=this.getAxisMotionValue(g).animation)===null||_===void 0?void 0:_.state}getAxisMotionValue(g){const _=`_drag${g.toUpperCase()}`,j=this.visualElement.getProps(),$=j[_];return $||this.visualElement.getValue(g,(j.initial?j.initial[g]:void 0)||0)}snapToCursor(g){eachAxis(_=>{const{drag:j}=this.getProps();if(!shouldDrag(_,j,this.currentDirection))return;const{projection:$}=this.visualElement,_e=this.getAxisMotionValue(_);if($&&$.layout){const{min:et,max:tt}=$.layout.layoutBox[_];_e.set(g[_]-mixNumber$1(et,tt,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:g,dragConstraints:_}=this.getProps(),{projection:j}=this.visualElement;if(!isRefObject(_)||!j||!this.constraints)return;this.stopAnimation();const $={x:0,y:0};eachAxis(et=>{const tt=this.getAxisMotionValue(et);if(tt&&this.constraints!==!1){const nt=tt.get();$[et]=calcOrigin$1({min:nt,max:nt},this.constraints[et])}});const{transformTemplate:_e}=this.visualElement.getProps();this.visualElement.current.style.transform=_e?_e({},""):"none",j.root&&j.root.updateScroll(),j.updateLayout(),this.resolveConstraints(),eachAxis(et=>{if(!shouldDrag(et,g,null))return;const tt=this.getAxisMotionValue(et),{min:nt,max:rt}=this.constraints[et];tt.set(mixNumber$1(nt,rt,$[et]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const g=this.visualElement.current,_=addPointerEvent(g,"pointerdown",nt=>{const{drag:rt,dragListener:it=!0}=this.getProps();rt&&it&&this.start(nt)}),j=()=>{const{dragConstraints:nt}=this.getProps();isRefObject(nt)&&nt.current&&(this.constraints=this.resolveRefConstraints())},{projection:$}=this.visualElement,_e=$.addEventListener("measure",j);$&&!$.layout&&($.root&&$.root.updateScroll(),$.updateLayout()),frame.read(j);const et=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),tt=$.addEventListener("didUpdate",({delta:nt,hasLayoutChanged:rt})=>{this.isDragging&&rt&&(eachAxis(it=>{const st=this.getAxisMotionValue(it);st&&(this.originPoint[it]+=nt[it].translate,st.set(st.get()+nt[it].translate))}),this.visualElement.render())});return()=>{et(),_(),_e(),tt&&tt()}}getProps(){const g=this.visualElement.getProps(),{drag:_=!1,dragDirectionLock:j=!1,dragPropagation:$=!1,dragConstraints:_e=!1,dragElastic:et=defaultElastic,dragMomentum:tt=!0}=g;return{...g,drag:_,dragDirectionLock:j,dragPropagation:$,dragConstraints:_e,dragElastic:et,dragMomentum:tt}}}function shouldDrag(b,g,_){return(g===!0||g===b)&&(_===null||_===b)}function getCurrentDirection(b,g=10){let _=null;return Math.abs(b.y)>g?_="y":Math.abs(b.x)>g&&(_="x"),_}class DragGesture extends Feature{constructor(g){super(g),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(g)}mount(){const{dragControls:g}=this.node.getProps();g&&(this.removeGroupControls=g.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=b=>(g,_)=>{b&&frame.postRender(()=>b(g,_))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(g){this.session=new PanSession(g,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:g,onPanStart:_,onPan:j,onPanEnd:$}=this.node.getProps();return{onSessionStart:asyncHandler(g),onStart:asyncHandler(_),onMove:j,onEnd:(_e,et)=>{delete this.session,$&&frame.postRender(()=>$(_e,et))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",g=>this.onPointerDown(g))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const b=reactExports.useContext(PresenceContext);if(b===null)return[!0,null];const{isPresent:g,onExitComplete:_,register:j}=b,$=reactExports.useId();reactExports.useEffect(()=>j($),[]);const _e=reactExports.useCallback(()=>_&&_($),[$,_]);return!g&&_?[!1,_e]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(b,g){return g.max===g.min?0:b/(g.max-g.min)*100}const correctBorderRadius={correct:(b,g)=>{if(!g.target)return b;if(typeof b=="string")if(px.test(b))b=parseFloat(b);else return b;const _=pixelsToPercent(b,g.target.x),j=pixelsToPercent(b,g.target.y);return`${_}% ${j}%`}},correctBoxShadow={correct:(b,{treeScale:g,projectionDelta:_})=>{const j=b,$=complex.parse(b);if($.length>5)return j;const _e=complex.createTransformer(b),et=typeof $[0]!="number"?1:0,tt=_.x.scale*g.x,nt=_.y.scale*g.y;$[0+et]/=tt,$[1+et]/=nt;const rt=mixNumber$1(tt,nt,.5);return typeof $[2+et]=="number"&&($[2+et]/=rt),typeof $[3+et]=="number"&&($[3+et]/=rt),_e($)}},scaleCorrectors={};function addScaleCorrector(b){Object.assign(scaleCorrectors,b)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:g,layoutGroup:_,switchLayoutGroup:j,layoutId:$}=this.props,{projection:_e}=g;addScaleCorrector(defaultScaleCorrectors),_e&&(_.group&&_.group.add(_e),j&&j.register&&$&&j.register(_e),_e.root.didUpdate(),_e.addEventListener("animationComplete",()=>{this.safeToRemove()}),_e.setOptions({..._e.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(g){const{layoutDependency:_,visualElement:j,drag:$,isPresent:_e}=this.props,et=j.projection;return et&&(et.isPresent=_e,$||g.layoutDependency!==_||_===void 0?et.willUpdate():this.safeToRemove(),g.isPresent!==_e&&(_e?et.promote():et.relegate()||frame.postRender(()=>{const tt=et.getStack();(!tt||!tt.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:g}=this.props.visualElement;g&&(g.root.didUpdate(),microtask.postRender(()=>{!g.currentAnimation&&g.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:g,layoutGroup:_,switchLayoutGroup:j}=this.props,{projection:$}=g;$&&($.scheduleCheckAfterUnmount(),_&&_.group&&_.group.remove($),j&&j.deregister&&j.deregister($))}safeToRemove(){const{safeToRemove:g}=this.props;g&&g()}render(){return null}}function MeasureLayout(b){const[g,_]=usePresence(),j=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...b,layoutGroup:j,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:g,safeToRemove:_})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=b=>typeof b=="string"?parseFloat(b):b,isPx=b=>typeof b=="number"||px.test(b);function mixValues(b,g,_,j,$,_e){$?(b.opacity=mixNumber$1(0,_.opacity!==void 0?_.opacity:1,easeCrossfadeIn(j)),b.opacityExit=mixNumber$1(g.opacity!==void 0?g.opacity:1,0,easeCrossfadeOut(j))):_e&&(b.opacity=mixNumber$1(g.opacity!==void 0?g.opacity:1,_.opacity!==void 0?_.opacity:1,j));for(let et=0;et<numBorders;et++){const tt=`border${borders[et]}Radius`;let nt=getRadius(g,tt),rt=getRadius(_,tt);if(nt===void 0&&rt===void 0)continue;nt||(nt=0),rt||(rt=0),nt===0||rt===0||isPx(nt)===isPx(rt)?(b[tt]=Math.max(mixNumber$1(asNumber(nt),asNumber(rt),j),0),(percent.test(rt)||percent.test(nt))&&(b[tt]+="%")):b[tt]=rt}(g.rotate||_.rotate)&&(b.rotate=mixNumber$1(g.rotate||0,_.rotate||0,j))}function getRadius(b,g){return b[g]!==void 0?b[g]:b.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(b,g,_){return j=>j<b?0:j>g?1:_(progress(b,g,j))}function copyAxisInto(b,g){b.min=g.min,b.max=g.max}function copyBoxInto(b,g){copyAxisInto(b.x,g.x),copyAxisInto(b.y,g.y)}function copyAxisDeltaInto(b,g){b.translate=g.translate,b.scale=g.scale,b.originPoint=g.originPoint,b.origin=g.origin}function removePointDelta(b,g,_,j,$){return b-=g,b=scalePoint(b,1/_,j),$!==void 0&&(b=scalePoint(b,1/$,j)),b}function removeAxisDelta(b,g=0,_=1,j=.5,$,_e=b,et=b){if(percent.test(g)&&(g=parseFloat(g),g=mixNumber$1(et.min,et.max,g/100)-et.min),typeof g!="number")return;let tt=mixNumber$1(_e.min,_e.max,j);b===_e&&(tt-=g),b.min=removePointDelta(b.min,g,_,tt,$),b.max=removePointDelta(b.max,g,_,tt,$)}function removeAxisTransforms(b,g,[_,j,$],_e,et){removeAxisDelta(b,g[_],g[j],g[$],g.scale,_e,et)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(b,g,_,j){removeAxisTransforms(b.x,g,xKeys,_?_.x:void 0,j?j.x:void 0),removeAxisTransforms(b.y,g,yKeys,_?_.y:void 0,j?j.y:void 0)}function isAxisDeltaZero(b){return b.translate===0&&b.scale===1}function isDeltaZero(b){return isAxisDeltaZero(b.x)&&isAxisDeltaZero(b.y)}function axisEquals(b,g){return b.min===g.min&&b.max===g.max}function boxEquals(b,g){return axisEquals(b.x,g.x)&&axisEquals(b.y,g.y)}function axisEqualsRounded(b,g){return Math.round(b.min)===Math.round(g.min)&&Math.round(b.max)===Math.round(g.max)}function boxEqualsRounded(b,g){return axisEqualsRounded(b.x,g.x)&&axisEqualsRounded(b.y,g.y)}function aspectRatio(b){return calcLength(b.x)/calcLength(b.y)}function axisDeltaEquals(b,g){return b.translate===g.translate&&b.scale===g.scale&&b.originPoint===g.originPoint}class NodeStack{constructor(){this.members=[]}add(g){addUniqueItem(this.members,g),g.scheduleRender()}remove(g){if(removeItem(this.members,g),g===this.prevLead&&(this.prevLead=void 0),g===this.lead){const _=this.members[this.members.length-1];_&&this.promote(_)}}relegate(g){const _=this.members.findIndex($=>g===$);if(_===0)return!1;let j;for(let $=_;$>=0;$--){const _e=this.members[$];if(_e.isPresent!==!1){j=_e;break}}return j?(this.promote(j),!0):!1}promote(g,_){const j=this.lead;if(g!==j&&(this.prevLead=j,this.lead=g,g.show(),j)){j.instance&&j.scheduleRender(),g.scheduleRender(),g.resumeFrom=j,_&&(g.resumeFrom.preserveOpacity=!0),j.snapshot&&(g.snapshot=j.snapshot,g.snapshot.latestValues=j.animationValues||j.latestValues),g.root&&g.root.isUpdating&&(g.isLayoutDirty=!0);const{crossfade:$}=g.options;$===!1&&j.hide()}}exitAnimationComplete(){this.members.forEach(g=>{const{options:_,resumingFrom:j}=g;_.onExitComplete&&_.onExitComplete(),j&&j.options.onExitComplete&&j.options.onExitComplete()})}scheduleRender(){this.members.forEach(g=>{g.instance&&g.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(b,g,_){let j="";const $=b.x.translate/g.x,_e=b.y.translate/g.y,et=(_==null?void 0:_.z)||0;if(($||_e||et)&&(j=`translate3d(${$}px, ${_e}px, ${et}px) `),(g.x!==1||g.y!==1)&&(j+=`scale(${1/g.x}, ${1/g.y}) `),_){const{transformPerspective:rt,rotate:it,rotateX:st,rotateY:ot,skewX:lt,skewY:at}=_;rt&&(j=`perspective(${rt}px) ${j}`),it&&(j+=`rotate(${it}deg) `),st&&(j+=`rotateX(${st}deg) `),ot&&(j+=`rotateY(${ot}deg) `),lt&&(j+=`skewX(${lt}deg) `),at&&(j+=`skewY(${at}deg) `)}const tt=b.x.scale*g.x,nt=b.y.scale*g.y;return(tt!==1||nt!==1)&&(j+=`scale(${tt}, ${nt})`),j||"none"}const compareByDepth=(b,g)=>b.depth-g.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(g){addUniqueItem(this.children,g),this.isDirty=!0}remove(g){removeItem(this.children,g),this.isDirty=!0}forEach(g){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(g)}}function resolveMotionValue(b){const g=isMotionValue(b)?b.get():b;return isCustomValue(g)?g.toValue():g}function delay(b,g){const _=time.now(),j=({timestamp:$})=>{const _e=$-_;_e>=g&&(cancelFrame(j),b(_e-g))};return frame.read(j,!0),()=>cancelFrame(j)}function isSVGElement(b){return b instanceof SVGElement&&b.tagName!=="svg"}function animateSingleValue(b,g,_){const j=isMotionValue(b)?b:motionValue(b);return j.start(animateMotionValue("",j,g,_)),j.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(b,g,_,j){const{latestValues:$}=g;$[b]&&(_[b]=$[b],g.setStaticValue(b,0),j&&(j[b]=0))}function cancelTreeOptimisedTransformAnimations(b){if(b.hasCheckedOptimisedAppear=!0,b.root===b)return;const{visualElement:g}=b.options;if(!g)return;const _=getOptimisedAppearId(g);if(window.MotionHasOptimisedAnimation(_,"transform")){const{layout:$,layoutId:_e}=b.options;window.MotionCancelOptimisedAnimation(_,"transform",frame,!($||_e))}const{parent:j}=b;j&&!j.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(j)}function createProjectionNode$1({attachResizeListener:b,defaultParent:g,measureScroll:_,checkIsScrollRoot:j,resetTransform:$}){return class{constructor(et={},tt=g==null?void 0:g()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=et,this.root=tt?tt.root||tt:this,this.path=tt?[...tt.path,tt]:[],this.parent=tt,this.depth=tt?tt.depth+1:0;for(let nt=0;nt<this.path.length;nt++)this.path[nt].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(et,tt){return this.eventHandlers.has(et)||this.eventHandlers.set(et,new SubscriptionManager),this.eventHandlers.get(et).add(tt)}notifyListeners(et,...tt){const nt=this.eventHandlers.get(et);nt&&nt.notify(...tt)}hasListeners(et){return this.eventHandlers.has(et)}mount(et,tt=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(et),this.instance=et;const{layoutId:nt,layout:rt,visualElement:it}=this.options;if(it&&!it.current&&it.mount(et),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),tt&&(rt||nt)&&(this.isLayoutDirty=!0),b){let st;const ot=()=>this.root.updateBlockedByResize=!1;b(et,()=>{this.root.updateBlockedByResize=!0,st&&st(),st=delay(ot,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}nt&&this.root.registerSharedNode(nt,this),this.options.animate!==!1&&it&&(nt||rt)&&this.addEventListener("didUpdate",({delta:st,hasLayoutChanged:ot,hasRelativeTargetChanged:lt,layout:at})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ut=this.options.transition||it.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:dt,onLayoutAnimationComplete:ct}=it.getProps(),ht=!this.targetLayout||!boxEqualsRounded(this.targetLayout,at)||lt,pt=!ot&&lt;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||pt||ot&&(ht||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(st,pt);const mt={...getValueTransition(ut,"layout"),onPlay:dt,onComplete:ct};(it.shouldReduceMotion||this.options.layoutRoot)&&(mt.delay=0,mt.type=!1),this.startAnimation(mt)}else ot||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=at})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const et=this.getStack();et&&et.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:et}=this.options;return et&&et.getProps().transformTemplate}willUpdate(et=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let it=0;it<this.path.length;it++){const st=this.path[it];st.shouldResetTransform=!0,st.updateScroll("snapshot"),st.options.layoutRoot&&st.willUpdate(!1)}const{layoutId:tt,layout:nt}=this.options;if(tt===void 0&&!nt)return;const rt=this.getTransformTemplate();this.prevTransformTemplateValue=rt?rt(this.latestValues,""):void 0,this.updateSnapshot(),et&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const tt=time.now();frameData.delta=clamp(0,1e3/60,tt-frameData.timestamp),frameData.timestamp=tt,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let nt=0;nt<this.path.length;nt++)this.path[nt].updateScroll();const et=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:tt}=this.options;tt&&tt.notify("LayoutMeasure",this.layout.layoutBox,et?et.layoutBox:void 0)}updateScroll(et="measure"){let tt=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===et&&(tt=!1),tt){const nt=j(this.instance);this.scroll={animationId:this.root.animationId,phase:et,isRoot:nt,offset:_(this.instance),wasRoot:this.scroll?this.scroll.isRoot:nt}}}resetTransform(){if(!$)return;const et=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,tt=this.projectionDelta&&!isDeltaZero(this.projectionDelta),nt=this.getTransformTemplate(),rt=nt?nt(this.latestValues,""):void 0,it=rt!==this.prevTransformTemplateValue;et&&(tt||hasTransform(this.latestValues)||it)&&($(this.instance,rt),this.shouldResetTransform=!1,this.scheduleRender())}measure(et=!0){const tt=this.measurePageBox();let nt=this.removeElementScroll(tt);return et&&(nt=this.removeTransform(nt)),roundBox(nt),{animationId:this.root.animationId,measuredBox:tt,layoutBox:nt,latestValues:{},source:this.id}}measurePageBox(){var et;const{visualElement:tt}=this.options;if(!tt)return createBox();const nt=tt.measureViewportBox();if(!(((et=this.scroll)===null||et===void 0?void 0:et.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:it}=this.root;it&&(translateAxis(nt.x,it.offset.x),translateAxis(nt.y,it.offset.y))}return nt}removeElementScroll(et){var tt;const nt=createBox();if(copyBoxInto(nt,et),!((tt=this.scroll)===null||tt===void 0)&&tt.wasRoot)return nt;for(let rt=0;rt<this.path.length;rt++){const it=this.path[rt],{scroll:st,options:ot}=it;it!==this.root&&st&&ot.layoutScroll&&(st.wasRoot&&copyBoxInto(nt,et),translateAxis(nt.x,st.offset.x),translateAxis(nt.y,st.offset.y))}return nt}applyTransform(et,tt=!1){const nt=createBox();copyBoxInto(nt,et);for(let rt=0;rt<this.path.length;rt++){const it=this.path[rt];!tt&&it.options.layoutScroll&&it.scroll&&it!==it.root&&transformBox(nt,{x:-it.scroll.offset.x,y:-it.scroll.offset.y}),hasTransform(it.latestValues)&&transformBox(nt,it.latestValues)}return hasTransform(this.latestValues)&&transformBox(nt,this.latestValues),nt}removeTransform(et){const tt=createBox();copyBoxInto(tt,et);for(let nt=0;nt<this.path.length;nt++){const rt=this.path[nt];if(!rt.instance||!hasTransform(rt.latestValues))continue;hasScale(rt.latestValues)&&rt.updateSnapshot();const it=createBox(),st=rt.measurePageBox();copyBoxInto(it,st),removeBoxTransforms(tt,rt.latestValues,rt.snapshot?rt.snapshot.layoutBox:void 0,it)}return hasTransform(this.latestValues)&&removeBoxTransforms(tt,this.latestValues),tt}setTargetDelta(et){this.targetDelta=et,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(et){this.options={...this.options,...et,crossfade:et.crossfade!==void 0?et.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(et=!1){var tt;const nt=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=nt.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=nt.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=nt.isSharedProjectionDirty);const rt=!!this.resumingFrom||this!==nt;if(!(et||rt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((tt=this.parent)===null||tt===void 0)&&tt.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:st,layoutId:ot}=this.options;if(!(!this.layout||!(st||ot))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const lt=this.getClosestProjectingParent();lt&&lt.layout&&this.animationProgress!==1?(this.relativeParent=lt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,lt.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const lt=this.getClosestProjectingParent();lt&&!!lt.resumingFrom==!!this.resumingFrom&&!lt.options.layoutScroll&&lt.target&&this.animationProgress!==1?(this.relativeParent=lt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,lt.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var et;const tt=this.getLead(),nt=!!this.resumingFrom||this!==tt;let rt=!0;if((this.isProjectionDirty||!((et=this.parent)===null||et===void 0)&&et.isProjectionDirty)&&(rt=!1),nt&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(rt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(rt=!1),rt)return;const{layout:it,layoutId:st}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(it||st))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const ot=this.treeScale.x,lt=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,nt),tt.layout&&!tt.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(tt.target=tt.layout.layoutBox,tt.targetWithTransforms=createBox());const{target:at}=tt;if(!at){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,at,this.latestValues),(this.treeScale.x!==ot||this.treeScale.y!==lt||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",at)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(et=!0){var tt;if((tt=this.options.visualElement)===null||tt===void 0||tt.scheduleRender(),et){const nt=this.getStack();nt&&nt.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(et,tt=!1){const nt=this.snapshot,rt=nt?nt.latestValues:{},it={...this.latestValues},st=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!tt;const ot=createBox(),lt=nt?nt.source:void 0,at=this.layout?this.layout.source:void 0,ut=lt!==at,dt=this.getStack(),ct=!dt||dt.members.length<=1,ht=!!(ut&&!ct&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let pt;this.mixTargetDelta=mt=>{const ft=mt/1e3;mixAxisDelta(st.x,et.x,ft),mixAxisDelta(st.y,et.y,ft),this.setTargetDelta(st),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(ot,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,ot,ft),pt&&boxEquals(this.relativeTarget,pt)&&(this.isProjectionDirty=!1),pt||(pt=createBox()),copyBoxInto(pt,this.relativeTarget)),ut&&(this.animationValues=it,mixValues(it,rt,this.latestValues,ft,ht,ct)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ft},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(et){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...et,onUpdate:tt=>{this.mixTargetDelta(tt),et.onUpdate&&et.onUpdate(tt)},onComplete:()=>{et.onComplete&&et.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const et=this.getStack();et&&et.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const et=this.getLead();let{targetWithTransforms:tt,target:nt,layout:rt,latestValues:it}=et;if(!(!tt||!nt||!rt)){if(this!==et&&this.layout&&rt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,rt.layoutBox)){nt=this.target||createBox();const st=calcLength(this.layout.layoutBox.x);nt.x.min=et.target.x.min,nt.x.max=nt.x.min+st;const ot=calcLength(this.layout.layoutBox.y);nt.y.min=et.target.y.min,nt.y.max=nt.y.min+ot}copyBoxInto(tt,nt),transformBox(tt,it),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,tt,it)}}registerSharedNode(et,tt){this.sharedNodes.has(et)||this.sharedNodes.set(et,new NodeStack),this.sharedNodes.get(et).add(tt);const rt=tt.options.initialPromotionConfig;tt.promote({transition:rt?rt.transition:void 0,preserveFollowOpacity:rt&&rt.shouldPreserveFollowOpacity?rt.shouldPreserveFollowOpacity(tt):void 0})}isLead(){const et=this.getStack();return et?et.lead===this:!0}getLead(){var et;const{layoutId:tt}=this.options;return tt?((et=this.getStack())===null||et===void 0?void 0:et.lead)||this:this}getPrevLead(){var et;const{layoutId:tt}=this.options;return tt?(et=this.getStack())===null||et===void 0?void 0:et.prevLead:void 0}getStack(){const{layoutId:et}=this.options;if(et)return this.root.sharedNodes.get(et)}promote({needsReset:et,transition:tt,preserveFollowOpacity:nt}={}){const rt=this.getStack();rt&&rt.promote(this,nt),et&&(this.projectionDelta=void 0,this.needsReset=!0),tt&&this.setOptions({transition:tt})}relegate(){const et=this.getStack();return et?et.relegate(this):!1}resetSkewAndRotation(){const{visualElement:et}=this.options;if(!et)return;let tt=!1;const{latestValues:nt}=et;if((nt.z||nt.rotate||nt.rotateX||nt.rotateY||nt.rotateZ||nt.skewX||nt.skewY)&&(tt=!0),!tt)return;const rt={};nt.z&&resetDistortingTransform("z",et,rt,this.animationValues);for(let it=0;it<transformAxes.length;it++)resetDistortingTransform(`rotate${transformAxes[it]}`,et,rt,this.animationValues),resetDistortingTransform(`skew${transformAxes[it]}`,et,rt,this.animationValues);et.render();for(const it in rt)et.setStaticValue(it,rt[it]),this.animationValues&&(this.animationValues[it]=rt[it]);et.scheduleRender()}getProjectionStyles(et){var tt,nt;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const rt={visibility:""},it=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,rt.opacity="",rt.pointerEvents=resolveMotionValue(et==null?void 0:et.pointerEvents)||"",rt.transform=it?it(this.latestValues,""):"none",rt;const st=this.getLead();if(!this.projectionDelta||!this.layout||!st.target){const ut={};return this.options.layoutId&&(ut.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ut.pointerEvents=resolveMotionValue(et==null?void 0:et.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(ut.transform=it?it({},""):"none",this.hasProjected=!1),ut}const ot=st.animationValues||st.latestValues;this.applyTransformsToTarget(),rt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,ot),it&&(rt.transform=it(ot,rt.transform));const{x:lt,y:at}=this.projectionDelta;rt.transformOrigin=`${lt.origin*100}% ${at.origin*100}% 0`,st.animationValues?rt.opacity=st===this?(nt=(tt=ot.opacity)!==null&&tt!==void 0?tt:this.latestValues.opacity)!==null&&nt!==void 0?nt:1:this.preserveOpacity?this.latestValues.opacity:ot.opacityExit:rt.opacity=st===this?ot.opacity!==void 0?ot.opacity:"":ot.opacityExit!==void 0?ot.opacityExit:0;for(const ut in scaleCorrectors){if(ot[ut]===void 0)continue;const{correct:dt,applyTo:ct}=scaleCorrectors[ut],ht=rt.transform==="none"?ot[ut]:dt(ot[ut],st);if(ct){const pt=ct.length;for(let mt=0;mt<pt;mt++)rt[ct[mt]]=ht}else rt[ut]=ht}return this.options.layoutId&&(rt.pointerEvents=st===this?resolveMotionValue(et==null?void 0:et.pointerEvents)||"":"none"),rt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(et=>{var tt;return(tt=et.currentAnimation)===null||tt===void 0?void 0:tt.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(b){b.updateLayout()}function notifyLayoutUpdate(b){var g;const _=((g=b.resumeFrom)===null||g===void 0?void 0:g.snapshot)||b.snapshot;if(b.isLead()&&b.layout&&_&&b.hasListeners("didUpdate")){const{layoutBox:j,measuredBox:$}=b.layout,{animationType:_e}=b.options,et=_.source!==b.layout.source;_e==="size"?eachAxis(st=>{const ot=et?_.measuredBox[st]:_.layoutBox[st],lt=calcLength(ot);ot.min=j[st].min,ot.max=ot.min+lt}):shouldAnimatePositionOnly(_e,_.layoutBox,j)&&eachAxis(st=>{const ot=et?_.measuredBox[st]:_.layoutBox[st],lt=calcLength(j[st]);ot.max=ot.min+lt,b.relativeTarget&&!b.currentAnimation&&(b.isProjectionDirty=!0,b.relativeTarget[st].max=b.relativeTarget[st].min+lt)});const tt=createDelta();calcBoxDelta(tt,j,_.layoutBox);const nt=createDelta();et?calcBoxDelta(nt,b.applyTransform($,!0),_.measuredBox):calcBoxDelta(nt,j,_.layoutBox);const rt=!isDeltaZero(tt);let it=!1;if(!b.resumeFrom){const st=b.getClosestProjectingParent();if(st&&!st.resumeFrom){const{snapshot:ot,layout:lt}=st;if(ot&&lt){const at=createBox();calcRelativePosition(at,_.layoutBox,ot.layoutBox);const ut=createBox();calcRelativePosition(ut,j,lt.layoutBox),boxEqualsRounded(at,ut)||(it=!0),st.options.layoutRoot&&(b.relativeTarget=ut,b.relativeTargetOrigin=at,b.relativeParent=st)}}}b.notifyListeners("didUpdate",{layout:j,snapshot:_,delta:nt,layoutDelta:tt,hasLayoutChanged:rt,hasRelativeTargetChanged:it})}else if(b.isLead()){const{onExitComplete:j}=b.options;j&&j()}b.options.transition=void 0}function propagateDirtyNodes(b){isDebug&&metrics.totalNodes++,b.parent&&(b.isProjecting()||(b.isProjectionDirty=b.parent.isProjectionDirty),b.isSharedProjectionDirty||(b.isSharedProjectionDirty=!!(b.isProjectionDirty||b.parent.isProjectionDirty||b.parent.isSharedProjectionDirty)),b.isTransformDirty||(b.isTransformDirty=b.parent.isTransformDirty))}function cleanDirtyNodes(b){b.isProjectionDirty=b.isSharedProjectionDirty=b.isTransformDirty=!1}function clearSnapshot(b){b.clearSnapshot()}function clearMeasurements(b){b.clearMeasurements()}function clearIsLayoutDirty(b){b.isLayoutDirty=!1}function resetTransformStyle(b){const{visualElement:g}=b.options;g&&g.getProps().onBeforeLayoutMeasure&&g.notify("BeforeLayoutMeasure"),b.resetTransform()}function finishAnimation(b){b.finishAnimation(),b.targetDelta=b.relativeTarget=b.target=void 0,b.isProjectionDirty=!0}function resolveTargetDelta(b){b.resolveTargetDelta()}function calcProjection(b){b.calcProjection()}function resetSkewAndRotation(b){b.resetSkewAndRotation()}function removeLeadSnapshots(b){b.removeLeadSnapshot()}function mixAxisDelta(b,g,_){b.translate=mixNumber$1(g.translate,0,_),b.scale=mixNumber$1(g.scale,1,_),b.origin=g.origin,b.originPoint=g.originPoint}function mixAxis(b,g,_,j){b.min=mixNumber$1(g.min,_.min,j),b.max=mixNumber$1(g.max,_.max,j)}function mixBox(b,g,_,j){mixAxis(b.x,g.x,_.x,j),mixAxis(b.y,g.y,_.y,j)}function hasOpacityCrossfade(b){return b.animationValues&&b.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=b=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(b),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(b){b.min=roundPoint(b.min),b.max=roundPoint(b.max)}function roundBox(b){roundAxis(b.x),roundAxis(b.y)}function shouldAnimatePositionOnly(b,g,_){return b==="position"||b==="preserve-aspect"&&!isNear$1(aspectRatio(g),aspectRatio(_),.2)}function checkNodeWasScrollRoot(b){var g;return b!==b.root&&((g=b.scroll)===null||g===void 0?void 0:g.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(b,g)=>addDomEvent(b,"resize",g),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:b=>({x:b.scrollLeft,y:b.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const b=new DocumentProjectionNode({});b.mount(window),b.setOptions({layoutScroll:!0}),rootProjectionNode.current=b}return rootProjectionNode.current},resetTransform:(b,g)=>{b.style.transform=g!==void 0?g:"none"},checkIsScrollRoot:b=>window.getComputedStyle(b).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function addHoverEvent(b,g){const _=g?"pointerenter":"pointerleave",j=g?"onHoverStart":"onHoverEnd",$=(_e,et)=>{if(_e.pointerType==="touch"||isDragActive())return;const tt=b.getProps();b.animationState&&tt.whileHover&&b.animationState.setActive("whileHover",g);const nt=tt[j];nt&&frame.postRender(()=>nt(_e,et))};return addPointerEvent(b.current,_,$,{passive:!b.getProps()[j]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let g=!1;try{g=this.node.current.matches(":focus-visible")}catch{g=!0}!g||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(b,g)=>g?b===g?!0:isNodeOrChild(b,g.parentElement):!1;function fireSyntheticPointerEvent(b,g){if(!g)return;const _=new PointerEvent("pointer"+b);g(_,extractEventInfo(_))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop$1,this.removeEndListeners=noop$1,this.removeAccessibleListeners=noop$1,this.startPointerPress=(g,_)=>{if(this.isPressing)return;this.removeEndListeners();const j=this.node.getProps(),_e=addPointerEvent(window,"pointerup",(tt,nt)=>{if(!this.checkPressEnd())return;const{onTap:rt,onTapCancel:it,globalTapTarget:st}=this.node.getProps(),ot=!st&&!isNodeOrChild(this.node.current,tt.target)?it:rt;ot&&frame.update(()=>ot(tt,nt))},{passive:!(j.onTap||j.onPointerUp)}),et=addPointerEvent(window,"pointercancel",(tt,nt)=>this.cancelPress(tt,nt),{passive:!(j.onTapCancel||j.onPointerCancel)});this.removeEndListeners=pipe(_e,et),this.startPress(g,_)},this.startAccessiblePress=()=>{const g=_e=>{if(_e.key!=="Enter"||this.isPressing)return;const et=tt=>{tt.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(nt,rt)=>{const{onTap:it}=this.node.getProps();it&&frame.postRender(()=>it(nt,rt))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",et),fireSyntheticPointerEvent("down",(tt,nt)=>{this.startPress(tt,nt)})},_=addDomEvent(this.node.current,"keydown",g),j=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(_e,et)=>this.cancelPress(_e,et))},$=addDomEvent(this.node.current,"blur",j);this.removeAccessibleListeners=pipe(_,$)}}startPress(g,_){this.isPressing=!0;const{onTapStart:j,whileTap:$}=this.node.getProps();$&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),j&&frame.postRender(()=>j(g,_))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(g,_){if(!this.checkPressEnd())return;const{onTapCancel:j}=this.node.getProps();j&&frame.postRender(()=>j(g,_))}mount(){const g=this.node.getProps(),_=addPointerEvent(g.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(g.onTapStart||g.onPointerStart)}),j=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(_,j)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=b=>{const g=observerCallbacks.get(b.target);g&&g(b)},fireAllObserverCallbacks=b=>{b.forEach(fireObserverCallback)};function initIntersectionObserver({root:b,...g}){const _=b||document;observers.has(_)||observers.set(_,{});const j=observers.get(_),$=JSON.stringify(g);return j[$]||(j[$]=new IntersectionObserver(fireAllObserverCallbacks,{root:b,...g})),j[$]}function observeIntersection(b,g,_){const j=initIntersectionObserver(g);return observerCallbacks.set(b,_),j.observe(b),()=>{observerCallbacks.delete(b),j.unobserve(b)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:g={}}=this.node.getProps(),{root:_,margin:j,amount:$="some",once:_e}=g,et={root:_?_.current:void 0,rootMargin:j,threshold:typeof $=="number"?$:thresholdNames[$]},tt=nt=>{const{isIntersecting:rt}=nt;if(this.isInView===rt||(this.isInView=rt,_e&&!rt&&this.hasEnteredView))return;rt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",rt);const{onViewportEnter:it,onViewportLeave:st}=this.node.getProps(),ot=rt?it:st;ot&&ot(nt)};return observeIntersection(this.node.current,et,tt)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:g,prevProps:_}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(g,_))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:b={}},{viewport:g={}}={}){return _=>b[_]!==g[_]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:b=>b,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(b,g,_,j,$){var _e,et;const{visualElement:tt}=reactExports.useContext(MotionContext),nt=reactExports.useContext(LazyContext),rt=reactExports.useContext(PresenceContext),it=reactExports.useContext(MotionConfigContext).reducedMotion,st=reactExports.useRef();j=j||nt.renderer,!st.current&&j&&(st.current=j(b,{visualState:g,parent:tt,props:_,presenceContext:rt,blockInitialAnimation:rt?rt.initial===!1:!1,reducedMotionConfig:it}));const ot=st.current,lt=reactExports.useContext(SwitchLayoutGroupContext);ot&&!ot.projection&&$&&(ot.type==="html"||ot.type==="svg")&&createProjectionNode(st.current,_,$,lt);const at=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{ot&&at.current&&ot.update(_,rt)});const ut=_[optimizedAppearDataAttribute],dt=reactExports.useRef(!!ut&&!(!((_e=window.MotionHandoffIsComplete)===null||_e===void 0)&&_e.call(window,ut))&&((et=window.MotionHasOptimisedAnimation)===null||et===void 0?void 0:et.call(window,ut)));return useIsomorphicLayoutEffect$1(()=>{ot&&(at.current=!0,window.MotionIsMounted=!0,ot.updateFeatures(),microtask.render(ot.render),dt.current&&ot.animationState&&ot.animationState.animateChanges())}),reactExports.useEffect(()=>{ot&&(!dt.current&&ot.animationState&&ot.animationState.animateChanges(),dt.current&&(queueMicrotask(()=>{var ct;(ct=window.MotionHandoffMarkAsComplete)===null||ct===void 0||ct.call(window,ut)}),dt.current=!1))}),ot}function createProjectionNode(b,g,_,j){const{layoutId:$,layout:_e,drag:et,dragConstraints:tt,layoutScroll:nt,layoutRoot:rt}=g;b.projection=new _(b.latestValues,g["data-framer-portal-id"]?void 0:getClosestProjectingNode(b.parent)),b.projection.setOptions({layoutId:$,layout:_e,alwaysMeasureLayout:!!et||tt&&isRefObject(tt),visualElement:b,animationType:typeof _e=="string"?_e:"both",initialPromotionConfig:j,layoutScroll:nt,layoutRoot:rt})}function getClosestProjectingNode(b){if(b)return b.options.allowProjection!==!1?b.projection:getClosestProjectingNode(b.parent)}function useMotionRef(b,g,_){return reactExports.useCallback(j=>{j&&b.mount&&b.mount(j),g&&(j?g.mount(j):g.unmount()),_&&(typeof _=="function"?_(j):isRefObject(_)&&(_.current=j))},[g])}function isControllingVariants(b){return isAnimationControls(b.animate)||variantProps.some(g=>isVariantLabel(b[g]))}function isVariantNode(b){return!!(isControllingVariants(b)||b.variants)}function getCurrentTreeVariants(b,g){if(isControllingVariants(b)){const{initial:_,animate:j}=b;return{initial:_===!1||isVariantLabel(_)?_:void 0,animate:isVariantLabel(j)?j:void 0}}return b.inherit!==!1?g:{}}function useCreateMotionContext(b){const{initial:g,animate:_}=getCurrentTreeVariants(b,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:g,animate:_}),[variantLabelsAsDependency(g),variantLabelsAsDependency(_)])}function variantLabelsAsDependency(b){return Array.isArray(b)?b.join(" "):b}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const b in featureProps)featureDefinitions[b]={isEnabled:g=>featureProps[b].some(_=>!!g[_])};function loadFeatures(b){for(const g in b)featureDefinitions[g]={...featureDefinitions[g],...b[g]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:b,createVisualElement:g,useRender:_,useVisualState:j,Component:$}){b&&loadFeatures(b);function _e(tt,nt){let rt;const it={...reactExports.useContext(MotionConfigContext),...tt,layoutId:useLayoutId(tt)},{isStatic:st}=it,ot=useCreateMotionContext(tt),lt=j(tt,st);if(!st&&isBrowser){useStrictMode();const at=getProjectionFunctionality(it);rt=at.MeasureLayout,ot.visualElement=useVisualElement($,lt,it,g,at.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:ot,children:[rt&&ot.visualElement?jsxRuntimeExports.jsx(rt,{visualElement:ot.visualElement,...it}):null,_($,tt,useMotionRef(lt,ot.visualElement,nt),lt,st,ot.visualElement)]})}const et=reactExports.forwardRef(_e);return et[motionComponentSymbol]=$,et}function useLayoutId({layoutId:b}){const g=reactExports.useContext(LayoutGroupContext).id;return g&&b!==void 0?g+"-"+b:b}function useStrictMode(b,g){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(b){const{drag:g,layout:_}=featureDefinitions;if(!g&&!_)return{};const j={...g,..._};return{MeasureLayout:g!=null&&g.isEnabled(b)||_!=null&&_.isEnabled(b)?j.MeasureLayout:void 0,ProjectionNode:j.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(b){return typeof b!="string"||b.includes("-")?!1:!!(lowercaseSVGElements.indexOf(b)>-1||/[A-Z]/u.test(b))}function renderHTML(b,{style:g,vars:_},j,$){Object.assign(b.style,g,$&&$.getProjectionStyles(j));for(const _e in _)b.style.setProperty(_e,_[_e])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(b,g,_,j){renderHTML(b,g,void 0,j);for(const $ in g.attrs)b.setAttribute(camelCaseAttributes.has($)?$:camelToDash($),g.attrs[$])}function isForcedMotionValue(b,{layout:g,layoutId:_}){return transformProps.has(b)||b.startsWith("origin")||(g||_!==void 0)&&(!!scaleCorrectors[b]||b==="opacity")}function scrapeMotionValuesFromProps$1(b,g,_){var j;const{style:$}=b,_e={};for(const et in $)(isMotionValue($[et])||g.style&&isMotionValue(g.style[et])||isForcedMotionValue(et,b)||((j=_==null?void 0:_.getValue(et))===null||j===void 0?void 0:j.liveStyle)!==void 0)&&(_e[et]=$[et]);return _e}function scrapeMotionValuesFromProps(b,g,_){const j=scrapeMotionValuesFromProps$1(b,g,_);for(const $ in b)if(isMotionValue(b[$])||isMotionValue(g[$])){const _e=transformPropOrder.indexOf($)!==-1?"attr"+$.charAt(0).toUpperCase()+$.substring(1):$;j[_e]=b[$]}return j}function useConstant(b){const g=reactExports.useRef(null);return g.current===null&&(g.current=b()),g.current}function makeState({scrapeMotionValuesFromProps:b,createRenderState:g,onMount:_},j,$,_e){const et={latestValues:makeLatestValues(j,$,_e,b),renderState:g()};return _&&(et.mount=tt=>_(j,tt,et)),et}const makeUseVisualState=b=>(g,_)=>{const j=reactExports.useContext(MotionContext),$=reactExports.useContext(PresenceContext),_e=()=>makeState(b,g,j,$);return _?_e():useConstant(_e)};function makeLatestValues(b,g,_,j){const $={},_e=j(b,{});for(const ot in _e)$[ot]=resolveMotionValue(_e[ot]);let{initial:et,animate:tt}=b;const nt=isControllingVariants(b),rt=isVariantNode(b);g&&rt&&!nt&&b.inherit!==!1&&(et===void 0&&(et=g.initial),tt===void 0&&(tt=g.animate));let it=_?_.initial===!1:!1;it=it||et===!1;const st=it?tt:et;if(st&&typeof st!="boolean"&&!isAnimationControls(st)){const ot=Array.isArray(st)?st:[st];for(let lt=0;lt<ot.length;lt++){const at=resolveVariantFromProps(b,ot[lt]);if(at){const{transitionEnd:ut,transition:dt,...ct}=at;for(const ht in ct){let pt=ct[ht];if(Array.isArray(pt)){const mt=it?pt.length-1:0;pt=pt[mt]}pt!==null&&($[ht]=pt)}for(const ht in ut)$[ht]=ut[ht]}}}return $}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(b,g)=>g&&typeof b=="number"?g.transform(b):b,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(b,g,_){let j="",$=!0;for(let _e=0;_e<numTransforms;_e++){const et=transformPropOrder[_e],tt=b[et];if(tt===void 0)continue;let nt=!0;if(typeof tt=="number"?nt=tt===(et.startsWith("scale")?1:0):nt=parseFloat(tt)===0,!nt||_){const rt=getValueAsType(tt,numberValueTypes[et]);if(!nt){$=!1;const it=translateAlias[et]||et;j+=`${it}(${rt}) `}_&&(g[et]=rt)}}return j=j.trim(),_?j=_(g,$?"":j):$&&(j="none"),j}function buildHTMLStyles(b,g,_){const{style:j,vars:$,transformOrigin:_e}=b;let et=!1,tt=!1;for(const nt in g){const rt=g[nt];if(transformProps.has(nt)){et=!0;continue}else if(isCSSVariableName(nt)){$[nt]=rt;continue}else{const it=getValueAsType(rt,numberValueTypes[nt]);nt.startsWith("origin")?(tt=!0,_e[nt]=it):j[nt]=it}}if(g.transform||(et||_?j.transform=buildTransform(g,b.transform,_):j.transform&&(j.transform="none")),tt){const{originX:nt="50%",originY:rt="50%",originZ:it=0}=_e;j.transformOrigin=`${nt} ${rt} ${it}`}}function calcOrigin(b,g,_){return typeof b=="string"?b:px.transform(g+_*b)}function calcSVGTransformOrigin(b,g,_){const j=calcOrigin(g,b.x,b.width),$=calcOrigin(_,b.y,b.height);return`${j} ${$}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(b,g,_=1,j=0,$=!0){b.pathLength=1;const _e=$?dashKeys:camelKeys;b[_e.offset]=px.transform(-j);const et=px.transform(g),tt=px.transform(_);b[_e.array]=`${et} ${tt}`}function buildSVGAttrs(b,{attrX:g,attrY:_,attrScale:j,originX:$,originY:_e,pathLength:et,pathSpacing:tt=1,pathOffset:nt=0,...rt},it,st){if(buildHTMLStyles(b,rt,st),it){b.style.viewBox&&(b.attrs.viewBox=b.style.viewBox);return}b.attrs=b.style,b.style={};const{attrs:ot,style:lt,dimensions:at}=b;ot.transform&&(at&&(lt.transform=ot.transform),delete ot.transform),at&&($!==void 0||_e!==void 0||lt.transform)&&(lt.transformOrigin=calcSVGTransformOrigin(at,$!==void 0?$:.5,_e!==void 0?_e:.5)),g!==void 0&&(ot.x=g),_!==void 0&&(ot.y=_),j!==void 0&&(ot.scale=j),et!==void 0&&buildSVGPath(ot,et,tt,nt,!1)}const isSVGTag=b=>typeof b=="string"&&b.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(b,g,{renderState:_,latestValues:j})=>{frame.read(()=>{try{_.dimensions=typeof g.getBBox=="function"?g.getBBox():g.getBoundingClientRect()}catch{_.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(_,j,isSVGTag(g.tagName),b.transformTemplate),renderSVG(g,_)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(b,g,_){for(const j in g)!isMotionValue(g[j])&&!isForcedMotionValue(j,_)&&(b[j]=g[j])}function useInitialMotionValues({transformTemplate:b},g){return reactExports.useMemo(()=>{const _=createHtmlRenderState();return buildHTMLStyles(_,g,b),Object.assign({},_.vars,_.style)},[g])}function useStyle(b,g){const _=b.style||{},j={};return copyRawValuesOnly(j,_,b),Object.assign(j,useInitialMotionValues(b,g)),j}function useHTMLProps(b,g){const _={},j=useStyle(b,g);return b.drag&&b.dragListener!==!1&&(_.draggable=!1,j.userSelect=j.WebkitUserSelect=j.WebkitTouchCallout="none",j.touchAction=b.drag===!0?"none":`pan-${b.drag==="x"?"y":"x"}`),b.tabIndex===void 0&&(b.onTap||b.onTapStart||b.whileTap)&&(_.tabIndex=0),_.style=j,_}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(b){return b.startsWith("while")||b.startsWith("drag")&&b!=="draggable"||b.startsWith("layout")||b.startsWith("onTap")||b.startsWith("onPan")||b.startsWith("onLayout")||validMotionProps.has(b)}let shouldForward=b=>!isValidMotionProp(b);function loadExternalIsValidProp(b){b&&(shouldForward=g=>g.startsWith("on")?!isValidMotionProp(g):b(g))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(b,g,_){const j={};for(const $ in b)$==="values"&&typeof b.values=="object"||(shouldForward($)||_===!0&&isValidMotionProp($)||!g&&!isValidMotionProp($)||b.draggable&&$.startsWith("onDrag"))&&(j[$]=b[$]);return j}function useSVGProps(b,g,_,j){const $=reactExports.useMemo(()=>{const _e=createSvgRenderState();return buildSVGAttrs(_e,g,isSVGTag(j),b.transformTemplate),{..._e.attrs,style:{..._e.style}}},[g]);if(b.style){const _e={};copyRawValuesOnly(_e,b.style,b),$.style={..._e,...$.style}}return $}function createUseRender(b=!1){return(_,j,$,{latestValues:_e},et)=>{const nt=(isSVGComponent(_)?useSVGProps:useHTMLProps)(j,_e,et,_),rt=filterProps(j,typeof _=="string",b),it=_!==reactExports.Fragment?{...rt,...nt,ref:$}:{},{children:st}=j,ot=reactExports.useMemo(()=>isMotionValue(st)?st.get():st,[st]);return reactExports.createElement(_,{...it,children:ot})}}function createMotionComponentFactory(b,g){return function(j,{forwardMotionProps:$}={forwardMotionProps:!1}){const et={...isSVGComponent(j)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:b,useRender:createUseRender($),createVisualElement:g,Component:j};return createRendererMotionComponent(et)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const b=window.matchMedia("(prefers-reduced-motion)"),g=()=>prefersReducedMotion.current=b.matches;b.addListener(g),g()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(b,g,_){for(const j in g){const $=g[j],_e=_[j];if(isMotionValue($))b.addValue(j,$);else if(isMotionValue(_e))b.addValue(j,motionValue($,{owner:b}));else if(_e!==$)if(b.hasValue(j)){const et=b.getValue(j);et.liveStyle===!0?et.jump($):et.hasAnimated||et.set($)}else{const et=b.getStaticValue(j);b.addValue(j,motionValue(et!==void 0?et:$,{owner:b}))}}for(const j in _)g[j]===void 0&&b.removeValue(j);return g}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=b=>valueTypes.find(testValueType(b)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(g,_,j){return{}}constructor({parent:g,props:_,presenceContext:j,reducedMotionConfig:$,blockInitialAnimation:_e,visualState:et},tt={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const ot=time.now();this.renderScheduledAt<ot&&(this.renderScheduledAt=ot,frame.render(this.render,!1,!0))};const{latestValues:nt,renderState:rt}=et;this.latestValues=nt,this.baseTarget={...nt},this.initialValues=_.initial?{...nt}:{},this.renderState=rt,this.parent=g,this.props=_,this.presenceContext=j,this.depth=g?g.depth+1:0,this.reducedMotionConfig=$,this.options=tt,this.blockInitialAnimation=!!_e,this.isControllingVariants=isControllingVariants(_),this.isVariantNode=isVariantNode(_),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(g&&g.current);const{willChange:it,...st}=this.scrapeMotionValuesFromProps(_,{},this);for(const ot in st){const lt=st[ot];nt[ot]!==void 0&&isMotionValue(lt)&&lt.set(nt[ot],!1)}}mount(g){this.current=g,visualElementStore.set(g,this),this.projection&&!this.projection.instance&&this.projection.mount(g),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((_,j)=>this.bindToMotionValue(j,_)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(g=>g()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const g in this.events)this.events[g].clear();for(const g in this.features){const _=this.features[g];_&&(_.unmount(),_.isMounted=!1)}this.current=null}bindToMotionValue(g,_){this.valueSubscriptions.has(g)&&this.valueSubscriptions.get(g)();const j=transformProps.has(g),$=_.on("change",tt=>{this.latestValues[g]=tt,this.props.onUpdate&&frame.preRender(this.notifyUpdate),j&&this.projection&&(this.projection.isTransformDirty=!0)}),_e=_.on("renderRequest",this.scheduleRender);let et;window.MotionCheckAppearSync&&(et=window.MotionCheckAppearSync(this,g,_)),this.valueSubscriptions.set(g,()=>{$(),_e(),et&&et(),_.owner&&_.stop()})}sortNodePosition(g){return!this.current||!this.sortInstanceNodePosition||this.type!==g.type?0:this.sortInstanceNodePosition(this.current,g.current)}updateFeatures(){let g="animation";for(g in featureDefinitions){const _=featureDefinitions[g];if(!_)continue;const{isEnabled:j,Feature:$}=_;if(!this.features[g]&&$&&j(this.props)&&(this.features[g]=new $(this)),this.features[g]){const _e=this.features[g];_e.isMounted?_e.update():(_e.mount(),_e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(g){return this.latestValues[g]}setStaticValue(g,_){this.latestValues[g]=_}update(g,_){(g.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=g,this.prevPresenceContext=this.presenceContext,this.presenceContext=_;for(let j=0;j<propEventHandlers.length;j++){const $=propEventHandlers[j];this.propEventSubscriptions[$]&&(this.propEventSubscriptions[$](),delete this.propEventSubscriptions[$]);const _e="on"+$,et=g[_e];et&&(this.propEventSubscriptions[$]=this.on($,et))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(g,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(g){return this.props.variants?this.props.variants[g]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(g){const _=this.getClosestVariantNode();if(_)return _.variantChildren&&_.variantChildren.add(g),()=>_.variantChildren.delete(g)}addValue(g,_){const j=this.values.get(g);_!==j&&(j&&this.removeValue(g),this.bindToMotionValue(g,_),this.values.set(g,_),this.latestValues[g]=_.get())}removeValue(g){this.values.delete(g);const _=this.valueSubscriptions.get(g);_&&(_(),this.valueSubscriptions.delete(g)),delete this.latestValues[g],this.removeValueFromRenderState(g,this.renderState)}hasValue(g){return this.values.has(g)}getValue(g,_){if(this.props.values&&this.props.values[g])return this.props.values[g];let j=this.values.get(g);return j===void 0&&_!==void 0&&(j=motionValue(_===null?void 0:_,{owner:this}),this.addValue(g,j)),j}readValue(g,_){var j;let $=this.latestValues[g]!==void 0||!this.current?this.latestValues[g]:(j=this.getBaseTargetFromProps(this.props,g))!==null&&j!==void 0?j:this.readValueFromInstance(this.current,g,this.options);return $!=null&&(typeof $=="string"&&(isNumericalString($)||isZeroValueString($))?$=parseFloat($):!findValueType($)&&complex.test(_)&&($=getAnimatableNone(g,_)),this.setBaseTarget(g,isMotionValue($)?$.get():$)),isMotionValue($)?$.get():$}setBaseTarget(g,_){this.baseTarget[g]=_}getBaseTarget(g){var _;const{initial:j}=this.props;let $;if(typeof j=="string"||typeof j=="object"){const et=resolveVariantFromProps(this.props,j,(_=this.presenceContext)===null||_===void 0?void 0:_.custom);et&&($=et[g])}if(j&&$!==void 0)return $;const _e=this.getBaseTargetFromProps(this.props,g);return _e!==void 0&&!isMotionValue(_e)?_e:this.initialValues[g]!==void 0&&$===void 0?void 0:this.baseTarget[g]}on(g,_){return this.events[g]||(this.events[g]=new SubscriptionManager),this.events[g].add(_)}notify(g,..._){this.events[g]&&this.events[g].notify(..._)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(g,_){return g.compareDocumentPosition(_)&2?1:-1}getBaseTargetFromProps(g,_){return g.style?g.style[_]:void 0}removeValueFromRenderState(g,{vars:_,style:j}){delete _[g],delete j[g]}}function getComputedStyle$2(b){return window.getComputedStyle(b)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(g,_){if(transformProps.has(_)){const j=getDefaultValueType(_);return j&&j.default||0}else{const j=getComputedStyle$2(g),$=(isCSSVariableName(_)?j.getPropertyValue(_):j[_])||0;return typeof $=="string"?$.trim():$}}measureInstanceViewportBox(g,{transformPagePoint:_}){return measureViewportBox(g,_)}build(g,_,j){buildHTMLStyles(g,_,j.transformTemplate)}scrapeMotionValuesFromProps(g,_,j){return scrapeMotionValuesFromProps$1(g,_,j)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:g}=this.props;isMotionValue(g)&&(this.childSubscription=g.on("change",_=>{this.current&&(this.current.textContent=`${_}`)}))}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(g,_){return g[_]}readValueFromInstance(g,_){if(transformProps.has(_)){const j=getDefaultValueType(_);return j&&j.default||0}return _=camelCaseAttributes.has(_)?_:camelToDash(_),g.getAttribute(_)}scrapeMotionValuesFromProps(g,_,j){return scrapeMotionValuesFromProps(g,_,j)}build(g,_,j){buildSVGAttrs(g,_,this.isSVGTag,j.transformTemplate)}renderInstance(g,_,j,$){renderSVG(g,_,j,$)}mount(g){this.isSVGTag=isSVGTag(g.tagName),super.mount(g)}}const createDomVisualElement=(b,g)=>isSVGComponent(b)?new SVGVisualElement(g):new HTMLVisualElement(g,{allowProjection:b!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(g){const _=this.props.childRef.current;if(_&&g.isPresent&&!this.props.isPresent){const j=this.props.sizeRef.current;j.height=_.offsetHeight||0,j.width=_.offsetWidth||0,j.top=_.offsetTop,j.left=_.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:b,isPresent:g}){const _=reactExports.useId(),j=reactExports.useRef(null),$=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:_e}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:et,height:tt,top:nt,left:rt}=$.current;if(g||!j.current||!et||!tt)return;j.current.dataset.motionPopId=_;const it=document.createElement("style");return _e&&(it.nonce=_e),document.head.appendChild(it),it.sheet&&it.sheet.insertRule(`
          [data-motion-pop-id="${_}"] {
            position: absolute !important;
            width: ${et}px !important;
            height: ${tt}px !important;
            top: ${nt}px !important;
            left: ${rt}px !important;
          }
        `),()=>{document.head.removeChild(it)}},[g]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:g,childRef:j,sizeRef:$,children:reactExports.cloneElement(b,{ref:j})})}const PresenceChild=({children:b,initial:g,isPresent:_,onExitComplete:j,custom:$,presenceAffectsLayout:_e,mode:et})=>{const tt=useConstant(newChildrenMap),nt=reactExports.useId(),rt=reactExports.useCallback(st=>{tt.set(st,!0);for(const ot of tt.values())if(!ot)return;j&&j()},[tt,j]),it=reactExports.useMemo(()=>({id:nt,initial:g,isPresent:_,custom:$,onExitComplete:rt,register:st=>(tt.set(st,!1),()=>tt.delete(st))}),_e?[Math.random(),rt]:[_,rt]);return reactExports.useMemo(()=>{tt.forEach((st,ot)=>tt.set(ot,!1))},[_]),reactExports.useEffect(()=>{!_&&!tt.size&&j&&j()},[_]),et==="popLayout"&&(b=jsxRuntimeExports.jsx(PopChild,{isPresent:_,children:b})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:it,children:b})};function newChildrenMap(){return new Map}const getChildKey=b=>b.key||"";function onlyElements(b){const g=[];return reactExports.Children.forEach(b,_=>{reactExports.isValidElement(_)&&g.push(_)}),g}const AnimatePresence=({children:b,exitBeforeEnter:g,custom:_,initial:j=!0,onExitComplete:$,presenceAffectsLayout:_e=!0,mode:et="sync"})=>{const tt=reactExports.useMemo(()=>onlyElements(b),[b]),nt=tt.map(getChildKey),rt=reactExports.useRef(!0),it=reactExports.useRef(tt),st=useConstant(()=>new Map),[ot,lt]=reactExports.useState(tt),[at,ut]=reactExports.useState(tt);useIsomorphicLayoutEffect$1(()=>{rt.current=!1,it.current=tt;for(let ht=0;ht<at.length;ht++){const pt=getChildKey(at[ht]);nt.includes(pt)?st.delete(pt):st.get(pt)!==!0&&st.set(pt,!1)}},[at,nt.length,nt.join("-")]);const dt=[];if(tt!==ot){let ht=[...tt];for(let pt=0;pt<at.length;pt++){const mt=at[pt],ft=getChildKey(mt);nt.includes(ft)||(ht.splice(pt,0,mt),dt.push(mt))}et==="wait"&&dt.length&&(ht=dt),ut(onlyElements(ht)),lt(tt);return}const{forceRender:ct}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:at.map(ht=>{const pt=getChildKey(ht),mt=tt===at||nt.includes(pt),ft=()=>{if(st.has(pt))st.set(pt,!0);else return;let gt=!0;st.forEach(xt=>{xt||(gt=!1)}),gt&&(ct==null||ct(),ut(it.current),$&&$())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:mt,initial:!rt.current||j?void 0:!1,custom:mt?void 0:_,presenceAffectsLayout:_e,mode:et,onExitComplete:mt?void 0:ft,children:ht},pt)})})};function useMotionValue(b){const g=useConstant(()=>motionValue(b)),{isStatic:_}=reactExports.useContext(MotionConfigContext);if(_){const[,j]=reactExports.useState(b);reactExports.useEffect(()=>g.on("change",j),[])}return g}function toNumber(b){return typeof b=="number"?b:parseFloat(b)}function useSpring(b,g={}){const{isStatic:_}=reactExports.useContext(MotionConfigContext),j=reactExports.useRef(null),$=useMotionValue(isMotionValue(b)?toNumber(b.get()):b),_e=reactExports.useRef($.get()),et=reactExports.useRef(()=>{}),tt=()=>{const rt=j.current;rt&&rt.time===0&&rt.sample(frameData.delta),nt(),j.current=animateValue({keyframes:[$.get(),_e.current],velocity:$.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...g,onUpdate:et.current})},nt=()=>{j.current&&j.current.stop()};return reactExports.useInsertionEffect(()=>$.attach((rt,it)=>_?it(rt):(_e.current=rt,et.current=it,frame.update(tt),$.get()),nt),[JSON.stringify(g)]),useIsomorphicLayoutEffect$1(()=>{if(isMotionValue(b))return b.on("change",rt=>$.set(toNumber(rt)))},[$]),$}const brid="/assets/brid-EOrI-a-Y.svg",links="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.48828%2010.1367C6.73828%2010.0078%206.26953%209.74414%205.90039%209.375C4.47656%207.95703%204.48828%205.96484%205.89453%204.55859L7.89258%202.55469C9.29883%201.14844%2011.291%201.13672%2012.7148%202.56055C14.1328%203.98438%2014.1211%205.9707%2012.7207%207.37695L10.998%209.09375C11.0566%208.71289%2011.0215%208.2793%2010.8574%207.9043L12.0059%206.75586C13.0195%205.74219%2013.0312%204.29492%2012.0059%203.26953C10.9805%202.24414%209.53906%202.25%208.51367%203.26953L6.60352%205.17969C5.58984%206.19336%205.58398%207.64648%206.60938%208.67188C6.99023%209.05273%207.49414%209.28711%208.26758%209.3457L7.48828%2010.1367ZM7.63477%205.30859C8.38477%205.4375%208.85352%205.70117%209.22266%206.07031C10.6465%207.48828%2010.6348%209.48047%209.22852%2010.8867L7.22461%2012.8965C5.82422%2014.2969%203.83203%2014.3086%202.4082%2012.8848C0.990234%2011.4668%201.00195%209.47461%202.40234%208.06836L4.125%206.35156C4.06055%206.73242%204.10156%207.17188%204.26562%207.54102L3.11719%208.68945C2.09766%209.70898%202.0918%2011.1504%203.11719%2012.1816C4.14258%2013.2012%205.58398%2013.1953%206.60352%2012.1758L8.51953%2010.2656C9.5332%209.25195%209.53906%207.79883%208.51367%206.77344C8.13281%206.39258%207.62891%206.16406%206.85547%206.09961L7.63477%205.30859Z'%20fill='%233076FF'/%3e%3c/svg%3e",whitelinks="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.48828%2010.1367C6.73828%2010.0078%206.26953%209.74414%205.90039%209.375C4.47656%207.95703%204.48828%205.96484%205.89453%204.55859L7.89258%202.55469C9.29883%201.14844%2011.291%201.13672%2012.7148%202.56055C14.1328%203.98438%2014.1211%205.9707%2012.7207%207.37695L10.998%209.09375C11.0566%208.71289%2011.0215%208.2793%2010.8574%207.9043L12.0059%206.75586C13.0195%205.74219%2013.0312%204.29492%2012.0059%203.26953C10.9805%202.24414%209.53906%202.25%208.51367%203.26953L6.60352%205.17969C5.58984%206.19336%205.58398%207.64648%206.60938%208.67188C6.99023%209.05273%207.49414%209.28711%208.26758%209.3457L7.48828%2010.1367ZM7.63477%205.30859C8.38477%205.4375%208.85352%205.70117%209.22266%206.07031C10.6465%207.48828%2010.6348%209.48047%209.22852%2010.8867L7.22461%2012.8965C5.82422%2014.2969%203.83203%2014.3086%202.4082%2012.8848C0.990234%2011.4668%201.00195%209.47461%202.40234%208.06836L4.125%206.35156C4.06055%206.73242%204.10156%207.17188%204.26562%207.54102L3.11719%208.68945C2.09766%209.70898%202.0918%2011.1504%203.11719%2012.1816C4.14258%2013.2012%205.58398%2013.1953%206.60352%2012.1758L8.51953%2010.2656C9.5332%209.25195%209.53906%207.79883%208.51367%206.77344C8.13281%206.39258%207.62891%206.16406%206.85547%206.09961L7.63477%205.30859Z'%20fill='white'/%3e%3c/svg%3e",plusIcon="data:image/svg+xml,%3csvg%20width='15'%20height='16'%20viewBox='0%200%2015%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.116699%208.00684C0.116699%207.41748%200.606445%206.93604%201.1875%206.93604H6.06836V2.05518C6.06836%201.47412%206.5498%200.984375%207.13916%200.984375C7.72852%200.984375%208.20996%201.47412%208.20996%202.05518V6.93604H13.0908C13.6802%206.93604%2014.1616%207.41748%2014.1616%208.00684C14.1616%208.59619%2013.6802%209.07764%2013.0908%209.07764H8.20996V13.9585C8.20996%2014.5479%207.72852%2015.0293%207.13916%2015.0293C6.5498%2015.0293%206.06836%2014.5479%206.06836%2013.9585V9.07764H1.1875C0.606445%209.07764%200.116699%208.59619%200.116699%208.00684Z'%20fill='%23191919'/%3e%3c/svg%3e";function StepZero({handleNext:b}){const[g,_]=reactExports.useState("token1"),j=useMotionValue(0),$=useMotionValue(0),_e=useSpring(j,{stiffness:400,damping:50}),et=useSpring($,{stiffness:400,damping:50});return jsxRuntimeExports.jsxs("div",{className:"w-full h-full flex justify-center items-center flex-col pb-16 relative",children:[jsxRuntimeExports.jsx(motion.div,{className:"w-[345px] mx-auto",drag:!0,dragMomentum:!1,style:{x:_e,y:et},onDrag:(tt,nt)=>{j.set(nt.offset.x),$.set(nt.offset.y)},onDragEnd:()=>{j.set(0),$.set(0)},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:jsxRuntimeExports.jsxs("article",{className:"bg-gradient-to-b from-[#3076FF] to-[#1D49E5] text-white text-[17px] pt-3 rounded-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"px-3 text-[17px]",children:["Typo is the best way to share your ideas. ",jsxRuntimeExports.jsx("br",{}),"They can be"," ",jsxRuntimeExports.jsx("button",{onClick:()=>_("token1"),className:`inline-flex items-center gap-0.5 text-xs py-1 px-2 rounded-3xl w-fit cursor-pointer ${g==="token1"?"bg-white text-secondary":"bg-[#FFFFFF33] text-white"}`,children:jsxRuntimeExports.jsxs("div",{className:"tokenPill",children:[jsxRuntimeExports.jsx("div",{className:"thumbnail",children:jsxRuntimeExports.jsx("img",{src:brid,alt:"Token Thumbnail",className:"thumbnailImg"})}),jsxRuntimeExports.jsx("span",{children:"video.mp4"})]})})," ",jsxRuntimeExports.jsx("button",{onClick:()=>_("token2"),className:`inline-flex items-center gap-0.5 text-xs py-1 px-2 rounded-3xl w-fit cursor-pointer ${g==="token2"?"bg-white text-secondary":"bg-[#FFFFFF33] text-white"}`,children:jsxRuntimeExports.jsxs("div",{className:"tokenPill",children:[jsxRuntimeExports.jsx("div",{className:"thumbnail",children:jsxRuntimeExports.jsx("img",{src:brid,alt:"Token Thumbnail",className:"thumbnailImg"})}),jsxRuntimeExports.jsx("span",{children:"songs.mp3"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>_("token3"),className:`inline-flex items-center gap-0.5 text-xs py-1 px-2 rounded-3xl w-fit cursor-pointer ${g==="token3"?"bg-white text-secondary":"bg-[#FFFFFF33] text-white"}`,children:jsxRuntimeExports.jsxs("div",{className:"tokenPill",children:[jsxRuntimeExports.jsx("div",{className:"thumbnail",children:jsxRuntimeExports.jsx("img",{src:g==="token3"?links:whitelinks,alt:"Links icon"})}),jsxRuntimeExports.jsx("span",{children:"links"})]})})," ","or all of the above... Upload and share up to 5GBs for free"]}),jsxRuntimeExports.jsx("div",{className:"bubble-bottom mt-2 translate-y-2",children:jsxRuntimeExports.jsx("img",{src:brid,alt:"Whiteboarding",style:{width:"100%"}})})]})}),jsxRuntimeExports.jsxs("button",{onClick:b,className:"bg-[#F3F3F3BF] text-primary px-4 py-2.5 rounded-full flex items-center font-semibold absolute bottom-12",children:[jsxRuntimeExports.jsx("img",{src:plusIcon,alt:"plus icon",className:"inline-block mr-2"}),"Create an idea"]})]})}function OrderedMap(b){this.content=b}OrderedMap.prototype={constructor:OrderedMap,find:function(b){for(var g=0;g<this.content.length;g+=2)if(this.content[g]===b)return g;return-1},get:function(b){var g=this.find(b);return g==-1?void 0:this.content[g+1]},update:function(b,g,_){var j=_&&_!=b?this.remove(_):this,$=j.find(b),_e=j.content.slice();return $==-1?_e.push(_||b,g):(_e[$+1]=g,_&&(_e[$]=_)),new OrderedMap(_e)},remove:function(b){var g=this.find(b);if(g==-1)return this;var _=this.content.slice();return _.splice(g,2),new OrderedMap(_)},addToStart:function(b,g){return new OrderedMap([b,g].concat(this.remove(b).content))},addToEnd:function(b,g){var _=this.remove(b).content.slice();return _.push(b,g),new OrderedMap(_)},addBefore:function(b,g,_){var j=this.remove(g),$=j.content.slice(),_e=j.find(b);return $.splice(_e==-1?$.length:_e,0,g,_),new OrderedMap($)},forEach:function(b){for(var g=0;g<this.content.length;g+=2)b(this.content[g],this.content[g+1])},prepend:function(b){return b=OrderedMap.from(b),b.size?new OrderedMap(b.content.concat(this.subtract(b).content)):this},append:function(b){return b=OrderedMap.from(b),b.size?new OrderedMap(this.subtract(b).content.concat(b.content)):this},subtract:function(b){var g=this;b=OrderedMap.from(b);for(var _=0;_<b.content.length;_+=2)g=g.remove(b.content[_]);return g},toObject:function(){var b={};return this.forEach(function(g,_){b[g]=_}),b},get size(){return this.content.length>>1}};OrderedMap.from=function(b){if(b instanceof OrderedMap)return b;var g=[];if(b)for(var _ in b)g.push(_,b[_]);return new OrderedMap(g)};function findDiffStart(b,g,_){for(let j=0;;j++){if(j==b.childCount||j==g.childCount)return b.childCount==g.childCount?null:_;let $=b.child(j),_e=g.child(j);if($==_e){_+=$.nodeSize;continue}if(!$.sameMarkup(_e))return _;if($.isText&&$.text!=_e.text){for(let et=0;$.text[et]==_e.text[et];et++)_++;return _}if($.content.size||_e.content.size){let et=findDiffStart($.content,_e.content,_+1);if(et!=null)return et}_+=$.nodeSize}}function findDiffEnd(b,g,_,j){for(let $=b.childCount,_e=g.childCount;;){if($==0||_e==0)return $==_e?null:{a:_,b:j};let et=b.child(--$),tt=g.child(--_e),nt=et.nodeSize;if(et==tt){_-=nt,j-=nt;continue}if(!et.sameMarkup(tt))return{a:_,b:j};if(et.isText&&et.text!=tt.text){let rt=0,it=Math.min(et.text.length,tt.text.length);for(;rt<it&&et.text[et.text.length-rt-1]==tt.text[tt.text.length-rt-1];)rt++,_--,j--;return{a:_,b:j}}if(et.content.size||tt.content.size){let rt=findDiffEnd(et.content,tt.content,_-1,j-1);if(rt)return rt}_-=nt,j-=nt}}class Fragment{constructor(g,_){if(this.content=g,this.size=_||0,_==null)for(let j=0;j<g.length;j++)this.size+=g[j].nodeSize}nodesBetween(g,_,j,$=0,_e){for(let et=0,tt=0;tt<_;et++){let nt=this.content[et],rt=tt+nt.nodeSize;if(rt>g&&j(nt,$+tt,_e||null,et)!==!1&&nt.content.size){let it=tt+1;nt.nodesBetween(Math.max(0,g-it),Math.min(nt.content.size,_-it),j,$+it)}tt=rt}}descendants(g){this.nodesBetween(0,this.size,g)}textBetween(g,_,j,$){let _e="",et=!0;return this.nodesBetween(g,_,(tt,nt)=>{let rt=tt.isText?tt.text.slice(Math.max(g,nt)-nt,_-nt):tt.isLeaf?$?typeof $=="function"?$(tt):$:tt.type.spec.leafText?tt.type.spec.leafText(tt):"":"";tt.isBlock&&(tt.isLeaf&&rt||tt.isTextblock)&&j&&(et?et=!1:_e+=j),_e+=rt},0),_e}append(g){if(!g.size)return this;if(!this.size)return g;let _=this.lastChild,j=g.firstChild,$=this.content.slice(),_e=0;for(_.isText&&_.sameMarkup(j)&&($[$.length-1]=_.withText(_.text+j.text),_e=1);_e<g.content.length;_e++)$.push(g.content[_e]);return new Fragment($,this.size+g.size)}cut(g,_=this.size){if(g==0&&_==this.size)return this;let j=[],$=0;if(_>g)for(let _e=0,et=0;et<_;_e++){let tt=this.content[_e],nt=et+tt.nodeSize;nt>g&&((et<g||nt>_)&&(tt.isText?tt=tt.cut(Math.max(0,g-et),Math.min(tt.text.length,_-et)):tt=tt.cut(Math.max(0,g-et-1),Math.min(tt.content.size,_-et-1))),j.push(tt),$+=tt.nodeSize),et=nt}return new Fragment(j,$)}cutByIndex(g,_){return g==_?Fragment.empty:g==0&&_==this.content.length?this:new Fragment(this.content.slice(g,_))}replaceChild(g,_){let j=this.content[g];if(j==_)return this;let $=this.content.slice(),_e=this.size+_.nodeSize-j.nodeSize;return $[g]=_,new Fragment($,_e)}addToStart(g){return new Fragment([g].concat(this.content),this.size+g.nodeSize)}addToEnd(g){return new Fragment(this.content.concat(g),this.size+g.nodeSize)}eq(g){if(this.content.length!=g.content.length)return!1;for(let _=0;_<this.content.length;_++)if(!this.content[_].eq(g.content[_]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(g){let _=this.content[g];if(!_)throw new RangeError("Index "+g+" out of range for "+this);return _}maybeChild(g){return this.content[g]||null}forEach(g){for(let _=0,j=0;_<this.content.length;_++){let $=this.content[_];g($,j,_),j+=$.nodeSize}}findDiffStart(g,_=0){return findDiffStart(this,g,_)}findDiffEnd(g,_=this.size,j=g.size){return findDiffEnd(this,g,_,j)}findIndex(g,_=-1){if(g==0)return retIndex(0,g);if(g==this.size)return retIndex(this.content.length,g);if(g>this.size||g<0)throw new RangeError(`Position ${g} outside of fragment (${this})`);for(let j=0,$=0;;j++){let _e=this.child(j),et=$+_e.nodeSize;if(et>=g)return et==g||_>0?retIndex(j+1,et):retIndex(j,$);$=et}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(g=>g.toJSON()):null}static fromJSON(g,_){if(!_)return Fragment.empty;if(!Array.isArray(_))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(_.map(g.nodeFromJSON))}static fromArray(g){if(!g.length)return Fragment.empty;let _,j=0;for(let $=0;$<g.length;$++){let _e=g[$];j+=_e.nodeSize,$&&_e.isText&&g[$-1].sameMarkup(_e)?(_||(_=g.slice(0,$)),_[_.length-1]=_e.withText(_[_.length-1].text+_e.text)):_&&_.push(_e)}return new Fragment(_||g,j)}static from(g){if(!g)return Fragment.empty;if(g instanceof Fragment)return g;if(Array.isArray(g))return this.fromArray(g);if(g.attrs)return new Fragment([g],g.nodeSize);throw new RangeError("Can not convert "+g+" to a Fragment"+(g.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(b,g){return found.index=b,found.offset=g,found}function compareDeep(b,g){if(b===g)return!0;if(!(b&&typeof b=="object")||!(g&&typeof g=="object"))return!1;let _=Array.isArray(b);if(Array.isArray(g)!=_)return!1;if(_){if(b.length!=g.length)return!1;for(let j=0;j<b.length;j++)if(!compareDeep(b[j],g[j]))return!1}else{for(let j in b)if(!(j in g)||!compareDeep(b[j],g[j]))return!1;for(let j in g)if(!(j in b))return!1}return!0}let Mark$1=class Ao{constructor(g,_){this.type=g,this.attrs=_}addToSet(g){let _,j=!1;for(let $=0;$<g.length;$++){let _e=g[$];if(this.eq(_e))return g;if(this.type.excludes(_e.type))_||(_=g.slice(0,$));else{if(_e.type.excludes(this.type))return g;!j&&_e.type.rank>this.type.rank&&(_||(_=g.slice(0,$)),_.push(this),j=!0),_&&_.push(_e)}}return _||(_=g.slice()),j||_.push(this),_}removeFromSet(g){for(let _=0;_<g.length;_++)if(this.eq(g[_]))return g.slice(0,_).concat(g.slice(_+1));return g}isInSet(g){for(let _=0;_<g.length;_++)if(this.eq(g[_]))return!0;return!1}eq(g){return this==g||this.type==g.type&&compareDeep(this.attrs,g.attrs)}toJSON(){let g={type:this.type.name};for(let _ in this.attrs){g.attrs=this.attrs;break}return g}static fromJSON(g,_){if(!_)throw new RangeError("Invalid input for Mark.fromJSON");let j=g.marks[_.type];if(!j)throw new RangeError(`There is no mark type ${_.type} in this schema`);let $=j.create(_.attrs);return j.checkAttrs($.attrs),$}static sameSet(g,_){if(g==_)return!0;if(g.length!=_.length)return!1;for(let j=0;j<g.length;j++)if(!g[j].eq(_[j]))return!1;return!0}static setFrom(g){if(!g||Array.isArray(g)&&g.length==0)return Ao.none;if(g instanceof Ao)return[g];let _=g.slice();return _.sort((j,$)=>j.type.rank-$.type.rank),_}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(g,_,j){this.content=g,this.openStart=_,this.openEnd=j}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(g,_){let j=insertInto(this.content,g+this.openStart,_);return j&&new Slice(j,this.openStart,this.openEnd)}removeBetween(g,_){return new Slice(removeRange(this.content,g+this.openStart,_+this.openStart),this.openStart,this.openEnd)}eq(g){return this.content.eq(g.content)&&this.openStart==g.openStart&&this.openEnd==g.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let g={content:this.content.toJSON()};return this.openStart>0&&(g.openStart=this.openStart),this.openEnd>0&&(g.openEnd=this.openEnd),g}static fromJSON(g,_){if(!_)return Slice.empty;let j=_.openStart||0,$=_.openEnd||0;if(typeof j!="number"||typeof $!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(g,_.content),j,$)}static maxOpen(g,_=!0){let j=0,$=0;for(let _e=g.firstChild;_e&&!_e.isLeaf&&(_||!_e.type.spec.isolating);_e=_e.firstChild)j++;for(let _e=g.lastChild;_e&&!_e.isLeaf&&(_||!_e.type.spec.isolating);_e=_e.lastChild)$++;return new Slice(g,j,$)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(b,g,_){let{index:j,offset:$}=b.findIndex(g),_e=b.maybeChild(j),{index:et,offset:tt}=b.findIndex(_);if($==g||_e.isText){if(tt!=_&&!b.child(et).isText)throw new RangeError("Removing non-flat range");return b.cut(0,g).append(b.cut(_))}if(j!=et)throw new RangeError("Removing non-flat range");return b.replaceChild(j,_e.copy(removeRange(_e.content,g-$-1,_-$-1)))}function insertInto(b,g,_,j){let{index:$,offset:_e}=b.findIndex(g),et=b.maybeChild($);if(_e==g||et.isText)return b.cut(0,g).append(_).append(b.cut(g));let tt=insertInto(et.content,g-_e-1,_);return tt&&b.replaceChild($,et.copy(tt))}function replace(b,g,_){if(_.openStart>b.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(b.depth-_.openStart!=g.depth-_.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(b,g,_,0)}function replaceOuter(b,g,_,j){let $=b.index(j),_e=b.node(j);if($==g.index(j)&&j<b.depth-_.openStart){let et=replaceOuter(b,g,_,j+1);return _e.copy(_e.content.replaceChild($,et))}else if(_.content.size)if(!_.openStart&&!_.openEnd&&b.depth==j&&g.depth==j){let et=b.parent,tt=et.content;return close(et,tt.cut(0,b.parentOffset).append(_.content).append(tt.cut(g.parentOffset)))}else{let{start:et,end:tt}=prepareSliceForReplace(_,b);return close(_e,replaceThreeWay(b,et,tt,g,j))}else return close(_e,replaceTwoWay(b,g,j))}function checkJoin(b,g){if(!g.type.compatibleContent(b.type))throw new ReplaceError("Cannot join "+g.type.name+" onto "+b.type.name)}function joinable$1(b,g,_){let j=b.node(_);return checkJoin(j,g.node(_)),j}function addNode(b,g){let _=g.length-1;_>=0&&b.isText&&b.sameMarkup(g[_])?g[_]=b.withText(g[_].text+b.text):g.push(b)}function addRange(b,g,_,j){let $=(g||b).node(_),_e=0,et=g?g.index(_):$.childCount;b&&(_e=b.index(_),b.depth>_?_e++:b.textOffset&&(addNode(b.nodeAfter,j),_e++));for(let tt=_e;tt<et;tt++)addNode($.child(tt),j);g&&g.depth==_&&g.textOffset&&addNode(g.nodeBefore,j)}function close(b,g){return b.type.checkContent(g),b.copy(g)}function replaceThreeWay(b,g,_,j,$){let _e=b.depth>$&&joinable$1(b,g,$+1),et=j.depth>$&&joinable$1(_,j,$+1),tt=[];return addRange(null,b,$,tt),_e&&et&&g.index($)==_.index($)?(checkJoin(_e,et),addNode(close(_e,replaceThreeWay(b,g,_,j,$+1)),tt)):(_e&&addNode(close(_e,replaceTwoWay(b,g,$+1)),tt),addRange(g,_,$,tt),et&&addNode(close(et,replaceTwoWay(_,j,$+1)),tt)),addRange(j,null,$,tt),new Fragment(tt)}function replaceTwoWay(b,g,_){let j=[];if(addRange(null,b,_,j),b.depth>_){let $=joinable$1(b,g,_+1);addNode(close($,replaceTwoWay(b,g,_+1)),j)}return addRange(g,null,_,j),new Fragment(j)}function prepareSliceForReplace(b,g){let _=g.depth-b.openStart,$=g.node(_).copy(b.content);for(let _e=_-1;_e>=0;_e--)$=g.node(_e).copy(Fragment.from($));return{start:$.resolveNoCache(b.openStart+_),end:$.resolveNoCache($.content.size-b.openEnd-_)}}class ResolvedPos{constructor(g,_,j){this.pos=g,this.path=_,this.parentOffset=j,this.depth=_.length/3-1}resolveDepth(g){return g==null?this.depth:g<0?this.depth+g:g}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(g){return this.path[this.resolveDepth(g)*3]}index(g){return this.path[this.resolveDepth(g)*3+1]}indexAfter(g){return g=this.resolveDepth(g),this.index(g)+(g==this.depth&&!this.textOffset?0:1)}start(g){return g=this.resolveDepth(g),g==0?0:this.path[g*3-1]+1}end(g){return g=this.resolveDepth(g),this.start(g)+this.node(g).content.size}before(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position before the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]}after(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position after the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]+this.path[g*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let g=this.parent,_=this.index(this.depth);if(_==g.childCount)return null;let j=this.pos-this.path[this.path.length-1],$=g.child(_);return j?g.child(_).cut(j):$}get nodeBefore(){let g=this.index(this.depth),_=this.pos-this.path[this.path.length-1];return _?this.parent.child(g).cut(0,_):g==0?null:this.parent.child(g-1)}posAtIndex(g,_){_=this.resolveDepth(_);let j=this.path[_*3],$=_==0?0:this.path[_*3-1]+1;for(let _e=0;_e<g;_e++)$+=j.child(_e).nodeSize;return $}marks(){let g=this.parent,_=this.index();if(g.content.size==0)return Mark$1.none;if(this.textOffset)return g.child(_).marks;let j=g.maybeChild(_-1),$=g.maybeChild(_);if(!j){let tt=j;j=$,$=tt}let _e=j.marks;for(var et=0;et<_e.length;et++)_e[et].type.spec.inclusive===!1&&(!$||!_e[et].isInSet($.marks))&&(_e=_e[et--].removeFromSet(_e));return _e}marksAcross(g){let _=this.parent.maybeChild(this.index());if(!_||!_.isInline)return null;let j=_.marks,$=g.parent.maybeChild(g.index());for(var _e=0;_e<j.length;_e++)j[_e].type.spec.inclusive===!1&&(!$||!j[_e].isInSet($.marks))&&(j=j[_e--].removeFromSet(j));return j}sharedDepth(g){for(let _=this.depth;_>0;_--)if(this.start(_)<=g&&this.end(_)>=g)return _;return 0}blockRange(g=this,_){if(g.pos<this.pos)return g.blockRange(this);for(let j=this.depth-(this.parent.inlineContent||this.pos==g.pos?1:0);j>=0;j--)if(g.pos<=this.end(j)&&(!_||_(this.node(j))))return new NodeRange(this,g,j);return null}sameParent(g){return this.pos-this.parentOffset==g.pos-g.parentOffset}max(g){return g.pos>this.pos?g:this}min(g){return g.pos<this.pos?g:this}toString(){let g="";for(let _=1;_<=this.depth;_++)g+=(g?"/":"")+this.node(_).type.name+"_"+this.index(_-1);return g+":"+this.parentOffset}static resolve(g,_){if(!(_>=0&&_<=g.content.size))throw new RangeError("Position "+_+" out of range");let j=[],$=0,_e=_;for(let et=g;;){let{index:tt,offset:nt}=et.content.findIndex(_e),rt=_e-nt;if(j.push(et,tt,$+nt),!rt||(et=et.child(tt),et.isText))break;_e=rt-1,$+=nt+1}return new ResolvedPos(_,j,_e)}static resolveCached(g,_){let j=resolveCache.get(g);if(j)for(let _e=0;_e<j.elts.length;_e++){let et=j.elts[_e];if(et.pos==_)return et}else resolveCache.set(g,j=new ResolveCache);let $=j.elts[j.i]=ResolvedPos.resolve(g,_);return j.i=(j.i+1)%resolveCacheSize,$}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(g,_,j){this.$from=g,this.$to=_,this.depth=j}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class ko{constructor(g,_,j,$=Mark$1.none){this.type=g,this.attrs=_,this.marks=$,this.content=j||Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(g){return this.content.child(g)}maybeChild(g){return this.content.maybeChild(g)}forEach(g){this.content.forEach(g)}nodesBetween(g,_,j,$=0){this.content.nodesBetween(g,_,j,$,this)}descendants(g){this.nodesBetween(0,this.content.size,g)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(g,_,j,$){return this.content.textBetween(g,_,j,$)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(g){return this==g||this.sameMarkup(g)&&this.content.eq(g.content)}sameMarkup(g){return this.hasMarkup(g.type,g.attrs,g.marks)}hasMarkup(g,_,j){return this.type==g&&compareDeep(this.attrs,_||g.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,j||Mark$1.none)}copy(g=null){return g==this.content?this:new ko(this.type,this.attrs,g,this.marks)}mark(g){return g==this.marks?this:new ko(this.type,this.attrs,this.content,g)}cut(g,_=this.content.size){return g==0&&_==this.content.size?this:this.copy(this.content.cut(g,_))}slice(g,_=this.content.size,j=!1){if(g==_)return Slice.empty;let $=this.resolve(g),_e=this.resolve(_),et=j?0:$.sharedDepth(_),tt=$.start(et),rt=$.node(et).content.cut($.pos-tt,_e.pos-tt);return new Slice(rt,$.depth-et,_e.depth-et)}replace(g,_,j){return replace(this.resolve(g),this.resolve(_),j)}nodeAt(g){for(let _=this;;){let{index:j,offset:$}=_.content.findIndex(g);if(_=_.maybeChild(j),!_)return null;if($==g||_.isText)return _;g-=$+1}}childAfter(g){let{index:_,offset:j}=this.content.findIndex(g);return{node:this.content.maybeChild(_),index:_,offset:j}}childBefore(g){if(g==0)return{node:null,index:0,offset:0};let{index:_,offset:j}=this.content.findIndex(g);if(j<g)return{node:this.content.child(_),index:_,offset:j};let $=this.content.child(_-1);return{node:$,index:_-1,offset:j-$.nodeSize}}resolve(g){return ResolvedPos.resolveCached(this,g)}resolveNoCache(g){return ResolvedPos.resolve(this,g)}rangeHasMark(g,_,j){let $=!1;return _>g&&this.nodesBetween(g,_,_e=>(j.isInSet(_e.marks)&&($=!0),!$)),$}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let g=this.type.name;return this.content.size&&(g+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,g)}contentMatchAt(g){let _=this.type.contentMatch.matchFragment(this.content,0,g);if(!_)throw new Error("Called contentMatchAt on a node with invalid content");return _}canReplace(g,_,j=Fragment.empty,$=0,_e=j.childCount){let et=this.contentMatchAt(g).matchFragment(j,$,_e),tt=et&&et.matchFragment(this.content,_);if(!tt||!tt.validEnd)return!1;for(let nt=$;nt<_e;nt++)if(!this.type.allowsMarks(j.child(nt).marks))return!1;return!0}canReplaceWith(g,_,j,$){if($&&!this.type.allowsMarks($))return!1;let _e=this.contentMatchAt(g).matchType(j),et=_e&&_e.matchFragment(this.content,_);return et?et.validEnd:!1}canAppend(g){return g.content.size?this.canReplace(this.childCount,this.childCount,g.content):this.type.compatibleContent(g.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let g=Mark$1.none;for(let _=0;_<this.marks.length;_++){let j=this.marks[_];j.type.checkAttrs(j.attrs),g=j.addToSet(g)}if(!Mark$1.sameSet(g,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(_=>_.type.name)}`);this.content.forEach(_=>_.check())}toJSON(){let g={type:this.type.name};for(let _ in this.attrs){g.attrs=this.attrs;break}return this.content.size&&(g.content=this.content.toJSON()),this.marks.length&&(g.marks=this.marks.map(_=>_.toJSON())),g}static fromJSON(g,_){if(!_)throw new RangeError("Invalid input for Node.fromJSON");let j;if(_.marks){if(!Array.isArray(_.marks))throw new RangeError("Invalid mark data for Node.fromJSON");j=_.marks.map(g.markFromJSON)}if(_.type=="text"){if(typeof _.text!="string")throw new RangeError("Invalid text node in JSON");return g.text(_.text,j)}let $=Fragment.fromJSON(g,_.content),_e=g.nodeType(_.type).create(_.attrs,$,j);return _e.type.checkAttrs(_e.attrs),_e}};Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(g,_,j,$){if(super(g,_,null,$),!j)throw new RangeError("Empty text nodes are not allowed");this.text=j}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(g,_){return this.text.slice(g,_)}get nodeSize(){return this.text.length}mark(g){return g==this.marks?this:new TextNode(this.type,this.attrs,this.text,g)}withText(g){return g==this.text?this:new TextNode(this.type,this.attrs,g,this.marks)}cut(g=0,_=this.text.length){return g==0&&_==this.text.length?this:this.withText(this.text.slice(g,_))}eq(g){return this.sameMarkup(g)&&this.text==g.text}toJSON(){let g=super.toJSON();return g.text=this.text,g}}function wrapMarks(b,g){for(let _=b.length-1;_>=0;_--)g=b[_].type.name+"("+g+")";return g}class ContentMatch{constructor(g){this.validEnd=g,this.next=[],this.wrapCache=[]}static parse(g,_){let j=new TokenStream(g,_);if(j.next==null)return ContentMatch.empty;let $=parseExpr(j);j.next&&j.err("Unexpected trailing text");let _e=dfa(nfa($));return checkForDeadEnds(_e,j),_e}matchType(g){for(let _=0;_<this.next.length;_++)if(this.next[_].type==g)return this.next[_].next;return null}matchFragment(g,_=0,j=g.childCount){let $=this;for(let _e=_;$&&_e<j;_e++)$=$.matchType(g.child(_e).type);return $}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let g=0;g<this.next.length;g++){let{type:_}=this.next[g];if(!(_.isText||_.hasRequiredAttrs()))return _}return null}compatible(g){for(let _=0;_<this.next.length;_++)for(let j=0;j<g.next.length;j++)if(this.next[_].type==g.next[j].type)return!0;return!1}fillBefore(g,_=!1,j=0){let $=[this];function _e(et,tt){let nt=et.matchFragment(g,j);if(nt&&(!_||nt.validEnd))return Fragment.from(tt.map(rt=>rt.createAndFill()));for(let rt=0;rt<et.next.length;rt++){let{type:it,next:st}=et.next[rt];if(!(it.isText||it.hasRequiredAttrs())&&$.indexOf(st)==-1){$.push(st);let ot=_e(st,tt.concat(it));if(ot)return ot}}return null}return _e(this,[])}findWrapping(g){for(let j=0;j<this.wrapCache.length;j+=2)if(this.wrapCache[j]==g)return this.wrapCache[j+1];let _=this.computeWrapping(g);return this.wrapCache.push(g,_),_}computeWrapping(g){let _=Object.create(null),j=[{match:this,type:null,via:null}];for(;j.length;){let $=j.shift(),_e=$.match;if(_e.matchType(g)){let et=[];for(let tt=$;tt.type;tt=tt.via)et.push(tt.type);return et.reverse()}for(let et=0;et<_e.next.length;et++){let{type:tt,next:nt}=_e.next[et];!tt.isLeaf&&!tt.hasRequiredAttrs()&&!(tt.name in _)&&(!$.type||nt.validEnd)&&(j.push({match:tt.contentMatch,type:tt,via:$}),_[tt.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(g){if(g>=this.next.length)throw new RangeError(`There's no ${g}th edge in this content match`);return this.next[g]}toString(){let g=[];function _(j){g.push(j);for(let $=0;$<j.next.length;$++)g.indexOf(j.next[$].next)==-1&&_(j.next[$].next)}return _(this),g.map((j,$)=>{let _e=$+(j.validEnd?"*":" ")+" ";for(let et=0;et<j.next.length;et++)_e+=(et?", ":"")+j.next[et].type.name+"->"+g.indexOf(j.next[et].next);return _e}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(g,_){this.string=g,this.nodeTypes=_,this.inline=null,this.pos=0,this.tokens=g.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(g){return this.next==g&&(this.pos++||!0)}err(g){throw new SyntaxError(g+" (in content expression '"+this.string+"')")}}function parseExpr(b){let g=[];do g.push(parseExprSeq(b));while(b.eat("|"));return g.length==1?g[0]:{type:"choice",exprs:g}}function parseExprSeq(b){let g=[];do g.push(parseExprSubscript(b));while(b.next&&b.next!=")"&&b.next!="|");return g.length==1?g[0]:{type:"seq",exprs:g}}function parseExprSubscript(b){let g=parseExprAtom(b);for(;;)if(b.eat("+"))g={type:"plus",expr:g};else if(b.eat("*"))g={type:"star",expr:g};else if(b.eat("?"))g={type:"opt",expr:g};else if(b.eat("{"))g=parseExprRange(b,g);else break;return g}function parseNum(b){/\D/.test(b.next)&&b.err("Expected number, got '"+b.next+"'");let g=Number(b.next);return b.pos++,g}function parseExprRange(b,g){let _=parseNum(b),j=_;return b.eat(",")&&(b.next!="}"?j=parseNum(b):j=-1),b.eat("}")||b.err("Unclosed braced range"),{type:"range",min:_,max:j,expr:g}}function resolveName(b,g){let _=b.nodeTypes,j=_[g];if(j)return[j];let $=[];for(let _e in _){let et=_[_e];et.isInGroup(g)&&$.push(et)}return $.length==0&&b.err("No node type or group '"+g+"' found"),$}function parseExprAtom(b){if(b.eat("(")){let g=parseExpr(b);return b.eat(")")||b.err("Missing closing paren"),g}else if(/\W/.test(b.next))b.err("Unexpected token '"+b.next+"'");else{let g=resolveName(b,b.next).map(_=>(b.inline==null?b.inline=_.isInline:b.inline!=_.isInline&&b.err("Mixing inline and block content"),{type:"name",value:_}));return b.pos++,g.length==1?g[0]:{type:"choice",exprs:g}}}function nfa(b){let g=[[]];return $(_e(b,0),_()),g;function _(){return g.push([])-1}function j(et,tt,nt){let rt={term:nt,to:tt};return g[et].push(rt),rt}function $(et,tt){et.forEach(nt=>nt.to=tt)}function _e(et,tt){if(et.type=="choice")return et.exprs.reduce((nt,rt)=>nt.concat(_e(rt,tt)),[]);if(et.type=="seq")for(let nt=0;;nt++){let rt=_e(et.exprs[nt],tt);if(nt==et.exprs.length-1)return rt;$(rt,tt=_())}else if(et.type=="star"){let nt=_();return j(tt,nt),$(_e(et.expr,nt),nt),[j(nt)]}else if(et.type=="plus"){let nt=_();return $(_e(et.expr,tt),nt),$(_e(et.expr,nt),nt),[j(nt)]}else{if(et.type=="opt")return[j(tt)].concat(_e(et.expr,tt));if(et.type=="range"){let nt=tt;for(let rt=0;rt<et.min;rt++){let it=_();$(_e(et.expr,nt),it),nt=it}if(et.max==-1)$(_e(et.expr,nt),nt);else for(let rt=et.min;rt<et.max;rt++){let it=_();j(nt,it),$(_e(et.expr,nt),it),nt=it}return[j(nt)]}else{if(et.type=="name")return[j(tt,void 0,et.value)];throw new Error("Unknown expr type")}}}}function cmp(b,g){return g-b}function nullFrom(b,g){let _=[];return j(g),_.sort(cmp);function j($){let _e=b[$];if(_e.length==1&&!_e[0].term)return j(_e[0].to);_.push($);for(let et=0;et<_e.length;et++){let{term:tt,to:nt}=_e[et];!tt&&_.indexOf(nt)==-1&&j(nt)}}}function dfa(b){let g=Object.create(null);return _(nullFrom(b,0));function _(j){let $=[];j.forEach(et=>{b[et].forEach(({term:tt,to:nt})=>{if(!tt)return;let rt;for(let it=0;it<$.length;it++)$[it][0]==tt&&(rt=$[it][1]);nullFrom(b,nt).forEach(it=>{rt||$.push([tt,rt=[]]),rt.indexOf(it)==-1&&rt.push(it)})})});let _e=g[j.join(",")]=new ContentMatch(j.indexOf(b.length-1)>-1);for(let et=0;et<$.length;et++){let tt=$[et][1].sort(cmp);_e.next.push({type:$[et][0],next:g[tt.join(",")]||_(tt)})}return _e}}function checkForDeadEnds(b,g){for(let _=0,j=[b];_<j.length;_++){let $=j[_],_e=!$.validEnd,et=[];for(let tt=0;tt<$.next.length;tt++){let{type:nt,next:rt}=$.next[tt];et.push(nt.name),_e&&!(nt.isText||nt.hasRequiredAttrs())&&(_e=!1),j.indexOf(rt)==-1&&j.push(rt)}_e&&g.err("Only non-generatable nodes ("+et.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(b){let g=Object.create(null);for(let _ in b){let j=b[_];if(!j.hasDefault)return null;g[_]=j.default}return g}function computeAttrs(b,g){let _=Object.create(null);for(let j in b){let $=g&&g[j];if($===void 0){let _e=b[j];if(_e.hasDefault)$=_e.default;else throw new RangeError("No value supplied for attribute "+j)}_[j]=$}return _}function checkAttrs(b,g,_,j){for(let $ in g)if(!($ in b))throw new RangeError(`Unsupported attribute ${$} for ${_} of type ${$}`);for(let $ in b){let _e=b[$];_e.validate&&_e.validate(g[$])}}function initAttrs(b,g){let _=Object.create(null);if(g)for(let j in g)_[j]=new Attribute(b,j,g[j]);return _}let NodeType$1=class zl{constructor(g,_,j){this.name=g,this.schema=_,this.spec=j,this.markSet=null,this.groups=j.group?j.group.split(" "):[],this.attrs=initAttrs(g,j.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(j.inline||g=="text"),this.isText=g=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(g){return this.groups.indexOf(g)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let g in this.attrs)if(this.attrs[g].isRequired)return!0;return!1}compatibleContent(g){return this==g||this.contentMatch.compatible(g.contentMatch)}computeAttrs(g){return!g&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,g)}create(g=null,_,j){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(g),Fragment.from(_),Mark$1.setFrom(j))}createChecked(g=null,_,j){return _=Fragment.from(_),this.checkContent(_),new Node$1(this,this.computeAttrs(g),_,Mark$1.setFrom(j))}createAndFill(g=null,_,j){if(g=this.computeAttrs(g),_=Fragment.from(_),_.size){let et=this.contentMatch.fillBefore(_);if(!et)return null;_=et.append(_)}let $=this.contentMatch.matchFragment(_),_e=$&&$.fillBefore(Fragment.empty,!0);return _e?new Node$1(this,g,_.append(_e),Mark$1.setFrom(j)):null}validContent(g){let _=this.contentMatch.matchFragment(g);if(!_||!_.validEnd)return!1;for(let j=0;j<g.childCount;j++)if(!this.allowsMarks(g.child(j).marks))return!1;return!0}checkContent(g){if(!this.validContent(g))throw new RangeError(`Invalid content for node ${this.name}: ${g.toString().slice(0,50)}`)}checkAttrs(g){checkAttrs(this.attrs,g,"node",this.name)}allowsMarkType(g){return this.markSet==null||this.markSet.indexOf(g)>-1}allowsMarks(g){if(this.markSet==null)return!0;for(let _=0;_<g.length;_++)if(!this.allowsMarkType(g[_].type))return!1;return!0}allowedMarks(g){if(this.markSet==null)return g;let _;for(let j=0;j<g.length;j++)this.allowsMarkType(g[j].type)?_&&_.push(g[j]):_||(_=g.slice(0,j));return _?_.length?_:Mark$1.none:g}static compile(g,_){let j=Object.create(null);g.forEach((_e,et)=>j[_e]=new zl(_e,_,et));let $=_.spec.topNode||"doc";if(!j[$])throw new RangeError("Schema is missing its top node type ('"+$+"')");if(!j.text)throw new RangeError("Every schema needs a 'text' type");for(let _e in j.text.attrs)throw new RangeError("The text node type should not have attributes");return j}};function validateType(b,g,_){let j=_.split("|");return $=>{let _e=$===null?"null":typeof $;if(j.indexOf(_e)<0)throw new RangeError(`Expected value of type ${j} for attribute ${g} on type ${b}, got ${_e}`)}}class Attribute{constructor(g,_,j){this.hasDefault=Object.prototype.hasOwnProperty.call(j,"default"),this.default=j.default,this.validate=typeof j.validate=="string"?validateType(g,_,j.validate):j.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(g,_,j,$){this.name=g,this.rank=_,this.schema=j,this.spec=$,this.attrs=initAttrs(g,$.attrs),this.excluded=null;let _e=defaultAttrs(this.attrs);this.instance=_e?new Mark$1(this,_e):null}create(g=null){return!g&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,g))}static compile(g,_){let j=Object.create(null),$=0;return g.forEach((_e,et)=>j[_e]=new MarkType(_e,$++,_,et)),j}removeFromSet(g){for(var _=0;_<g.length;_++)g[_].type==this&&(g=g.slice(0,_).concat(g.slice(_+1)),_--);return g}isInSet(g){for(let _=0;_<g.length;_++)if(g[_].type==this)return g[_]}checkAttrs(g){checkAttrs(this.attrs,g,"mark",this.name)}excludes(g){return this.excluded.indexOf(g)>-1}}class Schema{constructor(g){this.linebreakReplacement=null,this.cached=Object.create(null);let _=this.spec={};for(let $ in g)_[$]=g[$];_.nodes=OrderedMap.from(g.nodes),_.marks=OrderedMap.from(g.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let j=Object.create(null);for(let $ in this.nodes){if($ in this.marks)throw new RangeError($+" can not be both a node and a mark");let _e=this.nodes[$],et=_e.spec.content||"",tt=_e.spec.marks;if(_e.contentMatch=j[et]||(j[et]=ContentMatch.parse(et,this.nodes)),_e.inlineContent=_e.contentMatch.inlineContent,_e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!_e.isInline||!_e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=_e}_e.markSet=tt=="_"?null:tt?gatherMarks(this,tt.split(" ")):tt==""||!_e.inlineContent?[]:null}for(let $ in this.marks){let _e=this.marks[$],et=_e.spec.excludes;_e.excluded=et==null?[_e]:et==""?[]:gatherMarks(this,et.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(g,_=null,j,$){if(typeof g=="string")g=this.nodeType(g);else if(g instanceof NodeType$1){if(g.schema!=this)throw new RangeError("Node type from different schema used ("+g.name+")")}else throw new RangeError("Invalid node type: "+g);return g.createChecked(_,j,$)}text(g,_){let j=this.nodes.text;return new TextNode(j,j.defaultAttrs,g,Mark$1.setFrom(_))}mark(g,_){return typeof g=="string"&&(g=this.marks[g]),g.create(_)}nodeFromJSON(g){return Node$1.fromJSON(this,g)}markFromJSON(g){return Mark$1.fromJSON(this,g)}nodeType(g){let _=this.nodes[g];if(!_)throw new RangeError("Unknown node type: "+g);return _}}function gatherMarks(b,g){let _=[];for(let j=0;j<g.length;j++){let $=g[j],_e=b.marks[$],et=_e;if(_e)_.push(_e);else for(let tt in b.marks){let nt=b.marks[tt];($=="_"||nt.spec.group&&nt.spec.group.split(" ").indexOf($)>-1)&&_.push(et=nt)}if(!et)throw new SyntaxError("Unknown mark type: '"+g[j]+"'")}return _}function isTagRule(b){return b.tag!=null}function isStyleRule(b){return b.style!=null}class DOMParser{constructor(g,_){this.schema=g,this.rules=_,this.tags=[],this.styles=[];let j=this.matchedStyles=[];_.forEach($=>{if(isTagRule($))this.tags.push($);else if(isStyleRule($)){let _e=/[^=]*/.exec($.style)[0];j.indexOf(_e)<0&&j.push(_e),this.styles.push($)}}),this.normalizeLists=!this.tags.some($=>{if(!/^(ul|ol)\b/.test($.tag)||!$.node)return!1;let _e=g.nodes[$.node];return _e.contentMatch.matchType(_e)})}parse(g,_={}){let j=new ParseContext(this,_,!1);return j.addAll(g,Mark$1.none,_.from,_.to),j.finish()}parseSlice(g,_={}){let j=new ParseContext(this,_,!0);return j.addAll(g,Mark$1.none,_.from,_.to),Slice.maxOpen(j.finish())}matchTag(g,_,j){for(let $=j?this.tags.indexOf(j)+1:0;$<this.tags.length;$++){let _e=this.tags[$];if(matches(g,_e.tag)&&(_e.namespace===void 0||g.namespaceURI==_e.namespace)&&(!_e.context||_.matchesContext(_e.context))){if(_e.getAttrs){let et=_e.getAttrs(g);if(et===!1)continue;_e.attrs=et||void 0}return _e}}}matchStyle(g,_,j,$){for(let _e=$?this.styles.indexOf($)+1:0;_e<this.styles.length;_e++){let et=this.styles[_e],tt=et.style;if(!(tt.indexOf(g)!=0||et.context&&!j.matchesContext(et.context)||tt.length>g.length&&(tt.charCodeAt(g.length)!=61||tt.slice(g.length+1)!=_))){if(et.getAttrs){let nt=et.getAttrs(_);if(nt===!1)continue;et.attrs=nt||void 0}return et}}}static schemaRules(g){let _=[];function j($){let _e=$.priority==null?50:$.priority,et=0;for(;et<_.length;et++){let tt=_[et];if((tt.priority==null?50:tt.priority)<_e)break}_.splice(et,0,$)}for(let $ in g.marks){let _e=g.marks[$].spec.parseDOM;_e&&_e.forEach(et=>{j(et=copy(et)),et.mark||et.ignore||et.clearMark||(et.mark=$)})}for(let $ in g.nodes){let _e=g.nodes[$].spec.parseDOM;_e&&_e.forEach(et=>{j(et=copy(et)),et.node||et.ignore||et.mark||(et.node=$)})}return _}static fromSchema(g){return g.cached.domParser||(g.cached.domParser=new DOMParser(g,DOMParser.schemaRules(g)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(b,g,_){return g!=null?(g?OPT_PRESERVE_WS:0)|(g==="full"?OPT_PRESERVE_WS_FULL:0):b&&b.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:_&~OPT_OPEN_LEFT}class NodeContext{constructor(g,_,j,$,_e,et){this.type=g,this.attrs=_,this.marks=j,this.solid=$,this.options=et,this.content=[],this.activeMarks=Mark$1.none,this.match=_e||(et&OPT_OPEN_LEFT?null:g.contentMatch)}findWrapping(g){if(!this.match){if(!this.type)return[];let _=this.type.contentMatch.fillBefore(Fragment.from(g));if(_)this.match=this.type.contentMatch.matchFragment(_);else{let j=this.type.contentMatch,$;return($=j.findWrapping(g.type))?(this.match=j,$):null}}return this.match.findWrapping(g.type)}finish(g){if(!(this.options&OPT_PRESERVE_WS)){let j=this.content[this.content.length-1],$;if(j&&j.isText&&($=/[ \t\r\n\u000c]+$/.exec(j.text))){let _e=j;j.text.length==$[0].length?this.content.pop():this.content[this.content.length-1]=_e.withText(_e.text.slice(0,_e.text.length-$[0].length))}}let _=Fragment.from(this.content);return!g&&this.match&&(_=_.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,_,this.marks):_}inlineContext(g){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:g.parentNode&&!blockTags.hasOwnProperty(g.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(g,_,j){this.parser=g,this.options=_,this.isOpen=j,this.open=0;let $=_.topNode,_e,et=wsOptionsFor(null,_.preserveWhitespace,0)|(j?OPT_OPEN_LEFT:0);$?_e=new NodeContext($.type,$.attrs,Mark$1.none,!0,_.topMatch||$.type.contentMatch,et):j?_e=new NodeContext(null,null,Mark$1.none,!0,null,et):_e=new NodeContext(g.schema.topNodeType,null,Mark$1.none,!0,null,et),this.nodes=[_e],this.find=_.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(g,_){g.nodeType==3?this.addTextNode(g,_):g.nodeType==1&&this.addElement(g,_)}addTextNode(g,_){let j=g.nodeValue,$=this.top;if($.options&OPT_PRESERVE_WS_FULL||$.inlineContext(g)||/[^ \t\r\n\u000c]/.test(j)){if($.options&OPT_PRESERVE_WS)$.options&OPT_PRESERVE_WS_FULL?j=j.replace(/\r\n?/g,`
`):j=j.replace(/\r?\n|\r/g," ");else if(j=j.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(j)&&this.open==this.nodes.length-1){let _e=$.content[$.content.length-1],et=g.previousSibling;(!_e||et&&et.nodeName=="BR"||_e.isText&&/[ \t\r\n\u000c]$/.test(_e.text))&&(j=j.slice(1))}j&&this.insertNode(this.parser.schema.text(j),_),this.findInText(g)}else this.findInside(g)}addElement(g,_,j){let $=g.nodeName.toLowerCase(),_e;listTags.hasOwnProperty($)&&this.parser.normalizeLists&&normalizeList(g);let et=this.options.ruleFromNode&&this.options.ruleFromNode(g)||(_e=this.parser.matchTag(g,this,j));if(et?et.ignore:ignoreTags.hasOwnProperty($))this.findInside(g),this.ignoreFallback(g,_);else if(!et||et.skip||et.closeParent){et&&et.closeParent?this.open=Math.max(0,this.open-1):et&&et.skip.nodeType&&(g=et.skip);let tt,nt=this.top,rt=this.needsBlock;if(blockTags.hasOwnProperty($))nt.content.length&&nt.content[0].isInline&&this.open&&(this.open--,nt=this.top),tt=!0,nt.type||(this.needsBlock=!0);else if(!g.firstChild){this.leafFallback(g,_);return}let it=et&&et.skip?_:this.readStyles(g,_);it&&this.addAll(g,it),tt&&this.sync(nt),this.needsBlock=rt}else{let tt=this.readStyles(g,_);tt&&this.addElementByRule(g,et,tt,et.consuming===!1?_e:void 0)}}leafFallback(g,_){g.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(g.ownerDocument.createTextNode(`
`),_)}ignoreFallback(g,_){g.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),_)}readStyles(g,_){let j=g.style;if(j&&j.length)for(let $=0;$<this.parser.matchedStyles.length;$++){let _e=this.parser.matchedStyles[$],et=j.getPropertyValue(_e);if(et)for(let tt=void 0;;){let nt=this.parser.matchStyle(_e,et,this,tt);if(!nt)break;if(nt.ignore)return null;if(nt.clearMark?_=_.filter(rt=>!nt.clearMark(rt)):_=_.concat(this.parser.schema.marks[nt.mark].create(nt.attrs)),nt.consuming===!1)tt=nt;else break}}return _}addElementByRule(g,_,j,$){let _e,et;if(_.node)if(et=this.parser.schema.nodes[_.node],et.isLeaf)this.insertNode(et.create(_.attrs),j)||this.leafFallback(g,j);else{let nt=this.enter(et,_.attrs||null,j,_.preserveWhitespace);nt&&(_e=!0,j=nt)}else{let nt=this.parser.schema.marks[_.mark];j=j.concat(nt.create(_.attrs))}let tt=this.top;if(et&&et.isLeaf)this.findInside(g);else if($)this.addElement(g,j,$);else if(_.getContent)this.findInside(g),_.getContent(g,this.parser.schema).forEach(nt=>this.insertNode(nt,j));else{let nt=g;typeof _.contentElement=="string"?nt=g.querySelector(_.contentElement):typeof _.contentElement=="function"?nt=_.contentElement(g):_.contentElement&&(nt=_.contentElement),this.findAround(g,nt,!0),this.addAll(nt,j),this.findAround(g,nt,!1)}_e&&this.sync(tt)&&this.open--}addAll(g,_,j,$){let _e=j||0;for(let et=j?g.childNodes[j]:g.firstChild,tt=$==null?null:g.childNodes[$];et!=tt;et=et.nextSibling,++_e)this.findAtPoint(g,_e),this.addDOM(et,_);this.findAtPoint(g,_e)}findPlace(g,_){let j,$;for(let _e=this.open;_e>=0;_e--){let et=this.nodes[_e],tt=et.findWrapping(g);if(tt&&(!j||j.length>tt.length)&&(j=tt,$=et,!tt.length)||et.solid)break}if(!j)return null;this.sync($);for(let _e=0;_e<j.length;_e++)_=this.enterInner(j[_e],null,_,!1);return _}insertNode(g,_){if(g.isInline&&this.needsBlock&&!this.top.type){let $=this.textblockFromContext();$&&(_=this.enterInner($,null,_))}let j=this.findPlace(g,_);if(j){this.closeExtra();let $=this.top;$.match&&($.match=$.match.matchType(g.type));let _e=Mark$1.none;for(let et of j.concat(g.marks))($.type?$.type.allowsMarkType(et.type):markMayApply(et.type,g.type))&&(_e=et.addToSet(_e));return $.content.push(g.mark(_e)),!0}return!1}enter(g,_,j,$){let _e=this.findPlace(g.create(_),j);return _e&&(_e=this.enterInner(g,_,j,!0,$)),_e}enterInner(g,_,j,$=!1,_e){this.closeExtra();let et=this.top;et.match=et.match&&et.match.matchType(g);let tt=wsOptionsFor(g,_e,et.options);et.options&OPT_OPEN_LEFT&&et.content.length==0&&(tt|=OPT_OPEN_LEFT);let nt=Mark$1.none;return j=j.filter(rt=>(et.type?et.type.allowsMarkType(rt.type):markMayApply(rt.type,g))?(nt=rt.addToSet(nt),!1):!0),this.nodes.push(new NodeContext(g,_,nt,$,null,tt)),this.open++,j}closeExtra(g=!1){let _=this.nodes.length-1;if(_>this.open){for(;_>this.open;_--)this.nodes[_-1].content.push(this.nodes[_].finish(g));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(g){for(let _=this.open;_>=0;_--)if(this.nodes[_]==g)return this.open=_,!0;return!1}get currentPos(){this.closeExtra();let g=0;for(let _=this.open;_>=0;_--){let j=this.nodes[_].content;for(let $=j.length-1;$>=0;$--)g+=j[$].nodeSize;_&&g++}return g}findAtPoint(g,_){if(this.find)for(let j=0;j<this.find.length;j++)this.find[j].node==g&&this.find[j].offset==_&&(this.find[j].pos=this.currentPos)}findInside(g){if(this.find)for(let _=0;_<this.find.length;_++)this.find[_].pos==null&&g.nodeType==1&&g.contains(this.find[_].node)&&(this.find[_].pos=this.currentPos)}findAround(g,_,j){if(g!=_&&this.find)for(let $=0;$<this.find.length;$++)this.find[$].pos==null&&g.nodeType==1&&g.contains(this.find[$].node)&&_.compareDocumentPosition(this.find[$].node)&(j?2:4)&&(this.find[$].pos=this.currentPos)}findInText(g){if(this.find)for(let _=0;_<this.find.length;_++)this.find[_].node==g&&(this.find[_].pos=this.currentPos-(g.nodeValue.length-this.find[_].offset))}matchesContext(g){if(g.indexOf("|")>-1)return g.split(/\s*\|\s*/).some(this.matchesContext,this);let _=g.split("/"),j=this.options.context,$=!this.isOpen&&(!j||j.parent.type==this.nodes[0].type),_e=-(j?j.depth+1:0)+($?0:1),et=(tt,nt)=>{for(;tt>=0;tt--){let rt=_[tt];if(rt==""){if(tt==_.length-1||tt==0)continue;for(;nt>=_e;nt--)if(et(tt-1,nt))return!0;return!1}else{let it=nt>0||nt==0&&$?this.nodes[nt].type:j&&nt>=_e?j.node(nt-_e).type:null;if(!it||it.name!=rt&&!it.isInGroup(rt))return!1;nt--}}return!0};return et(_.length-1,this.open)}textblockFromContext(){let g=this.options.context;if(g)for(let _=g.depth;_>=0;_--){let j=g.node(_).contentMatchAt(g.indexAfter(_)).defaultType;if(j&&j.isTextblock&&j.defaultAttrs)return j}for(let _ in this.parser.schema.nodes){let j=this.parser.schema.nodes[_];if(j.isTextblock&&j.defaultAttrs)return j}}}function normalizeList(b){for(let g=b.firstChild,_=null;g;g=g.nextSibling){let j=g.nodeType==1?g.nodeName.toLowerCase():null;j&&listTags.hasOwnProperty(j)&&_?(_.appendChild(g),g=_):j=="li"?_=g:j&&(_=null)}}function matches(b,g){return(b.matches||b.msMatchesSelector||b.webkitMatchesSelector||b.mozMatchesSelector).call(b,g)}function copy(b){let g={};for(let _ in b)g[_]=b[_];return g}function markMayApply(b,g){let _=g.schema.nodes;for(let j in _){let $=_[j];if(!$.allowsMarkType(b))continue;let _e=[],et=tt=>{_e.push(tt);for(let nt=0;nt<tt.edgeCount;nt++){let{type:rt,next:it}=tt.edge(nt);if(rt==g||_e.indexOf(it)<0&&et(it))return!0}};if(et($.contentMatch))return!0}}class DOMSerializer{constructor(g,_){this.nodes=g,this.marks=_}serializeFragment(g,_={},j){j||(j=doc$2(_).createDocumentFragment());let $=j,_e=[];return g.forEach(et=>{if(_e.length||et.marks.length){let tt=0,nt=0;for(;tt<_e.length&&nt<et.marks.length;){let rt=et.marks[nt];if(!this.marks[rt.type.name]){nt++;continue}if(!rt.eq(_e[tt][0])||rt.type.spec.spanning===!1)break;tt++,nt++}for(;tt<_e.length;)$=_e.pop()[1];for(;nt<et.marks.length;){let rt=et.marks[nt++],it=this.serializeMark(rt,et.isInline,_);it&&(_e.push([rt,$]),$.appendChild(it.dom),$=it.contentDOM||it.dom)}}$.appendChild(this.serializeNodeInner(et,_))}),j}serializeNodeInner(g,_){let{dom:j,contentDOM:$}=renderSpec(doc$2(_),this.nodes[g.type.name](g),null,g.attrs);if($){if(g.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(g.content,_,$)}return j}serializeNode(g,_={}){let j=this.serializeNodeInner(g,_);for(let $=g.marks.length-1;$>=0;$--){let _e=this.serializeMark(g.marks[$],g.isInline,_);_e&&((_e.contentDOM||_e.dom).appendChild(j),j=_e.dom)}return j}serializeMark(g,_,j={}){let $=this.marks[g.type.name];return $&&renderSpec(doc$2(j),$(g,_),null,g.attrs)}static renderSpec(g,_,j=null,$){return renderSpec(g,_,j,$)}static fromSchema(g){return g.cached.domSerializer||(g.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(g),this.marksFromSchema(g)))}static nodesFromSchema(g){let _=gatherToDOM(g.nodes);return _.text||(_.text=j=>j.text),_}static marksFromSchema(g){return gatherToDOM(g.marks)}}function gatherToDOM(b){let g={};for(let _ in b){let j=b[_].spec.toDOM;j&&(g[_]=j)}return g}function doc$2(b){return b.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(b){let g=suspiciousAttributeCache.get(b);return g===void 0&&suspiciousAttributeCache.set(b,g=suspiciousAttributesInner(b)),g}function suspiciousAttributesInner(b){let g=null;function _(j){if(j&&typeof j=="object")if(Array.isArray(j))if(typeof j[0]=="string")g||(g=[]),g.push(j);else for(let $=0;$<j.length;$++)_(j[$]);else for(let $ in j)_(j[$])}return _(b),g}function renderSpec(b,g,_,j){if(typeof g=="string")return{dom:b.createTextNode(g)};if(g.nodeType!=null)return{dom:g};if(g.dom&&g.dom.nodeType!=null)return g;let $=g[0],_e;if(typeof $!="string")throw new RangeError("Invalid array passed to renderSpec");if(j&&(_e=suspiciousAttributes(j))&&_e.indexOf(g)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let et=$.indexOf(" ");et>0&&(_=$.slice(0,et),$=$.slice(et+1));let tt,nt=_?b.createElementNS(_,$):b.createElement($),rt=g[1],it=1;if(rt&&typeof rt=="object"&&rt.nodeType==null&&!Array.isArray(rt)){it=2;for(let st in rt)if(rt[st]!=null){let ot=st.indexOf(" ");ot>0?nt.setAttributeNS(st.slice(0,ot),st.slice(ot+1),rt[st]):nt.setAttribute(st,rt[st])}}for(let st=it;st<g.length;st++){let ot=g[st];if(ot===0){if(st<g.length-1||st>it)throw new RangeError("Content hole must be the only child of its parent node");return{dom:nt,contentDOM:nt}}else{let{dom:lt,contentDOM:at}=renderSpec(b,ot,_,j);if(nt.appendChild(lt),at){if(tt)throw new RangeError("Multiple content holes");tt=at}}}return{dom:nt,contentDOM:tt}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(b,g){return b+g*factor16}function recoverIndex(b){return b&lower16}function recoverOffset(b){return(b-(b&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(g,_,j){this.pos=g,this.delInfo=_,this.recover=j}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(g,_=!1){if(this.ranges=g,this.inverted=_,!g.length&&StepMap.empty)return StepMap.empty}recover(g){let _=0,j=recoverIndex(g);if(!this.inverted)for(let $=0;$<j;$++)_+=this.ranges[$*3+2]-this.ranges[$*3+1];return this.ranges[j*3]+_+recoverOffset(g)}mapResult(g,_=1){return this._map(g,_,!1)}map(g,_=1){return this._map(g,_,!0)}_map(g,_,j){let $=0,_e=this.inverted?2:1,et=this.inverted?1:2;for(let tt=0;tt<this.ranges.length;tt+=3){let nt=this.ranges[tt]-(this.inverted?$:0);if(nt>g)break;let rt=this.ranges[tt+_e],it=this.ranges[tt+et],st=nt+rt;if(g<=st){let ot=rt?g==nt?-1:g==st?1:_:_,lt=nt+$+(ot<0?0:it);if(j)return lt;let at=g==(_<0?nt:st)?null:makeRecover(tt/3,g-nt),ut=g==nt?DEL_AFTER:g==st?DEL_BEFORE:DEL_ACROSS;return(_<0?g!=nt:g!=st)&&(ut|=DEL_SIDE),new MapResult(lt,ut,at)}$+=it-rt}return j?g+$:new MapResult(g+$,0,null)}touches(g,_){let j=0,$=recoverIndex(_),_e=this.inverted?2:1,et=this.inverted?1:2;for(let tt=0;tt<this.ranges.length;tt+=3){let nt=this.ranges[tt]-(this.inverted?j:0);if(nt>g)break;let rt=this.ranges[tt+_e],it=nt+rt;if(g<=it&&tt==$*3)return!0;j+=this.ranges[tt+et]-rt}return!1}forEach(g){let _=this.inverted?2:1,j=this.inverted?1:2;for(let $=0,_e=0;$<this.ranges.length;$+=3){let et=this.ranges[$],tt=et-(this.inverted?_e:0),nt=et+(this.inverted?0:_e),rt=this.ranges[$+_],it=this.ranges[$+j];g(tt,tt+rt,nt,nt+it),_e+=it-rt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return g==0?StepMap.empty:new StepMap(g<0?[0,-g,0]:[0,0,g])}}StepMap.empty=new StepMap([]);class Mapping{constructor(g=[],_,j=0,$=g.length){this.maps=g,this.mirror=_,this.from=j,this.to=$}slice(g=0,_=this.maps.length){return new Mapping(this.maps,this.mirror,g,_)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(g,_){this.to=this.maps.push(g),_!=null&&this.setMirror(this.maps.length-1,_)}appendMapping(g){for(let _=0,j=this.maps.length;_<g.maps.length;_++){let $=g.getMirror(_);this.appendMap(g.maps[_],$!=null&&$<_?j+$:void 0)}}getMirror(g){if(this.mirror){for(let _=0;_<this.mirror.length;_++)if(this.mirror[_]==g)return this.mirror[_+(_%2?-1:1)]}}setMirror(g,_){this.mirror||(this.mirror=[]),this.mirror.push(g,_)}appendMappingInverted(g){for(let _=g.maps.length-1,j=this.maps.length+g.maps.length;_>=0;_--){let $=g.getMirror(_);this.appendMap(g.maps[_].invert(),$!=null&&$>_?j-$-1:void 0)}}invert(){let g=new Mapping;return g.appendMappingInverted(this),g}map(g,_=1){if(this.mirror)return this._map(g,_,!0);for(let j=this.from;j<this.to;j++)g=this.maps[j].map(g,_);return g}mapResult(g,_=1){return this._map(g,_,!1)}_map(g,_,j){let $=0;for(let _e=this.from;_e<this.to;_e++){let et=this.maps[_e],tt=et.mapResult(g,_);if(tt.recover!=null){let nt=this.getMirror(_e);if(nt!=null&&nt>_e&&nt<this.to){_e=nt,g=this.maps[nt].recover(tt.recover);continue}}$|=tt.delInfo,g=tt.pos}return j?g:new MapResult(g,$,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(g){return null}static fromJSON(g,_){if(!_||!_.stepType)throw new RangeError("Invalid input for Step.fromJSON");let j=stepsByID[_.stepType];if(!j)throw new RangeError(`No step type ${_.stepType} defined`);return j.fromJSON(g,_)}static jsonID(g,_){if(g in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+g);return stepsByID[g]=_,_.prototype.jsonID=g,_}}class StepResult{constructor(g,_){this.doc=g,this.failed=_}static ok(g){return new StepResult(g,null)}static fail(g){return new StepResult(null,g)}static fromReplace(g,_,j,$){try{return StepResult.ok(g.replace(_,j,$))}catch(_e){if(_e instanceof ReplaceError)return StepResult.fail(_e.message);throw _e}}}function mapFragment(b,g,_){let j=[];for(let $=0;$<b.childCount;$++){let _e=b.child($);_e.content.size&&(_e=_e.copy(mapFragment(_e.content,g,_e))),_e.isInline&&(_e=g(_e,_,$)),j.push(_e)}return Fragment.fromArray(j)}class AddMarkStep extends Step{constructor(g,_,j){super(),this.from=g,this.to=_,this.mark=j}apply(g){let _=g.slice(this.from,this.to),j=g.resolve(this.from),$=j.node(j.sharedDepth(this.to)),_e=new Slice(mapFragment(_.content,(et,tt)=>!et.isAtom||!tt.type.allowsMarkType(this.mark.type)?et:et.mark(this.mark.addToSet(et.marks)),$),_.openStart,_.openEnd);return StepResult.fromReplace(g,this.from,this.to,_e)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(g){let _=g.mapResult(this.from,1),j=g.mapResult(this.to,-1);return _.deleted&&j.deleted||_.pos>=j.pos?null:new AddMarkStep(_.pos,j.pos,this.mark)}merge(g){return g instanceof AddMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new AddMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,_){if(typeof _.from!="number"||typeof _.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(_.from,_.to,g.markFromJSON(_.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(g,_,j){super(),this.from=g,this.to=_,this.mark=j}apply(g){let _=g.slice(this.from,this.to),j=new Slice(mapFragment(_.content,$=>$.mark(this.mark.removeFromSet($.marks)),g),_.openStart,_.openEnd);return StepResult.fromReplace(g,this.from,this.to,j)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(g){let _=g.mapResult(this.from,1),j=g.mapResult(this.to,-1);return _.deleted&&j.deleted||_.pos>=j.pos?null:new RemoveMarkStep(_.pos,j.pos,this.mark)}merge(g){return g instanceof RemoveMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new RemoveMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,_){if(typeof _.from!="number"||typeof _.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(_.from,_.to,g.markFromJSON(_.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(g,_){super(),this.pos=g,this.mark=_}apply(g){let _=g.nodeAt(this.pos);if(!_)return StepResult.fail("No node at mark step's position");let j=_.type.create(_.attrs,null,this.mark.addToSet(_.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(j),0,_.isLeaf?0:1))}invert(g){let _=g.nodeAt(this.pos);if(_){let j=this.mark.addToSet(_.marks);if(j.length==_.marks.length){for(let $=0;$<_.marks.length;$++)if(!_.marks[$].isInSet(j))return new AddNodeMarkStep(this.pos,_.marks[$]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(g){let _=g.mapResult(this.pos,1);return _.deletedAfter?null:new AddNodeMarkStep(_.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,_){if(typeof _.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(_.pos,g.markFromJSON(_.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(g,_){super(),this.pos=g,this.mark=_}apply(g){let _=g.nodeAt(this.pos);if(!_)return StepResult.fail("No node at mark step's position");let j=_.type.create(_.attrs,null,this.mark.removeFromSet(_.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(j),0,_.isLeaf?0:1))}invert(g){let _=g.nodeAt(this.pos);return!_||!this.mark.isInSet(_.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(g){let _=g.mapResult(this.pos,1);return _.deletedAfter?null:new RemoveNodeMarkStep(_.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,_){if(typeof _.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(_.pos,g.markFromJSON(_.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(g,_,j,$=!1){super(),this.from=g,this.to=_,this.slice=j,this.structure=$}apply(g){return this.structure&&contentBetween(g,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(g){return new ReplaceStep(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let _=g.mapResult(this.from,1),j=g.mapResult(this.to,-1);return _.deletedAcross&&j.deletedAcross?null:new ReplaceStep(_.pos,Math.max(_.pos,j.pos),this.slice)}merge(g){if(!(g instanceof ReplaceStep)||g.structure||this.structure)return null;if(this.from+this.slice.size==g.from&&!this.slice.openEnd&&!g.slice.openStart){let _=this.slice.size+g.slice.size==0?Slice.empty:new Slice(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new ReplaceStep(this.from,this.to+(g.to-g.from),_,this.structure)}else if(g.to==this.from&&!this.slice.openStart&&!g.slice.openEnd){let _=this.slice.size+g.slice.size==0?Slice.empty:new Slice(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new ReplaceStep(g.from,this.to,_,this.structure)}else return null}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,_){if(typeof _.from!="number"||typeof _.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(_.from,_.to,Slice.fromJSON(g,_.slice),!!_.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(g,_,j,$,_e,et,tt=!1){super(),this.from=g,this.to=_,this.gapFrom=j,this.gapTo=$,this.slice=_e,this.insert=et,this.structure=tt}apply(g){if(this.structure&&(contentBetween(g,this.from,this.gapFrom)||contentBetween(g,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let _=g.slice(this.gapFrom,this.gapTo);if(_.openStart||_.openEnd)return StepResult.fail("Gap is not a flat range");let j=this.slice.insertAt(this.insert,_.content);return j?StepResult.fromReplace(g,this.from,this.to,j):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let _=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+_,this.from+this.insert,this.from+this.insert+_,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let _=g.mapResult(this.from,1),j=g.mapResult(this.to,-1),$=this.from==this.gapFrom?_.pos:g.map(this.gapFrom,-1),_e=this.to==this.gapTo?j.pos:g.map(this.gapTo,1);return _.deletedAcross&&j.deletedAcross||$<_.pos||_e>j.pos?null:new ReplaceAroundStep(_.pos,j.pos,$,_e,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,_){if(typeof _.from!="number"||typeof _.to!="number"||typeof _.gapFrom!="number"||typeof _.gapTo!="number"||typeof _.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(_.from,_.to,_.gapFrom,_.gapTo,Slice.fromJSON(g,_.slice),_.insert,!!_.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(b,g,_){let j=b.resolve(g),$=_-g,_e=j.depth;for(;$>0&&_e>0&&j.indexAfter(_e)==j.node(_e).childCount;)_e--,$--;if($>0){let et=j.node(_e).maybeChild(j.indexAfter(_e));for(;$>0;){if(!et||et.isLeaf)return!0;et=et.firstChild,$--}}return!1}function addMark(b,g,_,j){let $=[],_e=[],et,tt;b.doc.nodesBetween(g,_,(nt,rt,it)=>{if(!nt.isInline)return;let st=nt.marks;if(!j.isInSet(st)&&it.type.allowsMarkType(j.type)){let ot=Math.max(rt,g),lt=Math.min(rt+nt.nodeSize,_),at=j.addToSet(st);for(let ut=0;ut<st.length;ut++)st[ut].isInSet(at)||(et&&et.to==ot&&et.mark.eq(st[ut])?et.to=lt:$.push(et=new RemoveMarkStep(ot,lt,st[ut])));tt&&tt.to==ot?tt.to=lt:_e.push(tt=new AddMarkStep(ot,lt,j))}}),$.forEach(nt=>b.step(nt)),_e.forEach(nt=>b.step(nt))}function removeMark(b,g,_,j){let $=[],_e=0;b.doc.nodesBetween(g,_,(et,tt)=>{if(!et.isInline)return;_e++;let nt=null;if(j instanceof MarkType){let rt=et.marks,it;for(;it=j.isInSet(rt);)(nt||(nt=[])).push(it),rt=it.removeFromSet(rt)}else j?j.isInSet(et.marks)&&(nt=[j]):nt=et.marks;if(nt&&nt.length){let rt=Math.min(tt+et.nodeSize,_);for(let it=0;it<nt.length;it++){let st=nt[it],ot;for(let lt=0;lt<$.length;lt++){let at=$[lt];at.step==_e-1&&st.eq($[lt].style)&&(ot=at)}ot?(ot.to=rt,ot.step=_e):$.push({style:st,from:Math.max(tt,g),to:rt,step:_e})}}}),$.forEach(et=>b.step(new RemoveMarkStep(et.from,et.to,et.style)))}function clearIncompatible(b,g,_,j=_.contentMatch,$=!0){let _e=b.doc.nodeAt(g),et=[],tt=g+1;for(let nt=0;nt<_e.childCount;nt++){let rt=_e.child(nt),it=tt+rt.nodeSize,st=j.matchType(rt.type);if(!st)et.push(new ReplaceStep(tt,it,Slice.empty));else{j=st;for(let ot=0;ot<rt.marks.length;ot++)_.allowsMarkType(rt.marks[ot].type)||b.step(new RemoveMarkStep(tt,it,rt.marks[ot]));if($&&rt.isText&&_.whitespace!="pre"){let ot,lt=/\r?\n|\r/g,at;for(;ot=lt.exec(rt.text);)at||(at=new Slice(Fragment.from(_.schema.text(" ",_.allowedMarks(rt.marks))),0,0)),et.push(new ReplaceStep(tt+ot.index,tt+ot.index+ot[0].length,at))}}tt=it}if(!j.validEnd){let nt=j.fillBefore(Fragment.empty,!0);b.replace(tt,tt,new Slice(nt,0,0))}for(let nt=et.length-1;nt>=0;nt--)b.step(et[nt])}function canCut(b,g,_){return(g==0||b.canReplace(g,b.childCount))&&(_==b.childCount||b.canReplace(0,_))}function liftTarget(b){let _=b.parent.content.cutByIndex(b.startIndex,b.endIndex);for(let j=b.depth;;--j){let $=b.$from.node(j),_e=b.$from.index(j),et=b.$to.indexAfter(j);if(j<b.depth&&$.canReplace(_e,et,_))return j;if(j==0||$.type.spec.isolating||!canCut($,_e,et))break}return null}function lift$2(b,g,_){let{$from:j,$to:$,depth:_e}=g,et=j.before(_e+1),tt=$.after(_e+1),nt=et,rt=tt,it=Fragment.empty,st=0;for(let at=_e,ut=!1;at>_;at--)ut||j.index(at)>0?(ut=!0,it=Fragment.from(j.node(at).copy(it)),st++):nt--;let ot=Fragment.empty,lt=0;for(let at=_e,ut=!1;at>_;at--)ut||$.after(at+1)<$.end(at)?(ut=!0,ot=Fragment.from($.node(at).copy(ot)),lt++):rt++;b.step(new ReplaceAroundStep(nt,rt,et,tt,new Slice(it.append(ot),st,lt),it.size-st,!0))}function findWrapping(b,g,_=null,j=b){let $=findWrappingOutside(b,g),_e=$&&findWrappingInside(j,g);return _e?$.map(withAttrs).concat({type:g,attrs:_}).concat(_e.map(withAttrs)):null}function withAttrs(b){return{type:b,attrs:null}}function findWrappingOutside(b,g){let{parent:_,startIndex:j,endIndex:$}=b,_e=_.contentMatchAt(j).findWrapping(g);if(!_e)return null;let et=_e.length?_e[0]:g;return _.canReplaceWith(j,$,et)?_e:null}function findWrappingInside(b,g){let{parent:_,startIndex:j,endIndex:$}=b,_e=_.child(j),et=g.contentMatch.findWrapping(_e.type);if(!et)return null;let nt=(et.length?et[et.length-1]:g).contentMatch;for(let rt=j;nt&&rt<$;rt++)nt=nt.matchType(_.child(rt).type);return!nt||!nt.validEnd?null:et}function wrap(b,g,_){let j=Fragment.empty;for(let et=_.length-1;et>=0;et--){if(j.size){let tt=_[et].type.contentMatch.matchFragment(j);if(!tt||!tt.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}j=Fragment.from(_[et].type.create(_[et].attrs,j))}let $=g.start,_e=g.end;b.step(new ReplaceAroundStep($,_e,$,_e,new Slice(j,0,0),_.length,!0))}function setBlockType$1(b,g,_,j,$){if(!j.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let _e=b.steps.length;b.doc.nodesBetween(g,_,(et,tt)=>{let nt=typeof $=="function"?$(et):$;if(et.isTextblock&&!et.hasMarkup(j,nt)&&canChangeType(b.doc,b.mapping.slice(_e).map(tt),j)){let rt=null;if(j.schema.linebreakReplacement){let lt=j.whitespace=="pre",at=!!j.contentMatch.matchType(j.schema.linebreakReplacement);lt&&!at?rt=!1:!lt&&at&&(rt=!0)}rt===!1&&replaceLinebreaks(b,et,tt,_e),clearIncompatible(b,b.mapping.slice(_e).map(tt,1),j,void 0,rt===null);let it=b.mapping.slice(_e),st=it.map(tt,1),ot=it.map(tt+et.nodeSize,1);return b.step(new ReplaceAroundStep(st,ot,st+1,ot-1,new Slice(Fragment.from(j.create(nt,null,et.marks)),0,0),1,!0)),rt===!0&&replaceNewlines(b,et,tt,_e),!1}})}function replaceNewlines(b,g,_,j){g.forEach(($,_e)=>{if($.isText){let et,tt=/\r?\n|\r/g;for(;et=tt.exec($.text);){let nt=b.mapping.slice(j).map(_+1+_e+et.index);b.replaceWith(nt,nt+1,g.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(b,g,_,j){g.forEach(($,_e)=>{if($.type==$.type.schema.linebreakReplacement){let et=b.mapping.slice(j).map(_+1+_e);b.replaceWith(et,et+1,g.type.schema.text(`
`))}})}function canChangeType(b,g,_){let j=b.resolve(g),$=j.index();return j.parent.canReplaceWith($,$+1,_)}function setNodeMarkup(b,g,_,j,$){let _e=b.doc.nodeAt(g);if(!_e)throw new RangeError("No node at given position");_||(_=_e.type);let et=_.create(j,null,$||_e.marks);if(_e.isLeaf)return b.replaceWith(g,g+_e.nodeSize,et);if(!_.validContent(_e.content))throw new RangeError("Invalid content for node type "+_.name);b.step(new ReplaceAroundStep(g,g+_e.nodeSize,g+1,g+_e.nodeSize-1,new Slice(Fragment.from(et),0,0),1,!0))}function canSplit(b,g,_=1,j){let $=b.resolve(g),_e=$.depth-_,et=j&&j[j.length-1]||$.parent;if(_e<0||$.parent.type.spec.isolating||!$.parent.canReplace($.index(),$.parent.childCount)||!et.type.validContent($.parent.content.cutByIndex($.index(),$.parent.childCount)))return!1;for(let rt=$.depth-1,it=_-2;rt>_e;rt--,it--){let st=$.node(rt),ot=$.index(rt);if(st.type.spec.isolating)return!1;let lt=st.content.cutByIndex(ot,st.childCount),at=j&&j[it+1];at&&(lt=lt.replaceChild(0,at.type.create(at.attrs)));let ut=j&&j[it]||st;if(!st.canReplace(ot+1,st.childCount)||!ut.type.validContent(lt))return!1}let tt=$.indexAfter(_e),nt=j&&j[0];return $.node(_e).canReplaceWith(tt,tt,nt?nt.type:$.node(_e+1).type)}function split(b,g,_=1,j){let $=b.doc.resolve(g),_e=Fragment.empty,et=Fragment.empty;for(let tt=$.depth,nt=$.depth-_,rt=_-1;tt>nt;tt--,rt--){_e=Fragment.from($.node(tt).copy(_e));let it=j&&j[rt];et=Fragment.from(it?it.type.create(it.attrs,et):$.node(tt).copy(et))}b.step(new ReplaceStep(g,g,new Slice(_e.append(et),_,_),!0))}function canJoin(b,g){let _=b.resolve(g),j=_.index();return joinable(_.nodeBefore,_.nodeAfter)&&_.parent.canReplace(j,j+1)}function canAppendWithSubstitutedLinebreaks(b,g){g.content.size||b.type.compatibleContent(g.type);let _=b.contentMatchAt(b.childCount),{linebreakReplacement:j}=b.type.schema;for(let $=0;$<g.childCount;$++){let _e=g.child($),et=_e.type==j?b.type.schema.nodes.text:_e.type;if(_=_.matchType(et),!_||!b.type.allowsMarks(_e.marks))return!1}return _.validEnd}function joinable(b,g){return!!(b&&g&&!b.isLeaf&&canAppendWithSubstitutedLinebreaks(b,g))}function joinPoint(b,g,_=-1){let j=b.resolve(g);for(let $=j.depth;;$--){let _e,et,tt=j.index($);if($==j.depth?(_e=j.nodeBefore,et=j.nodeAfter):_>0?(_e=j.node($+1),tt++,et=j.node($).maybeChild(tt)):(_e=j.node($).maybeChild(tt-1),et=j.node($+1)),_e&&!_e.isTextblock&&joinable(_e,et)&&j.node($).canReplace(tt,tt+1))return g;if($==0)break;g=_<0?j.before($):j.after($)}}function join(b,g,_){let j=null,{linebreakReplacement:$}=b.doc.type.schema,_e=b.doc.resolve(g-_),et=_e.node().type;if($&&et.inlineContent){let it=et.whitespace=="pre",st=!!et.contentMatch.matchType($);it&&!st?j=!1:!it&&st&&(j=!0)}let tt=b.steps.length;if(j===!1){let it=b.doc.resolve(g+_);replaceLinebreaks(b,it.node(),it.before(),tt)}et.inlineContent&&clearIncompatible(b,g+_-1,et,_e.node().contentMatchAt(_e.index()),j==null);let nt=b.mapping.slice(tt),rt=nt.map(g-_);if(b.step(new ReplaceStep(rt,nt.map(g+_,-1),Slice.empty,!0)),j===!0){let it=b.doc.resolve(rt);replaceNewlines(b,it.node(),it.before(),b.steps.length)}return b}function insertPoint(b,g,_){let j=b.resolve(g);if(j.parent.canReplaceWith(j.index(),j.index(),_))return g;if(j.parentOffset==0)for(let $=j.depth-1;$>=0;$--){let _e=j.index($);if(j.node($).canReplaceWith(_e,_e,_))return j.before($+1);if(_e>0)return null}if(j.parentOffset==j.parent.content.size)for(let $=j.depth-1;$>=0;$--){let _e=j.indexAfter($);if(j.node($).canReplaceWith(_e,_e,_))return j.after($+1);if(_e<j.node($).childCount)return null}return null}function dropPoint(b,g,_){let j=b.resolve(g);if(!_.content.size)return g;let $=_.content;for(let _e=0;_e<_.openStart;_e++)$=$.firstChild.content;for(let _e=1;_e<=(_.openStart==0&&_.size?2:1);_e++)for(let et=j.depth;et>=0;et--){let tt=et==j.depth?0:j.pos<=(j.start(et+1)+j.end(et+1))/2?-1:1,nt=j.index(et)+(tt>0?1:0),rt=j.node(et),it=!1;if(_e==1)it=rt.canReplace(nt,nt,$);else{let st=rt.contentMatchAt(nt).findWrapping($.firstChild.type);it=st&&rt.canReplaceWith(nt,nt,st[0])}if(it)return tt==0?j.pos:tt<0?j.before(et+1):j.after(et+1)}return null}function replaceStep(b,g,_=g,j=Slice.empty){if(g==_&&!j.size)return null;let $=b.resolve(g),_e=b.resolve(_);return fitsTrivially($,_e,j)?new ReplaceStep(g,_,j):new Fitter($,_e,j).fit()}function fitsTrivially(b,g,_){return!_.openStart&&!_.openEnd&&b.start()==g.start()&&b.parent.canReplace(b.index(),g.index(),_.content)}class Fitter{constructor(g,_,j){this.$from=g,this.$to=_,this.unplaced=j,this.frontier=[],this.placed=Fragment.empty;for(let $=0;$<=g.depth;$++){let _e=g.node($);this.frontier.push({type:_e.type,match:_e.contentMatchAt(g.indexAfter($))})}for(let $=g.depth;$>0;$--)this.placed=Fragment.from(g.node($).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let rt=this.findFittable();rt?this.placeNodes(rt):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),_=this.placed.size-this.depth-this.$from.depth,j=this.$from,$=this.close(g<0?this.$to:j.doc.resolve(g));if(!$)return null;let _e=this.placed,et=j.depth,tt=$.depth;for(;et&&tt&&_e.childCount==1;)_e=_e.firstChild.content,et--,tt--;let nt=new Slice(_e,et,tt);return g>-1?new ReplaceAroundStep(j.pos,g,this.$to.pos,this.$to.end(),nt,_):nt.size||j.pos!=this.$to.pos?new ReplaceStep(j.pos,$.pos,nt):null}findFittable(){let g=this.unplaced.openStart;for(let _=this.unplaced.content,j=0,$=this.unplaced.openEnd;j<g;j++){let _e=_.firstChild;if(_.childCount>1&&($=0),_e.type.spec.isolating&&$<=j){g=j;break}_=_e.content}for(let _=1;_<=2;_++)for(let j=_==1?g:this.unplaced.openStart;j>=0;j--){let $,_e=null;j?(_e=contentAt(this.unplaced.content,j-1).firstChild,$=_e.content):$=this.unplaced.content;let et=$.firstChild;for(let tt=this.depth;tt>=0;tt--){let{type:nt,match:rt}=this.frontier[tt],it,st=null;if(_==1&&(et?rt.matchType(et.type)||(st=rt.fillBefore(Fragment.from(et),!1)):_e&&nt.compatibleContent(_e.type)))return{sliceDepth:j,frontierDepth:tt,parent:_e,inject:st};if(_==2&&et&&(it=rt.findWrapping(et.type)))return{sliceDepth:j,frontierDepth:tt,parent:_e,wrap:it};if(_e&&rt.matchType(_e.type))break}}}openMore(){let{content:g,openStart:_,openEnd:j}=this.unplaced,$=contentAt(g,_);return!$.childCount||$.firstChild.isLeaf?!1:(this.unplaced=new Slice(g,_+1,Math.max(j,$.size+_>=g.size-j?_+1:0)),!0)}dropNode(){let{content:g,openStart:_,openEnd:j}=this.unplaced,$=contentAt(g,_);if($.childCount<=1&&_>0){let _e=g.size-_<=_+$.size;this.unplaced=new Slice(dropFromFragment(g,_-1,1),_-1,_e?_-1:j)}else this.unplaced=new Slice(dropFromFragment(g,_,1),_,j)}placeNodes({sliceDepth:g,frontierDepth:_,parent:j,inject:$,wrap:_e}){for(;this.depth>_;)this.closeFrontierNode();if(_e)for(let ut=0;ut<_e.length;ut++)this.openFrontierNode(_e[ut]);let et=this.unplaced,tt=j?j.content:et.content,nt=et.openStart-g,rt=0,it=[],{match:st,type:ot}=this.frontier[_];if($){for(let ut=0;ut<$.childCount;ut++)it.push($.child(ut));st=st.matchFragment($)}let lt=tt.size+g-(et.content.size-et.openEnd);for(;rt<tt.childCount;){let ut=tt.child(rt),dt=st.matchType(ut.type);if(!dt)break;rt++,(rt>1||nt==0||ut.content.size)&&(st=dt,it.push(closeNodeStart(ut.mark(ot.allowedMarks(ut.marks)),rt==1?nt:0,rt==tt.childCount?lt:-1)))}let at=rt==tt.childCount;at||(lt=-1),this.placed=addToFragment(this.placed,_,Fragment.from(it)),this.frontier[_].match=st,at&&lt<0&&j&&j.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let ut=0,dt=tt;ut<lt;ut++){let ct=dt.lastChild;this.frontier.push({type:ct.type,match:ct.contentMatchAt(ct.childCount)}),dt=ct.content}this.unplaced=at?g==0?Slice.empty:new Slice(dropFromFragment(et.content,g-1,1),g-1,lt<0?et.openEnd:g-1):new Slice(dropFromFragment(et.content,g,rt),et.openStart,et.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let g=this.frontier[this.depth],_;if(!g.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(_=this.findCloseLevel(this.$to))&&_.depth==this.depth)return-1;let{depth:j}=this.$to,$=this.$to.after(j);for(;j>1&&$==this.$to.end(--j);)++$;return $}findCloseLevel(g){e:for(let _=Math.min(this.depth,g.depth);_>=0;_--){let{match:j,type:$}=this.frontier[_],_e=_<g.depth&&g.end(_+1)==g.pos+(g.depth-(_+1)),et=contentAfterFits(g,_,$,j,_e);if(et){for(let tt=_-1;tt>=0;tt--){let{match:nt,type:rt}=this.frontier[tt],it=contentAfterFits(g,tt,rt,nt,!0);if(!it||it.childCount)continue e}return{depth:_,fit:et,move:_e?g.doc.resolve(g.after(_+1)):g}}}}close(g){let _=this.findCloseLevel(g);if(!_)return null;for(;this.depth>_.depth;)this.closeFrontierNode();_.fit.childCount&&(this.placed=addToFragment(this.placed,_.depth,_.fit)),g=_.move;for(let j=_.depth+1;j<=g.depth;j++){let $=g.node(j),_e=$.type.contentMatch.fillBefore($.content,!0,g.index(j));this.openFrontierNode($.type,$.attrs,_e)}return g}openFrontierNode(g,_=null,j){let $=this.frontier[this.depth];$.match=$.match.matchType(g),this.placed=addToFragment(this.placed,this.depth,Fragment.from(g.create(_,j))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let _=this.frontier.pop().match.fillBefore(Fragment.empty,!0);_.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,_))}}function dropFromFragment(b,g,_){return g==0?b.cutByIndex(_,b.childCount):b.replaceChild(0,b.firstChild.copy(dropFromFragment(b.firstChild.content,g-1,_)))}function addToFragment(b,g,_){return g==0?b.append(_):b.replaceChild(b.childCount-1,b.lastChild.copy(addToFragment(b.lastChild.content,g-1,_)))}function contentAt(b,g){for(let _=0;_<g;_++)b=b.firstChild.content;return b}function closeNodeStart(b,g,_){if(g<=0)return b;let j=b.content;return g>1&&(j=j.replaceChild(0,closeNodeStart(j.firstChild,g-1,j.childCount==1?_-1:0))),g>0&&(j=b.type.contentMatch.fillBefore(j).append(j),_<=0&&(j=j.append(b.type.contentMatch.matchFragment(j).fillBefore(Fragment.empty,!0)))),b.copy(j)}function contentAfterFits(b,g,_,j,$){let _e=b.node(g),et=$?b.indexAfter(g):b.index(g);if(et==_e.childCount&&!_.compatibleContent(_e.type))return null;let tt=j.fillBefore(_e.content,!0,et);return tt&&!invalidMarks(_,_e.content,et)?tt:null}function invalidMarks(b,g,_){for(let j=_;j<g.childCount;j++)if(!b.allowsMarks(g.child(j).marks))return!0;return!1}function definesContent(b){return b.spec.defining||b.spec.definingForContent}function replaceRange(b,g,_,j){if(!j.size)return b.deleteRange(g,_);let $=b.doc.resolve(g),_e=b.doc.resolve(_);if(fitsTrivially($,_e,j))return b.step(new ReplaceStep(g,_,j));let et=coveredDepths($,b.doc.resolve(_));et[et.length-1]==0&&et.pop();let tt=-($.depth+1);et.unshift(tt);for(let ot=$.depth,lt=$.pos-1;ot>0;ot--,lt--){let at=$.node(ot).type.spec;if(at.defining||at.definingAsContext||at.isolating)break;et.indexOf(ot)>-1?tt=ot:$.before(ot)==lt&&et.splice(1,0,-ot)}let nt=et.indexOf(tt),rt=[],it=j.openStart;for(let ot=j.content,lt=0;;lt++){let at=ot.firstChild;if(rt.push(at),lt==j.openStart)break;ot=at.content}for(let ot=it-1;ot>=0;ot--){let lt=rt[ot],at=definesContent(lt.type);if(at&&!lt.sameMarkup($.node(Math.abs(tt)-1)))it=ot;else if(at||!lt.type.isTextblock)break}for(let ot=j.openStart;ot>=0;ot--){let lt=(ot+it+1)%(j.openStart+1),at=rt[lt];if(at)for(let ut=0;ut<et.length;ut++){let dt=et[(ut+nt)%et.length],ct=!0;dt<0&&(ct=!1,dt=-dt);let ht=$.node(dt-1),pt=$.index(dt-1);if(ht.canReplaceWith(pt,pt,at.type,at.marks))return b.replace($.before(dt),ct?_e.after(dt):_,new Slice(closeFragment(j.content,0,j.openStart,lt),lt,j.openEnd))}}let st=b.steps.length;for(let ot=et.length-1;ot>=0&&(b.replace(g,_,j),!(b.steps.length>st));ot--){let lt=et[ot];lt<0||(g=$.before(lt),_=_e.after(lt))}}function closeFragment(b,g,_,j,$){if(g<_){let _e=b.firstChild;b=b.replaceChild(0,_e.copy(closeFragment(_e.content,g+1,_,j,_e)))}if(g>j){let _e=$.contentMatchAt(0),et=_e.fillBefore(b).append(b);b=et.append(_e.matchFragment(et).fillBefore(Fragment.empty,!0))}return b}function replaceRangeWith(b,g,_,j){if(!j.isInline&&g==_&&b.doc.resolve(g).parent.content.size){let $=insertPoint(b.doc,g,j.type);$!=null&&(g=_=$)}b.replaceRange(g,_,new Slice(Fragment.from(j),0,0))}function deleteRange$1(b,g,_){let j=b.doc.resolve(g),$=b.doc.resolve(_),_e=coveredDepths(j,$);for(let et=0;et<_e.length;et++){let tt=_e[et],nt=et==_e.length-1;if(nt&&tt==0||j.node(tt).type.contentMatch.validEnd)return b.delete(j.start(tt),$.end(tt));if(tt>0&&(nt||j.node(tt-1).canReplace(j.index(tt-1),$.indexAfter(tt-1))))return b.delete(j.before(tt),$.after(tt))}for(let et=1;et<=j.depth&&et<=$.depth;et++)if(g-j.start(et)==j.depth-et&&_>j.end(et)&&$.end(et)-_!=$.depth-et&&j.start(et-1)==$.start(et-1)&&j.node(et-1).canReplace(j.index(et-1),$.index(et-1)))return b.delete(j.before(et),_);b.delete(g,_)}function coveredDepths(b,g){let _=[],j=Math.min(b.depth,g.depth);for(let $=j;$>=0;$--){let _e=b.start($);if(_e<b.pos-(b.depth-$)||g.end($)>g.pos+(g.depth-$)||b.node($).type.spec.isolating||g.node($).type.spec.isolating)break;(_e==g.start($)||$==b.depth&&$==g.depth&&b.parent.inlineContent&&g.parent.inlineContent&&$&&g.start($-1)==_e-1)&&_.push($)}return _}class AttrStep extends Step{constructor(g,_,j){super(),this.pos=g,this.attr=_,this.value=j}apply(g){let _=g.nodeAt(this.pos);if(!_)return StepResult.fail("No node at attribute step's position");let j=Object.create(null);for(let _e in _.attrs)j[_e]=_.attrs[_e];j[this.attr]=this.value;let $=_.type.create(j,null,_.marks);return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from($),0,_.isLeaf?0:1))}getMap(){return StepMap.empty}invert(g){return new AttrStep(this.pos,this.attr,g.nodeAt(this.pos).attrs[this.attr])}map(g){let _=g.mapResult(this.pos,1);return _.deletedAfter?null:new AttrStep(_.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(g,_){if(typeof _.pos!="number"||typeof _.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(_.pos,_.attr,_.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(g,_){super(),this.attr=g,this.value=_}apply(g){let _=Object.create(null);for(let $ in g.attrs)_[$]=g.attrs[$];_[this.attr]=this.value;let j=g.type.create(_,g.content,g.marks);return StepResult.ok(j)}getMap(){return StepMap.empty}invert(g){return new DocAttrStep(this.attr,g.attrs[this.attr])}map(g){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(g,_){if(typeof _.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(_.attr,_.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function b(g){let _=Error.call(this,g);return _.__proto__=b.prototype,_};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let _=this.maybeStep(g);if(_.failed)throw new TransformError(_.failed);return this}maybeStep(g){let _=g.apply(this.doc);return _.failed||this.addStep(g,_.doc),_}get docChanged(){return this.steps.length>0}addStep(g,_){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=_}replace(g,_=g,j=Slice.empty){let $=replaceStep(this.doc,g,_,j);return $&&this.step($),this}replaceWith(g,_,j){return this.replace(g,_,new Slice(Fragment.from(j),0,0))}delete(g,_){return this.replace(g,_,Slice.empty)}insert(g,_){return this.replaceWith(g,g,_)}replaceRange(g,_,j){return replaceRange(this,g,_,j),this}replaceRangeWith(g,_,j){return replaceRangeWith(this,g,_,j),this}deleteRange(g,_){return deleteRange$1(this,g,_),this}lift(g,_){return lift$2(this,g,_),this}join(g,_=1){return join(this,g,_),this}wrap(g,_){return wrap(this,g,_),this}setBlockType(g,_=g,j,$=null){return setBlockType$1(this,g,_,j,$),this}setNodeMarkup(g,_,j=null,$){return setNodeMarkup(this,g,_,j,$),this}setNodeAttribute(g,_,j){return this.step(new AttrStep(g,_,j)),this}setDocAttribute(g,_){return this.step(new DocAttrStep(g,_)),this}addNodeMark(g,_){return this.step(new AddNodeMarkStep(g,_)),this}removeNodeMark(g,_){if(!(_ instanceof Mark$1)){let j=this.doc.nodeAt(g);if(!j)throw new RangeError("No node at position "+g);if(_=_.isInSet(j.marks),!_)return this}return this.step(new RemoveNodeMarkStep(g,_)),this}split(g,_=1,j){return split(this,g,_,j),this}addMark(g,_,j){return addMark(this,g,_,j),this}removeMark(g,_,j){return removeMark(this,g,_,j),this}clearIncompatible(g,_,j){return clearIncompatible(this,g,_,j),this}}const classesById=Object.create(null);class Selection{constructor(g,_,j){this.$anchor=g,this.$head=_,this.ranges=j||[new SelectionRange(g.min(_),g.max(_))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let g=this.ranges;for(let _=0;_<g.length;_++)if(g[_].$from.pos!=g[_].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(g,_=Slice.empty){let j=_.content.lastChild,$=null;for(let tt=0;tt<_.openEnd;tt++)$=j,j=j.lastChild;let _e=g.steps.length,et=this.ranges;for(let tt=0;tt<et.length;tt++){let{$from:nt,$to:rt}=et[tt],it=g.mapping.slice(_e);g.replaceRange(it.map(nt.pos),it.map(rt.pos),tt?Slice.empty:_),tt==0&&selectionToInsertionEnd$1(g,_e,(j?j.isInline:$&&$.isTextblock)?-1:1)}}replaceWith(g,_){let j=g.steps.length,$=this.ranges;for(let _e=0;_e<$.length;_e++){let{$from:et,$to:tt}=$[_e],nt=g.mapping.slice(j),rt=nt.map(et.pos),it=nt.map(tt.pos);_e?g.deleteRange(rt,it):(g.replaceRangeWith(rt,it,_),selectionToInsertionEnd$1(g,j,_.isInline?-1:1))}}static findFrom(g,_,j=!1){let $=g.parent.inlineContent?new TextSelection(g):findSelectionIn(g.node(0),g.parent,g.pos,g.index(),_,j);if($)return $;for(let _e=g.depth-1;_e>=0;_e--){let et=_<0?findSelectionIn(g.node(0),g.node(_e),g.before(_e+1),g.index(_e),_,j):findSelectionIn(g.node(0),g.node(_e),g.after(_e+1),g.index(_e)+1,_,j);if(et)return et}return null}static near(g,_=1){return this.findFrom(g,_)||this.findFrom(g,-_)||new AllSelection(g.node(0))}static atStart(g){return findSelectionIn(g,g,0,0,1)||new AllSelection(g)}static atEnd(g){return findSelectionIn(g,g,g.content.size,g.childCount,-1)||new AllSelection(g)}static fromJSON(g,_){if(!_||!_.type)throw new RangeError("Invalid input for Selection.fromJSON");let j=classesById[_.type];if(!j)throw new RangeError(`No selection type ${_.type} defined`);return j.fromJSON(g,_)}static jsonID(g,_){if(g in classesById)throw new RangeError("Duplicate use of selection JSON ID "+g);return classesById[g]=_,_.prototype.jsonID=g,_}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(g,_){this.$from=g,this.$to=_}}let warnedAboutTextSelection=!1;function checkTextSelection(b){!warnedAboutTextSelection&&!b.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+b.parent.type.name+")"))}class TextSelection extends Selection{constructor(g,_=g){checkTextSelection(g),checkTextSelection(_),super(g,_)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(g,_){let j=g.resolve(_.map(this.head));if(!j.parent.inlineContent)return Selection.near(j);let $=g.resolve(_.map(this.anchor));return new TextSelection($.parent.inlineContent?$:j,j)}replace(g,_=Slice.empty){if(super.replace(g,_),_==Slice.empty){let j=this.$from.marksAcross(this.$to);j&&g.ensureMarks(j)}}eq(g){return g instanceof TextSelection&&g.anchor==this.anchor&&g.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(g,_){if(typeof _.anchor!="number"||typeof _.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(g.resolve(_.anchor),g.resolve(_.head))}static create(g,_,j=_){let $=g.resolve(_);return new this($,j==_?$:g.resolve(j))}static between(g,_,j){let $=g.pos-_.pos;if((!j||$)&&(j=$>=0?1:-1),!_.parent.inlineContent){let _e=Selection.findFrom(_,j,!0)||Selection.findFrom(_,-j,!0);if(_e)_=_e.$head;else return Selection.near(_,j)}return g.parent.inlineContent||($==0?g=_:(g=(Selection.findFrom(g,-j,!0)||Selection.findFrom(g,j,!0)).$anchor,g.pos<_.pos!=$<0&&(g=_))),new TextSelection(g,_)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(g,_){this.anchor=g,this.head=_}map(g){return new TextBookmark(g.map(this.anchor),g.map(this.head))}resolve(g){return TextSelection.between(g.resolve(this.anchor),g.resolve(this.head))}}class NodeSelection extends Selection{constructor(g){let _=g.nodeAfter,j=g.node(0).resolve(g.pos+_.nodeSize);super(g,j),this.node=_}map(g,_){let{deleted:j,pos:$}=_.mapResult(this.anchor),_e=g.resolve($);return j?Selection.near(_e):new NodeSelection(_e)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(g){return g instanceof NodeSelection&&g.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(g,_){if(typeof _.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(g.resolve(_.anchor))}static create(g,_){return new NodeSelection(g.resolve(_))}static isSelectable(g){return!g.isText&&g.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(g){this.anchor=g}map(g){let{deleted:_,pos:j}=g.mapResult(this.anchor);return _?new TextBookmark(j,j):new NodeBookmark(j)}resolve(g){let _=g.resolve(this.anchor),j=_.nodeAfter;return j&&NodeSelection.isSelectable(j)?new NodeSelection(_):Selection.near(_)}}class AllSelection extends Selection{constructor(g){super(g.resolve(0),g.resolve(g.content.size))}replace(g,_=Slice.empty){if(_==Slice.empty){g.delete(0,g.doc.content.size);let j=Selection.atStart(g.doc);j.eq(g.selection)||g.setSelection(j)}else super.replace(g,_)}toJSON(){return{type:"all"}}static fromJSON(g){return new AllSelection(g)}map(g){return new AllSelection(g)}eq(g){return g instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(b){return new AllSelection(b)}};function findSelectionIn(b,g,_,j,$,_e=!1){if(g.inlineContent)return TextSelection.create(b,_);for(let et=j-($>0?0:1);$>0?et<g.childCount:et>=0;et+=$){let tt=g.child(et);if(tt.isAtom){if(!_e&&NodeSelection.isSelectable(tt))return NodeSelection.create(b,_-($<0?tt.nodeSize:0))}else{let nt=findSelectionIn(b,tt,_+$,$<0?tt.childCount:0,$,_e);if(nt)return nt}_+=tt.nodeSize*$}return null}function selectionToInsertionEnd$1(b,g,_){let j=b.steps.length-1;if(j<g)return;let $=b.steps[j];if(!($ instanceof ReplaceStep||$ instanceof ReplaceAroundStep))return;let _e=b.mapping.maps[j],et;_e.forEach((tt,nt,rt,it)=>{et==null&&(et=it)}),b.setSelection(Selection.near(b.doc.resolve(et),_))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(g){super(g.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=g.selection,this.storedMarks=g.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(g){if(g.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=g,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(g){return this.storedMarks=g,this.updated|=UPDATED_MARKS,this}ensureMarks(g){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),g)||this.setStoredMarks(g),this}addStoredMark(g){return this.ensureMarks(g.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(g){return this.ensureMarks(g.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(g,_){super.addStep(g,_),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(g){return this.time=g,this}replaceSelection(g){return this.selection.replace(this,g),this}replaceSelectionWith(g,_=!0){let j=this.selection;return _&&(g=g.mark(this.storedMarks||(j.empty?j.$from.marks():j.$from.marksAcross(j.$to)||Mark$1.none))),j.replaceWith(this,g),this}deleteSelection(){return this.selection.replace(this),this}insertText(g,_,j){let $=this.doc.type.schema;if(_==null)return g?this.replaceSelectionWith($.text(g),!0):this.deleteSelection();{if(j==null&&(j=_),j=j??_,!g)return this.deleteRange(_,j);let _e=this.storedMarks;if(!_e){let et=this.doc.resolve(_);_e=j==_?et.marks():et.marksAcross(this.doc.resolve(j))}return this.replaceRangeWith(_,j,$.text(g,_e)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(g,_){return this.meta[typeof g=="string"?g:g.key]=_,this}getMeta(g){return this.meta[typeof g=="string"?g:g.key]}get isGeneric(){for(let g in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind$1(b,g){return!g||!b?b:b.bind(g)}class FieldDesc{constructor(g,_,j){this.name=g,this.init=bind$1(_.init,j),this.apply=bind$1(_.apply,j)}}const baseFields=[new FieldDesc("doc",{init(b){return b.doc||b.schema.topNodeType.createAndFill()},apply(b){return b.doc}}),new FieldDesc("selection",{init(b,g){return b.selection||Selection.atStart(g.doc)},apply(b){return b.selection}}),new FieldDesc("storedMarks",{init(b){return b.storedMarks||null},apply(b,g,_,j){return j.selection.$cursor?b.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(b,g){return b.scrolledIntoView?g+1:g}})];class Configuration{constructor(g,_){this.schema=g,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),_&&_.forEach(j=>{if(this.pluginsByKey[j.key])throw new RangeError("Adding different instances of a keyed plugin ("+j.key+")");this.plugins.push(j),this.pluginsByKey[j.key]=j,j.spec.state&&this.fields.push(new FieldDesc(j.key,j.spec.state,j))})}}class EditorState{constructor(g){this.config=g}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(g){return this.applyTransaction(g).state}filterTransaction(g,_=-1){for(let j=0;j<this.config.plugins.length;j++)if(j!=_){let $=this.config.plugins[j];if($.spec.filterTransaction&&!$.spec.filterTransaction.call($,g,this))return!1}return!0}applyTransaction(g){if(!this.filterTransaction(g))return{state:this,transactions:[]};let _=[g],j=this.applyInner(g),$=null;for(;;){let _e=!1;for(let et=0;et<this.config.plugins.length;et++){let tt=this.config.plugins[et];if(tt.spec.appendTransaction){let nt=$?$[et].n:0,rt=$?$[et].state:this,it=nt<_.length&&tt.spec.appendTransaction.call(tt,nt?_.slice(nt):_,rt,j);if(it&&j.filterTransaction(it,et)){if(it.setMeta("appendedTransaction",g),!$){$=[];for(let st=0;st<this.config.plugins.length;st++)$.push(st<et?{state:j,n:_.length}:{state:this,n:0})}_.push(it),j=j.applyInner(it),_e=!0}$&&($[et]={state:j,n:_.length})}}if(!_e)return{state:j,transactions:_}}}applyInner(g){if(!g.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let _=new EditorState(this.config),j=this.config.fields;for(let $=0;$<j.length;$++){let _e=j[$];_[_e.name]=_e.apply(g,this[_e.name],this,_)}return _}get tr(){return new Transaction(this)}static create(g){let _=new Configuration(g.doc?g.doc.type.schema:g.schema,g.plugins),j=new EditorState(_);for(let $=0;$<_.fields.length;$++)j[_.fields[$].name]=_.fields[$].init(g,j);return j}reconfigure(g){let _=new Configuration(this.schema,g.plugins),j=_.fields,$=new EditorState(_);for(let _e=0;_e<j.length;_e++){let et=j[_e].name;$[et]=this.hasOwnProperty(et)?this[et]:j[_e].init(g,$)}return $}toJSON(g){let _={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(_.storedMarks=this.storedMarks.map(j=>j.toJSON())),g&&typeof g=="object")for(let j in g){if(j=="doc"||j=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let $=g[j],_e=$.spec.state;_e&&_e.toJSON&&(_[j]=_e.toJSON.call($,this[$.key]))}return _}static fromJSON(g,_,j){if(!_)throw new RangeError("Invalid input for EditorState.fromJSON");if(!g.schema)throw new RangeError("Required config field 'schema' missing");let $=new Configuration(g.schema,g.plugins),_e=new EditorState($);return $.fields.forEach(et=>{if(et.name=="doc")_e.doc=Node$1.fromJSON(g.schema,_.doc);else if(et.name=="selection")_e.selection=Selection.fromJSON(_e.doc,_.selection);else if(et.name=="storedMarks")_.storedMarks&&(_e.storedMarks=_.storedMarks.map(g.schema.markFromJSON));else{if(j)for(let tt in j){let nt=j[tt],rt=nt.spec.state;if(nt.key==et.name&&rt&&rt.fromJSON&&Object.prototype.hasOwnProperty.call(_,tt)){_e[et.name]=rt.fromJSON.call(nt,g,_[tt],_e);return}}_e[et.name]=et.init(g,_e)}}),_e}}function bindProps(b,g,_){for(let j in b){let $=b[j];$ instanceof Function?$=$.bind(g):j=="handleDOMEvents"&&($=bindProps($,g,{})),_[j]=$}return _}class Plugin{constructor(g){this.spec=g,this.props={},g.props&&bindProps(g.props,this,this.props),this.key=g.key?g.key.key:createKey("plugin")}getState(g){return g[this.key]}}const keys=Object.create(null);function createKey(b){return b in keys?b+"$"+ ++keys[b]:(keys[b]=0,b+"$")}class PluginKey{constructor(g="key"){this.key=createKey(g)}get(g){return g.config.pluginsByKey[this.key]}getState(g){return g[this.key]}}const domIndex=function(b){for(var g=0;;g++)if(b=b.previousSibling,!b)return g},parentNode=function(b){let g=b.assignedSlot||b.parentNode;return g&&g.nodeType==11?g.host:g};let reusedRange=null;const textRange=function(b,g,_){let j=reusedRange||(reusedRange=document.createRange());return j.setEnd(b,_??b.nodeValue.length),j.setStart(b,g||0),j},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(b,g,_,j){return _&&(scanFor(b,g,_,j,-1)||scanFor(b,g,_,j,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(b,g,_,j,$){for(;;){if(b==_&&g==j)return!0;if(g==($<0?0:nodeSize(b))){let _e=b.parentNode;if(!_e||_e.nodeType!=1||hasBlockDesc(b)||atomElements.test(b.nodeName)||b.contentEditable=="false")return!1;g=domIndex(b)+($<0?0:1),b=_e}else if(b.nodeType==1){if(b=b.childNodes[g+($<0?-1:0)],b.contentEditable=="false")return!1;g=$<0?nodeSize(b):0}else return!1}}function nodeSize(b){return b.nodeType==3?b.nodeValue.length:b.childNodes.length}function textNodeBefore$1(b,g){for(;;){if(b.nodeType==3&&g)return b;if(b.nodeType==1&&g>0){if(b.contentEditable=="false")return null;b=b.childNodes[g-1],g=nodeSize(b)}else if(b.parentNode&&!hasBlockDesc(b))g=domIndex(b),b=b.parentNode;else return null}}function textNodeAfter$1(b,g){for(;;){if(b.nodeType==3&&g<b.nodeValue.length)return b;if(b.nodeType==1&&g<b.childNodes.length){if(b.contentEditable=="false")return null;b=b.childNodes[g],g=0}else if(b.parentNode&&!hasBlockDesc(b))g=domIndex(b)+1,b=b.parentNode;else return null}}function isOnEdge(b,g,_){for(let j=g==0,$=g==nodeSize(b);j||$;){if(b==_)return!0;let _e=domIndex(b);if(b=b.parentNode,!b)return!1;j=j&&_e==0,$=$&&_e==nodeSize(b)}}function hasBlockDesc(b){let g;for(let _=b;_&&!(g=_.pmViewDesc);_=_.parentNode);return g&&g.node&&g.node.isBlock&&(g.dom==b||g.contentDOM==b)}const selectionCollapsed=function(b){return b.focusNode&&isEquivalentPosition(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset)};function keyEvent(b,g){let _=document.createEvent("Event");return _.initEvent("keydown",!0,!0),_.keyCode=b,_.key=_.code=g,_}function deepActiveElement(b){let g=b.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}function caretFromPoint(b,g,_){if(b.caretPositionFromPoint)try{let j=b.caretPositionFromPoint(g,_);if(j)return{node:j.offsetNode,offset:Math.min(nodeSize(j.offsetNode),j.offset)}}catch{}if(b.caretRangeFromPoint){let j=b.caretRangeFromPoint(g,_);if(j)return{node:j.startContainer,offset:Math.min(nodeSize(j.startContainer),j.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc$1=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc$1&&"webkitFontSmoothing"in doc$1.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(b){let g=b.defaultView&&b.defaultView.visualViewport;return g?{left:0,right:g.width,top:0,bottom:g.height}:{left:0,right:b.documentElement.clientWidth,top:0,bottom:b.documentElement.clientHeight}}function getSide(b,g){return typeof b=="number"?b:b[g]}function clientRect(b){let g=b.getBoundingClientRect(),_=g.width/b.offsetWidth||1,j=g.height/b.offsetHeight||1;return{left:g.left,right:g.left+b.clientWidth*_,top:g.top,bottom:g.top+b.clientHeight*j}}function scrollRectIntoView(b,g,_){let j=b.someProp("scrollThreshold")||0,$=b.someProp("scrollMargin")||5,_e=b.dom.ownerDocument;for(let et=_||b.dom;et;et=parentNode(et)){if(et.nodeType!=1)continue;let tt=et,nt=tt==_e.body,rt=nt?windowRect(_e):clientRect(tt),it=0,st=0;if(g.top<rt.top+getSide(j,"top")?st=-(rt.top-g.top+getSide($,"top")):g.bottom>rt.bottom-getSide(j,"bottom")&&(st=g.bottom-g.top>rt.bottom-rt.top?g.top+getSide($,"top")-rt.top:g.bottom-rt.bottom+getSide($,"bottom")),g.left<rt.left+getSide(j,"left")?it=-(rt.left-g.left+getSide($,"left")):g.right>rt.right-getSide(j,"right")&&(it=g.right-rt.right+getSide($,"right")),it||st)if(nt)_e.defaultView.scrollBy(it,st);else{let ot=tt.scrollLeft,lt=tt.scrollTop;st&&(tt.scrollTop+=st),it&&(tt.scrollLeft+=it);let at=tt.scrollLeft-ot,ut=tt.scrollTop-lt;g={left:g.left-at,top:g.top-ut,right:g.right-at,bottom:g.bottom-ut}}if(nt||/^(fixed|sticky)$/.test(getComputedStyle(et).position))break}}function storeScrollPos(b){let g=b.dom.getBoundingClientRect(),_=Math.max(0,g.top),j,$;for(let _e=(g.left+g.right)/2,et=_+1;et<Math.min(innerHeight,g.bottom);et+=5){let tt=b.root.elementFromPoint(_e,et);if(!tt||tt==b.dom||!b.dom.contains(tt))continue;let nt=tt.getBoundingClientRect();if(nt.top>=_-20){j=tt,$=nt.top;break}}return{refDOM:j,refTop:$,stack:scrollStack(b.dom)}}function scrollStack(b){let g=[],_=b.ownerDocument;for(let j=b;j&&(g.push({dom:j,top:j.scrollTop,left:j.scrollLeft}),b!=_);j=parentNode(j));return g}function resetScrollPos({refDOM:b,refTop:g,stack:_}){let j=b?b.getBoundingClientRect().top:0;restoreScrollStack(_,j==0?0:j-g)}function restoreScrollStack(b,g){for(let _=0;_<b.length;_++){let{dom:j,top:$,left:_e}=b[_];j.scrollTop!=$+g&&(j.scrollTop=$+g),j.scrollLeft!=_e&&(j.scrollLeft=_e)}}let preventScrollSupported=null;function focusPreventScroll(b){if(b.setActive)return b.setActive();if(preventScrollSupported)return b.focus(preventScrollSupported);let g=scrollStack(b);b.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(g,0))}function findOffsetInNode(b,g){let _,j=2e8,$,_e=0,et=g.top,tt=g.top,nt,rt;for(let it=b.firstChild,st=0;it;it=it.nextSibling,st++){let ot;if(it.nodeType==1)ot=it.getClientRects();else if(it.nodeType==3)ot=textRange(it).getClientRects();else continue;for(let lt=0;lt<ot.length;lt++){let at=ot[lt];if(at.top<=et&&at.bottom>=tt){et=Math.max(at.bottom,et),tt=Math.min(at.top,tt);let ut=at.left>g.left?at.left-g.left:at.right<g.left?g.left-at.right:0;if(ut<j){_=it,j=ut,$=ut&&_.nodeType==3?{left:at.right<g.left?at.right:at.left,top:g.top}:g,it.nodeType==1&&ut&&(_e=st+(g.left>=(at.left+at.right)/2?1:0));continue}}else at.top>g.top&&!nt&&at.left<=g.left&&at.right>=g.left&&(nt=it,rt={left:Math.max(at.left,Math.min(at.right,g.left)),top:at.top});!_&&(g.left>=at.right&&g.top>=at.top||g.left>=at.left&&g.top>=at.bottom)&&(_e=st+1)}}return!_&&nt&&(_=nt,$=rt,j=0),_&&_.nodeType==3?findOffsetInText(_,$):!_||j&&_.nodeType==1?{node:b,offset:_e}:findOffsetInNode(_,$)}function findOffsetInText(b,g){let _=b.nodeValue.length,j=document.createRange();for(let $=0;$<_;$++){j.setEnd(b,$+1),j.setStart(b,$);let _e=singleRect(j,1);if(_e.top!=_e.bottom&&inRect(g,_e))return{node:b,offset:$+(g.left>=(_e.left+_e.right)/2?1:0)}}return{node:b,offset:0}}function inRect(b,g){return b.left>=g.left-1&&b.left<=g.right+1&&b.top>=g.top-1&&b.top<=g.bottom+1}function targetKludge(b,g){let _=b.parentNode;return _&&/^li$/i.test(_.nodeName)&&g.left<b.getBoundingClientRect().left?_:b}function posFromElement(b,g,_){let{node:j,offset:$}=findOffsetInNode(g,_),_e=-1;if(j.nodeType==1&&!j.firstChild){let et=j.getBoundingClientRect();_e=et.left!=et.right&&_.left>(et.left+et.right)/2?1:-1}return b.docView.posFromDOM(j,$,_e)}function posFromCaret(b,g,_,j){let $=-1;for(let _e=g,et=!1;_e!=b.dom;){let tt=b.docView.nearestDesc(_e,!0);if(!tt)return null;if(tt.dom.nodeType==1&&(tt.node.isBlock&&tt.parent||!tt.contentDOM)){let nt=tt.dom.getBoundingClientRect();if(tt.node.isBlock&&tt.parent&&(!et&&nt.left>j.left||nt.top>j.top?$=tt.posBefore:(!et&&nt.right<j.left||nt.bottom<j.top)&&($=tt.posAfter),et=!0),!tt.contentDOM&&$<0&&!tt.node.isText)return(tt.node.isBlock?j.top<(nt.top+nt.bottom)/2:j.left<(nt.left+nt.right)/2)?tt.posBefore:tt.posAfter}_e=tt.dom.parentNode}return $>-1?$:b.docView.posFromDOM(g,_,-1)}function elementFromPoint(b,g,_){let j=b.childNodes.length;if(j&&_.top<_.bottom)for(let $=Math.max(0,Math.min(j-1,Math.floor(j*(g.top-_.top)/(_.bottom-_.top))-2)),_e=$;;){let et=b.childNodes[_e];if(et.nodeType==1){let tt=et.getClientRects();for(let nt=0;nt<tt.length;nt++){let rt=tt[nt];if(inRect(g,rt))return elementFromPoint(et,g,rt)}}if((_e=(_e+1)%j)==$)break}return b}function posAtCoords(b,g){let _=b.dom.ownerDocument,j,$=0,_e=caretFromPoint(_,g.left,g.top);_e&&({node:j,offset:$}=_e);let et=(b.root.elementFromPoint?b.root:_).elementFromPoint(g.left,g.top),tt;if(!et||!b.dom.contains(et.nodeType!=1?et.parentNode:et)){let rt=b.dom.getBoundingClientRect();if(!inRect(g,rt)||(et=elementFromPoint(b.dom,g,rt),!et))return null}if(safari)for(let rt=et;j&&rt;rt=parentNode(rt))rt.draggable&&(j=void 0);if(et=targetKludge(et,g),j){if(gecko&&j.nodeType==1&&($=Math.min($,j.childNodes.length),$<j.childNodes.length)){let it=j.childNodes[$],st;it.nodeName=="IMG"&&(st=it.getBoundingClientRect()).right<=g.left&&st.bottom>g.top&&$++}let rt;webkit&&$&&j.nodeType==1&&(rt=j.childNodes[$-1]).nodeType==1&&rt.contentEditable=="false"&&rt.getBoundingClientRect().top>=g.top&&$--,j==b.dom&&$==j.childNodes.length-1&&j.lastChild.nodeType==1&&g.top>j.lastChild.getBoundingClientRect().bottom?tt=b.state.doc.content.size:($==0||j.nodeType!=1||j.childNodes[$-1].nodeName!="BR")&&(tt=posFromCaret(b,j,$,g))}tt==null&&(tt=posFromElement(b,et,g));let nt=b.docView.nearestDesc(et,!0);return{pos:tt,inside:nt?nt.posAtStart-nt.border:-1}}function nonZero(b){return b.top<b.bottom||b.left<b.right}function singleRect(b,g){let _=b.getClientRects();if(_.length){let j=_[g<0?0:_.length-1];if(nonZero(j))return j}return Array.prototype.find.call(_,nonZero)||b.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(b,g,_){let{node:j,offset:$,atom:_e}=b.docView.domFromPos(g,_<0?-1:1),et=webkit||gecko;if(j.nodeType==3)if(et&&(BIDI.test(j.nodeValue)||(_<0?!$:$==j.nodeValue.length))){let nt=singleRect(textRange(j,$,$),_);if(gecko&&$&&/\s/.test(j.nodeValue[$-1])&&$<j.nodeValue.length){let rt=singleRect(textRange(j,$-1,$-1),-1);if(rt.top==nt.top){let it=singleRect(textRange(j,$,$+1),-1);if(it.top!=nt.top)return flattenV(it,it.left<rt.left)}}return nt}else{let nt=$,rt=$,it=_<0?1:-1;return _<0&&!$?(rt++,it=-1):_>=0&&$==j.nodeValue.length?(nt--,it=1):_<0?nt--:rt++,flattenV(singleRect(textRange(j,nt,rt),it),it<0)}if(!b.state.doc.resolve(g-(_e||0)).parent.inlineContent){if(_e==null&&$&&(_<0||$==nodeSize(j))){let nt=j.childNodes[$-1];if(nt.nodeType==1)return flattenH(nt.getBoundingClientRect(),!1)}if(_e==null&&$<nodeSize(j)){let nt=j.childNodes[$];if(nt.nodeType==1)return flattenH(nt.getBoundingClientRect(),!0)}return flattenH(j.getBoundingClientRect(),_>=0)}if(_e==null&&$&&(_<0||$==nodeSize(j))){let nt=j.childNodes[$-1],rt=nt.nodeType==3?textRange(nt,nodeSize(nt)-(et?0:1)):nt.nodeType==1&&(nt.nodeName!="BR"||!nt.nextSibling)?nt:null;if(rt)return flattenV(singleRect(rt,1),!1)}if(_e==null&&$<nodeSize(j)){let nt=j.childNodes[$];for(;nt.pmViewDesc&&nt.pmViewDesc.ignoreForCoords;)nt=nt.nextSibling;let rt=nt?nt.nodeType==3?textRange(nt,0,et?0:1):nt.nodeType==1?nt:null:null;if(rt)return flattenV(singleRect(rt,-1),!0)}return flattenV(singleRect(j.nodeType==3?textRange(j):j,-_),_>=0)}function flattenV(b,g){if(b.width==0)return b;let _=g?b.left:b.right;return{top:b.top,bottom:b.bottom,left:_,right:_}}function flattenH(b,g){if(b.height==0)return b;let _=g?b.top:b.bottom;return{top:_,bottom:_,left:b.left,right:b.right}}function withFlushedState(b,g,_){let j=b.state,$=b.root.activeElement;j!=g&&b.updateState(g),$!=b.dom&&b.focus();try{return _()}finally{j!=g&&b.updateState(j),$!=b.dom&&$&&$.focus()}}function endOfTextblockVertical(b,g,_){let j=g.selection,$=_=="up"?j.$from:j.$to;return withFlushedState(b,g,()=>{let{node:_e}=b.docView.domFromPos($.pos,_=="up"?-1:1);for(;;){let tt=b.docView.nearestDesc(_e,!0);if(!tt)break;if(tt.node.isBlock){_e=tt.contentDOM||tt.dom;break}_e=tt.dom.parentNode}let et=coordsAtPos(b,$.pos,1);for(let tt=_e.firstChild;tt;tt=tt.nextSibling){let nt;if(tt.nodeType==1)nt=tt.getClientRects();else if(tt.nodeType==3)nt=textRange(tt,0,tt.nodeValue.length).getClientRects();else continue;for(let rt=0;rt<nt.length;rt++){let it=nt[rt];if(it.bottom>it.top+1&&(_=="up"?et.top-it.top>(it.bottom-et.top)*2:it.bottom-et.bottom>(et.bottom-it.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(b,g,_){let{$head:j}=g.selection;if(!j.parent.isTextblock)return!1;let $=j.parentOffset,_e=!$,et=$==j.parent.content.size,tt=b.domSelection();return tt?!maybeRTL.test(j.parent.textContent)||!tt.modify?_=="left"||_=="backward"?_e:et:withFlushedState(b,g,()=>{let{focusNode:nt,focusOffset:rt,anchorNode:it,anchorOffset:st}=b.domSelectionRange(),ot=tt.caretBidiLevel;tt.modify("move",_,"character");let lt=j.depth?b.docView.domAfterPos(j.before()):b.dom,{focusNode:at,focusOffset:ut}=b.domSelectionRange(),dt=at&&!lt.contains(at.nodeType==1?at:at.parentNode)||nt==at&&rt==ut;try{tt.collapse(it,st),nt&&(nt!=it||rt!=st)&&tt.extend&&tt.extend(nt,rt)}catch{}return ot!=null&&(tt.caretBidiLevel=ot),dt}):j.pos==j.start()||j.pos==j.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(b,g,_){return cachedState==g&&cachedDir==_?cachedResult:(cachedState=g,cachedDir=_,cachedResult=_=="up"||_=="down"?endOfTextblockVertical(b,g,_):endOfTextblockHorizontal(b,g,_))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(g,_,j,$){this.parent=g,this.children=_,this.dom=j,this.contentDOM=$,this.dirty=NOT_DIRTY,j.pmViewDesc=this}matchesWidget(g){return!1}matchesMark(g){return!1}matchesNode(g,_,j){return!1}matchesHack(g){return!1}parseRule(){return null}stopEvent(g){return!1}get size(){let g=0;for(let _=0;_<this.children.length;_++)g+=this.children[_].size;return g}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let g=0;g<this.children.length;g++)this.children[g].destroy()}posBeforeChild(g){for(let _=0,j=this.posAtStart;;_++){let $=this.children[_];if($==g)return j;j+=$.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(g,_,j){if(this.contentDOM&&this.contentDOM.contains(g.nodeType==1?g:g.parentNode))if(j<0){let _e,et;if(g==this.contentDOM)_e=g.childNodes[_-1];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;_e=g.previousSibling}for(;_e&&!((et=_e.pmViewDesc)&&et.parent==this);)_e=_e.previousSibling;return _e?this.posBeforeChild(et)+et.size:this.posAtStart}else{let _e,et;if(g==this.contentDOM)_e=g.childNodes[_];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;_e=g.nextSibling}for(;_e&&!((et=_e.pmViewDesc)&&et.parent==this);)_e=_e.nextSibling;return _e?this.posBeforeChild(et):this.posAtEnd}let $;if(g==this.dom&&this.contentDOM)$=_>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))$=g.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(_==0)for(let _e=g;;_e=_e.parentNode){if(_e==this.dom){$=!1;break}if(_e.previousSibling)break}if($==null&&_==g.childNodes.length)for(let _e=g;;_e=_e.parentNode){if(_e==this.dom){$=!0;break}if(_e.nextSibling)break}}return $??j>0?this.posAtEnd:this.posAtStart}nearestDesc(g,_=!1){for(let j=!0,$=g;$;$=$.parentNode){let _e=this.getDesc($),et;if(_e&&(!_||_e.node))if(j&&(et=_e.nodeDOM)&&!(et.nodeType==1?et.contains(g.nodeType==1?g:g.parentNode):et==g))j=!1;else return _e}}getDesc(g){let _=g.pmViewDesc;for(let j=_;j;j=j.parent)if(j==this)return _}posFromDOM(g,_,j){for(let $=g;$;$=$.parentNode){let _e=this.getDesc($);if(_e)return _e.localPosFromDOM(g,_,j)}return-1}descAt(g){for(let _=0,j=0;_<this.children.length;_++){let $=this.children[_],_e=j+$.size;if(j==g&&_e!=j){for(;!$.border&&$.children.length;)$=$.children[0];return $}if(g<_e)return $.descAt(g-j-$.border);j=_e}}domFromPos(g,_){if(!this.contentDOM)return{node:this.dom,offset:0,atom:g+1};let j=0,$=0;for(let _e=0;j<this.children.length;j++){let et=this.children[j],tt=_e+et.size;if(tt>g||et instanceof TrailingHackViewDesc){$=g-_e;break}_e=tt}if($)return this.children[j].domFromPos($-this.children[j].border,_);for(let _e;j&&!(_e=this.children[j-1]).size&&_e instanceof WidgetViewDesc&&_e.side>=0;j--);if(_<=0){let _e,et=!0;for(;_e=j?this.children[j-1]:null,!(!_e||_e.dom.parentNode==this.contentDOM);j--,et=!1);return _e&&_&&et&&!_e.border&&!_e.domAtom?_e.domFromPos(_e.size,_):{node:this.contentDOM,offset:_e?domIndex(_e.dom)+1:0}}else{let _e,et=!0;for(;_e=j<this.children.length?this.children[j]:null,!(!_e||_e.dom.parentNode==this.contentDOM);j++,et=!1);return _e&&et&&!_e.border&&!_e.domAtom?_e.domFromPos(0,_):{node:this.contentDOM,offset:_e?domIndex(_e.dom):this.contentDOM.childNodes.length}}}parseRange(g,_,j=0){if(this.children.length==0)return{node:this.contentDOM,from:g,to:_,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let $=-1,_e=-1;for(let et=j,tt=0;;tt++){let nt=this.children[tt],rt=et+nt.size;if($==-1&&g<=rt){let it=et+nt.border;if(g>=it&&_<=rt-nt.border&&nt.node&&nt.contentDOM&&this.contentDOM.contains(nt.contentDOM))return nt.parseRange(g,_,it);g=et;for(let st=tt;st>0;st--){let ot=this.children[st-1];if(ot.size&&ot.dom.parentNode==this.contentDOM&&!ot.emptyChildAt(1)){$=domIndex(ot.dom)+1;break}g-=ot.size}$==-1&&($=0)}if($>-1&&(rt>_||tt==this.children.length-1)){_=rt;for(let it=tt+1;it<this.children.length;it++){let st=this.children[it];if(st.size&&st.dom.parentNode==this.contentDOM&&!st.emptyChildAt(-1)){_e=domIndex(st.dom);break}_+=st.size}_e==-1&&(_e=this.contentDOM.childNodes.length);break}et=rt}return{node:this.contentDOM,from:g,to:_,fromOffset:$,toOffset:_e}}emptyChildAt(g){if(this.border||!this.contentDOM||!this.children.length)return!1;let _=this.children[g<0?0:this.children.length-1];return _.size==0||_.emptyChildAt(g)}domAfterPos(g){let{node:_,offset:j}=this.domFromPos(g,0);if(_.nodeType!=1||j==_.childNodes.length)throw new RangeError("No node after pos "+g);return _.childNodes[j]}setSelection(g,_,j,$=!1){let _e=Math.min(g,_),et=Math.max(g,_);for(let ot=0,lt=0;ot<this.children.length;ot++){let at=this.children[ot],ut=lt+at.size;if(_e>lt&&et<ut)return at.setSelection(g-lt-at.border,_-lt-at.border,j,$);lt=ut}let tt=this.domFromPos(g,g?-1:1),nt=_==g?tt:this.domFromPos(_,_?-1:1),rt=j.getSelection(),it=!1;if((gecko||safari)&&g==_){let{node:ot,offset:lt}=tt;if(ot.nodeType==3){if(it=!!(lt&&ot.nodeValue[lt-1]==`
`),it&&lt==ot.nodeValue.length)for(let at=ot,ut;at;at=at.parentNode){if(ut=at.nextSibling){ut.nodeName=="BR"&&(tt=nt={node:ut.parentNode,offset:domIndex(ut)+1});break}let dt=at.pmViewDesc;if(dt&&dt.node&&dt.node.isBlock)break}}else{let at=ot.childNodes[lt-1];it=at&&(at.nodeName=="BR"||at.contentEditable=="false")}}if(gecko&&rt.focusNode&&rt.focusNode!=nt.node&&rt.focusNode.nodeType==1){let ot=rt.focusNode.childNodes[rt.focusOffset];ot&&ot.contentEditable=="false"&&($=!0)}if(!($||it&&safari)&&isEquivalentPosition(tt.node,tt.offset,rt.anchorNode,rt.anchorOffset)&&isEquivalentPosition(nt.node,nt.offset,rt.focusNode,rt.focusOffset))return;let st=!1;if((rt.extend||g==_)&&!it){rt.collapse(tt.node,tt.offset);try{g!=_&&rt.extend(nt.node,nt.offset),st=!0}catch{}}if(!st){if(g>_){let lt=tt;tt=nt,nt=lt}let ot=document.createRange();ot.setEnd(nt.node,nt.offset),ot.setStart(tt.node,tt.offset),rt.removeAllRanges(),rt.addRange(ot)}}ignoreMutation(g){return!this.contentDOM&&g.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(g,_){for(let j=0,$=0;$<this.children.length;$++){let _e=this.children[$],et=j+_e.size;if(j==et?g<=et&&_>=j:g<et&&_>j){let tt=j+_e.border,nt=et-_e.border;if(g>=tt&&_<=nt){this.dirty=g==j||_==et?CONTENT_DIRTY:CHILD_DIRTY,g==tt&&_==nt&&(_e.contentLost||_e.dom.parentNode!=this.contentDOM)?_e.dirty=NODE_DIRTY:_e.markDirty(g-tt,_-tt);return}else _e.dirty=_e.dom==_e.contentDOM&&_e.dom.parentNode==this.contentDOM&&!_e.children.length?CONTENT_DIRTY:NODE_DIRTY}j=et}this.dirty=CONTENT_DIRTY}markParentsDirty(){let g=1;for(let _=this.parent;_;_=_.parent,g++){let j=g==1?CONTENT_DIRTY:CHILD_DIRTY;_.dirty<j&&(_.dirty=j)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(g){return!1}}class WidgetViewDesc extends ViewDesc{constructor(g,_,j,$){let _e,et=_.type.toDOM;if(typeof et=="function"&&(et=et(j,()=>{if(!_e)return $;if(_e.parent)return _e.parent.posBeforeChild(_e)})),!_.type.spec.raw){if(et.nodeType!=1){let tt=document.createElement("span");tt.appendChild(et),et=tt}et.contentEditable="false",et.classList.add("ProseMirror-widget")}super(g,[],et,null),this.widget=_,this.widget=_,_e=this}matchesWidget(g){return this.dirty==NOT_DIRTY&&g.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(g){let _=this.widget.spec.stopEvent;return _?_(g):!1}ignoreMutation(g){return g.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(g,_,j,$){super(g,[],_,null),this.textDOM=j,this.text=$}get size(){return this.text.length}localPosFromDOM(g,_){return g!=this.textDOM?this.posAtStart+(_?this.size:0):this.posAtStart+_}domFromPos(g){return{node:this.textDOM,offset:g}}ignoreMutation(g){return g.type==="characterData"&&g.target.nodeValue==g.oldValue}}class MarkViewDesc extends ViewDesc{constructor(g,_,j,$){super(g,[],j,$),this.mark=_}static create(g,_,j,$){let _e=$.nodeViews[_.type.name],et=_e&&_e(_,$,j);return(!et||!et.dom)&&(et=DOMSerializer.renderSpec(document,_.type.spec.toDOM(_,j),null,_.attrs)),new MarkViewDesc(g,_,et.dom,et.contentDOM||et.dom)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(g){return this.dirty!=NODE_DIRTY&&this.mark.eq(g)}markDirty(g,_){if(super.markDirty(g,_),this.dirty!=NOT_DIRTY){let j=this.parent;for(;!j.node;)j=j.parent;j.dirty<this.dirty&&(j.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(g,_,j){let $=MarkViewDesc.create(this.parent,this.mark,!0,j),_e=this.children,et=this.size;_<et&&(_e=replaceNodes(_e,_,et,j)),g>0&&(_e=replaceNodes(_e,0,g,j));for(let tt=0;tt<_e.length;tt++)_e[tt].parent=$;return $.children=_e,$}}class NodeViewDesc extends ViewDesc{constructor(g,_,j,$,_e,et,tt,nt,rt){super(g,[],_e,et),this.node=_,this.outerDeco=j,this.innerDeco=$,this.nodeDOM=tt}static create(g,_,j,$,_e,et){let tt=_e.nodeViews[_.type.name],nt,rt=tt&&tt(_,_e,()=>{if(!nt)return et;if(nt.parent)return nt.parent.posBeforeChild(nt)},j,$),it=rt&&rt.dom,st=rt&&rt.contentDOM;if(_.isText){if(!it)it=document.createTextNode(_.text);else if(it.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else it||({dom:it,contentDOM:st}=DOMSerializer.renderSpec(document,_.type.spec.toDOM(_),null,_.attrs));!st&&!_.isText&&it.nodeName!="BR"&&(it.hasAttribute("contenteditable")||(it.contentEditable="false"),_.type.spec.draggable&&(it.draggable=!0));let ot=it;return it=applyOuterDeco(it,j,_),rt?nt=new CustomNodeViewDesc(g,_,j,$,it,st||null,ot,rt,_e,et+1):_.isText?new TextViewDesc(g,_,j,$,it,ot,_e):new NodeViewDesc(g,_,j,$,it,st||null,ot,_e,et+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let g={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(g.preserveWhitespace="full"),!this.contentDOM)g.getContent=()=>this.node.content;else if(!this.contentLost)g.contentElement=this.contentDOM;else{for(let _=this.children.length-1;_>=0;_--){let j=this.children[_];if(this.dom.contains(j.dom.parentNode)){g.contentElement=j.dom.parentNode;break}}g.contentElement||(g.getContent=()=>Fragment.empty)}return g}matchesNode(g,_,j){return this.dirty==NOT_DIRTY&&g.eq(this.node)&&sameOuterDeco(_,this.outerDeco)&&j.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(g,_){let j=this.node.inlineContent,$=_,_e=g.composing?this.localCompositionInfo(g,_):null,et=_e&&_e.pos>-1?_e:null,tt=_e&&_e.pos<0,nt=new ViewTreeUpdater(this,et&&et.node,g);iterDeco(this.node,this.innerDeco,(rt,it,st)=>{rt.spec.marks?nt.syncToMarks(rt.spec.marks,j,g):rt.type.side>=0&&!st&&nt.syncToMarks(it==this.node.childCount?Mark$1.none:this.node.child(it).marks,j,g),nt.placeWidget(rt,g,$)},(rt,it,st,ot)=>{nt.syncToMarks(rt.marks,j,g);let lt;nt.findNodeMatch(rt,it,st,ot)||tt&&g.state.selection.from>$&&g.state.selection.to<$+rt.nodeSize&&(lt=nt.findIndexWithChild(_e.node))>-1&&nt.updateNodeAt(rt,it,st,lt,g)||nt.updateNextNode(rt,it,st,g,ot,$)||nt.addNode(rt,it,st,g,$),$+=rt.nodeSize}),nt.syncToMarks([],j,g),this.node.isTextblock&&nt.addTextblockHacks(),nt.destroyRest(),(nt.changed||this.dirty==CONTENT_DIRTY)&&(et&&this.protectLocalComposition(g,et),renderDescs(this.contentDOM,this.children,g),ios&&iosHacks(this.dom))}localCompositionInfo(g,_){let{from:j,to:$}=g.state.selection;if(!(g.state.selection instanceof TextSelection)||j<_||$>_+this.node.content.size)return null;let _e=g.input.compositionNode;if(!_e||!this.dom.contains(_e.parentNode))return null;if(this.node.inlineContent){let et=_e.nodeValue,tt=findTextInFragment(this.node.content,et,j-_,$-_);return tt<0?null:{node:_e,pos:tt,text:et}}else return{node:_e,pos:-1,text:""}}protectLocalComposition(g,{node:_,pos:j,text:$}){if(this.getDesc(_))return;let _e=_;for(;_e.parentNode!=this.contentDOM;_e=_e.parentNode){for(;_e.previousSibling;)_e.parentNode.removeChild(_e.previousSibling);for(;_e.nextSibling;)_e.parentNode.removeChild(_e.nextSibling);_e.pmViewDesc&&(_e.pmViewDesc=void 0)}let et=new CompositionViewDesc(this,_e,_,$);g.input.compositionNodes.push(et),this.children=replaceNodes(this.children,j,j+$.length,g,et)}update(g,_,j,$){return this.dirty==NODE_DIRTY||!g.sameMarkup(this.node)?!1:(this.updateInner(g,_,j,$),!0)}updateInner(g,_,j,$){this.updateOuterDeco(_),this.node=g,this.innerDeco=j,this.contentDOM&&this.updateChildren($,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(g){if(sameOuterDeco(g,this.outerDeco))return;let _=this.nodeDOM.nodeType!=1,j=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,_),computeOuterDeco(g,this.node,_)),this.dom!=j&&(j.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=g}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(b,g,_,j,$){applyOuterDeco(j,g,b);let _e=new NodeViewDesc(void 0,b,g,_,j,j,j,$,0);return _e.contentDOM&&_e.updateChildren($,0),_e}class TextViewDesc extends NodeViewDesc{constructor(g,_,j,$,_e,et,tt){super(g,_,j,$,_e,null,et,tt,0)}parseRule(){let g=this.nodeDOM.parentNode;for(;g&&g!=this.dom&&!g.pmIsDeco;)g=g.parentNode;return{skip:g||!0}}update(g,_,j,$){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!g.sameMarkup(this.node)?!1:(this.updateOuterDeco(_),(this.dirty!=NOT_DIRTY||g.text!=this.node.text)&&g.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=g.text,$.trackWrites==this.nodeDOM&&($.trackWrites=null)),this.node=g,this.dirty=NOT_DIRTY,!0)}inParent(){let g=this.parent.contentDOM;for(let _=this.nodeDOM;_;_=_.parentNode)if(_==g)return!0;return!1}domFromPos(g){return{node:this.nodeDOM,offset:g}}localPosFromDOM(g,_,j){return g==this.nodeDOM?this.posAtStart+Math.min(_,this.node.text.length):super.localPosFromDOM(g,_,j)}ignoreMutation(g){return g.type!="characterData"&&g.type!="selection"}slice(g,_,j){let $=this.node.cut(g,_),_e=document.createTextNode($.text);return new TextViewDesc(this.parent,$,this.outerDeco,this.innerDeco,_e,_e,j)}markDirty(g,_){super.markDirty(g,_),this.dom!=this.nodeDOM&&(g==0||_==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(g){return this.node.text==g}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(g){return this.dirty==NOT_DIRTY&&this.dom.nodeName==g}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(g,_,j,$,_e,et,tt,nt,rt,it){super(g,_,j,$,_e,et,tt,rt,it),this.spec=nt}update(g,_,j,$){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update){let _e=this.spec.update(g,_,j);return _e&&this.updateInner(g,_,j,$),_e}else return!this.contentDOM&&!g.isLeaf?!1:super.update(g,_,j,$)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(g,_,j,$){this.spec.setSelection?this.spec.setSelection(g,_,j):super.setSelection(g,_,j,$)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(g){return this.spec.stopEvent?this.spec.stopEvent(g):!1}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}}function renderDescs(b,g,_){let j=b.firstChild,$=!1;for(let _e=0;_e<g.length;_e++){let et=g[_e],tt=et.dom;if(tt.parentNode==b){for(;tt!=j;)j=rm(j),$=!0;j=j.nextSibling}else $=!0,b.insertBefore(tt,j);if(et instanceof MarkViewDesc){let nt=j?j.previousSibling:b.lastChild;renderDescs(et.contentDOM,et.children,_),j=nt?nt.nextSibling:b.firstChild}}for(;j;)j=rm(j),$=!0;$&&_.trackWrites==b&&(_.trackWrites=null)}const OuterDecoLevel=function(b){b&&(this.nodeName=b)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(b,g,_){if(b.length==0)return noDeco;let j=_?noDeco[0]:new OuterDecoLevel,$=[j];for(let _e=0;_e<b.length;_e++){let et=b[_e].type.attrs;if(et){et.nodeName&&$.push(j=new OuterDecoLevel(et.nodeName));for(let tt in et){let nt=et[tt];nt!=null&&(_&&$.length==1&&$.push(j=new OuterDecoLevel(g.isInline?"span":"div")),tt=="class"?j.class=(j.class?j.class+" ":"")+nt:tt=="style"?j.style=(j.style?j.style+";":"")+nt:tt!="nodeName"&&(j[tt]=nt))}}}return $}function patchOuterDeco(b,g,_,j){if(_==noDeco&&j==noDeco)return g;let $=g;for(let _e=0;_e<j.length;_e++){let et=j[_e],tt=_[_e];if(_e){let nt;tt&&tt.nodeName==et.nodeName&&$!=b&&(nt=$.parentNode)&&nt.nodeName.toLowerCase()==et.nodeName||(nt=document.createElement(et.nodeName),nt.pmIsDeco=!0,nt.appendChild($),tt=noDeco[0]),$=nt}patchAttributes($,tt||noDeco[0],et)}return $}function patchAttributes(b,g,_){for(let j in g)j!="class"&&j!="style"&&j!="nodeName"&&!(j in _)&&b.removeAttribute(j);for(let j in _)j!="class"&&j!="style"&&j!="nodeName"&&_[j]!=g[j]&&b.setAttribute(j,_[j]);if(g.class!=_.class){let j=g.class?g.class.split(" ").filter(Boolean):[],$=_.class?_.class.split(" ").filter(Boolean):[];for(let _e=0;_e<j.length;_e++)$.indexOf(j[_e])==-1&&b.classList.remove(j[_e]);for(let _e=0;_e<$.length;_e++)j.indexOf($[_e])==-1&&b.classList.add($[_e]);b.classList.length==0&&b.removeAttribute("class")}if(g.style!=_.style){if(g.style){let j=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,$;for(;$=j.exec(g.style);)b.style.removeProperty($[1])}_.style&&(b.style.cssText+=_.style)}}function applyOuterDeco(b,g,_){return patchOuterDeco(b,b,noDeco,computeOuterDeco(g,_,b.nodeType!=1))}function sameOuterDeco(b,g){if(b.length!=g.length)return!1;for(let _=0;_<b.length;_++)if(!b[_].type.eq(g[_].type))return!1;return!0}function rm(b){let g=b.nextSibling;return b.parentNode.removeChild(b),g}class ViewTreeUpdater{constructor(g,_,j){this.lock=_,this.view=j,this.index=0,this.stack=[],this.changed=!1,this.top=g,this.preMatch=preMatch(g.node.content,g)}destroyBetween(g,_){if(g!=_){for(let j=g;j<_;j++)this.top.children[j].destroy();this.top.children.splice(g,_-g),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(g,_,j){let $=0,_e=this.stack.length>>1,et=Math.min(_e,g.length);for(;$<et&&($==_e-1?this.top:this.stack[$+1<<1]).matchesMark(g[$])&&g[$].type.spec.spanning!==!1;)$++;for(;$<_e;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),_e--;for(;_e<g.length;){this.stack.push(this.top,this.index+1);let tt=-1;for(let nt=this.index;nt<Math.min(this.index+3,this.top.children.length);nt++){let rt=this.top.children[nt];if(rt.matchesMark(g[_e])&&!this.isLocked(rt.dom)){tt=nt;break}}if(tt>-1)tt>this.index&&(this.changed=!0,this.destroyBetween(this.index,tt)),this.top=this.top.children[this.index];else{let nt=MarkViewDesc.create(this.top,g[_e],_,j);this.top.children.splice(this.index,0,nt),this.top=nt,this.changed=!0}this.index=0,_e++}}findNodeMatch(g,_,j,$){let _e=-1,et;if($>=this.preMatch.index&&(et=this.preMatch.matches[$-this.preMatch.index]).parent==this.top&&et.matchesNode(g,_,j))_e=this.top.children.indexOf(et,this.index);else for(let tt=this.index,nt=Math.min(this.top.children.length,tt+5);tt<nt;tt++){let rt=this.top.children[tt];if(rt.matchesNode(g,_,j)&&!this.preMatch.matched.has(rt)){_e=tt;break}}return _e<0?!1:(this.destroyBetween(this.index,_e),this.index++,!0)}updateNodeAt(g,_,j,$,_e){let et=this.top.children[$];return et.dirty==NODE_DIRTY&&et.dom==et.contentDOM&&(et.dirty=CONTENT_DIRTY),et.update(g,_,j,_e)?(this.destroyBetween(this.index,$),this.index++,!0):!1}findIndexWithChild(g){for(;;){let _=g.parentNode;if(!_)return-1;if(_==this.top.contentDOM){let j=g.pmViewDesc;if(j){for(let $=this.index;$<this.top.children.length;$++)if(this.top.children[$]==j)return $}return-1}g=_}}updateNextNode(g,_,j,$,_e,et){for(let tt=this.index;tt<this.top.children.length;tt++){let nt=this.top.children[tt];if(nt instanceof NodeViewDesc){let rt=this.preMatch.matched.get(nt);if(rt!=null&&rt!=_e)return!1;let it=nt.dom,st,ot=this.isLocked(it)&&!(g.isText&&nt.node&&nt.node.isText&&nt.nodeDOM.nodeValue==g.text&&nt.dirty!=NODE_DIRTY&&sameOuterDeco(_,nt.outerDeco));if(!ot&&nt.update(g,_,j,$))return this.destroyBetween(this.index,tt),nt.dom!=it&&(this.changed=!0),this.index++,!0;if(!ot&&(st=this.recreateWrapper(nt,g,_,j,$,et)))return this.destroyBetween(this.index,tt),this.top.children[this.index]=st,st.contentDOM&&(st.dirty=CONTENT_DIRTY,st.updateChildren($,et+1),st.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(g,_,j,$,_e,et){if(g.dirty||_.isAtom||!g.children.length||!g.node.content.eq(_.content)||!sameOuterDeco(j,g.outerDeco)||!$.eq(g.innerDeco))return null;let tt=NodeViewDesc.create(this.top,_,j,$,_e,et);if(tt.contentDOM){tt.children=g.children,g.children=[];for(let nt of tt.children)nt.parent=tt}return g.destroy(),tt}addNode(g,_,j,$,_e){let et=NodeViewDesc.create(this.top,g,_,j,$,_e);et.contentDOM&&et.updateChildren($,_e+1),this.top.children.splice(this.index++,0,et),this.changed=!0}placeWidget(g,_,j){let $=this.index<this.top.children.length?this.top.children[this.index]:null;if($&&$.matchesWidget(g)&&(g==$.widget||!$.widget.type.toDOM.parentNode))this.index++;else{let _e=new WidgetViewDesc(this.top,g,_,j);this.top.children.splice(this.index++,0,_e),this.changed=!0}}addTextblockHacks(){let g=this.top.children[this.index-1],_=this.top;for(;g instanceof MarkViewDesc;)_=g,g=_.children[_.children.length-1];(!g||!(g instanceof TextViewDesc)||/\n$/.test(g.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(g.node.text))&&((safari||chrome)&&g&&g.dom.contentEditable=="false"&&this.addHackNode("IMG",_),this.addHackNode("BR",this.top))}addHackNode(g,_){if(_==this.top&&this.index<_.children.length&&_.children[this.index].matchesHack(g))this.index++;else{let j=document.createElement(g);g=="IMG"&&(j.className="ProseMirror-separator",j.alt=""),g=="BR"&&(j.className="ProseMirror-trailingBreak");let $=new TrailingHackViewDesc(this.top,[],j,null);_!=this.top?_.children.push($):_.children.splice(this.index++,0,$),this.changed=!0}}isLocked(g){return this.lock&&(g==this.lock||g.nodeType==1&&g.contains(this.lock.parentNode))}}function preMatch(b,g){let _=g,j=_.children.length,$=b.childCount,_e=new Map,et=[];e:for(;$>0;){let tt;for(;;)if(j){let rt=_.children[j-1];if(rt instanceof MarkViewDesc)_=rt,j=rt.children.length;else{tt=rt,j--;break}}else{if(_==g)break e;j=_.parent.children.indexOf(_),_=_.parent}let nt=tt.node;if(nt){if(nt!=b.child($-1))break;--$,_e.set(tt,$),et.push(tt)}}return{index:$,matched:_e,matches:et.reverse()}}function compareSide(b,g){return b.type.side-g.type.side}function iterDeco(b,g,_,j){let $=g.locals(b),_e=0;if($.length==0){for(let rt=0;rt<b.childCount;rt++){let it=b.child(rt);j(it,$,g.forChild(_e,it),rt),_e+=it.nodeSize}return}let et=0,tt=[],nt=null;for(let rt=0;;){let it,st;for(;et<$.length&&$[et].to==_e;){let dt=$[et++];dt.widget&&(it?(st||(st=[it])).push(dt):it=dt)}if(it)if(st){st.sort(compareSide);for(let dt=0;dt<st.length;dt++)_(st[dt],rt,!!nt)}else _(it,rt,!!nt);let ot,lt;if(nt)lt=-1,ot=nt,nt=null;else if(rt<b.childCount)lt=rt,ot=b.child(rt++);else break;for(let dt=0;dt<tt.length;dt++)tt[dt].to<=_e&&tt.splice(dt--,1);for(;et<$.length&&$[et].from<=_e&&$[et].to>_e;)tt.push($[et++]);let at=_e+ot.nodeSize;if(ot.isText){let dt=at;et<$.length&&$[et].from<dt&&(dt=$[et].from);for(let ct=0;ct<tt.length;ct++)tt[ct].to<dt&&(dt=tt[ct].to);dt<at&&(nt=ot.cut(dt-_e),ot=ot.cut(0,dt-_e),at=dt,lt=-1)}else for(;et<$.length&&$[et].to<at;)et++;let ut=ot.isInline&&!ot.isLeaf?tt.filter(dt=>!dt.inline):tt.slice();j(ot,ut,g.forChild(_e,ot),lt),_e=at}}function iosHacks(b){if(b.nodeName=="UL"||b.nodeName=="OL"){let g=b.style.cssText;b.style.cssText=g+"; list-style: square !important",window.getComputedStyle(b).listStyle,b.style.cssText=g}}function findTextInFragment(b,g,_,j){for(let $=0,_e=0;$<b.childCount&&_e<=j;){let et=b.child($++),tt=_e;if(_e+=et.nodeSize,!et.isText)continue;let nt=et.text;for(;$<b.childCount;){let rt=b.child($++);if(_e+=rt.nodeSize,!rt.isText)break;nt+=rt.text}if(_e>=_){if(_e>=j&&nt.slice(j-g.length-tt,j-tt)==g)return j-g.length;let rt=tt<j?nt.lastIndexOf(g,j-tt-1):-1;if(rt>=0&&rt+g.length+tt>=_)return tt+rt;if(_==j&&nt.length>=j+g.length-tt&&nt.slice(j-tt,j-tt+g.length)==g)return j}}return-1}function replaceNodes(b,g,_,j,$){let _e=[];for(let et=0,tt=0;et<b.length;et++){let nt=b[et],rt=tt,it=tt+=nt.size;rt>=_||it<=g?_e.push(nt):(rt<g&&_e.push(nt.slice(0,g-rt,j)),$&&(_e.push($),$=void 0),it>_&&_e.push(nt.slice(_-rt,nt.size,j)))}return _e}function selectionFromDOM(b,g=null){let _=b.domSelectionRange(),j=b.state.doc;if(!_.focusNode)return null;let $=b.docView.nearestDesc(_.focusNode),_e=$&&$.size==0,et=b.docView.posFromDOM(_.focusNode,_.focusOffset,1);if(et<0)return null;let tt=j.resolve(et),nt,rt;if(selectionCollapsed(_)){for(nt=et;$&&!$.node;)$=$.parent;let st=$.node;if($&&st.isAtom&&NodeSelection.isSelectable(st)&&$.parent&&!(st.isInline&&isOnEdge(_.focusNode,_.focusOffset,$.dom))){let ot=$.posBefore;rt=new NodeSelection(et==ot?tt:j.resolve(ot))}}else{if(_ instanceof b.dom.ownerDocument.defaultView.Selection&&_.rangeCount>1){let st=et,ot=et;for(let lt=0;lt<_.rangeCount;lt++){let at=_.getRangeAt(lt);st=Math.min(st,b.docView.posFromDOM(at.startContainer,at.startOffset,1)),ot=Math.max(ot,b.docView.posFromDOM(at.endContainer,at.endOffset,-1))}if(st<0)return null;[nt,et]=ot==b.state.selection.anchor?[ot,st]:[st,ot],tt=j.resolve(et)}else nt=b.docView.posFromDOM(_.anchorNode,_.anchorOffset,1);if(nt<0)return null}let it=j.resolve(nt);if(!rt){let st=g=="pointer"||b.state.selection.head<tt.pos&&!_e?1:-1;rt=selectionBetween(b,it,tt,st)}return rt}function editorOwnsSelection(b){return b.editable?b.hasFocus():hasSelection(b)&&document.activeElement&&document.activeElement.contains(b.dom)}function selectionToDOM(b,g=!1){let _=b.state.selection;if(syncNodeSelection(b,_),!!editorOwnsSelection(b)){if(!g&&b.input.mouseDown&&b.input.mouseDown.allowDefault&&chrome){let j=b.domSelectionRange(),$=b.domObserver.currentSelection;if(j.anchorNode&&$.anchorNode&&isEquivalentPosition(j.anchorNode,j.anchorOffset,$.anchorNode,$.anchorOffset)){b.input.mouseDown.delayedSelectionSync=!0,b.domObserver.setCurSelection();return}}if(b.domObserver.disconnectSelection(),b.cursorWrapper)selectCursorWrapper(b);else{let{anchor:j,head:$}=_,_e,et;brokenSelectBetweenUneditable&&!(_ instanceof TextSelection)&&(_.$from.parent.inlineContent||(_e=temporarilyEditableNear(b,_.from)),!_.empty&&!_.$from.parent.inlineContent&&(et=temporarilyEditableNear(b,_.to))),b.docView.setSelection(j,$,b.root,g),brokenSelectBetweenUneditable&&(_e&&resetEditable(_e),et&&resetEditable(et)),_.visible?b.dom.classList.remove("ProseMirror-hideselection"):(b.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(b))}b.domObserver.setCurSelection(),b.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(b,g){let{node:_,offset:j}=b.docView.domFromPos(g,0),$=j<_.childNodes.length?_.childNodes[j]:null,_e=j?_.childNodes[j-1]:null;if(safari&&$&&$.contentEditable=="false")return setEditable($);if((!$||$.contentEditable=="false")&&(!_e||_e.contentEditable=="false")){if($)return setEditable($);if(_e)return setEditable(_e)}}function setEditable(b){return b.contentEditable="true",safari&&b.draggable&&(b.draggable=!1,b.wasDraggable=!0),b}function resetEditable(b){b.contentEditable="false",b.wasDraggable&&(b.draggable=!0,b.wasDraggable=null)}function removeClassOnSelectionChange(b){let g=b.dom.ownerDocument;g.removeEventListener("selectionchange",b.input.hideSelectionGuard);let _=b.domSelectionRange(),j=_.anchorNode,$=_.anchorOffset;g.addEventListener("selectionchange",b.input.hideSelectionGuard=()=>{(_.anchorNode!=j||_.anchorOffset!=$)&&(g.removeEventListener("selectionchange",b.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(b)||b.state.selection.visible)&&b.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(b){let g=b.domSelection(),_=document.createRange();if(!g)return;let j=b.cursorWrapper.dom,$=j.nodeName=="IMG";$?_.setStart(j.parentNode,domIndex(j)+1):_.setStart(j,0),_.collapse(!0),g.removeAllRanges(),g.addRange(_),!$&&!b.state.selection.visible&&ie$1&&ie_version<=11&&(j.disabled=!0,j.disabled=!1)}function syncNodeSelection(b,g){if(g instanceof NodeSelection){let _=b.docView.descAt(g.from);_!=b.lastSelectedViewDesc&&(clearNodeSelection(b),_&&_.selectNode(),b.lastSelectedViewDesc=_)}else clearNodeSelection(b)}function clearNodeSelection(b){b.lastSelectedViewDesc&&(b.lastSelectedViewDesc.parent&&b.lastSelectedViewDesc.deselectNode(),b.lastSelectedViewDesc=void 0)}function selectionBetween(b,g,_,j){return b.someProp("createSelectionBetween",$=>$(b,g,_))||TextSelection.between(g,_,j)}function hasFocusAndSelection(b){return b.editable&&!b.hasFocus()?!1:hasSelection(b)}function hasSelection(b){let g=b.domSelectionRange();if(!g.anchorNode)return!1;try{return b.dom.contains(g.anchorNode.nodeType==3?g.anchorNode.parentNode:g.anchorNode)&&(b.editable||b.dom.contains(g.focusNode.nodeType==3?g.focusNode.parentNode:g.focusNode))}catch{return!1}}function anchorInRightPlace(b){let g=b.docView.domFromPos(b.state.selection.anchor,0),_=b.domSelectionRange();return isEquivalentPosition(g.node,g.offset,_.anchorNode,_.anchorOffset)}function moveSelectionBlock(b,g){let{$anchor:_,$head:j}=b.selection,$=g>0?_.max(j):_.min(j),_e=$.parent.inlineContent?$.depth?b.doc.resolve(g>0?$.after():$.before()):null:$;return _e&&Selection.findFrom(_e,g)}function apply(b,g){return b.dispatch(b.state.tr.setSelection(g).scrollIntoView()),!0}function selectHorizontally(b,g,_){let j=b.state.selection;if(j instanceof TextSelection)if(_.indexOf("s")>-1){let{$head:$}=j,_e=$.textOffset?null:g<0?$.nodeBefore:$.nodeAfter;if(!_e||_e.isText||!_e.isLeaf)return!1;let et=b.state.doc.resolve($.pos+_e.nodeSize*(g<0?-1:1));return apply(b,new TextSelection(j.$anchor,et))}else if(j.empty){if(b.endOfTextblock(g>0?"forward":"backward")){let $=moveSelectionBlock(b.state,g);return $&&$ instanceof NodeSelection?apply(b,$):!1}else if(!(mac$2&&_.indexOf("m")>-1)){let $=j.$head,_e=$.textOffset?null:g<0?$.nodeBefore:$.nodeAfter,et;if(!_e||_e.isText)return!1;let tt=g<0?$.pos-_e.nodeSize:$.pos;return _e.isAtom||(et=b.docView.descAt(tt))&&!et.contentDOM?NodeSelection.isSelectable(_e)?apply(b,new NodeSelection(g<0?b.state.doc.resolve($.pos-_e.nodeSize):$)):webkit?apply(b,new TextSelection(b.state.doc.resolve(g<0?tt:tt+_e.nodeSize))):!1:!1}}else return!1;else{if(j instanceof NodeSelection&&j.node.isInline)return apply(b,new TextSelection(g>0?j.$to:j.$from));{let $=moveSelectionBlock(b.state,g);return $?apply(b,$):!1}}}function nodeLen(b){return b.nodeType==3?b.nodeValue.length:b.childNodes.length}function isIgnorable(b,g){let _=b.pmViewDesc;return _&&_.size==0&&(g<0||b.nextSibling||b.nodeName!="BR")}function skipIgnoredNodes(b,g){return g<0?skipIgnoredNodesBefore(b):skipIgnoredNodesAfter(b)}function skipIgnoredNodesBefore(b){let g=b.domSelectionRange(),_=g.focusNode,j=g.focusOffset;if(!_)return;let $,_e,et=!1;for(gecko&&_.nodeType==1&&j<nodeLen(_)&&isIgnorable(_.childNodes[j],-1)&&(et=!0);;)if(j>0){if(_.nodeType!=1)break;{let tt=_.childNodes[j-1];if(isIgnorable(tt,-1))$=_,_e=--j;else if(tt.nodeType==3)_=tt,j=_.nodeValue.length;else break}}else{if(isBlockNode(_))break;{let tt=_.previousSibling;for(;tt&&isIgnorable(tt,-1);)$=_.parentNode,_e=domIndex(tt),tt=tt.previousSibling;if(tt)_=tt,j=nodeLen(_);else{if(_=_.parentNode,_==b.dom)break;j=0}}}et?setSelFocus(b,_,j):$&&setSelFocus(b,$,_e)}function skipIgnoredNodesAfter(b){let g=b.domSelectionRange(),_=g.focusNode,j=g.focusOffset;if(!_)return;let $=nodeLen(_),_e,et;for(;;)if(j<$){if(_.nodeType!=1)break;let tt=_.childNodes[j];if(isIgnorable(tt,1))_e=_,et=++j;else break}else{if(isBlockNode(_))break;{let tt=_.nextSibling;for(;tt&&isIgnorable(tt,1);)_e=tt.parentNode,et=domIndex(tt)+1,tt=tt.nextSibling;if(tt)_=tt,j=0,$=nodeLen(_);else{if(_=_.parentNode,_==b.dom)break;j=$=0}}}_e&&setSelFocus(b,_e,et)}function isBlockNode(b){let g=b.pmViewDesc;return g&&g.node&&g.node.isBlock}function textNodeAfter(b,g){for(;b&&g==b.childNodes.length&&!hasBlockDesc(b);)g=domIndex(b)+1,b=b.parentNode;for(;b&&g<b.childNodes.length;){let _=b.childNodes[g];if(_.nodeType==3)return _;if(_.nodeType==1&&_.contentEditable=="false")break;b=_,g=0}}function textNodeBefore(b,g){for(;b&&!g&&!hasBlockDesc(b);)g=domIndex(b),b=b.parentNode;for(;b&&g;){let _=b.childNodes[g-1];if(_.nodeType==3)return _;if(_.nodeType==1&&_.contentEditable=="false")break;b=_,g=b.childNodes.length}}function setSelFocus(b,g,_){if(g.nodeType!=3){let _e,et;(et=textNodeAfter(g,_))?(g=et,_=0):(_e=textNodeBefore(g,_))&&(g=_e,_=_e.nodeValue.length)}let j=b.domSelection();if(!j)return;if(selectionCollapsed(j)){let _e=document.createRange();_e.setEnd(g,_),_e.setStart(g,_),j.removeAllRanges(),j.addRange(_e)}else j.extend&&j.extend(g,_);b.domObserver.setCurSelection();let{state:$}=b;setTimeout(()=>{b.state==$&&selectionToDOM(b)},50)}function findDirection(b,g){let _=b.state.doc.resolve(g);if(!(chrome||windows)&&_.parent.inlineContent){let $=b.coordsAtPos(g);if(g>_.start()){let _e=b.coordsAtPos(g-1),et=(_e.top+_e.bottom)/2;if(et>$.top&&et<$.bottom&&Math.abs(_e.left-$.left)>1)return _e.left<$.left?"ltr":"rtl"}if(g<_.end()){let _e=b.coordsAtPos(g+1),et=(_e.top+_e.bottom)/2;if(et>$.top&&et<$.bottom&&Math.abs(_e.left-$.left)>1)return _e.left>$.left?"ltr":"rtl"}}return getComputedStyle(b.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(b,g,_){let j=b.state.selection;if(j instanceof TextSelection&&!j.empty||_.indexOf("s")>-1||mac$2&&_.indexOf("m")>-1)return!1;let{$from:$,$to:_e}=j;if(!$.parent.inlineContent||b.endOfTextblock(g<0?"up":"down")){let et=moveSelectionBlock(b.state,g);if(et&&et instanceof NodeSelection)return apply(b,et)}if(!$.parent.inlineContent){let et=g<0?$:_e,tt=j instanceof AllSelection?Selection.near(et,g):Selection.findFrom(et,g);return tt?apply(b,tt):!1}return!1}function stopNativeHorizontalDelete(b,g){if(!(b.state.selection instanceof TextSelection))return!0;let{$head:_,$anchor:j,empty:$}=b.state.selection;if(!_.sameParent(j))return!0;if(!$)return!1;if(b.endOfTextblock(g>0?"forward":"backward"))return!0;let _e=!_.textOffset&&(g<0?_.nodeBefore:_.nodeAfter);if(_e&&!_e.isText){let et=b.state.tr;return g<0?et.delete(_.pos-_e.nodeSize,_.pos):et.delete(_.pos,_.pos+_e.nodeSize),b.dispatch(et),!0}return!1}function switchEditable(b,g,_){b.domObserver.stop(),g.contentEditable=_,b.domObserver.start()}function safariDownArrowBug(b){if(!safari||b.state.selection.$head.parentOffset>0)return!1;let{focusNode:g,focusOffset:_}=b.domSelectionRange();if(g&&g.nodeType==1&&_==0&&g.firstChild&&g.firstChild.contentEditable=="false"){let j=g.firstChild;switchEditable(b,j,"true"),setTimeout(()=>switchEditable(b,j,"false"),20)}return!1}function getMods(b){let g="";return b.ctrlKey&&(g+="c"),b.metaKey&&(g+="m"),b.altKey&&(g+="a"),b.shiftKey&&(g+="s"),g}function captureKeyDown(b,g){let _=g.keyCode,j=getMods(g);if(_==8||mac$2&&_==72&&j=="c")return stopNativeHorizontalDelete(b,-1)||skipIgnoredNodes(b,-1);if(_==46&&!g.shiftKey||mac$2&&_==68&&j=="c")return stopNativeHorizontalDelete(b,1)||skipIgnoredNodes(b,1);if(_==13||_==27)return!0;if(_==37||mac$2&&_==66&&j=="c"){let $=_==37?findDirection(b,b.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(b,$,j)||skipIgnoredNodes(b,$)}else if(_==39||mac$2&&_==70&&j=="c"){let $=_==39?findDirection(b,b.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(b,$,j)||skipIgnoredNodes(b,$)}else{if(_==38||mac$2&&_==80&&j=="c")return selectVertically(b,-1,j)||skipIgnoredNodes(b,-1);if(_==40||mac$2&&_==78&&j=="c")return safariDownArrowBug(b)||selectVertically(b,1,j)||skipIgnoredNodes(b,1);if(j==(mac$2?"m":"c")&&(_==66||_==73||_==89||_==90))return!0}return!1}function serializeForClipboard(b,g){b.someProp("transformCopied",lt=>{g=lt(g,b)});let _=[],{content:j,openStart:$,openEnd:_e}=g;for(;$>1&&_e>1&&j.childCount==1&&j.firstChild.childCount==1;){$--,_e--;let lt=j.firstChild;_.push(lt.type.name,lt.attrs!=lt.type.defaultAttrs?lt.attrs:null),j=lt.content}let et=b.someProp("clipboardSerializer")||DOMSerializer.fromSchema(b.state.schema),tt=detachedDoc(),nt=tt.createElement("div");nt.appendChild(et.serializeFragment(j,{document:tt}));let rt=nt.firstChild,it,st=0;for(;rt&&rt.nodeType==1&&(it=wrapMap[rt.nodeName.toLowerCase()]);){for(let lt=it.length-1;lt>=0;lt--){let at=tt.createElement(it[lt]);for(;nt.firstChild;)at.appendChild(nt.firstChild);nt.appendChild(at),st++}rt=nt.firstChild}rt&&rt.nodeType==1&&rt.setAttribute("data-pm-slice",`${$} ${_e}${st?` -${st}`:""} ${JSON.stringify(_)}`);let ot=b.someProp("clipboardTextSerializer",lt=>lt(g,b))||g.content.textBetween(0,g.content.size,`

`);return{dom:nt,text:ot,slice:g}}function parseFromClipboard(b,g,_,j,$){let _e=$.parent.type.spec.code,et,tt;if(!_&&!g)return null;let nt=g&&(j||_e||!_);if(nt){if(b.someProp("transformPastedText",ot=>{g=ot(g,_e||j,b)}),_e)return g?new Slice(Fragment.from(b.state.schema.text(g.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let st=b.someProp("clipboardTextParser",ot=>ot(g,$,j,b));if(st)tt=st;else{let ot=$.marks(),{schema:lt}=b.state,at=DOMSerializer.fromSchema(lt);et=document.createElement("div"),g.split(/(?:\r\n?|\n)+/).forEach(ut=>{let dt=et.appendChild(document.createElement("p"));ut&&dt.appendChild(at.serializeNode(lt.text(ut,ot)))})}}else b.someProp("transformPastedHTML",st=>{_=st(_,b)}),et=readHTML(_),webkit&&restoreReplacedSpaces(et);let rt=et&&et.querySelector("[data-pm-slice]"),it=rt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(rt.getAttribute("data-pm-slice")||"");if(it&&it[3])for(let st=+it[3];st>0;st--){let ot=et.firstChild;for(;ot&&ot.nodeType!=1;)ot=ot.nextSibling;if(!ot)break;et=ot}if(tt||(tt=(b.someProp("clipboardParser")||b.someProp("domParser")||DOMParser.fromSchema(b.state.schema)).parseSlice(et,{preserveWhitespace:!!(nt||it),context:$,ruleFromNode(ot){return ot.nodeName=="BR"&&!ot.nextSibling&&ot.parentNode&&!inlineParents.test(ot.parentNode.nodeName)?{ignore:!0}:null}})),it)tt=addContext(closeSlice(tt,+it[1],+it[2]),it[4]);else if(tt=Slice.maxOpen(normalizeSiblings(tt.content,$),!0),tt.openStart||tt.openEnd){let st=0,ot=0;for(let lt=tt.content.firstChild;st<tt.openStart&&!lt.type.spec.isolating;st++,lt=lt.firstChild);for(let lt=tt.content.lastChild;ot<tt.openEnd&&!lt.type.spec.isolating;ot++,lt=lt.lastChild);tt=closeSlice(tt,st,ot)}return b.someProp("transformPasted",st=>{tt=st(tt,b)}),tt}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(b,g){if(b.childCount<2)return b;for(let _=g.depth;_>=0;_--){let $=g.node(_).contentMatchAt(g.index(_)),_e,et=[];if(b.forEach(tt=>{if(!et)return;let nt=$.findWrapping(tt.type),rt;if(!nt)return et=null;if(rt=et.length&&_e.length&&addToSibling(nt,_e,tt,et[et.length-1],0))et[et.length-1]=rt;else{et.length&&(et[et.length-1]=closeRight(et[et.length-1],_e.length));let it=withWrappers(tt,nt);et.push(it),$=$.matchType(it.type),_e=nt}}),et)return Fragment.from(et)}return b}function withWrappers(b,g,_=0){for(let j=g.length-1;j>=_;j--)b=g[j].create(null,Fragment.from(b));return b}function addToSibling(b,g,_,j,$){if($<b.length&&$<g.length&&b[$]==g[$]){let _e=addToSibling(b,g,_,j.lastChild,$+1);if(_e)return j.copy(j.content.replaceChild(j.childCount-1,_e));if(j.contentMatchAt(j.childCount).matchType($==b.length-1?_.type:b[$+1]))return j.copy(j.content.append(Fragment.from(withWrappers(_,b,$+1))))}}function closeRight(b,g){if(g==0)return b;let _=b.content.replaceChild(b.childCount-1,closeRight(b.lastChild,g-1)),j=b.contentMatchAt(b.childCount).fillBefore(Fragment.empty,!0);return b.copy(_.append(j))}function closeRange(b,g,_,j,$,_e){let et=g<0?b.firstChild:b.lastChild,tt=et.content;return b.childCount>1&&(_e=0),$<j-1&&(tt=closeRange(tt,g,_,j,$+1,_e)),$>=_&&(tt=g<0?et.contentMatchAt(0).fillBefore(tt,_e<=$).append(tt):tt.append(et.contentMatchAt(et.childCount).fillBefore(Fragment.empty,!0))),b.replaceChild(g<0?0:b.childCount-1,et.copy(tt))}function closeSlice(b,g,_){return g<b.openStart&&(b=new Slice(closeRange(b.content,-1,g,b.openStart,0,b.openEnd),g,b.openEnd)),_<b.openEnd&&(b=new Slice(closeRange(b.content,1,_,b.openEnd,0,0),b.openStart,_)),b}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}function maybeWrapTrusted(b){let g=window.trustedTypes;return g?g.createPolicy("detachedDocument",{createHTML:_=>_}).createHTML(b):b}function readHTML(b){let g=/^(\s*<meta [^>]*>)*/.exec(b);g&&(b=b.slice(g[0].length));let _=detachedDoc().createElement("div"),j=/<([a-z][^>\s]+)/i.exec(b),$;if(($=j&&wrapMap[j[1].toLowerCase()])&&(b=$.map(_e=>"<"+_e+">").join("")+b+$.map(_e=>"</"+_e+">").reverse().join("")),_.innerHTML=maybeWrapTrusted(b),$)for(let _e=0;_e<$.length;_e++)_=_.querySelector($[_e])||_;return _}function restoreReplacedSpaces(b){let g=b.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let _=0;_<g.length;_++){let j=g[_];j.childNodes.length==1&&j.textContent==" "&&j.parentNode&&j.parentNode.replaceChild(b.ownerDocument.createTextNode(" "),j)}}function addContext(b,g){if(!b.size)return b;let _=b.content.firstChild.type.schema,j;try{j=JSON.parse(g)}catch{return b}let{content:$,openStart:_e,openEnd:et}=b;for(let tt=j.length-2;tt>=0;tt-=2){let nt=_.nodes[j[tt]];if(!nt||nt.hasRequiredAttrs())break;$=Fragment.from(nt.create(j[tt+1],$)),_e++,et++}return new Slice($,_e,et)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(b){for(let g in handlers){let _=handlers[g];b.dom.addEventListener(g,b.input.eventHandlers[g]=j=>{eventBelongsToView(b,j)&&!runCustomHandler(b,j)&&(b.editable||!(j.type in editHandlers))&&_(b,j)},passiveHandlers[g]?{passive:!0}:void 0)}safari&&b.dom.addEventListener("input",()=>null),ensureListeners(b)}function setSelectionOrigin(b,g){b.input.lastSelectionOrigin=g,b.input.lastSelectionTime=Date.now()}function destroyInput(b){b.domObserver.stop();for(let g in b.input.eventHandlers)b.dom.removeEventListener(g,b.input.eventHandlers[g]);clearTimeout(b.input.composingTimeout),clearTimeout(b.input.lastIOSEnterFallbackTimeout)}function ensureListeners(b){b.someProp("handleDOMEvents",g=>{for(let _ in g)b.input.eventHandlers[_]||b.dom.addEventListener(_,b.input.eventHandlers[_]=j=>runCustomHandler(b,j))})}function runCustomHandler(b,g){return b.someProp("handleDOMEvents",_=>{let j=_[g.type];return j?j(b,g)||g.defaultPrevented:!1})}function eventBelongsToView(b,g){if(!g.bubbles)return!0;if(g.defaultPrevented)return!1;for(let _=g.target;_!=b.dom;_=_.parentNode)if(!_||_.nodeType==11||_.pmViewDesc&&_.pmViewDesc.stopEvent(g))return!1;return!0}function dispatchEvent(b,g){!runCustomHandler(b,g)&&handlers[g.type]&&(b.editable||!(g.type in editHandlers))&&handlers[g.type](b,g)}editHandlers.keydown=(b,g)=>{let _=g;if(b.input.shiftKey=_.keyCode==16||_.shiftKey,!inOrNearComposition(b,_)&&(b.input.lastKeyCode=_.keyCode,b.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&_.keyCode==13)))if(b.domObserver.selectionChanged(b.domSelectionRange())?b.domObserver.flush():_.keyCode!=229&&b.domObserver.forceFlush(),ios&&_.keyCode==13&&!_.ctrlKey&&!_.altKey&&!_.metaKey){let j=Date.now();b.input.lastIOSEnter=j,b.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{b.input.lastIOSEnter==j&&(b.someProp("handleKeyDown",$=>$(b,keyEvent(13,"Enter"))),b.input.lastIOSEnter=0)},200)}else b.someProp("handleKeyDown",j=>j(b,_))||captureKeyDown(b,_)?_.preventDefault():setSelectionOrigin(b,"key")};editHandlers.keyup=(b,g)=>{g.keyCode==16&&(b.input.shiftKey=!1)};editHandlers.keypress=(b,g)=>{let _=g;if(inOrNearComposition(b,_)||!_.charCode||_.ctrlKey&&!_.altKey||mac$2&&_.metaKey)return;if(b.someProp("handleKeyPress",$=>$(b,_))){_.preventDefault();return}let j=b.state.selection;if(!(j instanceof TextSelection)||!j.$from.sameParent(j.$to)){let $=String.fromCharCode(_.charCode);!/[\r\n]/.test($)&&!b.someProp("handleTextInput",_e=>_e(b,j.$from.pos,j.$to.pos,$))&&b.dispatch(b.state.tr.insertText($).scrollIntoView()),_.preventDefault()}};function eventCoords(b){return{left:b.clientX,top:b.clientY}}function isNear(b,g){let _=g.x-b.clientX,j=g.y-b.clientY;return _*_+j*j<100}function runHandlerOnContext(b,g,_,j,$){if(j==-1)return!1;let _e=b.state.doc.resolve(j);for(let et=_e.depth+1;et>0;et--)if(b.someProp(g,tt=>et>_e.depth?tt(b,_,_e.nodeAfter,_e.before(et),$,!0):tt(b,_,_e.node(et),_e.before(et),$,!1)))return!0;return!1}function updateSelection(b,g,_){if(b.focused||b.focus(),b.state.selection.eq(g))return;let j=b.state.tr.setSelection(g);j.setMeta("pointer",!0),b.dispatch(j)}function selectClickedLeaf(b,g){if(g==-1)return!1;let _=b.state.doc.resolve(g),j=_.nodeAfter;return j&&j.isAtom&&NodeSelection.isSelectable(j)?(updateSelection(b,new NodeSelection(_)),!0):!1}function selectClickedNode(b,g){if(g==-1)return!1;let _=b.state.selection,j,$;_ instanceof NodeSelection&&(j=_.node);let _e=b.state.doc.resolve(g);for(let et=_e.depth+1;et>0;et--){let tt=et>_e.depth?_e.nodeAfter:_e.node(et);if(NodeSelection.isSelectable(tt)){j&&_.$from.depth>0&&et>=_.$from.depth&&_e.before(_.$from.depth+1)==_.$from.pos?$=_e.before(_.$from.depth):$=_e.before(et);break}}return $!=null?(updateSelection(b,NodeSelection.create(b.state.doc,$)),!0):!1}function handleSingleClick(b,g,_,j,$){return runHandlerOnContext(b,"handleClickOn",g,_,j)||b.someProp("handleClick",_e=>_e(b,g,j))||($?selectClickedNode(b,_):selectClickedLeaf(b,_))}function handleDoubleClick(b,g,_,j){return runHandlerOnContext(b,"handleDoubleClickOn",g,_,j)||b.someProp("handleDoubleClick",$=>$(b,g,j))}function handleTripleClick(b,g,_,j){return runHandlerOnContext(b,"handleTripleClickOn",g,_,j)||b.someProp("handleTripleClick",$=>$(b,g,j))||defaultTripleClick(b,_,j)}function defaultTripleClick(b,g,_){if(_.button!=0)return!1;let j=b.state.doc;if(g==-1)return j.inlineContent?(updateSelection(b,TextSelection.create(j,0,j.content.size)),!0):!1;let $=j.resolve(g);for(let _e=$.depth+1;_e>0;_e--){let et=_e>$.depth?$.nodeAfter:$.node(_e),tt=$.before(_e);if(et.inlineContent)updateSelection(b,TextSelection.create(j,tt+1,tt+1+et.content.size));else if(NodeSelection.isSelectable(et))updateSelection(b,NodeSelection.create(j,tt));else continue;return!0}}function forceDOMFlush(b){return endComposition(b)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(b,g)=>{let _=g;b.input.shiftKey=_.shiftKey;let j=forceDOMFlush(b),$=Date.now(),_e="singleClick";$-b.input.lastClick.time<500&&isNear(_,b.input.lastClick)&&!_[selectNodeModifier]&&(b.input.lastClick.type=="singleClick"?_e="doubleClick":b.input.lastClick.type=="doubleClick"&&(_e="tripleClick")),b.input.lastClick={time:$,x:_.clientX,y:_.clientY,type:_e};let et=b.posAtCoords(eventCoords(_));et&&(_e=="singleClick"?(b.input.mouseDown&&b.input.mouseDown.done(),b.input.mouseDown=new MouseDown(b,et,_,!!j)):(_e=="doubleClick"?handleDoubleClick:handleTripleClick)(b,et.pos,et.inside,_)?_.preventDefault():setSelectionOrigin(b,"pointer"))};class MouseDown{constructor(g,_,j,$){this.view=g,this.pos=_,this.event=j,this.flushed=$,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=g.state.doc,this.selectNode=!!j[selectNodeModifier],this.allowDefault=j.shiftKey;let _e,et;if(_.inside>-1)_e=g.state.doc.nodeAt(_.inside),et=_.inside;else{let it=g.state.doc.resolve(_.pos);_e=it.parent,et=it.depth?it.before():0}const tt=$?null:j.target,nt=tt?g.docView.nearestDesc(tt,!0):null;this.target=nt&&nt.dom.nodeType==1?nt.dom:null;let{selection:rt}=g.state;(j.button==0&&_e.type.spec.draggable&&_e.type.spec.selectable!==!1||rt instanceof NodeSelection&&rt.from<=et&&rt.to>et)&&(this.mightDrag={node:_e,pos:et,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),g.root.addEventListener("mouseup",this.up=this.up.bind(this)),g.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(g,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(g){if(this.done(),!this.view.dom.contains(g.target))return;let _=this.pos;this.view.state.doc!=this.startDoc&&(_=this.view.posAtCoords(eventCoords(g))),this.updateAllowDefault(g),this.allowDefault||!_?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,_.pos,_.inside,g,this.selectNode)?g.preventDefault():g.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(_.pos-this.view.state.selection.from),Math.abs(_.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(_.pos))),g.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(g){this.updateAllowDefault(g),setSelectionOrigin(this.view,"pointer"),g.buttons==0&&this.done()}updateAllowDefault(g){!this.allowDefault&&(Math.abs(this.event.x-g.clientX)>4||Math.abs(this.event.y-g.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=b=>{b.input.lastTouch=Date.now(),forceDOMFlush(b),setSelectionOrigin(b,"pointer")};handlers.touchmove=b=>{b.input.lastTouch=Date.now(),setSelectionOrigin(b,"pointer")};handlers.contextmenu=b=>forceDOMFlush(b);function inOrNearComposition(b,g){return b.composing?!0:safari&&Math.abs(g.timeStamp-b.input.compositionEndedAt)<500?(b.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=b=>{if(!b.composing){b.domObserver.flush();let{state:g}=b,_=g.selection.$to;if(g.selection instanceof TextSelection&&(g.storedMarks||!_.textOffset&&_.parentOffset&&_.nodeBefore.marks.some(j=>j.type.spec.inclusive===!1)))b.markCursor=b.state.storedMarks||_.marks(),endComposition(b,!0),b.markCursor=null;else if(endComposition(b,!g.selection.empty),gecko&&g.selection.empty&&_.parentOffset&&!_.textOffset&&_.nodeBefore.marks.length){let j=b.domSelectionRange();for(let $=j.focusNode,_e=j.focusOffset;$&&$.nodeType==1&&_e!=0;){let et=_e<0?$.lastChild:$.childNodes[_e-1];if(!et)break;if(et.nodeType==3){let tt=b.domSelection();tt&&tt.collapse(et,et.nodeValue.length);break}else $=et,_e=-1}}b.input.composing=!0}scheduleComposeEnd(b,timeoutComposition)};editHandlers.compositionend=(b,g)=>{b.composing&&(b.input.composing=!1,b.input.compositionEndedAt=g.timeStamp,b.input.compositionPendingChanges=b.domObserver.pendingRecords().length?b.input.compositionID:0,b.input.compositionNode=null,b.input.compositionPendingChanges&&Promise.resolve().then(()=>b.domObserver.flush()),b.input.compositionID++,scheduleComposeEnd(b,20))};function scheduleComposeEnd(b,g){clearTimeout(b.input.composingTimeout),g>-1&&(b.input.composingTimeout=setTimeout(()=>endComposition(b),g))}function clearComposition(b){for(b.composing&&(b.input.composing=!1,b.input.compositionEndedAt=timestampFromCustomEvent());b.input.compositionNodes.length>0;)b.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(b){let g=b.domSelectionRange();if(!g.focusNode)return null;let _=textNodeBefore$1(g.focusNode,g.focusOffset),j=textNodeAfter$1(g.focusNode,g.focusOffset);if(_&&j&&_!=j){let $=j.pmViewDesc,_e=b.domObserver.lastChangedTextNode;if(_==_e||j==_e)return _e;if(!$||!$.isText(j.nodeValue))return j;if(b.input.compositionNode==j){let et=_.pmViewDesc;if(!(!et||!et.isText(_.nodeValue)))return j}}return _||j}function timestampFromCustomEvent(){let b=document.createEvent("Event");return b.initEvent("event",!0,!0),b.timeStamp}function endComposition(b,g=!1){if(!(android&&b.domObserver.flushingSoon>=0)){if(b.domObserver.forceFlush(),clearComposition(b),g||b.docView&&b.docView.dirty){let _=selectionFromDOM(b);return _&&!_.eq(b.state.selection)?b.dispatch(b.state.tr.setSelection(_)):(b.markCursor||g)&&!b.state.selection.empty?b.dispatch(b.state.tr.deleteSelection()):b.updateState(b.state),!0}return!1}}function captureCopy(b,g){if(!b.dom.parentNode)return;let _=b.dom.parentNode.appendChild(document.createElement("div"));_.appendChild(g),_.style.cssText="position: fixed; left: -10000px; top: 10px";let j=getSelection(),$=document.createRange();$.selectNodeContents(g),b.dom.blur(),j.removeAllRanges(),j.addRange($),setTimeout(()=>{_.parentNode&&_.parentNode.removeChild(_),b.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(b,g)=>{let _=g,j=b.state.selection,$=_.type=="cut";if(j.empty)return;let _e=brokenClipboardAPI?null:_.clipboardData,et=j.content(),{dom:tt,text:nt}=serializeForClipboard(b,et);_e?(_.preventDefault(),_e.clearData(),_e.setData("text/html",tt.innerHTML),_e.setData("text/plain",nt)):captureCopy(b,tt),$&&b.dispatch(b.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(b){return b.openStart==0&&b.openEnd==0&&b.content.childCount==1?b.content.firstChild:null}function capturePaste(b,g){if(!b.dom.parentNode)return;let _=b.input.shiftKey||b.state.selection.$from.parent.type.spec.code,j=b.dom.parentNode.appendChild(document.createElement(_?"textarea":"div"));_||(j.contentEditable="true"),j.style.cssText="position: fixed; left: -10000px; top: 10px",j.focus();let $=b.input.shiftKey&&b.input.lastKeyCode!=45;setTimeout(()=>{b.focus(),j.parentNode&&j.parentNode.removeChild(j),_?doPaste(b,j.value,null,$,g):doPaste(b,j.textContent,j.innerHTML,$,g)},50)}function doPaste(b,g,_,j,$){let _e=parseFromClipboard(b,g,_,j,b.state.selection.$from);if(b.someProp("handlePaste",nt=>nt(b,$,_e||Slice.empty)))return!0;if(!_e)return!1;let et=sliceSingleNode(_e),tt=et?b.state.tr.replaceSelectionWith(et,j):b.state.tr.replaceSelection(_e);return b.dispatch(tt.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(b){let g=b.getData("text/plain")||b.getData("Text");if(g)return g;let _=b.getData("text/uri-list");return _?_.replace(/\r?\n/g," "):""}editHandlers.paste=(b,g)=>{let _=g;if(b.composing&&!android)return;let j=brokenClipboardAPI?null:_.clipboardData,$=b.input.shiftKey&&b.input.lastKeyCode!=45;j&&doPaste(b,getText$1(j),j.getData("text/html"),$,_)?_.preventDefault():capturePaste(b,_)};class Dragging{constructor(g,_,j){this.slice=g,this.move=_,this.node=j}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers.dragstart=(b,g)=>{let _=g,j=b.input.mouseDown;if(j&&j.done(),!_.dataTransfer)return;let $=b.state.selection,_e=$.empty?null:b.posAtCoords(eventCoords(_)),et;if(!(_e&&_e.pos>=$.from&&_e.pos<=($ instanceof NodeSelection?$.to-1:$.to))){if(j&&j.mightDrag)et=NodeSelection.create(b.state.doc,j.mightDrag.pos);else if(_.target&&_.target.nodeType==1){let st=b.docView.nearestDesc(_.target,!0);st&&st.node.type.spec.draggable&&st!=b.docView&&(et=NodeSelection.create(b.state.doc,st.posBefore))}}let tt=(et||b.state.selection).content(),{dom:nt,text:rt,slice:it}=serializeForClipboard(b,tt);(!_.dataTransfer.files.length||!chrome||chrome_version>120)&&_.dataTransfer.clearData(),_.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",nt.innerHTML),_.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||_.dataTransfer.setData("text/plain",rt),b.dragging=new Dragging(it,!_[dragCopyModifier],et)};handlers.dragend=b=>{let g=b.dragging;window.setTimeout(()=>{b.dragging==g&&(b.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(b,g)=>g.preventDefault();editHandlers.drop=(b,g)=>{let _=g,j=b.dragging;if(b.dragging=null,!_.dataTransfer)return;let $=b.posAtCoords(eventCoords(_));if(!$)return;let _e=b.state.doc.resolve($.pos),et=j&&j.slice;et?b.someProp("transformPasted",at=>{et=at(et,b)}):et=parseFromClipboard(b,getText$1(_.dataTransfer),brokenClipboardAPI?null:_.dataTransfer.getData("text/html"),!1,_e);let tt=!!(j&&!_[dragCopyModifier]);if(b.someProp("handleDrop",at=>at(b,_,et||Slice.empty,tt))){_.preventDefault();return}if(!et)return;_.preventDefault();let nt=et?dropPoint(b.state.doc,_e.pos,et):_e.pos;nt==null&&(nt=_e.pos);let rt=b.state.tr;if(tt){let{node:at}=j;at?at.replace(rt):rt.deleteSelection()}let it=rt.mapping.map(nt),st=et.openStart==0&&et.openEnd==0&&et.content.childCount==1,ot=rt.doc;if(st?rt.replaceRangeWith(it,it,et.content.firstChild):rt.replaceRange(it,it,et),rt.doc.eq(ot))return;let lt=rt.doc.resolve(it);if(st&&NodeSelection.isSelectable(et.content.firstChild)&&lt.nodeAfter&&lt.nodeAfter.sameMarkup(et.content.firstChild))rt.setSelection(new NodeSelection(lt));else{let at=rt.mapping.map(nt);rt.mapping.maps[rt.mapping.maps.length-1].forEach((ut,dt,ct,ht)=>at=ht),rt.setSelection(selectionBetween(b,lt,rt.doc.resolve(at)))}b.focus(),b.dispatch(rt.setMeta("uiEvent","drop"))};handlers.focus=b=>{b.input.lastFocus=Date.now(),b.focused||(b.domObserver.stop(),b.dom.classList.add("ProseMirror-focused"),b.domObserver.start(),b.focused=!0,setTimeout(()=>{b.docView&&b.hasFocus()&&!b.domObserver.currentSelection.eq(b.domSelectionRange())&&selectionToDOM(b)},20))};handlers.blur=(b,g)=>{let _=g;b.focused&&(b.domObserver.stop(),b.dom.classList.remove("ProseMirror-focused"),b.domObserver.start(),_.relatedTarget&&b.dom.contains(_.relatedTarget)&&b.domObserver.currentSelection.clear(),b.focused=!1)};handlers.beforeinput=(b,g)=>{if(chrome&&android&&g.inputType=="deleteContentBackward"){b.domObserver.flushSoon();let{domChangeCount:j}=b.input;setTimeout(()=>{if(b.input.domChangeCount!=j||(b.dom.blur(),b.focus(),b.someProp("handleKeyDown",_e=>_e(b,keyEvent(8,"Backspace")))))return;let{$cursor:$}=b.state.selection;$&&$.pos>0&&b.dispatch(b.state.tr.delete($.pos-1,$.pos).scrollIntoView())},50)}};for(let b in editHandlers)handlers[b]=editHandlers[b];function compareObjs(b,g){if(b==g)return!0;for(let _ in b)if(b[_]!==g[_])return!1;for(let _ in g)if(!(_ in b))return!1;return!0}class WidgetType{constructor(g,_){this.toDOM=g,this.spec=_||noSpec,this.side=this.spec.side||0}map(g,_,j,$){let{pos:_e,deleted:et}=g.mapResult(_.from+$,this.side<0?-1:1);return et?null:new Decoration(_e-j,_e-j,this)}valid(){return!0}eq(g){return this==g||g instanceof WidgetType&&(this.spec.key&&this.spec.key==g.spec.key||this.toDOM==g.toDOM&&compareObjs(this.spec,g.spec))}destroy(g){this.spec.destroy&&this.spec.destroy(g)}}class InlineType{constructor(g,_){this.attrs=g,this.spec=_||noSpec}map(g,_,j,$){let _e=g.map(_.from+$,this.spec.inclusiveStart?-1:1)-j,et=g.map(_.to+$,this.spec.inclusiveEnd?1:-1)-j;return _e>=et?null:new Decoration(_e,et,this)}valid(g,_){return _.from<_.to}eq(g){return this==g||g instanceof InlineType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}static is(g){return g.type instanceof InlineType}destroy(){}}class NodeType{constructor(g,_){this.attrs=g,this.spec=_||noSpec}map(g,_,j,$){let _e=g.mapResult(_.from+$,1);if(_e.deleted)return null;let et=g.mapResult(_.to+$,-1);return et.deleted||et.pos<=_e.pos?null:new Decoration(_e.pos-j,et.pos-j,this)}valid(g,_){let{index:j,offset:$}=g.content.findIndex(_.from),_e;return $==_.from&&!(_e=g.child(j)).isText&&$+_e.nodeSize==_.to}eq(g){return this==g||g instanceof NodeType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}destroy(){}}class Decoration{constructor(g,_,j){this.from=g,this.to=_,this.type=j}copy(g,_){return new Decoration(g,_,this.type)}eq(g,_=0){return this.type.eq(g.type)&&this.from+_==g.from&&this.to+_==g.to}map(g,_,j){return this.type.map(g,this,_,j)}static widget(g,_,j){return new Decoration(g,g,new WidgetType(_,j))}static inline(g,_,j,$){return new Decoration(g,_,new InlineType(j,$))}static node(g,_,j,$){return new Decoration(g,_,new NodeType(j,$))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(g,_){this.local=g.length?g:none,this.children=_.length?_:none}static create(g,_){return _.length?buildTree(_,g,0,noSpec):empty}find(g,_,j){let $=[];return this.findInner(g??0,_??1e9,$,0,j),$}findInner(g,_,j,$,_e){for(let et=0;et<this.local.length;et++){let tt=this.local[et];tt.from<=_&&tt.to>=g&&(!_e||_e(tt.spec))&&j.push(tt.copy(tt.from+$,tt.to+$))}for(let et=0;et<this.children.length;et+=3)if(this.children[et]<_&&this.children[et+1]>g){let tt=this.children[et]+1;this.children[et+2].findInner(g-tt,_-tt,j,$+tt,_e)}}map(g,_,j){return this==empty||g.maps.length==0?this:this.mapInner(g,_,0,0,j||noSpec)}mapInner(g,_,j,$,_e){let et;for(let tt=0;tt<this.local.length;tt++){let nt=this.local[tt].map(g,j,$);nt&&nt.type.valid(_,nt)?(et||(et=[])).push(nt):_e.onRemove&&_e.onRemove(this.local[tt].spec)}return this.children.length?mapChildren(this.children,et||[],g,_,j,$,_e):et?new DecorationSet(et.sort(byPos),none):empty}add(g,_){return _.length?this==empty?DecorationSet.create(g,_):this.addInner(g,_,0):this}addInner(g,_,j){let $,_e=0;g.forEach((tt,nt)=>{let rt=nt+j,it;if(it=takeSpansForNode(_,tt,rt)){for($||($=this.children.slice());_e<$.length&&$[_e]<nt;)_e+=3;$[_e]==nt?$[_e+2]=$[_e+2].addInner(tt,it,rt+1):$.splice(_e,0,nt,nt+tt.nodeSize,buildTree(it,tt,rt+1,noSpec)),_e+=3}});let et=moveSpans(_e?withoutNulls(_):_,-j);for(let tt=0;tt<et.length;tt++)et[tt].type.valid(g,et[tt])||et.splice(tt--,1);return new DecorationSet(et.length?this.local.concat(et).sort(byPos):this.local,$||this.children)}remove(g){return g.length==0||this==empty?this:this.removeInner(g,0)}removeInner(g,_){let j=this.children,$=this.local;for(let _e=0;_e<j.length;_e+=3){let et,tt=j[_e]+_,nt=j[_e+1]+_;for(let it=0,st;it<g.length;it++)(st=g[it])&&st.from>tt&&st.to<nt&&(g[it]=null,(et||(et=[])).push(st));if(!et)continue;j==this.children&&(j=this.children.slice());let rt=j[_e+2].removeInner(et,tt+1);rt!=empty?j[_e+2]=rt:(j.splice(_e,3),_e-=3)}if($.length){for(let _e=0,et;_e<g.length;_e++)if(et=g[_e])for(let tt=0;tt<$.length;tt++)$[tt].eq(et,_)&&($==this.local&&($=this.local.slice()),$.splice(tt--,1))}return j==this.children&&$==this.local?this:$.length||j.length?new DecorationSet($,j):empty}forChild(g,_){if(this==empty)return this;if(_.isLeaf)return DecorationSet.empty;let j,$;for(let tt=0;tt<this.children.length;tt+=3)if(this.children[tt]>=g){this.children[tt]==g&&(j=this.children[tt+2]);break}let _e=g+1,et=_e+_.content.size;for(let tt=0;tt<this.local.length;tt++){let nt=this.local[tt];if(nt.from<et&&nt.to>_e&&nt.type instanceof InlineType){let rt=Math.max(_e,nt.from)-_e,it=Math.min(et,nt.to)-_e;rt<it&&($||($=[])).push(nt.copy(rt,it))}}if($){let tt=new DecorationSet($.sort(byPos),none);return j?new DecorationGroup([tt,j]):tt}return j||empty}eq(g){if(this==g)return!0;if(!(g instanceof DecorationSet)||this.local.length!=g.local.length||this.children.length!=g.children.length)return!1;for(let _=0;_<this.local.length;_++)if(!this.local[_].eq(g.local[_]))return!1;for(let _=0;_<this.children.length;_+=3)if(this.children[_]!=g.children[_]||this.children[_+1]!=g.children[_+1]||!this.children[_+2].eq(g.children[_+2]))return!1;return!0}locals(g){return removeOverlap(this.localsInner(g))}localsInner(g){if(this==empty)return none;if(g.inlineContent||!this.local.some(InlineType.is))return this.local;let _=[];for(let j=0;j<this.local.length;j++)this.local[j].type instanceof InlineType||_.push(this.local[j]);return _}forEachSet(g){g(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(g){this.members=g}map(g,_){const j=this.members.map($=>$.map(g,_,noSpec));return DecorationGroup.from(j)}forChild(g,_){if(_.isLeaf)return DecorationSet.empty;let j=[];for(let $=0;$<this.members.length;$++){let _e=this.members[$].forChild(g,_);_e!=empty&&(_e instanceof DecorationGroup?j=j.concat(_e.members):j.push(_e))}return DecorationGroup.from(j)}eq(g){if(!(g instanceof DecorationGroup)||g.members.length!=this.members.length)return!1;for(let _=0;_<this.members.length;_++)if(!this.members[_].eq(g.members[_]))return!1;return!0}locals(g){let _,j=!0;for(let $=0;$<this.members.length;$++){let _e=this.members[$].localsInner(g);if(_e.length)if(!_)_=_e;else{j&&(_=_.slice(),j=!1);for(let et=0;et<_e.length;et++)_.push(_e[et])}}return _?removeOverlap(j?_:_.sort(byPos)):none}static from(g){switch(g.length){case 0:return empty;case 1:return g[0];default:return new DecorationGroup(g.every(_=>_ instanceof DecorationSet)?g:g.reduce((_,j)=>_.concat(j instanceof DecorationSet?j:j.members),[]))}}forEachSet(g){for(let _=0;_<this.members.length;_++)this.members[_].forEachSet(g)}}function mapChildren(b,g,_,j,$,_e,et){let tt=b.slice();for(let rt=0,it=_e;rt<_.maps.length;rt++){let st=0;_.maps[rt].forEach((ot,lt,at,ut)=>{let dt=ut-at-(lt-ot);for(let ct=0;ct<tt.length;ct+=3){let ht=tt[ct+1];if(ht<0||ot>ht+it-st)continue;let pt=tt[ct]+it-st;lt>=pt?tt[ct+1]=ot<=pt?-2:-1:ot>=it&&dt&&(tt[ct]+=dt,tt[ct+1]+=dt)}st+=dt}),it=_.maps[rt].map(it,-1)}let nt=!1;for(let rt=0;rt<tt.length;rt+=3)if(tt[rt+1]<0){if(tt[rt+1]==-2){nt=!0,tt[rt+1]=-1;continue}let it=_.map(b[rt]+_e),st=it-$;if(st<0||st>=j.content.size){nt=!0;continue}let ot=_.map(b[rt+1]+_e,-1),lt=ot-$,{index:at,offset:ut}=j.content.findIndex(st),dt=j.maybeChild(at);if(dt&&ut==st&&ut+dt.nodeSize==lt){let ct=tt[rt+2].mapInner(_,dt,it+1,b[rt]+_e+1,et);ct!=empty?(tt[rt]=st,tt[rt+1]=lt,tt[rt+2]=ct):(tt[rt+1]=-2,nt=!0)}else nt=!0}if(nt){let rt=mapAndGatherRemainingDecorations(tt,b,g,_,$,_e,et),it=buildTree(rt,j,0,et);g=it.local;for(let st=0;st<tt.length;st+=3)tt[st+1]<0&&(tt.splice(st,3),st-=3);for(let st=0,ot=0;st<it.children.length;st+=3){let lt=it.children[st];for(;ot<tt.length&&tt[ot]<lt;)ot+=3;tt.splice(ot,0,it.children[st],it.children[st+1],it.children[st+2])}}return new DecorationSet(g.sort(byPos),tt)}function moveSpans(b,g){if(!g||!b.length)return b;let _=[];for(let j=0;j<b.length;j++){let $=b[j];_.push(new Decoration($.from+g,$.to+g,$.type))}return _}function mapAndGatherRemainingDecorations(b,g,_,j,$,_e,et){function tt(nt,rt){for(let it=0;it<nt.local.length;it++){let st=nt.local[it].map(j,$,rt);st?_.push(st):et.onRemove&&et.onRemove(nt.local[it].spec)}for(let it=0;it<nt.children.length;it+=3)tt(nt.children[it+2],nt.children[it]+rt+1)}for(let nt=0;nt<b.length;nt+=3)b[nt+1]==-1&&tt(b[nt+2],g[nt]+_e+1);return _}function takeSpansForNode(b,g,_){if(g.isLeaf)return null;let j=_+g.nodeSize,$=null;for(let _e=0,et;_e<b.length;_e++)(et=b[_e])&&et.from>_&&et.to<j&&(($||($=[])).push(et),b[_e]=null);return $}function withoutNulls(b){let g=[];for(let _=0;_<b.length;_++)b[_]!=null&&g.push(b[_]);return g}function buildTree(b,g,_,j){let $=[],_e=!1;g.forEach((tt,nt)=>{let rt=takeSpansForNode(b,tt,nt+_);if(rt){_e=!0;let it=buildTree(rt,tt,_+nt+1,j);it!=empty&&$.push(nt,nt+tt.nodeSize,it)}});let et=moveSpans(_e?withoutNulls(b):b,-_).sort(byPos);for(let tt=0;tt<et.length;tt++)et[tt].type.valid(g,et[tt])||(j.onRemove&&j.onRemove(et[tt].spec),et.splice(tt--,1));return et.length||$.length?new DecorationSet(et,$):empty}function byPos(b,g){return b.from-g.from||b.to-g.to}function removeOverlap(b){let g=b;for(let _=0;_<g.length-1;_++){let j=g[_];if(j.from!=j.to)for(let $=_+1;$<g.length;$++){let _e=g[$];if(_e.from==j.from){_e.to!=j.to&&(g==b&&(g=b.slice()),g[$]=_e.copy(_e.from,j.to),insertAhead(g,$+1,_e.copy(j.to,_e.to)));continue}else{_e.from<j.to&&(g==b&&(g=b.slice()),g[_]=j.copy(j.from,_e.from),insertAhead(g,$,j.copy(_e.from,j.to)));break}}}return g}function insertAhead(b,g,_){for(;g<b.length&&byPos(_,b[g])>0;)g++;b.splice(g,0,_)}function viewDecorations(b){let g=[];return b.someProp("decorations",_=>{let j=_(b.state);j&&j!=empty&&g.push(j)}),b.cursorWrapper&&g.push(DecorationSet.create(b.state.doc,[b.cursorWrapper.deco])),DecorationGroup.from(g)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(g){this.anchorNode=g.anchorNode,this.anchorOffset=g.anchorOffset,this.focusNode=g.focusNode,this.focusOffset=g.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(g){return g.anchorNode==this.anchorNode&&g.anchorOffset==this.anchorOffset&&g.focusNode==this.focusNode&&g.focusOffset==this.focusOffset}}class DOMObserver{constructor(g,_){this.view=g,this.handleDOMChange=_,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(j=>{for(let $=0;$<j.length;$++)this.queue.push(j[$]);ie$1&&ie_version<=11&&j.some($=>$.type=="childList"&&$.removedNodes.length||$.type=="characterData"&&$.oldValue.length>$.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=j=>{this.queue.push({target:j.target,type:"characterData",oldValue:j.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let g=this.observer.takeRecords();if(g.length){for(let _=0;_<g.length;_++)this.queue.push(g[_]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let g=this.view.domSelectionRange();if(g.focusNode&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(g){if(!g.focusNode)return!0;let _=new Set,j;for(let _e=g.focusNode;_e;_e=parentNode(_e))_.add(_e);for(let _e=g.anchorNode;_e;_e=parentNode(_e))if(_.has(_e)){j=_e;break}let $=j&&this.view.docView.nearestDesc(j);if($&&$.ignoreMutation({type:"selection",target:j.nodeType==3?j.parentNode:j}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let g of this.observer.takeRecords())this.queue.push(g);return this.queue}selectionChanged(g){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(g)&&hasFocusAndSelection(this.view)&&!this.ignoreSelectionChange(g)}flush(){let{view:g}=this;if(!g.docView||this.flushingSoon>-1)return;let _=this.pendingRecords();_.length&&(this.queue=[]);let j=g.domSelectionRange(),$=this.selectionChanged(j),_e=-1,et=-1,tt=!1,nt=[];if(g.editable)for(let it=0;it<_.length;it++){let st=this.registerMutation(_[it],nt);st&&(_e=_e<0?st.from:Math.min(st.from,_e),et=et<0?st.to:Math.max(st.to,et),st.typeOver&&(tt=!0))}if(gecko&&nt.length){let it=nt.filter(st=>st.nodeName=="BR");if(it.length==2){let[st,ot]=it;st.parentNode&&st.parentNode.parentNode==ot.parentNode?ot.remove():st.remove()}else{let{focusNode:st}=this.currentSelection;for(let ot of it){let lt=ot.parentNode;lt&&lt.nodeName=="LI"&&(!st||blockParent(g,st)!=lt)&&ot.remove()}}}let rt=null;_e<0&&$&&g.input.lastFocus>Date.now()-200&&Math.max(g.input.lastTouch,g.input.lastClick.time)<Date.now()-300&&selectionCollapsed(j)&&(rt=selectionFromDOM(g))&&rt.eq(Selection.near(g.state.doc.resolve(0),1))?(g.input.lastFocus=0,selectionToDOM(g),this.currentSelection.set(j),g.scrollToSelection()):(_e>-1||$)&&(_e>-1&&(g.docView.markDirty(_e,et),checkCSS(g)),this.handleDOMChange(_e,et,tt,nt),g.docView&&g.docView.dirty?g.updateState(g.state):this.currentSelection.eq(j)||selectionToDOM(g),this.currentSelection.set(j))}registerMutation(g,_){if(_.indexOf(g.target)>-1)return null;let j=this.view.docView.nearestDesc(g.target);if(g.type=="attributes"&&(j==this.view.docView||g.attributeName=="contenteditable"||g.attributeName=="style"&&!g.oldValue&&!g.target.getAttribute("style"))||!j||j.ignoreMutation(g))return null;if(g.type=="childList"){for(let it=0;it<g.addedNodes.length;it++){let st=g.addedNodes[it];_.push(st),st.nodeType==3&&(this.lastChangedTextNode=st)}if(j.contentDOM&&j.contentDOM!=j.dom&&!j.contentDOM.contains(g.target))return{from:j.posBefore,to:j.posAfter};let $=g.previousSibling,_e=g.nextSibling;if(ie$1&&ie_version<=11&&g.addedNodes.length)for(let it=0;it<g.addedNodes.length;it++){let{previousSibling:st,nextSibling:ot}=g.addedNodes[it];(!st||Array.prototype.indexOf.call(g.addedNodes,st)<0)&&($=st),(!ot||Array.prototype.indexOf.call(g.addedNodes,ot)<0)&&(_e=ot)}let et=$&&$.parentNode==g.target?domIndex($)+1:0,tt=j.localPosFromDOM(g.target,et,-1),nt=_e&&_e.parentNode==g.target?domIndex(_e):g.target.childNodes.length,rt=j.localPosFromDOM(g.target,nt,1);return{from:tt,to:rt}}else return g.type=="attributes"?{from:j.posAtStart-j.border,to:j.posAtEnd+j.border}:(this.lastChangedTextNode=g.target,{from:j.posAtStart,to:j.posAtEnd,typeOver:g.target.nodeValue==g.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(b){if(!cssChecked.has(b)&&(cssChecked.set(b,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(b.dom).whiteSpace)!==-1)){if(b.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(b,g){let _=g.startContainer,j=g.startOffset,$=g.endContainer,_e=g.endOffset,et=b.domAtPos(b.state.selection.anchor);return isEquivalentPosition(et.node,et.offset,$,_e)&&([_,j,$,_e]=[$,_e,_,j]),{anchorNode:_,anchorOffset:j,focusNode:$,focusOffset:_e}}function safariShadowSelectionRange(b,g){if(g.getComposedRanges){let $=g.getComposedRanges(b.root)[0];if($)return rangeToSelectionRange(b,$)}let _;function j($){$.preventDefault(),$.stopImmediatePropagation(),_=$.getTargetRanges()[0]}return b.dom.addEventListener("beforeinput",j,!0),document.execCommand("indent"),b.dom.removeEventListener("beforeinput",j,!0),_?rangeToSelectionRange(b,_):null}function blockParent(b,g){for(let _=g.parentNode;_&&_!=b.dom;_=_.parentNode){let j=b.docView.nearestDesc(_,!0);if(j&&j.node.isBlock)return _}return null}function parseBetween(b,g,_){let{node:j,fromOffset:$,toOffset:_e,from:et,to:tt}=b.docView.parseRange(g,_),nt=b.domSelectionRange(),rt,it=nt.anchorNode;if(it&&b.dom.contains(it.nodeType==1?it:it.parentNode)&&(rt=[{node:it,offset:nt.anchorOffset}],selectionCollapsed(nt)||rt.push({node:nt.focusNode,offset:nt.focusOffset})),chrome&&b.input.lastKeyCode===8)for(let dt=_e;dt>$;dt--){let ct=j.childNodes[dt-1],ht=ct.pmViewDesc;if(ct.nodeName=="BR"&&!ht){_e=dt;break}if(!ht||ht.size)break}let st=b.state.doc,ot=b.someProp("domParser")||DOMParser.fromSchema(b.state.schema),lt=st.resolve(et),at=null,ut=ot.parse(j,{topNode:lt.parent,topMatch:lt.parent.contentMatchAt(lt.index()),topOpen:!0,from:$,to:_e,preserveWhitespace:lt.parent.type.whitespace=="pre"?"full":!0,findPositions:rt,ruleFromNode,context:lt});if(rt&&rt[0].pos!=null){let dt=rt[0].pos,ct=rt[1]&&rt[1].pos;ct==null&&(ct=dt),at={anchor:dt+et,head:ct+et}}return{doc:ut,sel:at,from:et,to:tt}}function ruleFromNode(b){let g=b.pmViewDesc;if(g)return g.parseRule();if(b.nodeName=="BR"&&b.parentNode){if(safari&&/^(ul|ol)$/i.test(b.parentNode.nodeName)){let _=document.createElement("div");return _.appendChild(document.createElement("li")),{skip:_}}else if(b.parentNode.lastChild==b||safari&&/^(tr|table)$/i.test(b.parentNode.nodeName))return{ignore:!0}}else if(b.nodeName=="IMG"&&b.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(b,g,_,j,$){let _e=b.input.compositionPendingChanges||(b.composing?b.input.compositionID:0);if(b.input.compositionPendingChanges=0,g<0){let St=b.input.lastSelectionTime>Date.now()-50?b.input.lastSelectionOrigin:null,Tt=selectionFromDOM(b,St);if(Tt&&!b.state.selection.eq(Tt)){if(chrome&&android&&b.input.lastKeyCode===13&&Date.now()-100<b.input.lastKeyCodeTime&&b.someProp("handleKeyDown",At=>At(b,keyEvent(13,"Enter"))))return;let bt=b.state.tr.setSelection(Tt);St=="pointer"?bt.setMeta("pointer",!0):St=="key"&&bt.scrollIntoView(),_e&&bt.setMeta("composition",_e),b.dispatch(bt)}return}let et=b.state.doc.resolve(g),tt=et.sharedDepth(_);g=et.before(tt+1),_=b.state.doc.resolve(_).after(tt+1);let nt=b.state.selection,rt=parseBetween(b,g,_),it=b.state.doc,st=it.slice(rt.from,rt.to),ot,lt;b.input.lastKeyCode===8&&Date.now()-100<b.input.lastKeyCodeTime?(ot=b.state.selection.to,lt="end"):(ot=b.state.selection.from,lt="start"),b.input.lastKeyCode=null;let at=findDiff(st.content,rt.doc.content,rt.from,ot,lt);if(at&&b.input.domChangeCount++,(ios&&b.input.lastIOSEnter>Date.now()-225||android)&&$.some(St=>St.nodeType==1&&!isInline.test(St.nodeName))&&(!at||at.endA>=at.endB)&&b.someProp("handleKeyDown",St=>St(b,keyEvent(13,"Enter")))){b.input.lastIOSEnter=0;return}if(!at)if(j&&nt instanceof TextSelection&&!nt.empty&&nt.$head.sameParent(nt.$anchor)&&!b.composing&&!(rt.sel&&rt.sel.anchor!=rt.sel.head))at={start:nt.from,endA:nt.to,endB:nt.to};else{if(rt.sel){let St=resolveSelection(b,b.state.doc,rt.sel);if(St&&!St.eq(b.state.selection)){let Tt=b.state.tr.setSelection(St);_e&&Tt.setMeta("composition",_e),b.dispatch(Tt)}}return}b.state.selection.from<b.state.selection.to&&at.start==at.endB&&b.state.selection instanceof TextSelection&&(at.start>b.state.selection.from&&at.start<=b.state.selection.from+2&&b.state.selection.from>=rt.from?at.start=b.state.selection.from:at.endA<b.state.selection.to&&at.endA>=b.state.selection.to-2&&b.state.selection.to<=rt.to&&(at.endB+=b.state.selection.to-at.endA,at.endA=b.state.selection.to)),ie$1&&ie_version<=11&&at.endB==at.start+1&&at.endA==at.start&&at.start>rt.from&&rt.doc.textBetween(at.start-rt.from-1,at.start-rt.from+1)=="  "&&(at.start--,at.endA--,at.endB--);let ut=rt.doc.resolveNoCache(at.start-rt.from),dt=rt.doc.resolveNoCache(at.endB-rt.from),ct=it.resolve(at.start),ht=ut.sameParent(dt)&&ut.parent.inlineContent&&ct.end()>=at.endA,pt;if((ios&&b.input.lastIOSEnter>Date.now()-225&&(!ht||$.some(St=>St.nodeName=="DIV"||St.nodeName=="P"))||!ht&&ut.pos<rt.doc.content.size&&!ut.sameParent(dt)&&(pt=Selection.findFrom(rt.doc.resolve(ut.pos+1),1,!0))&&pt.head==dt.pos)&&b.someProp("handleKeyDown",St=>St(b,keyEvent(13,"Enter")))){b.input.lastIOSEnter=0;return}if(b.state.selection.anchor>at.start&&looksLikeBackspace(it,at.start,at.endA,ut,dt)&&b.someProp("handleKeyDown",St=>St(b,keyEvent(8,"Backspace")))){android&&chrome&&b.domObserver.suppressSelectionUpdates();return}chrome&&android&&at.endB==at.start&&(b.input.lastAndroidDelete=Date.now()),android&&!ht&&ut.start()!=dt.start()&&dt.parentOffset==0&&ut.depth==dt.depth&&rt.sel&&rt.sel.anchor==rt.sel.head&&rt.sel.head==at.endA&&(at.endB-=2,dt=rt.doc.resolveNoCache(at.endB-rt.from),setTimeout(()=>{b.someProp("handleKeyDown",function(St){return St(b,keyEvent(13,"Enter"))})},20));let mt=at.start,ft=at.endA,gt,xt,vt;if(ht){if(ut.pos==dt.pos)ie$1&&ie_version<=11&&ut.parentOffset==0&&(b.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(b),20)),gt=b.state.tr.delete(mt,ft),xt=it.resolve(at.start).marksAcross(it.resolve(at.endA));else if(at.endA==at.endB&&(vt=isMarkChange(ut.parent.content.cut(ut.parentOffset,dt.parentOffset),ct.parent.content.cut(ct.parentOffset,at.endA-ct.start()))))gt=b.state.tr,vt.type=="add"?gt.addMark(mt,ft,vt.mark):gt.removeMark(mt,ft,vt.mark);else if(ut.parent.child(ut.index()).isText&&ut.index()==dt.index()-(dt.textOffset?0:1)){let St=ut.parent.textBetween(ut.parentOffset,dt.parentOffset);if(b.someProp("handleTextInput",Tt=>Tt(b,mt,ft,St)))return;gt=b.state.tr.insertText(St,mt,ft)}}if(gt||(gt=b.state.tr.replace(mt,ft,rt.doc.slice(at.start-rt.from,at.endB-rt.from))),rt.sel){let St=resolveSelection(b,gt.doc,rt.sel);St&&!(chrome&&android&&b.composing&&St.empty&&(at.start!=at.endB||b.input.lastAndroidDelete<Date.now()-100)&&(St.head==mt||St.head==gt.mapping.map(ft)-1)||ie$1&&St.empty&&St.head==mt)&&gt.setSelection(St)}xt&&gt.ensureMarks(xt),_e&&gt.setMeta("composition",_e),b.dispatch(gt.scrollIntoView())}function resolveSelection(b,g,_){return Math.max(_.anchor,_.head)>g.content.size?null:selectionBetween(b,g.resolve(_.anchor),g.resolve(_.head))}function isMarkChange(b,g){let _=b.firstChild.marks,j=g.firstChild.marks,$=_,_e=j,et,tt,nt;for(let it=0;it<j.length;it++)$=j[it].removeFromSet($);for(let it=0;it<_.length;it++)_e=_[it].removeFromSet(_e);if($.length==1&&_e.length==0)tt=$[0],et="add",nt=it=>it.mark(tt.addToSet(it.marks));else if($.length==0&&_e.length==1)tt=_e[0],et="remove",nt=it=>it.mark(tt.removeFromSet(it.marks));else return null;let rt=[];for(let it=0;it<g.childCount;it++)rt.push(nt(g.child(it)));if(Fragment.from(rt).eq(b))return{mark:tt,type:et}}function looksLikeBackspace(b,g,_,j,$){if(_-g<=$.pos-j.pos||skipClosingAndOpening(j,!0,!1)<$.pos)return!1;let _e=b.resolve(g);if(!j.parent.isTextblock){let tt=_e.nodeAfter;return tt!=null&&_==g+tt.nodeSize}if(_e.parentOffset<_e.parent.content.size||!_e.parent.isTextblock)return!1;let et=b.resolve(skipClosingAndOpening(_e,!0,!0));return!et.parent.isTextblock||et.pos>_||skipClosingAndOpening(et,!0,!1)<_?!1:j.parent.content.cut(j.parentOffset).eq(et.parent.content)}function skipClosingAndOpening(b,g,_){let j=b.depth,$=g?b.end():b.pos;for(;j>0&&(g||b.indexAfter(j)==b.node(j).childCount);)j--,$++,g=!1;if(_){let _e=b.node(j).maybeChild(b.indexAfter(j));for(;_e&&!_e.isLeaf;)_e=_e.firstChild,$++}return $}function findDiff(b,g,_,j,$){let _e=b.findDiffStart(g,_);if(_e==null)return null;let{a:et,b:tt}=b.findDiffEnd(g,_+b.size,_+g.size);if($=="end"){let nt=Math.max(0,_e-Math.min(et,tt));j-=et+nt-_e}if(et<_e&&b.size<g.size){let nt=j<=_e&&j>=et?_e-j:0;_e-=nt,_e&&_e<g.size&&isSurrogatePair(g.textBetween(_e-1,_e+1))&&(_e+=nt?1:-1),tt=_e+(tt-et),et=_e}else if(tt<_e){let nt=j<=_e&&j>=tt?_e-j:0;_e-=nt,_e&&_e<b.size&&isSurrogatePair(b.textBetween(_e-1,_e+1))&&(_e+=nt?1:-1),et=_e+(et-tt),tt=_e}return{start:_e,endA:et,endB:tt}}function isSurrogatePair(b){if(b.length!=2)return!1;let g=b.charCodeAt(0),_=b.charCodeAt(1);return g>=56320&&g<=57343&&_>=55296&&_<=56319}class EditorView{constructor(g,_){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=_,this.state=_.state,this.directPlugins=_.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=g&&g.mount||document.createElement("div"),g&&(g.appendChild?g.appendChild(this.dom):typeof g=="function"?g(this.dom):g.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(j,$,_e,et)=>readDOMChange(this,j,$,_e,et)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let g=this._props;this._props={};for(let _ in g)this._props[_]=g[_];this._props.state=this.state}return this._props}update(g){g.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let _=this._props;this._props=g,g.plugins&&(g.plugins.forEach(checkStateComponent),this.directPlugins=g.plugins),this.updateStateInner(g.state,_)}setProps(g){let _={};for(let j in this._props)_[j]=this._props[j];_.state=this.state;for(let j in g)_[j]=g[j];this.update(_)}updateState(g){this.updateStateInner(g,this._props)}updateStateInner(g,_){var j;let $=this.state,_e=!1,et=!1;g.storedMarks&&this.composing&&(clearComposition(this),et=!0),this.state=g;let tt=$.plugins!=g.plugins||this._props.plugins!=_.plugins;if(tt||this._props.plugins!=_.plugins||this._props.nodeViews!=_.nodeViews){let lt=buildNodeViews(this);changedNodeViews(lt,this.nodeViews)&&(this.nodeViews=lt,_e=!0)}(tt||_.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let nt=viewDecorations(this),rt=computeDocDeco(this),it=$.plugins!=g.plugins&&!$.doc.eq(g.doc)?"reset":g.scrollToSelection>$.scrollToSelection?"to selection":"preserve",st=_e||!this.docView.matchesNode(g.doc,rt,nt);(st||!g.selection.eq($.selection))&&(et=!0);let ot=it=="preserve"&&et&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(et){this.domObserver.stop();let lt=st&&(ie$1||chrome)&&!this.composing&&!$.selection.empty&&!g.selection.empty&&selectionContextChanged($.selection,g.selection);if(st){let at=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(_e||!this.docView.update(g.doc,rt,nt,this))&&(this.docView.updateOuterDeco(rt),this.docView.destroy(),this.docView=docViewDesc(g.doc,rt,nt,this.dom,this)),at&&!this.trackWrites&&(lt=!0)}lt||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,lt):(syncNodeSelection(this,g.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews($),!((j=this.dragging)===null||j===void 0)&&j.node&&!$.doc.eq(g.doc)&&this.updateDraggedNode(this.dragging,$),it=="reset"?this.dom.scrollTop=0:it=="to selection"?this.scrollToSelection():ot&&resetScrollPos(ot)}scrollToSelection(){let g=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",_=>_(this)))if(this.state.selection instanceof NodeSelection){let _=this.docView.domAfterPos(this.state.selection.from);_.nodeType==1&&scrollRectIntoView(this,_.getBoundingClientRect(),g)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),g)}destroyPluginViews(){let g;for(;g=this.pluginViews.pop();)g.destroy&&g.destroy()}updatePluginViews(g){if(!g||g.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let _=0;_<this.directPlugins.length;_++){let j=this.directPlugins[_];j.spec.view&&this.pluginViews.push(j.spec.view(this))}for(let _=0;_<this.state.plugins.length;_++){let j=this.state.plugins[_];j.spec.view&&this.pluginViews.push(j.spec.view(this))}}else for(let _=0;_<this.pluginViews.length;_++){let j=this.pluginViews[_];j.update&&j.update(this,g)}}updateDraggedNode(g,_){let j=g.node,$=-1;if(this.state.doc.nodeAt(j.from)==j.node)$=j.from;else{let _e=j.from+(this.state.doc.content.size-_.doc.content.size);(_e>0&&this.state.doc.nodeAt(_e))==j.node&&($=_e)}this.dragging=new Dragging(g.slice,g.move,$<0?void 0:NodeSelection.create(this.state.doc,$))}someProp(g,_){let j=this._props&&this._props[g],$;if(j!=null&&($=_?_(j):j))return $;for(let et=0;et<this.directPlugins.length;et++){let tt=this.directPlugins[et].props[g];if(tt!=null&&($=_?_(tt):tt))return $}let _e=this.state.plugins;if(_e)for(let et=0;et<_e.length;et++){let tt=_e[et].props[g];if(tt!=null&&($=_?_(tt):tt))return $}}hasFocus(){if(ie$1){let g=this.root.activeElement;if(g==this.dom)return!0;if(!g||!this.dom.contains(g))return!1;for(;g&&this.dom!=g&&this.dom.contains(g);){if(g.contentEditable=="false")return!1;g=g.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let g=this._root;if(g==null){for(let _=this.dom.parentNode;_;_=_.parentNode)if(_.nodeType==9||_.nodeType==11&&_.host)return _.getSelection||(Object.getPrototypeOf(_).getSelection=()=>_.ownerDocument.getSelection()),this._root=_}return g||document}updateRoot(){this._root=null}posAtCoords(g){return posAtCoords(this,g)}coordsAtPos(g,_=1){return coordsAtPos(this,g,_)}domAtPos(g,_=0){return this.docView.domFromPos(g,_)}nodeDOM(g){let _=this.docView.descAt(g);return _?_.nodeDOM:null}posAtDOM(g,_,j=-1){let $=this.docView.posFromDOM(g,_,j);if($==null)throw new RangeError("DOM position not inside the editor");return $}endOfTextblock(g,_){return endOfTextblock(this,_||this.state,g)}pasteHTML(g,_){return doPaste(this,"",g,!1,_||new ClipboardEvent("paste"))}pasteText(g,_){return doPaste(this,g,null,!0,_||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(g){return dispatchEvent(this,g)}dispatch(g){let _=this._props.dispatchTransaction;_?_.call(this,g):this.updateState(this.state.apply(g))}domSelectionRange(){let g=this.domSelection();return g?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,g)||g:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function computeDocDeco(b){let g=Object.create(null);return g.class="ProseMirror",g.contenteditable=String(b.editable),b.someProp("attributes",_=>{if(typeof _=="function"&&(_=_(b.state)),_)for(let j in _)j=="class"?g.class+=" "+_[j]:j=="style"?g.style=(g.style?g.style+";":"")+_[j]:!g[j]&&j!="contenteditable"&&j!="nodeName"&&(g[j]=String(_[j]))}),g.translate||(g.translate="no"),[Decoration.node(0,b.state.doc.content.size,g)]}function updateCursorWrapper(b){if(b.markCursor){let g=document.createElement("img");g.className="ProseMirror-separator",g.setAttribute("mark-placeholder","true"),g.setAttribute("alt",""),b.cursorWrapper={dom:g,deco:Decoration.widget(b.state.selection.from,g,{raw:!0,marks:b.markCursor})}}else b.cursorWrapper=null}function getEditable(b){return!b.someProp("editable",g=>g(b.state)===!1)}function selectionContextChanged(b,g){let _=Math.min(b.$anchor.sharedDepth(b.head),g.$anchor.sharedDepth(g.head));return b.$anchor.start(_)!=g.$anchor.start(_)}function buildNodeViews(b){let g=Object.create(null);function _(j){for(let $ in j)Object.prototype.hasOwnProperty.call(g,$)||(g[$]=j[$])}return b.someProp("nodeViews",_),b.someProp("markViews",_),g}function changedNodeViews(b,g){let _=0,j=0;for(let $ in b){if(b[$]!=g[$])return!0;_++}for(let $ in g)j++;return _!=j}function checkStateComponent(b){if(b.spec.state||b.spec.filterTransaction||b.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$3=0;i$3<10;i$3++)base[48+i$3]=base[96+i$3]=String(i$3);for(var i$3=1;i$3<=24;i$3++)base[i$3+111]="F"+i$3;for(var i$3=65;i$3<=90;i$3++)base[i$3]=String.fromCharCode(i$3+32),shift[i$3]=String.fromCharCode(i$3);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(b){var g=mac$1&&b.metaKey&&b.shiftKey&&!b.ctrlKey&&!b.altKey||ie&&b.shiftKey&&b.key&&b.key.length==1||b.key=="Unidentified",_=!g&&b.key||(b.shiftKey?shift:base)[b.keyCode]||b.key||"Unidentified";return _=="Esc"&&(_="Escape"),_=="Del"&&(_="Delete"),_=="Left"&&(_="ArrowLeft"),_=="Up"&&(_="ArrowUp"),_=="Right"&&(_="ArrowRight"),_=="Down"&&(_="ArrowDown"),_}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(b){let g=b.split(/-(?!$)/),_=g[g.length-1];_=="Space"&&(_=" ");let j,$,_e,et;for(let tt=0;tt<g.length-1;tt++){let nt=g[tt];if(/^(cmd|meta|m)$/i.test(nt))et=!0;else if(/^a(lt)?$/i.test(nt))j=!0;else if(/^(c|ctrl|control)$/i.test(nt))$=!0;else if(/^s(hift)?$/i.test(nt))_e=!0;else if(/^mod$/i.test(nt))mac?et=!0:$=!0;else throw new Error("Unrecognized modifier name: "+nt)}return j&&(_="Alt-"+_),$&&(_="Ctrl-"+_),et&&(_="Meta-"+_),_e&&(_="Shift-"+_),_}function normalize(b){let g=Object.create(null);for(let _ in b)g[normalizeKeyName$1(_)]=b[_];return g}function modifiers(b,g,_=!0){return g.altKey&&(b="Alt-"+b),g.ctrlKey&&(b="Ctrl-"+b),g.metaKey&&(b="Meta-"+b),_&&g.shiftKey&&(b="Shift-"+b),b}function keymap(b){return new Plugin({props:{handleKeyDown:keydownHandler(b)}})}function keydownHandler(b){let g=normalize(b);return function(_,j){let $=keyName(j),_e,et=g[modifiers($,j)];if(et&&et(_.state,_.dispatch,_))return!0;if($.length==1&&$!=" "){if(j.shiftKey){let tt=g[modifiers($,j,!1)];if(tt&&tt(_.state,_.dispatch,_))return!0}if((j.shiftKey||j.altKey||j.metaKey||$.charCodeAt(0)>127)&&(_e=base[j.keyCode])&&_e!=$){let tt=g[modifiers(_e,j)];if(tt&&tt(_.state,_.dispatch,_))return!0}}return!1}}const deleteSelection$1=(b,g)=>b.selection.empty?!1:(g&&g(b.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(b,g){let{$cursor:_}=b.selection;return!_||(g?!g.endOfTextblock("backward",b):_.parentOffset>0)?null:_}const joinBackward$1=(b,g,_)=>{let j=atBlockStart(b,_);if(!j)return!1;let $=findCutBefore(j);if(!$){let et=j.blockRange(),tt=et&&liftTarget(et);return tt==null?!1:(g&&g(b.tr.lift(et,tt).scrollIntoView()),!0)}let _e=$.nodeBefore;if(deleteBarrier(b,$,g,-1))return!0;if(j.parent.content.size==0&&(textblockAt(_e,"end")||NodeSelection.isSelectable(_e)))for(let et=j.depth;;et--){let tt=replaceStep(b.doc,j.before(et),j.after(et),Slice.empty);if(tt&&tt.slice.size<tt.to-tt.from){if(g){let nt=b.tr.step(tt);nt.setSelection(textblockAt(_e,"end")?Selection.findFrom(nt.doc.resolve(nt.mapping.map($.pos,-1)),-1):NodeSelection.create(nt.doc,$.pos-_e.nodeSize)),g(nt.scrollIntoView())}return!0}if(et==1||j.node(et-1).childCount>1)break}return _e.isAtom&&$.depth==j.depth-1?(g&&g(b.tr.delete($.pos-_e.nodeSize,$.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(b,g,_)=>{let j=atBlockStart(b,_);if(!j)return!1;let $=findCutBefore(j);return $?joinTextblocksAround(b,$,g):!1},joinTextblockForward$1=(b,g,_)=>{let j=atBlockEnd(b,_);if(!j)return!1;let $=findCutAfter(j);return $?joinTextblocksAround(b,$,g):!1};function joinTextblocksAround(b,g,_){let j=g.nodeBefore,$=j,_e=g.pos-1;for(;!$.isTextblock;_e--){if($.type.spec.isolating)return!1;let it=$.lastChild;if(!it)return!1;$=it}let et=g.nodeAfter,tt=et,nt=g.pos+1;for(;!tt.isTextblock;nt++){if(tt.type.spec.isolating)return!1;let it=tt.firstChild;if(!it)return!1;tt=it}let rt=replaceStep(b.doc,_e,nt,Slice.empty);if(!rt||rt.from!=_e||rt instanceof ReplaceStep&&rt.slice.size>=nt-_e)return!1;if(_){let it=b.tr.step(rt);it.setSelection(TextSelection.create(it.doc,_e)),_(it.scrollIntoView())}return!0}function textblockAt(b,g,_=!1){for(let j=b;j;j=g=="start"?j.firstChild:j.lastChild){if(j.isTextblock)return!0;if(_&&j.childCount!=1)return!1}return!1}const selectNodeBackward$1=(b,g,_)=>{let{$head:j,empty:$}=b.selection,_e=j;if(!$)return!1;if(j.parent.isTextblock){if(_?!_.endOfTextblock("backward",b):j.parentOffset>0)return!1;_e=findCutBefore(j)}let et=_e&&_e.nodeBefore;return!et||!NodeSelection.isSelectable(et)?!1:(g&&g(b.tr.setSelection(NodeSelection.create(b.doc,_e.pos-et.nodeSize)).scrollIntoView()),!0)};function findCutBefore(b){if(!b.parent.type.spec.isolating)for(let g=b.depth-1;g>=0;g--){if(b.index(g)>0)return b.doc.resolve(b.before(g+1));if(b.node(g).type.spec.isolating)break}return null}function atBlockEnd(b,g){let{$cursor:_}=b.selection;return!_||(g?!g.endOfTextblock("forward",b):_.parentOffset<_.parent.content.size)?null:_}const joinForward$1=(b,g,_)=>{let j=atBlockEnd(b,_);if(!j)return!1;let $=findCutAfter(j);if(!$)return!1;let _e=$.nodeAfter;if(deleteBarrier(b,$,g,1))return!0;if(j.parent.content.size==0&&(textblockAt(_e,"start")||NodeSelection.isSelectable(_e))){let et=replaceStep(b.doc,j.before(),j.after(),Slice.empty);if(et&&et.slice.size<et.to-et.from){if(g){let tt=b.tr.step(et);tt.setSelection(textblockAt(_e,"start")?Selection.findFrom(tt.doc.resolve(tt.mapping.map($.pos)),1):NodeSelection.create(tt.doc,tt.mapping.map($.pos))),g(tt.scrollIntoView())}return!0}}return _e.isAtom&&$.depth==j.depth-1?(g&&g(b.tr.delete($.pos,$.pos+_e.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(b,g,_)=>{let{$head:j,empty:$}=b.selection,_e=j;if(!$)return!1;if(j.parent.isTextblock){if(_?!_.endOfTextblock("forward",b):j.parentOffset<j.parent.content.size)return!1;_e=findCutAfter(j)}let et=_e&&_e.nodeAfter;return!et||!NodeSelection.isSelectable(et)?!1:(g&&g(b.tr.setSelection(NodeSelection.create(b.doc,_e.pos)).scrollIntoView()),!0)};function findCutAfter(b){if(!b.parent.type.spec.isolating)for(let g=b.depth-1;g>=0;g--){let _=b.node(g);if(b.index(g)+1<_.childCount)return b.doc.resolve(b.after(g+1));if(_.type.spec.isolating)break}return null}const joinUp$1=(b,g)=>{let _=b.selection,j=_ instanceof NodeSelection,$;if(j){if(_.node.isTextblock||!canJoin(b.doc,_.from))return!1;$=_.from}else if($=joinPoint(b.doc,_.from,-1),$==null)return!1;if(g){let _e=b.tr.join($);j&&_e.setSelection(NodeSelection.create(_e.doc,$-b.doc.resolve($).nodeBefore.nodeSize)),g(_e.scrollIntoView())}return!0},joinDown$1=(b,g)=>{let _=b.selection,j;if(_ instanceof NodeSelection){if(_.node.isTextblock||!canJoin(b.doc,_.to))return!1;j=_.to}else if(j=joinPoint(b.doc,_.to,1),j==null)return!1;return g&&g(b.tr.join(j).scrollIntoView()),!0},lift$1=(b,g)=>{let{$from:_,$to:j}=b.selection,$=_.blockRange(j),_e=$&&liftTarget($);return _e==null?!1:(g&&g(b.tr.lift($,_e).scrollIntoView()),!0)},newlineInCode$1=(b,g)=>{let{$head:_,$anchor:j}=b.selection;return!_.parent.type.spec.code||!_.sameParent(j)?!1:(g&&g(b.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(b){for(let g=0;g<b.edgeCount;g++){let{type:_}=b.edge(g);if(_.isTextblock&&!_.hasRequiredAttrs())return _}return null}const exitCode$1=(b,g)=>{let{$head:_,$anchor:j}=b.selection;if(!_.parent.type.spec.code||!_.sameParent(j))return!1;let $=_.node(-1),_e=_.indexAfter(-1),et=defaultBlockAt$1($.contentMatchAt(_e));if(!et||!$.canReplaceWith(_e,_e,et))return!1;if(g){let tt=_.after(),nt=b.tr.replaceWith(tt,tt,et.createAndFill());nt.setSelection(Selection.near(nt.doc.resolve(tt),1)),g(nt.scrollIntoView())}return!0},createParagraphNear$1=(b,g)=>{let _=b.selection,{$from:j,$to:$}=_;if(_ instanceof AllSelection||j.parent.inlineContent||$.parent.inlineContent)return!1;let _e=defaultBlockAt$1($.parent.contentMatchAt($.indexAfter()));if(!_e||!_e.isTextblock)return!1;if(g){let et=(!j.parentOffset&&$.index()<$.parent.childCount?j:$).pos,tt=b.tr.insert(et,_e.createAndFill());tt.setSelection(TextSelection.create(tt.doc,et+1)),g(tt.scrollIntoView())}return!0},liftEmptyBlock$1=(b,g)=>{let{$cursor:_}=b.selection;if(!_||_.parent.content.size)return!1;if(_.depth>1&&_.after()!=_.end(-1)){let _e=_.before();if(canSplit(b.doc,_e))return g&&g(b.tr.split(_e).scrollIntoView()),!0}let j=_.blockRange(),$=j&&liftTarget(j);return $==null?!1:(g&&g(b.tr.lift(j,$).scrollIntoView()),!0)},selectParentNode$1=(b,g)=>{let{$from:_,to:j}=b.selection,$,_e=_.sharedDepth(j);return _e==0?!1:($=_.before(_e),g&&g(b.tr.setSelection(NodeSelection.create(b.doc,$))),!0)};function joinMaybeClear(b,g,_){let j=g.nodeBefore,$=g.nodeAfter,_e=g.index();return!j||!$||!j.type.compatibleContent($.type)?!1:!j.content.size&&g.parent.canReplace(_e-1,_e)?(_&&_(b.tr.delete(g.pos-j.nodeSize,g.pos).scrollIntoView()),!0):!g.parent.canReplace(_e,_e+1)||!($.isTextblock||canJoin(b.doc,g.pos))?!1:(_&&_(b.tr.join(g.pos).scrollIntoView()),!0)}function deleteBarrier(b,g,_,j){let $=g.nodeBefore,_e=g.nodeAfter,et,tt,nt=$.type.spec.isolating||_e.type.spec.isolating;if(!nt&&joinMaybeClear(b,g,_))return!0;let rt=!nt&&g.parent.canReplace(g.index(),g.index()+1);if(rt&&(et=(tt=$.contentMatchAt($.childCount)).findWrapping(_e.type))&&tt.matchType(et[0]||_e.type).validEnd){if(_){let lt=g.pos+_e.nodeSize,at=Fragment.empty;for(let ct=et.length-1;ct>=0;ct--)at=Fragment.from(et[ct].create(null,at));at=Fragment.from($.copy(at));let ut=b.tr.step(new ReplaceAroundStep(g.pos-1,lt,g.pos,lt,new Slice(at,1,0),et.length,!0)),dt=ut.doc.resolve(lt+2*et.length);dt.nodeAfter&&dt.nodeAfter.type==$.type&&canJoin(ut.doc,dt.pos)&&ut.join(dt.pos),_(ut.scrollIntoView())}return!0}let it=_e.type.spec.isolating||j>0&&nt?null:Selection.findFrom(g,1),st=it&&it.$from.blockRange(it.$to),ot=st&&liftTarget(st);if(ot!=null&&ot>=g.depth)return _&&_(b.tr.lift(st,ot).scrollIntoView()),!0;if(rt&&textblockAt(_e,"start",!0)&&textblockAt($,"end")){let lt=$,at=[];for(;at.push(lt),!lt.isTextblock;)lt=lt.lastChild;let ut=_e,dt=1;for(;!ut.isTextblock;ut=ut.firstChild)dt++;if(lt.canReplace(lt.childCount,lt.childCount,ut.content)){if(_){let ct=Fragment.empty;for(let pt=at.length-1;pt>=0;pt--)ct=Fragment.from(at[pt].copy(ct));let ht=b.tr.step(new ReplaceAroundStep(g.pos-at.length,g.pos+_e.nodeSize,g.pos+dt,g.pos+_e.nodeSize-dt,new Slice(ct,at.length,0),0,!0));_(ht.scrollIntoView())}return!0}}return!1}function selectTextblockSide(b){return function(g,_){let j=g.selection,$=b<0?j.$from:j.$to,_e=$.depth;for(;$.node(_e).isInline;){if(!_e)return!1;_e--}return $.node(_e).isTextblock?(_&&_(g.tr.setSelection(TextSelection.create(g.doc,b<0?$.start(_e):$.end(_e)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(b,g=null){return function(_,j){let{$from:$,$to:_e}=_.selection,et=$.blockRange(_e),tt=et&&findWrapping(et,b,g);return tt?(j&&j(_.tr.wrap(et,tt).scrollIntoView()),!0):!1}}function setBlockType(b,g=null){return function(_,j){let $=!1;for(let _e=0;_e<_.selection.ranges.length&&!$;_e++){let{$from:{pos:et},$to:{pos:tt}}=_.selection.ranges[_e];_.doc.nodesBetween(et,tt,(nt,rt)=>{if($)return!1;if(!(!nt.isTextblock||nt.hasMarkup(b,g)))if(nt.type==b)$=!0;else{let it=_.doc.resolve(rt),st=it.index();$=it.parent.canReplaceWith(st,st+1,b)}})}if(!$)return!1;if(j){let _e=_.tr;for(let et=0;et<_.selection.ranges.length;et++){let{$from:{pos:tt},$to:{pos:nt}}=_.selection.ranges[et];_e.setBlockType(tt,nt,b,g)}j(_e.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(b,g=null){return function(_,j){let{$from:$,$to:_e}=_.selection,et=$.blockRange(_e),tt=!1,nt=et;if(!et)return!1;if(et.depth>=2&&$.node(et.depth-1).type.compatibleContent(b)&&et.startIndex==0){if($.index(et.depth-1)==0)return!1;let it=_.doc.resolve(et.start-2);nt=new NodeRange(it,it,et.depth),et.endIndex<et.parent.childCount&&(et=new NodeRange($,_.doc.resolve(_e.end(et.depth)),et.depth)),tt=!0}let rt=findWrapping(nt,b,g,et);return rt?(j&&j(doWrapInList(_.tr,et,rt,tt,b).scrollIntoView()),!0):!1}}function doWrapInList(b,g,_,j,$){let _e=Fragment.empty;for(let it=_.length-1;it>=0;it--)_e=Fragment.from(_[it].type.create(_[it].attrs,_e));b.step(new ReplaceAroundStep(g.start-(j?2:0),g.end,g.start,g.end,new Slice(_e,0,0),_.length,!0));let et=0;for(let it=0;it<_.length;it++)_[it].type==$&&(et=it+1);let tt=_.length-et,nt=g.start+_.length-(j?2:0),rt=g.parent;for(let it=g.startIndex,st=g.endIndex,ot=!0;it<st;it++,ot=!1)!ot&&canSplit(b.doc,nt,tt)&&(b.split(nt,tt),nt+=2*tt),nt+=rt.child(it).nodeSize;return b}function liftListItem$1(b){return function(g,_){let{$from:j,$to:$}=g.selection,_e=j.blockRange($,et=>et.childCount>0&&et.firstChild.type==b);return _e?_?j.node(_e.depth-1).type==b?liftToOuterList(g,_,b,_e):liftOutOfList(g,_,_e):!0:!1}}function liftToOuterList(b,g,_,j){let $=b.tr,_e=j.end,et=j.$to.end(j.depth);_e<et&&($.step(new ReplaceAroundStep(_e-1,et,_e,et,new Slice(Fragment.from(_.create(null,j.parent.copy())),1,0),1,!0)),j=new NodeRange($.doc.resolve(j.$from.pos),$.doc.resolve(et),j.depth));const tt=liftTarget(j);if(tt==null)return!1;$.lift(j,tt);let nt=$.mapping.map(_e,-1)-1;return canJoin($.doc,nt)&&$.join(nt),g($.scrollIntoView()),!0}function liftOutOfList(b,g,_){let j=b.tr,$=_.parent;for(let lt=_.end,at=_.endIndex-1,ut=_.startIndex;at>ut;at--)lt-=$.child(at).nodeSize,j.delete(lt-1,lt+1);let _e=j.doc.resolve(_.start),et=_e.nodeAfter;if(j.mapping.map(_.end)!=_.start+_e.nodeAfter.nodeSize)return!1;let tt=_.startIndex==0,nt=_.endIndex==$.childCount,rt=_e.node(-1),it=_e.index(-1);if(!rt.canReplace(it+(tt?0:1),it+1,et.content.append(nt?Fragment.empty:Fragment.from($))))return!1;let st=_e.pos,ot=st+et.nodeSize;return j.step(new ReplaceAroundStep(st-(tt?1:0),ot+(nt?1:0),st+1,ot-1,new Slice((tt?Fragment.empty:Fragment.from($.copy(Fragment.empty))).append(nt?Fragment.empty:Fragment.from($.copy(Fragment.empty))),tt?0:1,nt?0:1),tt?0:1)),g(j.scrollIntoView()),!0}function sinkListItem$1(b){return function(g,_){let{$from:j,$to:$}=g.selection,_e=j.blockRange($,rt=>rt.childCount>0&&rt.firstChild.type==b);if(!_e)return!1;let et=_e.startIndex;if(et==0)return!1;let tt=_e.parent,nt=tt.child(et-1);if(nt.type!=b)return!1;if(_){let rt=nt.lastChild&&nt.lastChild.type==tt.type,it=Fragment.from(rt?b.create():null),st=new Slice(Fragment.from(b.create(null,Fragment.from(tt.type.create(null,it)))),rt?3:1,0),ot=_e.start,lt=_e.end;_(g.tr.step(new ReplaceAroundStep(ot-(rt?3:1),lt,ot,lt,st,1,!0)).scrollIntoView())}return!0}}function createChainableState(b){const{state:g,transaction:_}=b;let{selection:j}=_,{doc:$}=_,{storedMarks:_e}=_;return{...g,apply:g.apply.bind(g),applyTransaction:g.applyTransaction.bind(g),plugins:g.plugins,schema:g.schema,reconfigure:g.reconfigure.bind(g),toJSON:g.toJSON.bind(g),get storedMarks(){return _e},get selection(){return j},get doc(){return $},get tr(){return j=_.selection,$=_.doc,_e=_.storedMarks,_}}}class CommandManager{constructor(g){this.editor=g.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=g.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:g,editor:_,state:j}=this,{view:$}=_,{tr:_e}=j,et=this.buildProps(_e);return Object.fromEntries(Object.entries(g).map(([tt,nt])=>[tt,(...it)=>{const st=nt(...it)(et);return!_e.getMeta("preventDispatch")&&!this.hasCustomState&&$.dispatch(_e),st}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(g,_=!0){const{rawCommands:j,editor:$,state:_e}=this,{view:et}=$,tt=[],nt=!!g,rt=g||_e.tr,it=()=>(!nt&&_&&!rt.getMeta("preventDispatch")&&!this.hasCustomState&&et.dispatch(rt),tt.every(ot=>ot===!0)),st={...Object.fromEntries(Object.entries(j).map(([ot,lt])=>[ot,(...ut)=>{const dt=this.buildProps(rt,_),ct=lt(...ut)(dt);return tt.push(ct),st}])),run:it};return st}createCan(g){const{rawCommands:_,state:j}=this,$=!1,_e=g||j.tr,et=this.buildProps(_e,$);return{...Object.fromEntries(Object.entries(_).map(([nt,rt])=>[nt,(...it)=>rt(...it)({...et,dispatch:void 0})])),chain:()=>this.createChain(_e,$)}}buildProps(g,_=!0){const{rawCommands:j,editor:$,state:_e}=this,{view:et}=$,tt={tr:g,editor:$,view:et,state:createChainableState({state:_e,transaction:g}),dispatch:_?()=>{}:void 0,chain:()=>this.createChain(g,_),can:()=>this.createCan(g),get commands(){return Object.fromEntries(Object.entries(j).map(([nt,rt])=>[nt,(...it)=>rt(...it)(tt)]))}};return tt}}class EventEmitter{constructor(){this.callbacks={}}on(g,_){return this.callbacks[g]||(this.callbacks[g]=[]),this.callbacks[g].push(_),this}emit(g,..._){const j=this.callbacks[g];return j&&j.forEach($=>$.apply(this,_)),this}off(g,_){const j=this.callbacks[g];return j&&(_?this.callbacks[g]=j.filter($=>$!==_):delete this.callbacks[g]),this}removeAllListeners(){this.callbacks={}}}function getExtensionField(b,g,_){return b.config[g]===void 0&&b.parent?getExtensionField(b.parent,g,_):typeof b.config[g]=="function"?b.config[g].bind({..._,parent:b.parent?getExtensionField(b.parent,g,_):null}):b.config[g]}function splitExtensions(b){const g=b.filter($=>$.type==="extension"),_=b.filter($=>$.type==="node"),j=b.filter($=>$.type==="mark");return{baseExtensions:g,nodeExtensions:_,markExtensions:j}}function getAttributesFromExtensions(b){const g=[],{nodeExtensions:_,markExtensions:j}=splitExtensions(b),$=[..._,...j],_e={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return b.forEach(et=>{const tt={name:et.name,options:et.options,storage:et.storage,extensions:$},nt=getExtensionField(et,"addGlobalAttributes",tt);if(!nt)return;nt().forEach(it=>{it.types.forEach(st=>{Object.entries(it.attributes).forEach(([ot,lt])=>{g.push({type:st,name:ot,attribute:{..._e,...lt}})})})})}),$.forEach(et=>{const tt={name:et.name,options:et.options,storage:et.storage},nt=getExtensionField(et,"addAttributes",tt);if(!nt)return;const rt=nt();Object.entries(rt).forEach(([it,st])=>{const ot={..._e,...st};typeof(ot==null?void 0:ot.default)=="function"&&(ot.default=ot.default()),ot!=null&&ot.isRequired&&(ot==null?void 0:ot.default)===void 0&&delete ot.default,g.push({type:et.name,name:it,attribute:ot})})}),g}function getNodeType(b,g){if(typeof b=="string"){if(!g.nodes[b])throw Error(`There is no node type named '${b}'. Maybe you forgot to add the extension?`);return g.nodes[b]}return b}function mergeAttributes(...b){return b.filter(g=>!!g).reduce((g,_)=>{const j={...g};return Object.entries(_).forEach(([$,_e])=>{if(!j[$]){j[$]=_e;return}if($==="class"){const tt=_e?_e.split(" "):[],nt=j[$]?j[$].split(" "):[],rt=tt.filter(it=>!nt.includes(it));j[$]=[...nt,...rt].join(" ")}else if($==="style"){const tt=_e?_e.split(";").map(it=>it.trim()).filter(Boolean):[],nt=j[$]?j[$].split(";").map(it=>it.trim()).filter(Boolean):[],rt=new Map;nt.forEach(it=>{const[st,ot]=it.split(":").map(lt=>lt.trim());rt.set(st,ot)}),tt.forEach(it=>{const[st,ot]=it.split(":").map(lt=>lt.trim());rt.set(st,ot)}),j[$]=Array.from(rt.entries()).map(([it,st])=>`${it}: ${st}`).join("; ")}else j[$]=_e}),j},{})}function getRenderedAttributes(b,g){return g.filter(_=>_.type===b.type.name).filter(_=>_.attribute.rendered).map(_=>_.attribute.renderHTML?_.attribute.renderHTML(b.attrs)||{}:{[_.name]:b.attrs[_.name]}).reduce((_,j)=>mergeAttributes(_,j),{})}function isFunction$1(b){return typeof b=="function"}function callOrReturn(b,g=void 0,..._){return isFunction$1(b)?g?b.bind(g)(..._):b(..._):b}function isEmptyObject(b={}){return Object.keys(b).length===0&&b.constructor===Object}function fromString(b){return typeof b!="string"?b:b.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(b):b==="true"?!0:b==="false"?!1:b}function injectExtensionAttributesToParseRule(b,g){return"style"in b?b:{...b,getAttrs:_=>{const j=b.getAttrs?b.getAttrs(_):b.attrs;if(j===!1)return!1;const $=g.reduce((_e,et)=>{const tt=et.attribute.parseHTML?et.attribute.parseHTML(_):fromString(_.getAttribute(et.name));return tt==null?_e:{..._e,[et.name]:tt}},{});return{...j,...$}}}}function cleanUpSchemaItem(b){return Object.fromEntries(Object.entries(b).filter(([g,_])=>g==="attrs"&&isEmptyObject(_)?!1:_!=null))}function getSchemaByResolvedExtensions(b,g){var _;const j=getAttributesFromExtensions(b),{nodeExtensions:$,markExtensions:_e}=splitExtensions(b),et=(_=$.find(rt=>getExtensionField(rt,"topNode")))===null||_===void 0?void 0:_.name,tt=Object.fromEntries($.map(rt=>{const it=j.filter(ct=>ct.type===rt.name),st={name:rt.name,options:rt.options,storage:rt.storage,editor:g},ot=b.reduce((ct,ht)=>{const pt=getExtensionField(ht,"extendNodeSchema",st);return{...ct,...pt?pt(rt):{}}},{}),lt=cleanUpSchemaItem({...ot,content:callOrReturn(getExtensionField(rt,"content",st)),marks:callOrReturn(getExtensionField(rt,"marks",st)),group:callOrReturn(getExtensionField(rt,"group",st)),inline:callOrReturn(getExtensionField(rt,"inline",st)),atom:callOrReturn(getExtensionField(rt,"atom",st)),selectable:callOrReturn(getExtensionField(rt,"selectable",st)),draggable:callOrReturn(getExtensionField(rt,"draggable",st)),code:callOrReturn(getExtensionField(rt,"code",st)),whitespace:callOrReturn(getExtensionField(rt,"whitespace",st)),defining:callOrReturn(getExtensionField(rt,"defining",st)),isolating:callOrReturn(getExtensionField(rt,"isolating",st)),attrs:Object.fromEntries(it.map(ct=>{var ht;return[ct.name,{default:(ht=ct==null?void 0:ct.attribute)===null||ht===void 0?void 0:ht.default}]}))}),at=callOrReturn(getExtensionField(rt,"parseHTML",st));at&&(lt.parseDOM=at.map(ct=>injectExtensionAttributesToParseRule(ct,it)));const ut=getExtensionField(rt,"renderHTML",st);ut&&(lt.toDOM=ct=>ut({node:ct,HTMLAttributes:getRenderedAttributes(ct,it)}));const dt=getExtensionField(rt,"renderText",st);return dt&&(lt.toText=dt),[rt.name,lt]})),nt=Object.fromEntries(_e.map(rt=>{const it=j.filter(dt=>dt.type===rt.name),st={name:rt.name,options:rt.options,storage:rt.storage,editor:g},ot=b.reduce((dt,ct)=>{const ht=getExtensionField(ct,"extendMarkSchema",st);return{...dt,...ht?ht(rt):{}}},{}),lt=cleanUpSchemaItem({...ot,inclusive:callOrReturn(getExtensionField(rt,"inclusive",st)),excludes:callOrReturn(getExtensionField(rt,"excludes",st)),group:callOrReturn(getExtensionField(rt,"group",st)),spanning:callOrReturn(getExtensionField(rt,"spanning",st)),code:callOrReturn(getExtensionField(rt,"code",st)),attrs:Object.fromEntries(it.map(dt=>{var ct;return[dt.name,{default:(ct=dt==null?void 0:dt.attribute)===null||ct===void 0?void 0:ct.default}]}))}),at=callOrReturn(getExtensionField(rt,"parseHTML",st));at&&(lt.parseDOM=at.map(dt=>injectExtensionAttributesToParseRule(dt,it)));const ut=getExtensionField(rt,"renderHTML",st);return ut&&(lt.toDOM=dt=>ut({mark:dt,HTMLAttributes:getRenderedAttributes(dt,it)})),[rt.name,lt]}));return new Schema({topNode:et,nodes:tt,marks:nt})}function getSchemaTypeByName(b,g){return g.nodes[b]||g.marks[b]||null}function isExtensionRulesEnabled(b,g){return Array.isArray(g)?g.some(_=>(typeof _=="string"?_:_.name)===b.name):g}const getTextContentFromNodes=(b,g=500)=>{let _="";const j=b.parentOffset;return b.parent.nodesBetween(Math.max(0,j-g),j,($,_e,et,tt)=>{var nt,rt;const it=((rt=(nt=$.type.spec).toText)===null||rt===void 0?void 0:rt.call(nt,{node:$,pos:_e,parent:et,index:tt}))||$.textContent||"%leaf%";_+=$.isAtom&&!$.isText?it:it.slice(0,Math.max(0,j-_e))}),_};function isRegExp$1(b){return Object.prototype.toString.call(b)==="[object RegExp]"}class InputRule{constructor(g){this.find=g.find,this.handler=g.handler}}const inputRuleMatcherHandler=(b,g)=>{if(isRegExp$1(g))return g.exec(b);const _=g(b);if(!_)return null;const j=[_.text];return j.index=_.index,j.input=b,j.data=_.data,_.replaceWith&&(_.text.includes(_.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),j.push(_.replaceWith)),j};function run$1(b){var g;const{editor:_,from:j,to:$,text:_e,rules:et,plugin:tt}=b,{view:nt}=_;if(nt.composing)return!1;const rt=nt.state.doc.resolve(j);if(rt.parent.type.spec.code||!((g=rt.nodeBefore||rt.nodeAfter)===null||g===void 0)&&g.marks.find(ot=>ot.type.spec.code))return!1;let it=!1;const st=getTextContentFromNodes(rt)+_e;return et.forEach(ot=>{if(it)return;const lt=inputRuleMatcherHandler(st,ot.find);if(!lt)return;const at=nt.state.tr,ut=createChainableState({state:nt.state,transaction:at}),dt={from:j-(lt[0].length-_e.length),to:$},{commands:ct,chain:ht,can:pt}=new CommandManager({editor:_,state:ut});ot.handler({state:ut,range:dt,match:lt,commands:ct,chain:ht,can:pt})===null||!at.steps.length||(at.setMeta(tt,{transform:at,from:j,to:$,text:_e}),nt.dispatch(at),it=!0)}),it}function inputRulesPlugin(b){const{editor:g,rules:_}=b,j=new Plugin({state:{init(){return null},apply($,_e){const et=$.getMeta(j);if(et)return et;const tt=$.getMeta("applyInputRules");return!!tt&&setTimeout(()=>{const{from:rt,text:it}=tt,st=rt+it.length;run$1({editor:g,from:rt,to:st,text:it,rules:_,plugin:j})}),$.selectionSet||$.docChanged?null:_e}},props:{handleTextInput($,_e,et,tt){return run$1({editor:g,from:_e,to:et,text:tt,rules:_,plugin:j})},handleDOMEvents:{compositionend:$=>(setTimeout(()=>{const{$cursor:_e}=$.state.selection;_e&&run$1({editor:g,from:_e.pos,to:_e.pos,text:"",rules:_,plugin:j})}),!1)},handleKeyDown($,_e){if(_e.key!=="Enter")return!1;const{$cursor:et}=$.state.selection;return et?run$1({editor:g,from:et.pos,to:et.pos,text:`
`,rules:_,plugin:j}):!1}},isInputRules:!0});return j}function getType(b){return Object.prototype.toString.call(b).slice(8,-1)}function isPlainObject$1(b){return getType(b)!=="Object"?!1:b.constructor===Object&&Object.getPrototypeOf(b)===Object.prototype}function mergeDeep(b,g){const _={...b};return isPlainObject$1(b)&&isPlainObject$1(g)&&Object.keys(g).forEach(j=>{isPlainObject$1(g[j])&&isPlainObject$1(b[j])?_[j]=mergeDeep(b[j],g[j]):_[j]=g[j]}),_}class Mark{constructor(g={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...g},this.name=this.config.name,g.defaultOptions&&Object.keys(g.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(g={}){return new Mark(g)}configure(g={}){const _=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,g)});return _.name=this.name,_.parent=this.parent,_}extend(g={}){const _=new Mark(g);return _.parent=this,this.child=_,_.name=g.name?g.name:_.parent.name,g.defaultOptions&&Object.keys(g.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${_.name}".`),_.options=callOrReturn(getExtensionField(_,"addOptions",{name:_.name})),_.storage=callOrReturn(getExtensionField(_,"addStorage",{name:_.name,options:_.options})),_}static handleExit({editor:g,mark:_}){const{tr:j}=g.state,$=g.state.selection.$from;if($.pos===$.end()){const et=$.marks();if(!!!et.find(rt=>(rt==null?void 0:rt.type.name)===_.name))return!1;const nt=et.find(rt=>(rt==null?void 0:rt.type.name)===_.name);return nt&&j.removeStoredMark(nt),j.insertText(" ",$.pos),g.view.dispatch(j),!0}return!1}}function isNumber$1(b){return typeof b=="number"}class PasteRule{constructor(g){this.find=g.find,this.handler=g.handler}}const pasteRuleMatcherHandler=(b,g,_)=>{if(isRegExp$1(g))return[...b.matchAll(g)];const j=g(b,_);return j?j.map($=>{const _e=[$.text];return _e.index=$.index,_e.input=b,_e.data=$.data,$.replaceWith&&($.text.includes($.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),_e.push($.replaceWith)),_e}):[]};function run(b){const{editor:g,state:_,from:j,to:$,rule:_e,pasteEvent:et,dropEvent:tt}=b,{commands:nt,chain:rt,can:it}=new CommandManager({editor:g,state:_}),st=[];return _.doc.nodesBetween(j,$,(lt,at)=>{if(!lt.isTextblock||lt.type.spec.code)return;const ut=Math.max(j,at),dt=Math.min($,at+lt.content.size),ct=lt.textBetween(ut-at,dt-at,void 0,"￼");pasteRuleMatcherHandler(ct,_e.find,et).forEach(pt=>{if(pt.index===void 0)return;const mt=ut+pt.index+1,ft=mt+pt[0].length,gt={from:_.tr.mapping.map(mt),to:_.tr.mapping.map(ft)},xt=_e.handler({state:_,range:gt,match:pt,commands:nt,chain:rt,can:it,pasteEvent:et,dropEvent:tt});st.push(xt)})}),st.every(lt=>lt!==null)}const createClipboardPasteEvent=b=>{var g;const _=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(g=_.clipboardData)===null||g===void 0||g.setData("text/html",b),_};function pasteRulesPlugin(b){const{editor:g,rules:_}=b;let j=null,$=!1,_e=!1,et=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,tt=typeof DragEvent<"u"?new DragEvent("drop"):null;const nt=({state:it,from:st,to:ot,rule:lt,pasteEvt:at})=>{const ut=it.tr,dt=createChainableState({state:it,transaction:ut});if(!(!run({editor:g,state:dt,from:Math.max(st-1,0),to:ot.b-1,rule:lt,pasteEvent:at,dropEvent:tt})||!ut.steps.length))return tt=typeof DragEvent<"u"?new DragEvent("drop"):null,et=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ut};return _.map(it=>new Plugin({view(st){const ot=lt=>{var at;j=!((at=st.dom.parentElement)===null||at===void 0)&&at.contains(lt.target)?st.dom.parentElement:null};return window.addEventListener("dragstart",ot),{destroy(){window.removeEventListener("dragstart",ot)}}},props:{handleDOMEvents:{drop:(st,ot)=>(_e=j===st.dom.parentElement,tt=ot,!1),paste:(st,ot)=>{var lt;const at=(lt=ot.clipboardData)===null||lt===void 0?void 0:lt.getData("text/html");return et=ot,$=!!(at!=null&&at.includes("data-pm-slice")),!1}}},appendTransaction:(st,ot,lt)=>{const at=st[0],ut=at.getMeta("uiEvent")==="paste"&&!$,dt=at.getMeta("uiEvent")==="drop"&&!_e,ct=at.getMeta("applyPasteRules"),ht=!!ct;if(!ut&&!dt&&!ht)return;if(ht){const{from:ft,text:gt}=ct,xt=ft+gt.length,vt=createClipboardPasteEvent(gt);return nt({rule:it,state:lt,from:ft,to:{b:xt},pasteEvt:vt})}const pt=ot.doc.content.findDiffStart(lt.doc.content),mt=ot.doc.content.findDiffEnd(lt.doc.content);if(!(!isNumber$1(pt)||!mt||pt===mt.b))return nt({rule:it,state:lt,from:pt,to:mt,pasteEvt:et})}}))}function findDuplicates(b){const g=b.filter((_,j)=>b.indexOf(_)!==j);return Array.from(new Set(g))}class ExtensionManager{constructor(g,_){this.splittableMarks=[],this.editor=_,this.extensions=ExtensionManager.resolve(g),this.schema=getSchemaByResolvedExtensions(this.extensions,_),this.setupExtensions()}static resolve(g){const _=ExtensionManager.sort(ExtensionManager.flatten(g)),j=findDuplicates(_.map($=>$.name));return j.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${j.map($=>`'${$}'`).join(", ")}]. This can lead to issues.`),_}static flatten(g){return g.map(_=>{const j={name:_.name,options:_.options,storage:_.storage},$=getExtensionField(_,"addExtensions",j);return $?[_,...this.flatten($())]:_}).flat(10)}static sort(g){return g.sort((j,$)=>{const _e=getExtensionField(j,"priority")||100,et=getExtensionField($,"priority")||100;return _e>et?-1:_e<et?1:0})}get commands(){return this.extensions.reduce((g,_)=>{const j={name:_.name,options:_.options,storage:_.storage,editor:this.editor,type:getSchemaTypeByName(_.name,this.schema)},$=getExtensionField(_,"addCommands",j);return $?{...g,...$()}:g},{})}get plugins(){const{editor:g}=this,_=ExtensionManager.sort([...this.extensions].reverse()),j=[],$=[],_e=_.map(et=>{const tt={name:et.name,options:et.options,storage:et.storage,editor:g,type:getSchemaTypeByName(et.name,this.schema)},nt=[],rt=getExtensionField(et,"addKeyboardShortcuts",tt);let it={};if(et.type==="mark"&&getExtensionField(et,"exitable",tt)&&(it.ArrowRight=()=>Mark.handleExit({editor:g,mark:et})),rt){const ut=Object.fromEntries(Object.entries(rt()).map(([dt,ct])=>[dt,()=>ct({editor:g})]));it={...it,...ut}}const st=keymap(it);nt.push(st);const ot=getExtensionField(et,"addInputRules",tt);isExtensionRulesEnabled(et,g.options.enableInputRules)&&ot&&j.push(...ot());const lt=getExtensionField(et,"addPasteRules",tt);isExtensionRulesEnabled(et,g.options.enablePasteRules)&&lt&&$.push(...lt());const at=getExtensionField(et,"addProseMirrorPlugins",tt);if(at){const ut=at();nt.push(...ut)}return nt}).flat();return[inputRulesPlugin({editor:g,rules:j}),...pasteRulesPlugin({editor:g,rules:$}),..._e]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:g}=this,{nodeExtensions:_}=splitExtensions(this.extensions);return Object.fromEntries(_.filter(j=>!!getExtensionField(j,"addNodeView")).map(j=>{const $=this.attributes.filter(nt=>nt.type===j.name),_e={name:j.name,options:j.options,storage:j.storage,editor:g,type:getNodeType(j.name,this.schema)},et=getExtensionField(j,"addNodeView",_e);if(!et)return[];const tt=(nt,rt,it,st,ot)=>{const lt=getRenderedAttributes(nt,$);return et()({node:nt,view:rt,getPos:it,decorations:st,innerDecorations:ot,editor:g,extension:j,HTMLAttributes:lt})};return[j.name,tt]}))}setupExtensions(){this.extensions.forEach(g=>{var _;this.editor.extensionStorage[g.name]=g.storage;const j={name:g.name,options:g.options,storage:g.storage,editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)};g.type==="mark"&&(!((_=callOrReturn(getExtensionField(g,"keepOnSplit",j)))!==null&&_!==void 0)||_)&&this.splittableMarks.push(g.name);const $=getExtensionField(g,"onBeforeCreate",j),_e=getExtensionField(g,"onCreate",j),et=getExtensionField(g,"onUpdate",j),tt=getExtensionField(g,"onSelectionUpdate",j),nt=getExtensionField(g,"onTransaction",j),rt=getExtensionField(g,"onFocus",j),it=getExtensionField(g,"onBlur",j),st=getExtensionField(g,"onDestroy",j);$&&this.editor.on("beforeCreate",$),_e&&this.editor.on("create",_e),et&&this.editor.on("update",et),tt&&this.editor.on("selectionUpdate",tt),nt&&this.editor.on("transaction",nt),rt&&this.editor.on("focus",rt),it&&this.editor.on("blur",it),st&&this.editor.on("destroy",st)})}}class Extension{constructor(g={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...g},this.name=this.config.name,g.defaultOptions&&Object.keys(g.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(g={}){return new Extension(g)}configure(g={}){const _=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,g)});return _.name=this.name,_.parent=this.parent,_}extend(g={}){const _=new Extension({...this.config,...g});return _.parent=this,this.child=_,_.name=g.name?g.name:_.parent.name,g.defaultOptions&&Object.keys(g.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${_.name}".`),_.options=callOrReturn(getExtensionField(_,"addOptions",{name:_.name})),_.storage=callOrReturn(getExtensionField(_,"addStorage",{name:_.name,options:_.options})),_}}function getTextBetween(b,g,_){const{from:j,to:$}=g,{blockSeparator:_e=`

`,textSerializers:et={}}=_||{};let tt="";return b.nodesBetween(j,$,(nt,rt,it,st)=>{var ot;nt.isBlock&&rt>j&&(tt+=_e);const lt=et==null?void 0:et[nt.type.name];if(lt)return it&&(tt+=lt({node:nt,pos:rt,parent:it,index:st,range:g})),!1;nt.isText&&(tt+=(ot=nt==null?void 0:nt.text)===null||ot===void 0?void 0:ot.slice(Math.max(j,rt)-rt,$-rt))}),tt}function getTextSerializersFromSchema(b){return Object.fromEntries(Object.entries(b.nodes).filter(([,g])=>g.spec.toText).map(([g,_])=>[g,_.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:b}=this,{state:g,schema:_}=b,{doc:j,selection:$}=g,{ranges:_e}=$,et=Math.min(..._e.map(it=>it.$from.pos)),tt=Math.max(..._e.map(it=>it.$to.pos)),nt=getTextSerializersFromSchema(_);return getTextBetween(j,{from:et,to:tt},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:nt})}}})]}}),blur=()=>({editor:b,view:g})=>(requestAnimationFrame(()=>{var _;b.isDestroyed||(g.dom.blur(),(_=window==null?void 0:window.getSelection())===null||_===void 0||_.removeAllRanges())}),!0),clearContent=(b=!1)=>({commands:g})=>g.setContent("",b),clearNodes=()=>({state:b,tr:g,dispatch:_})=>{const{selection:j}=g,{ranges:$}=j;return _&&$.forEach(({$from:_e,$to:et})=>{b.doc.nodesBetween(_e.pos,et.pos,(tt,nt)=>{if(tt.type.isText)return;const{doc:rt,mapping:it}=g,st=rt.resolve(it.map(nt)),ot=rt.resolve(it.map(nt+tt.nodeSize)),lt=st.blockRange(ot);if(!lt)return;const at=liftTarget(lt);if(tt.type.isTextblock){const{defaultType:ut}=st.parent.contentMatchAt(st.index());g.setNodeMarkup(lt.start,ut)}(at||at===0)&&g.lift(lt,at)})}),!0},command=b=>g=>b(g),createParagraphNear=()=>({state:b,dispatch:g})=>createParagraphNear$1(b,g),cut=(b,g)=>({editor:_,tr:j})=>{const{state:$}=_,_e=$.doc.slice(b.from,b.to);j.deleteRange(b.from,b.to);const et=j.mapping.map(g);return j.insert(et,_e.content),j.setSelection(new TextSelection(j.doc.resolve(et-1))),!0},deleteCurrentNode=()=>({tr:b,dispatch:g})=>{const{selection:_}=b,j=_.$anchor.node();if(j.content.size>0)return!1;const $=b.selection.$anchor;for(let _e=$.depth;_e>0;_e-=1)if($.node(_e).type===j.type){if(g){const tt=$.before(_e),nt=$.after(_e);b.delete(tt,nt).scrollIntoView()}return!0}return!1},deleteNode=b=>({tr:g,state:_,dispatch:j})=>{const $=getNodeType(b,_.schema),_e=g.selection.$anchor;for(let et=_e.depth;et>0;et-=1)if(_e.node(et).type===$){if(j){const nt=_e.before(et),rt=_e.after(et);g.delete(nt,rt).scrollIntoView()}return!0}return!1},deleteRange=b=>({tr:g,dispatch:_})=>{const{from:j,to:$}=b;return _&&g.delete(j,$),!0},deleteSelection=()=>({state:b,dispatch:g})=>deleteSelection$1(b,g),enter=()=>({commands:b})=>b.keyboardShortcut("Enter"),exitCode=()=>({state:b,dispatch:g})=>exitCode$1(b,g);function objectIncludes(b,g,_={strict:!0}){const j=Object.keys(g);return j.length?j.every($=>_.strict?g[$]===b[$]:isRegExp$1(g[$])?g[$].test(b[$]):g[$]===b[$]):!0}function findMarkInSet(b,g,_={}){return b.find(j=>j.type===g&&objectIncludes(j.attrs,_))}function isMarkInSet(b,g,_={}){return!!findMarkInSet(b,g,_)}function getMarkRange(b,g,_={}){if(!b||!g)return;let j=b.parent.childAfter(b.parentOffset);if(b.parentOffset===j.offset&&j.offset!==0&&(j=b.parent.childBefore(b.parentOffset)),!j.node)return;const $=findMarkInSet([...j.node.marks],g,_);if(!$)return;let _e=j.index,et=b.start()+j.offset,tt=_e+1,nt=et+j.node.nodeSize;for(findMarkInSet([...j.node.marks],g,_);_e>0&&$.isInSet(b.parent.child(_e-1).marks);)_e-=1,et-=b.parent.child(_e).nodeSize;for(;tt<b.parent.childCount&&isMarkInSet([...b.parent.child(tt).marks],g,_);)nt+=b.parent.child(tt).nodeSize,tt+=1;return{from:et,to:nt}}function getMarkType(b,g){if(typeof b=="string"){if(!g.marks[b])throw Error(`There is no mark type named '${b}'. Maybe you forgot to add the extension?`);return g.marks[b]}return b}const extendMarkRange=(b,g={})=>({tr:_,state:j,dispatch:$})=>{const _e=getMarkType(b,j.schema),{doc:et,selection:tt}=_,{$from:nt,from:rt,to:it}=tt;if($){const st=getMarkRange(nt,_e,g);if(st&&st.from<=rt&&st.to>=it){const ot=TextSelection.create(et,st.from,st.to);_.setSelection(ot)}}return!0},first=b=>g=>{const _=typeof b=="function"?b(g):b;for(let j=0;j<_.length;j+=1)if(_[j](g))return!0;return!1};function isTextSelection(b){return b instanceof TextSelection}function minMax(b=0,g=0,_=0){return Math.min(Math.max(b,g),_)}function resolveFocusPosition(b,g=null){if(!g)return null;const _=Selection.atStart(b),j=Selection.atEnd(b);if(g==="start"||g===!0)return _;if(g==="end")return j;const $=_.from,_e=j.to;return g==="all"?TextSelection.create(b,minMax(0,$,_e),minMax(b.content.size,$,_e)):TextSelection.create(b,minMax(g,$,_e),minMax(g,$,_e))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(b=null,g={})=>({editor:_,view:j,tr:$,dispatch:_e})=>{g={scrollIntoView:!0,...g};const et=()=>{isiOS()&&j.dom.focus(),requestAnimationFrame(()=>{_.isDestroyed||(j.focus(),g!=null&&g.scrollIntoView&&_.commands.scrollIntoView())})};if(j.hasFocus()&&b===null||b===!1)return!0;if(_e&&b===null&&!isTextSelection(_.state.selection))return et(),!0;const tt=resolveFocusPosition($.doc,b)||_.state.selection,nt=_.state.selection.eq(tt);return _e&&(nt||$.setSelection(tt),nt&&$.storedMarks&&$.setStoredMarks($.storedMarks),et()),!0},forEach$1=(b,g)=>_=>b.every((j,$)=>g(j,{..._,index:$})),insertContent=(b,g)=>({tr:_,commands:j})=>j.insertContentAt({from:_.selection.from,to:_.selection.to},b,g),removeWhitespaces=b=>{const g=b.childNodes;for(let _=g.length-1;_>=0;_-=1){const j=g[_];j.nodeType===3&&j.nodeValue&&/^(\n\s\s|\n)$/.test(j.nodeValue)?b.removeChild(j):j.nodeType===1&&removeWhitespaces(j)}return b};function elementFromString(b){const g=`<body>${b}</body>`,_=new window.DOMParser().parseFromString(g,"text/html").body;return removeWhitespaces(_)}function createNodeFromContent(b,g,_){_={slice:!0,parseOptions:{},..._};const j=typeof b=="object"&&b!==null,$=typeof b=="string";if(j)try{if(Array.isArray(b)&&b.length>0)return Fragment.fromArray(b.map(tt=>g.nodeFromJSON(tt)));const et=g.nodeFromJSON(b);return _.errorOnInvalidContent&&et.check(),et}catch(_e){if(_.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:_e});return console.warn("[tiptap warn]: Invalid content.","Passed value:",b,"Error:",_e),createNodeFromContent("",g,_)}if($){if(_.errorOnInvalidContent){let et=!1,tt="";const nt=new Schema({topNode:g.spec.topNode,marks:g.spec.marks,nodes:g.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:rt=>(et=!0,tt=typeof rt=="string"?rt:rt.outerHTML,null)}]}})});if(_.slice?DOMParser.fromSchema(nt).parseSlice(elementFromString(b),_.parseOptions):DOMParser.fromSchema(nt).parse(elementFromString(b),_.parseOptions),_.errorOnInvalidContent&&et)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${tt}`)})}const _e=DOMParser.fromSchema(g);return _.slice?_e.parseSlice(elementFromString(b),_.parseOptions).content:_e.parse(elementFromString(b),_.parseOptions)}return createNodeFromContent("",g,_)}function selectionToInsertionEnd(b,g,_){const j=b.steps.length-1;if(j<g)return;const $=b.steps[j];if(!($ instanceof ReplaceStep||$ instanceof ReplaceAroundStep))return;const _e=b.mapping.maps[j];let et=0;_e.forEach((tt,nt,rt,it)=>{et===0&&(et=it)}),b.setSelection(Selection.near(b.doc.resolve(et),_))}const isFragment=b=>!("type"in b),insertContentAt=(b,g,_)=>({tr:j,dispatch:$,editor:_e})=>{var et;if($){_={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,..._};let tt;try{tt=createNodeFromContent(g,_e.schema,{parseOptions:{preserveWhitespace:"full",..._.parseOptions},errorOnInvalidContent:(et=_.errorOnInvalidContent)!==null&&et!==void 0?et:_e.options.enableContentCheck})}catch(at){return _e.emit("contentError",{editor:_e,error:at,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:nt,to:rt}=typeof b=="number"?{from:b,to:b}:{from:b.from,to:b.to},it=!0,st=!0;if((isFragment(tt)?tt:[tt]).forEach(at=>{at.check(),it=it?at.isText&&at.marks.length===0:!1,st=st?at.isBlock:!1}),nt===rt&&st){const{parent:at}=j.doc.resolve(nt);at.isTextblock&&!at.type.spec.code&&!at.childCount&&(nt-=1,rt+=1)}let lt;it?(Array.isArray(g)?lt=g.map(at=>at.text||"").join(""):typeof g=="object"&&g&&g.text?lt=g.text:lt=g,j.insertText(lt,nt,rt)):(lt=tt,j.replaceWith(nt,rt,lt)),_.updateSelection&&selectionToInsertionEnd(j,j.steps.length-1,-1),_.applyInputRules&&j.setMeta("applyInputRules",{from:nt,text:lt}),_.applyPasteRules&&j.setMeta("applyPasteRules",{from:nt,text:lt})}return!0},joinUp=()=>({state:b,dispatch:g})=>joinUp$1(b,g),joinDown=()=>({state:b,dispatch:g})=>joinDown$1(b,g),joinBackward=()=>({state:b,dispatch:g})=>joinBackward$1(b,g),joinForward=()=>({state:b,dispatch:g})=>joinForward$1(b,g),joinItemBackward=()=>({state:b,dispatch:g,tr:_})=>{try{const j=joinPoint(b.doc,b.selection.$from.pos,-1);return j==null?!1:(_.join(j,2),g&&g(_),!0)}catch{return!1}},joinItemForward=()=>({state:b,dispatch:g,tr:_})=>{try{const j=joinPoint(b.doc,b.selection.$from.pos,1);return j==null?!1:(_.join(j,2),g&&g(_),!0)}catch{return!1}},joinTextblockBackward=()=>({state:b,dispatch:g})=>joinTextblockBackward$1(b,g),joinTextblockForward=()=>({state:b,dispatch:g})=>joinTextblockForward$1(b,g);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(b){const g=b.split(/-(?!$)/);let _=g[g.length-1];_==="Space"&&(_=" ");let j,$,_e,et;for(let tt=0;tt<g.length-1;tt+=1){const nt=g[tt];if(/^(cmd|meta|m)$/i.test(nt))et=!0;else if(/^a(lt)?$/i.test(nt))j=!0;else if(/^(c|ctrl|control)$/i.test(nt))$=!0;else if(/^s(hift)?$/i.test(nt))_e=!0;else if(/^mod$/i.test(nt))isiOS()||isMacOS()?et=!0:$=!0;else throw new Error(`Unrecognized modifier name: ${nt}`)}return j&&(_=`Alt-${_}`),$&&(_=`Ctrl-${_}`),et&&(_=`Meta-${_}`),_e&&(_=`Shift-${_}`),_}const keyboardShortcut=b=>({editor:g,view:_,tr:j,dispatch:$})=>{const _e=normalizeKeyName(b).split(/-(?!$)/),et=_e.find(rt=>!["Alt","Ctrl","Meta","Shift"].includes(rt)),tt=new KeyboardEvent("keydown",{key:et==="Space"?" ":et,altKey:_e.includes("Alt"),ctrlKey:_e.includes("Ctrl"),metaKey:_e.includes("Meta"),shiftKey:_e.includes("Shift"),bubbles:!0,cancelable:!0}),nt=g.captureTransaction(()=>{_.someProp("handleKeyDown",rt=>rt(_,tt))});return nt==null||nt.steps.forEach(rt=>{const it=rt.map(j.mapping);it&&$&&j.maybeStep(it)}),!0};function isNodeActive(b,g,_={}){const{from:j,to:$,empty:_e}=b.selection,et=g?getNodeType(g,b.schema):null,tt=[];b.doc.nodesBetween(j,$,(st,ot)=>{if(st.isText)return;const lt=Math.max(j,ot),at=Math.min($,ot+st.nodeSize);tt.push({node:st,from:lt,to:at})});const nt=$-j,rt=tt.filter(st=>et?et.name===st.node.type.name:!0).filter(st=>objectIncludes(st.node.attrs,_,{strict:!1}));return _e?!!rt.length:rt.reduce((st,ot)=>st+ot.to-ot.from,0)>=nt}const lift=(b,g={})=>({state:_,dispatch:j})=>{const $=getNodeType(b,_.schema);return isNodeActive(_,$,g)?lift$1(_,j):!1},liftEmptyBlock=()=>({state:b,dispatch:g})=>liftEmptyBlock$1(b,g),liftListItem=b=>({state:g,dispatch:_})=>{const j=getNodeType(b,g.schema);return liftListItem$1(j)(g,_)},newlineInCode=()=>({state:b,dispatch:g})=>newlineInCode$1(b,g);function getSchemaTypeNameByName(b,g){return g.nodes[b]?"node":g.marks[b]?"mark":null}function deleteProps$1(b,g){const _=typeof g=="string"?[g]:g;return Object.keys(b).reduce((j,$)=>(_.includes($)||(j[$]=b[$]),j),{})}const resetAttributes=(b,g)=>({tr:_,state:j,dispatch:$})=>{let _e=null,et=null;const tt=getSchemaTypeNameByName(typeof b=="string"?b:b.name,j.schema);return tt?(tt==="node"&&(_e=getNodeType(b,j.schema)),tt==="mark"&&(et=getMarkType(b,j.schema)),$&&_.selection.ranges.forEach(nt=>{j.doc.nodesBetween(nt.$from.pos,nt.$to.pos,(rt,it)=>{_e&&_e===rt.type&&_.setNodeMarkup(it,void 0,deleteProps$1(rt.attrs,g)),et&&rt.marks.length&&rt.marks.forEach(st=>{et===st.type&&_.addMark(it,it+rt.nodeSize,et.create(deleteProps$1(st.attrs,g)))})})}),!0):!1},scrollIntoView=()=>({tr:b,dispatch:g})=>(g&&b.scrollIntoView(),!0),selectAll=()=>({tr:b,commands:g})=>g.setTextSelection({from:0,to:b.doc.content.size}),selectNodeBackward=()=>({state:b,dispatch:g})=>selectNodeBackward$1(b,g),selectNodeForward=()=>({state:b,dispatch:g})=>selectNodeForward$1(b,g),selectParentNode=()=>({state:b,dispatch:g})=>selectParentNode$1(b,g),selectTextblockEnd=()=>({state:b,dispatch:g})=>selectTextblockEnd$1(b,g),selectTextblockStart=()=>({state:b,dispatch:g})=>selectTextblockStart$1(b,g);function createDocument(b,g,_={},j={}){return createNodeFromContent(b,g,{slice:!1,parseOptions:_,errorOnInvalidContent:j.errorOnInvalidContent})}const setContent=(b,g=!1,_={},j={})=>({editor:$,tr:_e,dispatch:et,commands:tt})=>{var nt,rt;const{doc:it}=_e;if(_.preserveWhitespace!=="full"){const st=createDocument(b,$.schema,_,{errorOnInvalidContent:(nt=j.errorOnInvalidContent)!==null&&nt!==void 0?nt:$.options.enableContentCheck});return et&&_e.replaceWith(0,it.content.size,st).setMeta("preventUpdate",!g),!0}return et&&_e.setMeta("preventUpdate",!g),tt.insertContentAt({from:0,to:it.content.size},b,{parseOptions:_,errorOnInvalidContent:(rt=j.errorOnInvalidContent)!==null&&rt!==void 0?rt:$.options.enableContentCheck})};function getMarkAttributes(b,g){const _=getMarkType(g,b.schema),{from:j,to:$,empty:_e}=b.selection,et=[];_e?(b.storedMarks&&et.push(...b.storedMarks),et.push(...b.selection.$head.marks())):b.doc.nodesBetween(j,$,nt=>{et.push(...nt.marks)});const tt=et.find(nt=>nt.type.name===_.name);return tt?{...tt.attrs}:{}}function defaultBlockAt(b){for(let g=0;g<b.edgeCount;g+=1){const{type:_}=b.edge(g);if(_.isTextblock&&!_.hasRequiredAttrs())return _}return null}function findParentNodeClosestToPos(b,g){for(let _=b.depth;_>0;_-=1){const j=b.node(_);if(g(j))return{pos:_>0?b.before(_):0,start:b.start(_),depth:_,node:j}}}function findParentNode(b){return g=>findParentNodeClosestToPos(g.$from,b)}function getHTMLFromFragment(b,g){const _=DOMSerializer.fromSchema(g).serializeFragment(b),$=document.implementation.createHTMLDocument().createElement("div");return $.appendChild(_),$.innerHTML}function getText(b,g){const _={from:0,to:b.content.size};return getTextBetween(b,_,g)}function getNodeAttributes(b,g){const _=getNodeType(g,b.schema),{from:j,to:$}=b.selection,_e=[];b.doc.nodesBetween(j,$,tt=>{_e.push(tt)});const et=_e.reverse().find(tt=>tt.type.name===_.name);return et?{...et.attrs}:{}}function getAttributes(b,g){const _=getSchemaTypeNameByName(typeof g=="string"?g:g.name,b.schema);return _==="node"?getNodeAttributes(b,g):_==="mark"?getMarkAttributes(b,g):{}}function getMarksBetween(b,g,_){const j=[];return b===g?_.resolve(b).marks().forEach($=>{const _e=_.resolve(b),et=getMarkRange(_e,$.type);et&&j.push({mark:$,...et})}):_.nodesBetween(b,g,($,_e)=>{!$||($==null?void 0:$.nodeSize)===void 0||j.push(...$.marks.map(et=>({from:_e,to:_e+$.nodeSize,mark:et})))}),j}function getSplittedAttributes(b,g,_){return Object.fromEntries(Object.entries(_).filter(([j])=>{const $=b.find(_e=>_e.type===g&&_e.name===j);return $?$.attribute.keepOnSplit:!1}))}function isMarkActive(b,g,_={}){const{empty:j,ranges:$}=b.selection,_e=g?getMarkType(g,b.schema):null;if(j)return!!(b.storedMarks||b.selection.$from.marks()).filter(st=>_e?_e.name===st.type.name:!0).find(st=>objectIncludes(st.attrs,_,{strict:!1}));let et=0;const tt=[];if($.forEach(({$from:st,$to:ot})=>{const lt=st.pos,at=ot.pos;b.doc.nodesBetween(lt,at,(ut,dt)=>{if(!ut.isText&&!ut.marks.length)return;const ct=Math.max(lt,dt),ht=Math.min(at,dt+ut.nodeSize),pt=ht-ct;et+=pt,tt.push(...ut.marks.map(mt=>({mark:mt,from:ct,to:ht})))})}),et===0)return!1;const nt=tt.filter(st=>_e?_e.name===st.mark.type.name:!0).filter(st=>objectIncludes(st.mark.attrs,_,{strict:!1})).reduce((st,ot)=>st+ot.to-ot.from,0),rt=tt.filter(st=>_e?st.mark.type!==_e&&st.mark.type.excludes(_e):!0).reduce((st,ot)=>st+ot.to-ot.from,0);return(nt>0?nt+rt:nt)>=et}function isActive(b,g,_={}){if(!g)return isNodeActive(b,null,_)||isMarkActive(b,null,_);const j=getSchemaTypeNameByName(g,b.schema);return j==="node"?isNodeActive(b,g,_):j==="mark"?isMarkActive(b,g,_):!1}function isList(b,g){const{nodeExtensions:_}=splitExtensions(g),j=_.find(et=>et.name===b);if(!j)return!1;const $={name:j.name,options:j.options,storage:j.storage},_e=callOrReturn(getExtensionField(j,"group",$));return typeof _e!="string"?!1:_e.split(" ").includes("list")}function isNodeEmpty(b,{checkChildren:g=!0,ignoreWhitespace:_=!1}={}){var j;if(_){if(b.type.name==="hardBreak")return!0;if(b.isText)return/^\s*$/m.test((j=b.text)!==null&&j!==void 0?j:"")}if(b.isText)return!b.text;if(b.isAtom||b.isLeaf)return!1;if(b.content.childCount===0)return!0;if(g){let $=!0;return b.content.forEach(_e=>{$!==!1&&(isNodeEmpty(_e,{ignoreWhitespace:_,checkChildren:g})||($=!1))}),$}return!1}function isNodeSelection(b){return b instanceof NodeSelection}function canSetMark(b,g,_){var j;const{selection:$}=g;let _e=null;if(isTextSelection($)&&(_e=$.$cursor),_e){const tt=(j=b.storedMarks)!==null&&j!==void 0?j:_e.marks();return!!_.isInSet(tt)||!tt.some(nt=>nt.type.excludes(_))}const{ranges:et}=$;return et.some(({$from:tt,$to:nt})=>{let rt=tt.depth===0?b.doc.inlineContent&&b.doc.type.allowsMarkType(_):!1;return b.doc.nodesBetween(tt.pos,nt.pos,(it,st,ot)=>{if(rt)return!1;if(it.isInline){const lt=!ot||ot.type.allowsMarkType(_),at=!!_.isInSet(it.marks)||!it.marks.some(ut=>ut.type.excludes(_));rt=lt&&at}return!rt}),rt})}const setMark=(b,g={})=>({tr:_,state:j,dispatch:$})=>{const{selection:_e}=_,{empty:et,ranges:tt}=_e,nt=getMarkType(b,j.schema);if($)if(et){const rt=getMarkAttributes(j,nt);_.addStoredMark(nt.create({...rt,...g}))}else tt.forEach(rt=>{const it=rt.$from.pos,st=rt.$to.pos;j.doc.nodesBetween(it,st,(ot,lt)=>{const at=Math.max(lt,it),ut=Math.min(lt+ot.nodeSize,st);ot.marks.find(ct=>ct.type===nt)?ot.marks.forEach(ct=>{nt===ct.type&&_.addMark(at,ut,nt.create({...ct.attrs,...g}))}):_.addMark(at,ut,nt.create(g))})});return canSetMark(j,_,nt)},setMeta=(b,g)=>({tr:_})=>(_.setMeta(b,g),!0),setNode=(b,g={})=>({state:_,dispatch:j,chain:$})=>{const _e=getNodeType(b,_.schema);return _e.isTextblock?$().command(({commands:et})=>setBlockType(_e,g)(_)?!0:et.clearNodes()).command(({state:et})=>setBlockType(_e,g)(et,j)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=b=>({tr:g,dispatch:_})=>{if(_){const{doc:j}=g,$=minMax(b,0,j.content.size),_e=NodeSelection.create(j,$);g.setSelection(_e)}return!0},setTextSelection=b=>({tr:g,dispatch:_})=>{if(_){const{doc:j}=g,{from:$,to:_e}=typeof b=="number"?{from:b,to:b}:b,et=TextSelection.atStart(j).from,tt=TextSelection.atEnd(j).to,nt=minMax($,et,tt),rt=minMax(_e,et,tt),it=TextSelection.create(j,nt,rt);g.setSelection(it)}return!0},sinkListItem=b=>({state:g,dispatch:_})=>{const j=getNodeType(b,g.schema);return sinkListItem$1(j)(g,_)};function ensureMarks(b,g){const _=b.storedMarks||b.selection.$to.parentOffset&&b.selection.$from.marks();if(_){const j=_.filter($=>g==null?void 0:g.includes($.type.name));b.tr.ensureMarks(j)}}const splitBlock=({keepMarks:b=!0}={})=>({tr:g,state:_,dispatch:j,editor:$})=>{const{selection:_e,doc:et}=g,{$from:tt,$to:nt}=_e,rt=$.extensionManager.attributes,it=getSplittedAttributes(rt,tt.node().type.name,tt.node().attrs);if(_e instanceof NodeSelection&&_e.node.isBlock)return!tt.parentOffset||!canSplit(et,tt.pos)?!1:(j&&(b&&ensureMarks(_,$.extensionManager.splittableMarks),g.split(tt.pos).scrollIntoView()),!0);if(!tt.parent.isBlock)return!1;const st=nt.parentOffset===nt.parent.content.size,ot=tt.depth===0?void 0:defaultBlockAt(tt.node(-1).contentMatchAt(tt.indexAfter(-1)));let lt=st&&ot?[{type:ot,attrs:it}]:void 0,at=canSplit(g.doc,g.mapping.map(tt.pos),1,lt);if(!lt&&!at&&canSplit(g.doc,g.mapping.map(tt.pos),1,ot?[{type:ot}]:void 0)&&(at=!0,lt=ot?[{type:ot,attrs:it}]:void 0),j){if(at&&(_e instanceof TextSelection&&g.deleteSelection(),g.split(g.mapping.map(tt.pos),1,lt),ot&&!st&&!tt.parentOffset&&tt.parent.type!==ot)){const ut=g.mapping.map(tt.before()),dt=g.doc.resolve(ut);tt.node(-1).canReplaceWith(dt.index(),dt.index()+1,ot)&&g.setNodeMarkup(g.mapping.map(tt.before()),ot)}b&&ensureMarks(_,$.extensionManager.splittableMarks),g.scrollIntoView()}return at},splitListItem=(b,g={})=>({tr:_,state:j,dispatch:$,editor:_e})=>{var et;const tt=getNodeType(b,j.schema),{$from:nt,$to:rt}=j.selection,it=j.selection.node;if(it&&it.isBlock||nt.depth<2||!nt.sameParent(rt))return!1;const st=nt.node(-1);if(st.type!==tt)return!1;const ot=_e.extensionManager.attributes;if(nt.parent.content.size===0&&nt.node(-1).childCount===nt.indexAfter(-1)){if(nt.depth===2||nt.node(-3).type!==tt||nt.index(-2)!==nt.node(-2).childCount-1)return!1;if($){let ct=Fragment.empty;const ht=nt.index(-1)?1:nt.index(-2)?2:3;for(let vt=nt.depth-ht;vt>=nt.depth-3;vt-=1)ct=Fragment.from(nt.node(vt).copy(ct));const pt=nt.indexAfter(-1)<nt.node(-2).childCount?1:nt.indexAfter(-2)<nt.node(-3).childCount?2:3,mt={...getSplittedAttributes(ot,nt.node().type.name,nt.node().attrs),...g},ft=((et=tt.contentMatch.defaultType)===null||et===void 0?void 0:et.createAndFill(mt))||void 0;ct=ct.append(Fragment.from(tt.createAndFill(null,ft)||void 0));const gt=nt.before(nt.depth-(ht-1));_.replace(gt,nt.after(-pt),new Slice(ct,4-ht,0));let xt=-1;_.doc.nodesBetween(gt,_.doc.content.size,(vt,St)=>{if(xt>-1)return!1;vt.isTextblock&&vt.content.size===0&&(xt=St+1)}),xt>-1&&_.setSelection(TextSelection.near(_.doc.resolve(xt))),_.scrollIntoView()}return!0}const lt=rt.pos===nt.end()?st.contentMatchAt(0).defaultType:null,at={...getSplittedAttributes(ot,st.type.name,st.attrs),...g},ut={...getSplittedAttributes(ot,nt.node().type.name,nt.node().attrs),...g};_.delete(nt.pos,rt.pos);const dt=lt?[{type:tt,attrs:at},{type:lt,attrs:ut}]:[{type:tt,attrs:at}];if(!canSplit(_.doc,nt.pos,2))return!1;if($){const{selection:ct,storedMarks:ht}=j,{splittableMarks:pt}=_e.extensionManager,mt=ht||ct.$to.parentOffset&&ct.$from.marks();if(_.split(nt.pos,2,dt).scrollIntoView(),!mt||!$)return!0;const ft=mt.filter(gt=>pt.includes(gt.type.name));_.ensureMarks(ft)}return!0},joinListBackwards=(b,g)=>{const _=findParentNode(et=>et.type===g)(b.selection);if(!_)return!0;const j=b.doc.resolve(Math.max(0,_.pos-1)).before(_.depth);if(j===void 0)return!0;const $=b.doc.nodeAt(j);return _.node.type===($==null?void 0:$.type)&&canJoin(b.doc,_.pos)&&b.join(_.pos),!0},joinListForwards=(b,g)=>{const _=findParentNode(et=>et.type===g)(b.selection);if(!_)return!0;const j=b.doc.resolve(_.start).after(_.depth);if(j===void 0)return!0;const $=b.doc.nodeAt(j);return _.node.type===($==null?void 0:$.type)&&canJoin(b.doc,j)&&b.join(j),!0},toggleList=(b,g,_,j={})=>({editor:$,tr:_e,state:et,dispatch:tt,chain:nt,commands:rt,can:it})=>{const{extensions:st,splittableMarks:ot}=$.extensionManager,lt=getNodeType(b,et.schema),at=getNodeType(g,et.schema),{selection:ut,storedMarks:dt}=et,{$from:ct,$to:ht}=ut,pt=ct.blockRange(ht),mt=dt||ut.$to.parentOffset&&ut.$from.marks();if(!pt)return!1;const ft=findParentNode(gt=>isList(gt.type.name,st))(ut);if(pt.depth>=1&&ft&&pt.depth-ft.depth<=1){if(ft.node.type===lt)return rt.liftListItem(at);if(isList(ft.node.type.name,st)&&lt.validContent(ft.node.content)&&tt)return nt().command(()=>(_e.setNodeMarkup(ft.pos,lt),!0)).command(()=>joinListBackwards(_e,lt)).command(()=>joinListForwards(_e,lt)).run()}return!_||!mt||!tt?nt().command(()=>it().wrapInList(lt,j)?!0:rt.clearNodes()).wrapInList(lt,j).command(()=>joinListBackwards(_e,lt)).command(()=>joinListForwards(_e,lt)).run():nt().command(()=>{const gt=it().wrapInList(lt,j),xt=mt.filter(vt=>ot.includes(vt.type.name));return _e.ensureMarks(xt),gt?!0:rt.clearNodes()}).wrapInList(lt,j).command(()=>joinListBackwards(_e,lt)).command(()=>joinListForwards(_e,lt)).run()},toggleMark=(b,g={},_={})=>({state:j,commands:$})=>{const{extendEmptyMarkRange:_e=!1}=_,et=getMarkType(b,j.schema);return isMarkActive(j,et,g)?$.unsetMark(et,{extendEmptyMarkRange:_e}):$.setMark(et,g)},toggleNode=(b,g,_={})=>({state:j,commands:$})=>{const _e=getNodeType(b,j.schema),et=getNodeType(g,j.schema),tt=isNodeActive(j,_e,_);let nt;return j.selection.$anchor.sameParent(j.selection.$head)&&(nt=j.selection.$anchor.parent.attrs),tt?$.setNode(et,nt):$.setNode(_e,{...nt,..._})},toggleWrap=(b,g={})=>({state:_,commands:j})=>{const $=getNodeType(b,_.schema);return isNodeActive(_,$,g)?j.lift($):j.wrapIn($,g)},undoInputRule=()=>({state:b,dispatch:g})=>{const _=b.plugins;for(let j=0;j<_.length;j+=1){const $=_[j];let _e;if($.spec.isInputRules&&(_e=$.getState(b))){if(g){const et=b.tr,tt=_e.transform;for(let nt=tt.steps.length-1;nt>=0;nt-=1)et.step(tt.steps[nt].invert(tt.docs[nt]));if(_e.text){const nt=et.doc.resolve(_e.from).marks();et.replaceWith(_e.from,_e.to,b.schema.text(_e.text,nt))}else et.delete(_e.from,_e.to)}return!0}}return!1},unsetAllMarks=()=>({tr:b,dispatch:g})=>{const{selection:_}=b,{empty:j,ranges:$}=_;return j||g&&$.forEach(_e=>{b.removeMark(_e.$from.pos,_e.$to.pos)}),!0},unsetMark=(b,g={})=>({tr:_,state:j,dispatch:$})=>{var _e;const{extendEmptyMarkRange:et=!1}=g,{selection:tt}=_,nt=getMarkType(b,j.schema),{$from:rt,empty:it,ranges:st}=tt;if(!$)return!0;if(it&&et){let{from:ot,to:lt}=tt;const at=(_e=rt.marks().find(dt=>dt.type===nt))===null||_e===void 0?void 0:_e.attrs,ut=getMarkRange(rt,nt,at);ut&&(ot=ut.from,lt=ut.to),_.removeMark(ot,lt,nt)}else st.forEach(ot=>{_.removeMark(ot.$from.pos,ot.$to.pos,nt)});return _.removeStoredMark(nt),!0},updateAttributes=(b,g={})=>({tr:_,state:j,dispatch:$})=>{let _e=null,et=null;const tt=getSchemaTypeNameByName(typeof b=="string"?b:b.name,j.schema);return tt?(tt==="node"&&(_e=getNodeType(b,j.schema)),tt==="mark"&&(et=getMarkType(b,j.schema)),$&&_.selection.ranges.forEach(nt=>{const rt=nt.$from.pos,it=nt.$to.pos;j.doc.nodesBetween(rt,it,(st,ot)=>{_e&&_e===st.type&&_.setNodeMarkup(ot,void 0,{...st.attrs,...g}),et&&st.marks.length&&st.marks.forEach(lt=>{if(et===lt.type){const at=Math.max(ot,rt),ut=Math.min(ot+st.nodeSize,it);_.addMark(at,ut,et.create({...lt.attrs,...g}))}})})}),!0):!1},wrapIn=(b,g={})=>({state:_,dispatch:j})=>{const $=getNodeType(b,_.schema);return wrapIn$1($,g)(_,j)},wrapInList=(b,g={})=>({state:_,dispatch:j})=>{const $=getNodeType(b,_.schema);return wrapInList$1($,g)(_,j)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach:forEach$1,insertContent,insertContentAt,joinBackward,joinDown,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,joinUp,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(b,g,_,j)=>{this.editor.emit("drop",{editor:this.editor,event:g,slice:_,moved:j})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:b}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(g,_)=>{b.isFocused=!0;const j=b.state.tr.setMeta("focus",{event:_}).setMeta("addToHistory",!1);return g.dispatch(j),!1},blur:(g,_)=>{b.isFocused=!1;const j=b.state.tr.setMeta("blur",{event:_}).setMeta("addToHistory",!1);return g.dispatch(j),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const b=()=>this.editor.commands.first(({commands:et})=>[()=>et.undoInputRule(),()=>et.command(({tr:tt})=>{const{selection:nt,doc:rt}=tt,{empty:it,$anchor:st}=nt,{pos:ot,parent:lt}=st,at=st.parent.isTextblock&&ot>0?tt.doc.resolve(ot-1):st,ut=at.parent.type.spec.isolating,dt=st.pos-st.parentOffset,ct=ut&&at.parent.childCount===1?dt===st.pos:Selection.atStart(rt).from===ot;return!it||!lt.type.isTextblock||lt.textContent.length||!ct||ct&&st.parent.type.name==="paragraph"?!1:et.clearNodes()}),()=>et.deleteSelection(),()=>et.joinBackward(),()=>et.selectNodeBackward()]),g=()=>this.editor.commands.first(({commands:et})=>[()=>et.deleteSelection(),()=>et.deleteCurrentNode(),()=>et.joinForward(),()=>et.selectNodeForward()]),j={Enter:()=>this.editor.commands.first(({commands:et})=>[()=>et.newlineInCode(),()=>et.createParagraphNear(),()=>et.liftEmptyBlock(),()=>et.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:b,"Mod-Backspace":b,"Shift-Backspace":b,Delete:g,"Mod-Delete":g,"Mod-a":()=>this.editor.commands.selectAll()},$={...j},_e={...j,"Ctrl-h":b,"Alt-Backspace":b,"Ctrl-d":g,"Ctrl-Alt-Backspace":g,"Alt-Delete":g,"Alt-d":g,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?_e:$},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(b,g,_)=>{const j=b.some(ut=>ut.docChanged)&&!g.doc.eq(_.doc),$=b.some(ut=>ut.getMeta("preventClearDocument"));if(!j||$)return;const{empty:_e,from:et,to:tt}=g.selection,nt=Selection.atStart(g.doc).from,rt=Selection.atEnd(g.doc).to;if(_e||!(et===nt&&tt===rt)||!isNodeEmpty(_.doc))return;const ot=_.tr,lt=createChainableState({state:_,transaction:ot}),{commands:at}=new CommandManager({editor:this.editor,state:lt});if(at.clearNodes(),!!ot.steps.length)return ot}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(b,g,_)=>{this.editor.emit("paste",{editor:this.editor,event:g,slice:_})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodePos{get name(){return this.node.type.name}constructor(g,_,j=!1,$=null){this.currentNode=null,this.actualDepth=null,this.isBlock=j,this.resolvedPos=g,this.editor=_,this.currentNode=$}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var g;return(g=this.actualDepth)!==null&&g!==void 0?g:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(g){let _=this.from,j=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}_=this.from+1,j=this.to-1}this.editor.commands.insertContentAt({from:_,to:j},g)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const g=this.resolvedPos.start(this.resolvedPos.depth-1),_=this.resolvedPos.doc.resolve(g);return new NodePos(_,this.editor)}get before(){let g=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(g,this.editor)}get after(){let g=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(g,this.editor)}get children(){const g=[];return this.node.content.forEach((_,j)=>{const $=_.isBlock&&!_.isTextblock,_e=this.pos+j+1,et=this.resolvedPos.doc.resolve(_e);if(!$&&et.depth<=this.depth)return;const tt=new NodePos(et,this.editor,$,$?_:null);$&&(tt.actualDepth=this.depth+1),g.push(new NodePos(et,this.editor,$,$?_:null))}),g}get firstChild(){return this.children[0]||null}get lastChild(){const g=this.children;return g[g.length-1]||null}closest(g,_={}){let j=null,$=this.parent;for(;$&&!j;){if($.node.type.name===g)if(Object.keys(_).length>0){const _e=$.node.attrs,et=Object.keys(_);for(let tt=0;tt<et.length;tt+=1){const nt=et[tt];if(_e[nt]!==_[nt])break}}else j=$;$=$.parent}return j}querySelector(g,_={}){return this.querySelectorAll(g,_,!0)[0]||null}querySelectorAll(g,_={},j=!1){let $=[];if(!this.children||this.children.length===0)return $;const _e=Object.keys(_);return this.children.forEach(et=>{j&&$.length>0||(et.node.type.name===g&&_e.every(nt=>_[nt]===et.node.attrs[nt])&&$.push(et),!(j&&$.length>0)&&($=$.concat(et.querySelectorAll(g,_,j))))}),$}setAttribute(g){const _=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,g).setTextSelection(_.from).run()}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(b,g,_){const j=document.querySelector("style[data-tiptap-style]");if(j!==null)return j;const $=document.createElement("style");return g&&$.setAttribute("nonce",g),$.setAttribute("data-tiptap-style",""),$.innerHTML=b,document.getElementsByTagName("head")[0].appendChild($),$}class Editor extends EventEmitter{constructor(g={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:_})=>{throw _},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(g),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:_,slice:j,moved:$})=>this.options.onDrop(_,j,$)),this.on("paste",({event:_,slice:j})=>this.options.onPaste(_,j)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(g={}){this.options={...this.options,...g},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(g,_=!0){this.setOptions({editable:g}),_&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(g,_){const j=isFunction$1(_)?_(g,[...this.state.plugins]):[...this.state.plugins,g],$=this.state.reconfigure({plugins:j});return this.view.updateState($),$}unregisterPlugin(g){if(this.isDestroyed)return;const _=typeof g=="string"?`${g}$`:g.key,j=this.state.reconfigure({plugins:this.state.plugins.filter($=>!$.key.startsWith(_))});return this.view.updateState(j),j}createExtensionManager(){var g,_;const $=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(_=(g=this.options.coreExtensionOptions)===null||g===void 0?void 0:g.clipboardTextSerializer)===null||_===void 0?void 0:_.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste].filter(_e=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[_e.name]!==!1:!0):[],...this.options.extensions].filter(_e=>["extension","node","mark"].includes(_e==null?void 0:_e.type));this.extensionManager=new ExtensionManager($,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let g;try{g=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(_e){if(!(_e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(_e.message))throw _e;this.emit("contentError",{editor:this,error:_e,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(et=>et.name!=="collaboration"),this.createExtensionManager()}}),g=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const _=resolveFocusPosition(g,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:g,selection:_||void 0})});const j=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(j),this.createNodeViews(),this.prependClass();const $=this.view.dom;$.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(g){this.isCapturingTransaction=!0,g(),this.isCapturingTransaction=!1;const _=this.capturedTransaction;return this.capturedTransaction=null,_}dispatchTransaction(g){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=g;return}g.steps.forEach(et=>{var tt;return(tt=this.capturedTransaction)===null||tt===void 0?void 0:tt.step(et)});return}const _=this.state.apply(g),j=!this.state.selection.eq(_.selection);this.emit("beforeTransaction",{editor:this,transaction:g,nextState:_}),this.view.updateState(_),this.emit("transaction",{editor:this,transaction:g}),j&&this.emit("selectionUpdate",{editor:this,transaction:g});const $=g.getMeta("focus"),_e=g.getMeta("blur");$&&this.emit("focus",{editor:this,event:$.event,transaction:g}),_e&&this.emit("blur",{editor:this,event:_e.event,transaction:g}),!(!g.docChanged||g.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:g})}getAttributes(g){return getAttributes(this.state,g)}isActive(g,_){const j=typeof g=="string"?g:null,$=typeof g=="string"?_:g;return isActive(this.state,j,$)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(g){const{blockSeparator:_=`

`,textSerializers:j={}}=g||{};return getText(this.state.doc,{blockSeparator:_,textSerializers:{...getTextSerializersFromSchema(this.schema),...j}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const g=this.view.dom;g&&g.editor&&delete g.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var g;return!(!((g=this.view)===null||g===void 0)&&g.docView)}$node(g,_){var j;return((j=this.$doc)===null||j===void 0?void 0:j.querySelector(g,_))||null}$nodes(g,_){var j;return((j=this.$doc)===null||j===void 0?void 0:j.querySelectorAll(g,_))||null}$pos(g){const _=this.state.doc.resolve(g);return new NodePos(_,this)}get $doc(){return this.$pos(0)}}function markInputRule(b){return new InputRule({find:b.find,handler:({state:g,range:_,match:j})=>{const $=callOrReturn(b.getAttributes,void 0,j);if($===!1||$===null)return null;const{tr:_e}=g,et=j[j.length-1],tt=j[0];if(et){const nt=tt.search(/\S/),rt=_.from+tt.indexOf(et),it=rt+et.length;if(getMarksBetween(_.from,_.to,g.doc).filter(lt=>lt.mark.type.excluded.find(ut=>ut===b.type&&ut!==lt.mark.type)).filter(lt=>lt.to>rt).length)return null;it<_.to&&_e.delete(it,_.to),rt>_.from&&_e.delete(_.from+nt,rt);const ot=_.from+nt+et.length;_e.addMark(_.from+nt,ot,b.type.create($||{})),_e.removeStoredMark(b.type)}}})}function nodeInputRule(b){return new InputRule({find:b.find,handler:({state:g,range:_,match:j})=>{const $=callOrReturn(b.getAttributes,void 0,j)||{},{tr:_e}=g,et=_.from;let tt=_.to;const nt=b.type.create($);if(j[1]){const rt=j[0].lastIndexOf(j[1]);let it=et+rt;it>tt?it=tt:tt=it+j[1].length;const st=j[0][j[0].length-1];_e.insertText(st,et+j[0].length-1),_e.replaceWith(it,tt,nt)}else if(j[0]){const rt=b.type.isInline?et:et-1;_e.insert(rt,b.type.create($)).delete(_e.mapping.map(et),_e.mapping.map(tt))}_e.scrollIntoView()}})}function textblockTypeInputRule(b){return new InputRule({find:b.find,handler:({state:g,range:_,match:j})=>{const $=g.doc.resolve(_.from),_e=callOrReturn(b.getAttributes,void 0,j)||{};if(!$.node(-1).canReplaceWith($.index(-1),$.indexAfter(-1),b.type))return null;g.tr.delete(_.from,_.to).setBlockType(_.from,_.from,b.type,_e)}})}function wrappingInputRule(b){return new InputRule({find:b.find,handler:({state:g,range:_,match:j,chain:$})=>{const _e=callOrReturn(b.getAttributes,void 0,j)||{},et=g.tr.delete(_.from,_.to),nt=et.doc.resolve(_.from).blockRange(),rt=nt&&findWrapping(nt,b.type,_e);if(!rt)return null;if(et.wrap(nt,rt),b.keepMarks&&b.editor){const{selection:st,storedMarks:ot}=g,{splittableMarks:lt}=b.editor.extensionManager,at=ot||st.$to.parentOffset&&st.$from.marks();if(at){const ut=at.filter(dt=>lt.includes(dt.type.name));et.ensureMarks(ut)}}if(b.keepAttributes){const st=b.type.name==="bulletList"||b.type.name==="orderedList"?"listItem":"taskList";$().updateAttributes(st,_e).run()}const it=et.doc.resolve(_.from-1).nodeBefore;it&&it.type===b.type&&canJoin(et.doc,_.from-1)&&(!b.joinPredicate||b.joinPredicate(j,it))&&et.join(_.from-1)}})}class Node{constructor(g={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...g},this.name=this.config.name,g.defaultOptions&&Object.keys(g.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(g={}){return new Node(g)}configure(g={}){const _=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,g)});return _.name=this.name,_.parent=this.parent,_}extend(g={}){const _=new Node(g);return _.parent=this,this.child=_,_.name=g.name?g.name:_.parent.name,g.defaultOptions&&Object.keys(g.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${_.name}".`),_.options=callOrReturn(getExtensionField(_,"addOptions",{name:_.name})),_.storage=callOrReturn(getExtensionField(_,"addStorage",{name:_.name,options:_.options})),_}}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}class NodeView{constructor(g,_,j){this.isDragging=!1,this.component=g,this.editor=_.editor,this.options={stopEvent:null,ignoreMutation:null,...j},this.extension=_.extension,this.node=_.node,this.decorations=_.decorations,this.innerDecorations=_.innerDecorations,this.view=_.view,this.HTMLAttributes=_.HTMLAttributes,this.getPos=_.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(g){var _,j,$,_e,et,tt,nt;const{view:rt}=this.editor,it=g.target,st=it.nodeType===3?(_=it.parentElement)===null||_===void 0?void 0:_.closest("[data-drag-handle]"):it.closest("[data-drag-handle]");if(!this.dom||!((j=this.contentDOM)===null||j===void 0)&&j.contains(it)||!st)return;let ot=0,lt=0;if(this.dom!==st){const ct=this.dom.getBoundingClientRect(),ht=st.getBoundingClientRect(),pt=($=g.offsetX)!==null&&$!==void 0?$:(_e=g.nativeEvent)===null||_e===void 0?void 0:_e.offsetX,mt=(et=g.offsetY)!==null&&et!==void 0?et:(tt=g.nativeEvent)===null||tt===void 0?void 0:tt.offsetY;ot=ht.x-ct.x+pt,lt=ht.y-ct.y+mt}(nt=g.dataTransfer)===null||nt===void 0||nt.setDragImage(this.dom,ot,lt);const at=this.getPos();if(typeof at!="number")return;const ut=NodeSelection.create(rt.state.doc,at),dt=rt.state.tr.setSelection(ut);rt.dispatch(dt)}stopEvent(g){var _;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:g});const j=g.target;if(!(this.dom.contains(j)&&!(!((_=this.contentDOM)===null||_===void 0)&&_.contains(j))))return!1;const _e=g.type.startsWith("drag"),et=g.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(j.tagName)||j.isContentEditable)&&!et&&!_e)return!0;const{isEditable:nt}=this.editor,{isDragging:rt}=this,it=!!this.node.type.spec.draggable,st=NodeSelection.isSelectable(this.node),ot=g.type==="copy",lt=g.type==="paste",at=g.type==="cut",ut=g.type==="mousedown";if(!it&&st&&_e&&g.preventDefault(),it&&_e&&!rt)return g.preventDefault(),!1;if(it&&nt&&!rt&&ut){const dt=j.closest("[data-drag-handle]");dt&&(this.dom===dt||this.dom.contains(dt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(rt||et||ot||lt||at||ut&&st)}ignoreMutation(g){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:g}):this.node.isLeaf||this.node.isAtom?!0:g.type==="selection"||this.dom.contains(g.target)&&g.type==="childList"&&(isiOS()||isAndroid())&&this.editor.isFocused&&[...Array.from(g.addedNodes),...Array.from(g.removedNodes)].every(j=>j.isContentEditable)?!1:this.contentDOM===g.target&&g.type==="attributes"?!0:!this.contentDOM.contains(g.target)}updateAttributes(g){this.editor.commands.command(({tr:_})=>{const j=this.getPos();return typeof j!="number"?!1:(_.setNodeMarkup(j,void 0,{...this.node.attrs,...g}),!0)})}deleteNode(){const g=this.getPos();if(typeof g!="number")return;const _=g+this.node.nodeSize;this.editor.commands.deleteRange({from:g,to:_})}}function markPasteRule(b){return new PasteRule({find:b.find,handler:({state:g,range:_,match:j,pasteEvent:$})=>{const _e=callOrReturn(b.getAttributes,void 0,j,$);if(_e===!1||_e===null)return null;const{tr:et}=g,tt=j[j.length-1],nt=j[0];let rt=_.to;if(tt){const it=nt.search(/\S/),st=_.from+nt.indexOf(tt),ot=st+tt.length;if(getMarksBetween(_.from,_.to,g.doc).filter(at=>at.mark.type.excluded.find(dt=>dt===b.type&&dt!==at.mark.type)).filter(at=>at.to>st).length)return null;ot<_.to&&et.delete(ot,_.to),st>_.from&&et.delete(_.from+it,st),rt=_.from+it+tt.length,et.addMark(_.from+it,rt,b.type.create(_e||{})),et.removeStoredMark(b.type)}}})}function getDefaultExportFromCjs(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production_min;function requireUseSyncExternalStoreShim_production_min(){if(hasRequiredUseSyncExternalStoreShim_production_min)return useSyncExternalStoreShim_production_min;hasRequiredUseSyncExternalStoreShim_production_min=1;var b=React;function g(st,ot){return st===ot&&(st!==0||1/st===1/ot)||st!==st&&ot!==ot}var _=typeof Object.is=="function"?Object.is:g,j=b.useState,$=b.useEffect,_e=b.useLayoutEffect,et=b.useDebugValue;function tt(st,ot){var lt=ot(),at=j({inst:{value:lt,getSnapshot:ot}}),ut=at[0].inst,dt=at[1];return _e(function(){ut.value=lt,ut.getSnapshot=ot,nt(ut)&&dt({inst:ut})},[st,lt,ot]),$(function(){return nt(ut)&&dt({inst:ut}),st(function(){nt(ut)&&dt({inst:ut})})},[st]),et(lt),lt}function nt(st){var ot=st.getSnapshot;st=st.value;try{var lt=ot();return!_(st,lt)}catch{return!0}}function rt(st,ot){return ot()}var it=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rt:tt;return useSyncExternalStoreShim_production_min.useSyncExternalStore=b.useSyncExternalStore!==void 0?b.useSyncExternalStore:it,useSyncExternalStoreShim_production_min}shim.exports=requireUseSyncExternalStoreShim_production_min();var shimExports=shim.exports;const mergeRefs=(...b)=>g=>{b.forEach(_=>{typeof _=="function"?_(g):_&&(_.current=g)})},Portals=({contentComponent:b})=>{const g=shimExports.useSyncExternalStore(b.subscribe,b.getSnapshot,b.getServerSnapshot);return React.createElement(React.Fragment,null,Object.values(g))};function getInstance(){const b=new Set;let g={};return{subscribe(_){return b.add(_),()=>{b.delete(_)}},getSnapshot(){return g},getServerSnapshot(){return g},setRenderer(_,j){g={...g,[_]:ReactDOM.createPortal(j.reactElement,j.element,_)},b.forEach($=>$())},removeRenderer(_){const j={...g};delete j[_],g=j,b.forEach($=>$())}}}class PureEditorContent extends React.Component{constructor(g){var _;super(g),this.editorContentRef=React.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((_=g.editor)===null||_===void 0)&&_.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const g=this.props.editor;if(g&&!g.isDestroyed&&g.options.element){if(g.contentComponent)return;const _=this.editorContentRef.current;_.append(...g.options.element.childNodes),g.setOptions({element:_}),g.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=g.contentComponent.subscribe(()=>{this.setState(j=>j.hasContentComponentInitialized?j:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),g.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const g=this.props.editor;if(!g||(this.initialized=!1,g.isDestroyed||g.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),g.contentComponent=null,!g.options.element.firstChild))return;const _=document.createElement("div");_.append(...g.options.element.childNodes),g.setOptions({element:_})}render(){const{editor:g,innerRef:_,...j}=this.props;return React.createElement(React.Fragment,null,React.createElement("div",{ref:mergeRefs(_,this.editorContentRef),...j}),(g==null?void 0:g.contentComponent)&&React.createElement(Portals,{contentComponent:g.contentComponent}))}}const EditorContentWithKey=reactExports.forwardRef((b,g)=>{const _=React.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[b.editor]);return React.createElement(PureEditorContent,{key:_,innerRef:g,...b})}),EditorContent=React.memo(EditorContentWithKey);var react=function b(g,_){if(g===_)return!0;if(g&&_&&typeof g=="object"&&typeof _=="object"){if(g.constructor!==_.constructor)return!1;var j,$,_e;if(Array.isArray(g)){if(j=g.length,j!=_.length)return!1;for($=j;$--!==0;)if(!b(g[$],_[$]))return!1;return!0}if(g instanceof Map&&_ instanceof Map){if(g.size!==_.size)return!1;for($ of g.entries())if(!_.has($[0]))return!1;for($ of g.entries())if(!b($[1],_.get($[0])))return!1;return!0}if(g instanceof Set&&_ instanceof Set){if(g.size!==_.size)return!1;for($ of g.entries())if(!_.has($[0]))return!1;return!0}if(ArrayBuffer.isView(g)&&ArrayBuffer.isView(_)){if(j=g.length,j!=_.length)return!1;for($=j;$--!==0;)if(g[$]!==_[$])return!1;return!0}if(g.constructor===RegExp)return g.source===_.source&&g.flags===_.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===_.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===_.toString();if(_e=Object.keys(g),j=_e.length,j!==Object.keys(_).length)return!1;for($=j;$--!==0;)if(!Object.prototype.hasOwnProperty.call(_,_e[$]))return!1;for($=j;$--!==0;){var et=_e[$];if(!(et==="_owner"&&g.$$typeof)&&!b(g[et],_[et]))return!1}return!0}return g!==g&&_!==_},deepEqual=getDefaultExportFromCjs(react),withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production_min;function requireWithSelector_production_min(){if(hasRequiredWithSelector_production_min)return withSelector_production_min;hasRequiredWithSelector_production_min=1;var b=React,g=shimExports;function _(rt,it){return rt===it&&(rt!==0||1/rt===1/it)||rt!==rt&&it!==it}var j=typeof Object.is=="function"?Object.is:_,$=g.useSyncExternalStore,_e=b.useRef,et=b.useEffect,tt=b.useMemo,nt=b.useDebugValue;return withSelector_production_min.useSyncExternalStoreWithSelector=function(rt,it,st,ot,lt){var at=_e(null);if(at.current===null){var ut={hasValue:!1,value:null};at.current=ut}else ut=at.current;at=tt(function(){function ct(gt){if(!ht){if(ht=!0,pt=gt,gt=ot(gt),lt!==void 0&&ut.hasValue){var xt=ut.value;if(lt(xt,gt))return mt=xt}return mt=gt}if(xt=mt,j(pt,gt))return xt;var vt=ot(gt);return lt!==void 0&&lt(xt,vt)?xt:(pt=gt,mt=vt)}var ht=!1,pt,mt,ft=st===void 0?null:st;return[function(){return ct(it())},ft===null?void 0:function(){return ct(ft())}]},[it,st,ot,lt]);var dt=$(rt,at[0],at[1]);return et(function(){ut.hasValue=!0,ut.value=dt},[dt]),nt(dt),dt},withSelector_production_min}withSelector.exports=requireWithSelector_production_min();var withSelectorExports=withSelector.exports;class EditorStateManager{constructor(g){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=g,this.lastSnapshot={editor:g,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(g){return this.subscribers.add(g),()=>{this.subscribers.delete(g)}}watch(g){if(this.editor=g,this.editor){const _=()=>{this.transactionNumber+=1,this.subscribers.forEach($=>$())},j=this.editor;return j.on("transaction",_),()=>{j.off("transaction",_)}}}}function useEditorState(b){var g;const[_]=reactExports.useState(()=>new EditorStateManager(b.editor)),j=withSelectorExports.useSyncExternalStoreWithSelector(_.subscribe,_.getSnapshot,_.getServerSnapshot,b.selector,(g=b.equalityFn)!==null&&g!==void 0?g:deepEqual);return reactExports.useEffect(()=>_.watch(b.editor),[b.editor,_]),reactExports.useDebugValue(j),j}const isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next);class EditorInstanceManager{constructor(g){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=g,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(g){this.editor=g,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(_=>_())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const g={...this.options.current,onBeforeCreate:(...j)=>{var $,_e;return(_e=($=this.options.current).onBeforeCreate)===null||_e===void 0?void 0:_e.call($,...j)},onBlur:(...j)=>{var $,_e;return(_e=($=this.options.current).onBlur)===null||_e===void 0?void 0:_e.call($,...j)},onCreate:(...j)=>{var $,_e;return(_e=($=this.options.current).onCreate)===null||_e===void 0?void 0:_e.call($,...j)},onDestroy:(...j)=>{var $,_e;return(_e=($=this.options.current).onDestroy)===null||_e===void 0?void 0:_e.call($,...j)},onFocus:(...j)=>{var $,_e;return(_e=($=this.options.current).onFocus)===null||_e===void 0?void 0:_e.call($,...j)},onSelectionUpdate:(...j)=>{var $,_e;return(_e=($=this.options.current).onSelectionUpdate)===null||_e===void 0?void 0:_e.call($,...j)},onTransaction:(...j)=>{var $,_e;return(_e=($=this.options.current).onTransaction)===null||_e===void 0?void 0:_e.call($,...j)},onUpdate:(...j)=>{var $,_e;return(_e=($=this.options.current).onUpdate)===null||_e===void 0?void 0:_e.call($,...j)},onContentError:(...j)=>{var $,_e;return(_e=($=this.options.current).onContentError)===null||_e===void 0?void 0:_e.call($,...j)},onDrop:(...j)=>{var $,_e;return(_e=($=this.options.current).onDrop)===null||_e===void 0?void 0:_e.call($,...j)},onPaste:(...j)=>{var $,_e;return(_e=($=this.options.current).onPaste)===null||_e===void 0?void 0:_e.call($,...j)}};return new Editor(g)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(g){return this.subscriptions.add(g),()=>{this.subscriptions.delete(g)}}onRender(g){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&g.length===0?this.editor.setOptions(this.options.current):this.refreshEditorInstance(g),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(g){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=g;return}if(this.previousDeps.length===g.length&&this.previousDeps.every((j,$)=>j===g[$]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=g}scheduleDestroy(){const g=this.instanceId,_=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===g){_&&_.setOptions(this.options.current);return}_&&!_.isDestroyed&&(_.destroy(),this.instanceId===g&&this.setEditor(null))},1)}}function useEditor(b={},g=[]){const _=reactExports.useRef(b);_.current=b;const[j]=reactExports.useState(()=>new EditorInstanceManager(_)),$=shimExports.useSyncExternalStore(j.subscribe,j.getEditor,j.getServerSnapshot);return reactExports.useDebugValue($),reactExports.useEffect(j.onRender(g)),useEditorState({editor:$,selector:({transactionNumber:_e})=>b.shouldRerenderOnTransaction===!1?null:b.immediatelyRender&&_e===0?0:_e+1}),$}const EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;const ReactNodeViewContext=reactExports.createContext({onDragStart:void 0}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext),NodeViewWrapper=React.forwardRef((b,g)=>{const{onDragStart:_}=useReactNodeView(),j=b.as||"div";return React.createElement(j,{...b,ref:g,"data-node-view-wrapper":"",onDragStart:_,style:{whiteSpace:"normal",...b.style}})});function isClassComponent(b){return!!(typeof b=="function"&&b.prototype&&b.prototype.isReactComponent)}function isForwardRefComponent(b){var g;return typeof b=="object"&&((g=b.$$typeof)===null||g===void 0?void 0:g.toString())==="Symbol(react.forward_ref)"}class ReactRenderer{constructor(g,{editor:_,props:j={},as:$="div",className:_e=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=g,this.editor=_,this.props=j,this.element=document.createElement($),this.element.classList.add("react-renderer"),_e&&this.element.classList.add(..._e.split(" ")),this.editor.isInitialized?reactDomExports.flushSync(()=>{this.render()}):this.render()}render(){var g;const _=this.component,j=this.props,$=this.editor;(isClassComponent(_)||isForwardRefComponent(_))&&(j.ref=_e=>{this.ref=_e}),this.reactElement=React.createElement(_,j),(g=$==null?void 0:$.contentComponent)===null||g===void 0||g.setRenderer(this.id,this)}updateProps(g={}){this.props={...this.props,...g},this.render()}destroy(){var g;const _=this.editor;(g=_==null?void 0:_.contentComponent)===null||g===void 0||g.removeRenderer(this.id)}updateAttributes(g){Object.keys(g).forEach(_=>{this.element.setAttribute(_,g[_])})}}class ReactNodeView extends NodeView{mount(){const g={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(rt={})=>this.updateAttributes(rt),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const rt=it=>it.charAt(0).toUpperCase()+it.substring(1);this.component.displayName=rt(this.extension.name)}const $={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:rt=>{rt&&this.contentDOMElement&&rt.firstChild!==this.contentDOMElement&&rt.appendChild(this.contentDOMElement)}},_e=this.component,et=React.memo(rt=>React.createElement(ReactNodeViewContext.Provider,{value:$},React.createElement(_e,rt)));et.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let tt=this.node.isInline?"span":"div";this.options.as&&(tt=this.options.as);const{className:nt=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new ReactRenderer(et,{editor:this.editor,props:g,as:tt,className:`node-${this.node.type.name} ${nt}`.trim()}),this.updateElementAttributes()}get dom(){var g;if(this.renderer.element.firstElementChild&&!(!((g=this.renderer.element.firstElementChild)===null||g===void 0)&&g.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:g,to:_}=this.editor.state.selection,j=this.getPos();if(typeof j=="number")if(g<=j&&_>=j+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(g,_,j){const $=_e=>{this.renderer.updateProps(_e),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(g.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const _e=this.node,et=this.decorations,tt=this.innerDecorations;return this.node=g,this.decorations=_,this.innerDecorations=j,this.options.update({oldNode:_e,oldDecorations:et,newNode:g,newDecorations:_,oldInnerDecorations:tt,innerDecorations:j,updateProps:()=>$({node:g,decorations:_,innerDecorations:j})})}return g===this.node&&this.decorations===_&&this.innerDecorations===j||(this.node=g,this.decorations=_,this.innerDecorations=j,$({node:g,decorations:_,innerDecorations:j})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let g={};if(typeof this.options.attrs=="function"){const _=this.editor.extensionManager.attributes,j=getRenderedAttributes(this.node,_);g=this.options.attrs({node:this.node,HTMLAttributes:j})}else g=this.options.attrs;this.renderer.updateAttributes(g)}}}function ReactNodeViewRenderer(b,g){return _=>_.editor.contentComponent?new ReactNodeView(b,_,g):{}}const inputRegex$4=/^\s*>\s$/,Blockquote=Node.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:b}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{setBlockquote:()=>({commands:b})=>b.wrapIn(this.name),toggleBlockquote:()=>({commands:b})=>b.toggleWrap(this.name),unsetBlockquote:()=>({commands:b})=>b.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$4,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:b=>b.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:b=>/^(bold(er)?|[5-9]\d{2,})$/.test(b)&&null}]},renderHTML({HTMLAttributes:b}){return["strong",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{setBold:()=>({commands:b})=>b.setMark(this.name),toggleBold:()=>({commands:b})=>b.toggleMark(this.name),unsetBold:()=>({commands:b})=>b.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItem=Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:b}){return["li",mergeAttributes(this.options.HTMLAttributes,b),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:b=>b.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:b}){return["span",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:b,commands:g})=>{const _=getMarkAttributes(b,this.type);return Object.entries(_).some(([,$])=>!!$)?!0:g.unsetMark(this.name)}}}}),inputRegex$3=/^\s*([-+*])\s$/,BulletList=Node.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:b}){return["ul",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{toggleBulletList:()=>({commands:b,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem.name,this.editor.getAttributes(TextStyle.name)).run():b.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let b=wrappingInputRule({find:inputRegex$3,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(b=wrappingInputRule({find:inputRegex$3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyle.name),editor:this.editor})),[b]}}),inputRegex$2=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,pasteRegex$1=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:b}){return["code",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{setCode:()=>({commands:b})=>b.setMark(this.name),toggleCode:()=>({commands:b})=>b.toggleMark(this.name),unsetCode:()=>({commands:b})=>b.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:b=>{var g;const{languageClassPrefix:_}=this.options,_e=[...((g=b.firstElementChild)===null||g===void 0?void 0:g.classList)||[]].filter(et=>et.startsWith(_)).map(et=>et.replace(_,""))[0];return _e||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:b,HTMLAttributes:g}){return["pre",mergeAttributes(this.options.HTMLAttributes,g),["code",{class:b.attrs.language?this.options.languageClassPrefix+b.attrs.language:null},0]]},addCommands(){return{setCodeBlock:b=>({commands:g})=>g.setNode(this.name,b),toggleCodeBlock:b=>({commands:g})=>g.toggleNode(this.name,"paragraph",b)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:b,$anchor:g}=this.editor.state.selection,_=g.pos===1;return!b||g.parent.type.name!==this.name?!1:_||!g.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:b})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:g}=b,{selection:_}=g,{$from:j,empty:$}=_;if(!$||j.parent.type!==this.type)return!1;const _e=j.parentOffset===j.parent.nodeSize-2,et=j.parent.textContent.endsWith(`

`);return!_e||!et?!1:b.chain().command(({tr:tt})=>(tt.delete(j.pos-2,j.pos),!0)).exitCode().run()},ArrowDown:({editor:b})=>{if(!this.options.exitOnArrowDown)return!1;const{state:g}=b,{selection:_,doc:j}=g,{$from:$,empty:_e}=_;if(!_e||$.parent.type!==this.type||!($.parentOffset===$.parent.nodeSize-2))return!1;const tt=$.after();return tt===void 0?!1:j.nodeAt(tt)?b.commands.command(({tr:rt})=>(rt.setSelection(Selection.near(j.resolve(tt))),!0)):b.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:b=>({language:b[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:b=>({language:b[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(b,g)=>{if(!g.clipboardData||this.editor.isActive(this.type.name))return!1;const _=g.clipboardData.getData("text/plain"),j=g.clipboardData.getData("vscode-editor-data"),$=j?JSON.parse(j):void 0,_e=$==null?void 0:$.mode;if(!_||!_e)return!1;const{tr:et,schema:tt}=b.state,nt=tt.text(_.replace(/\r\n?/g,`
`));return et.replaceSelectionWith(this.type.create({language:_e},nt)),et.selection.$from.parent.type!==this.type&&et.setSelection(TextSelection.near(et.doc.resolve(Math.max(0,et.selection.from-2)))),et.setMeta("paste",!0),b.dispatch(et),!0}}})]}}),Document=Node.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(b={}){return new Plugin({view(g){return new DropCursorView(g,b)}})}class DropCursorView{constructor(g,_){var j;this.editorView=g,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(j=_.width)!==null&&j!==void 0?j:1,this.color=_.color===!1?void 0:_.color||"black",this.class=_.class,this.handlers=["dragover","dragend","drop","dragleave"].map($=>{let _e=et=>{this[$](et)};return g.dom.addEventListener($,_e),{name:$,handler:_e}})}destroy(){this.handlers.forEach(({name:g,handler:_})=>this.editorView.dom.removeEventListener(g,_))}update(g,_){this.cursorPos!=null&&_.doc!=g.state.doc&&(this.cursorPos>g.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(g){g!=this.cursorPos&&(this.cursorPos=g,g==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let g=this.editorView.state.doc.resolve(this.cursorPos),_=!g.parent.inlineContent,j;if(_){let tt=g.nodeBefore,nt=g.nodeAfter;if(tt||nt){let rt=this.editorView.nodeDOM(this.cursorPos-(tt?tt.nodeSize:0));if(rt){let it=rt.getBoundingClientRect(),st=tt?it.bottom:it.top;tt&&nt&&(st=(st+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),j={left:it.left,right:it.right,top:st-this.width/2,bottom:st+this.width/2}}}}if(!j){let tt=this.editorView.coordsAtPos(this.cursorPos);j={left:tt.left-this.width/2,right:tt.left+this.width/2,top:tt.top,bottom:tt.bottom}}let $=this.editorView.dom.offsetParent;this.element||(this.element=$.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",_),this.element.classList.toggle("prosemirror-dropcursor-inline",!_);let _e,et;if(!$||$==document.body&&getComputedStyle($).position=="static")_e=-pageXOffset,et=-pageYOffset;else{let tt=$.getBoundingClientRect();_e=tt.left-$.scrollLeft,et=tt.top-$.scrollTop}this.element.style.left=j.left-_e+"px",this.element.style.top=j.top-et+"px",this.element.style.width=j.right-j.left+"px",this.element.style.height=j.bottom-j.top+"px"}scheduleRemoval(g){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),g)}dragover(g){if(!this.editorView.editable)return;let _=this.editorView.posAtCoords({left:g.clientX,top:g.clientY}),j=_&&_.inside>=0&&this.editorView.state.doc.nodeAt(_.inside),$=j&&j.type.spec.disableDropCursor,_e=typeof $=="function"?$(this.editorView,_,g):$;if(_&&!_e){let et=_.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let tt=dropPoint(this.editorView.state.doc,et,this.editorView.dragging.slice);tt!=null&&(et=tt)}this.setCursor(et),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(g){(g.target==this.editorView.dom||!this.editorView.dom.contains(g.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection{constructor(g){super(g,g)}map(g,_){let j=g.resolve(_.map(this.head));return GapCursor.valid(j)?new GapCursor(j):Selection.near(j)}content(){return Slice.empty}eq(g){return g instanceof GapCursor&&g.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(g,_){if(typeof _.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(g.resolve(_.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(g){let _=g.parent;if(_.isTextblock||!closedBefore(g)||!closedAfter(g))return!1;let j=_.type.spec.allowGapCursor;if(j!=null)return j;let $=_.contentMatchAt(g.index()).defaultType;return $&&$.isTextblock}static findGapCursorFrom(g,_,j=!1){e:for(;;){if(!j&&GapCursor.valid(g))return g;let $=g.pos,_e=null;for(let et=g.depth;;et--){let tt=g.node(et);if(_>0?g.indexAfter(et)<tt.childCount:g.index(et)>0){_e=tt.child(_>0?g.indexAfter(et):g.index(et)-1);break}else if(et==0)return null;$+=_;let nt=g.doc.resolve($);if(GapCursor.valid(nt))return nt}for(;;){let et=_>0?_e.firstChild:_e.lastChild;if(!et){if(_e.isAtom&&!_e.isText&&!NodeSelection.isSelectable(_e)){g=g.doc.resolve($+_e.nodeSize*_),j=!1;continue e}break}_e=et,$+=_;let tt=g.doc.resolve($);if(GapCursor.valid(tt))return tt}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(g){this.pos=g}map(g){return new GapBookmark(g.map(this.pos))}resolve(g){let _=g.resolve(this.pos);return GapCursor.valid(_)?new GapCursor(_):Selection.near(_)}}function closedBefore(b){for(let g=b.depth;g>=0;g--){let _=b.index(g),j=b.node(g);if(_==0){if(j.type.spec.isolating)return!0;continue}for(let $=j.child(_-1);;$=$.lastChild){if($.childCount==0&&!$.inlineContent||$.isAtom||$.type.spec.isolating)return!0;if($.inlineContent)return!1}}return!0}function closedAfter(b){for(let g=b.depth;g>=0;g--){let _=b.indexAfter(g),j=b.node(g);if(_==j.childCount){if(j.type.spec.isolating)return!0;continue}for(let $=j.child(_);;$=$.firstChild){if($.childCount==0&&!$.inlineContent||$.isAtom||$.type.spec.isolating)return!0;if($.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(b,g,_){return g.pos==_.pos&&GapCursor.valid(_)?new GapCursor(_):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(b,g){const _=b=="vert"?g>0?"down":"up":g>0?"right":"left";return function(j,$,_e){let et=j.selection,tt=g>0?et.$to:et.$from,nt=et.empty;if(et instanceof TextSelection){if(!_e.endOfTextblock(_)||tt.depth==0)return!1;nt=!1,tt=j.doc.resolve(g>0?tt.after():tt.before())}let rt=GapCursor.findGapCursorFrom(tt,g,nt);return rt?($&&$(j.tr.setSelection(new GapCursor(rt))),!0):!1}}function handleClick(b,g,_){if(!b||!b.editable)return!1;let j=b.state.doc.resolve(g);if(!GapCursor.valid(j))return!1;let $=b.posAtCoords({left:_.clientX,top:_.clientY});return $&&$.inside>-1&&NodeSelection.isSelectable(b.state.doc.nodeAt($.inside))?!1:(b.dispatch(b.state.tr.setSelection(new GapCursor(j))),!0)}function beforeinput(b,g){if(g.inputType!="insertCompositionText"||!(b.state.selection instanceof GapCursor))return!1;let{$from:_}=b.state.selection,j=_.parent.contentMatchAt(_.index()).findWrapping(b.state.schema.nodes.text);if(!j)return!1;let $=Fragment.empty;for(let et=j.length-1;et>=0;et--)$=Fragment.from(j[et].createAndFill(null,$));let _e=b.state.tr.replace(_.pos,_.pos,new Slice($,0,0));return _e.setSelection(TextSelection.near(_e.doc.resolve(_.pos+1))),b.dispatch(_e),!1}function drawGapCursor(b){if(!(b.selection instanceof GapCursor))return null;let g=document.createElement("div");return g.className="ProseMirror-gapcursor",DecorationSet.create(b.doc,[Decoration.widget(b.selection.head,g,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(b){var g;const _={name:b.name,options:b.options,storage:b.storage};return{allowGapCursor:(g=callOrReturn(getExtensionField(b,"allowGapCursor",_)))!==null&&g!==void 0?g:null}}}),HardBreak=Node.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:b}){return["br",mergeAttributes(this.options.HTMLAttributes,b)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:b,chain:g,state:_,editor:j})=>b.first([()=>b.exitCode(),()=>b.command(()=>{const{selection:$,storedMarks:_e}=_;if($.$from.parent.type.spec.isolating)return!1;const{keepMarks:et}=this.options,{splittableMarks:tt}=j.extensionManager,nt=_e||$.$to.parentOffset&&$.$from.marks();return g().insertContent({type:this.name}).command(({tr:rt,dispatch:it})=>{if(it&&nt&&et){const st=nt.filter(ot=>tt.includes(ot.type.name));rt.ensureMarks(st)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(b=>({tag:`h${b}`,attrs:{level:b}}))},renderHTML({node:b,HTMLAttributes:g}){return[`h${this.options.levels.includes(b.attrs.level)?b.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,g),0]},addCommands(){return{setHeading:b=>({commands:g})=>this.options.levels.includes(b.level)?g.setNode(this.name,b):!1,toggleHeading:b=>({commands:g})=>this.options.levels.includes(b.level)?g.toggleNode(this.name,"paragraph",b):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((b,g)=>({...b,[`Mod-Alt-${g}`]:()=>this.editor.commands.toggleHeading({level:g})}),{})},addInputRules(){return this.options.levels.map(b=>textblockTypeInputRule({find:new RegExp(`^(#{1,${b}})\\s$`),type:this.type,getAttributes:{level:b}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function(){};RopeSequence.prototype.append=function(g){return g.length?(g=RopeSequence.from(g),!this.length&&g||g.length<GOOD_LEAF_SIZE&&this.leafAppend(g)||this.length<GOOD_LEAF_SIZE&&g.leafPrepend(this)||this.appendInner(g)):this};RopeSequence.prototype.prepend=function(g){return g.length?RopeSequence.from(g).append(this):this};RopeSequence.prototype.appendInner=function(g){return new Append(this,g)};RopeSequence.prototype.slice=function(g,_){return g===void 0&&(g=0),_===void 0&&(_=this.length),g>=_?RopeSequence.empty:this.sliceInner(Math.max(0,g),Math.min(this.length,_))};RopeSequence.prototype.get=function(g){if(!(g<0||g>=this.length))return this.getInner(g)};RopeSequence.prototype.forEach=function(g,_,j){_===void 0&&(_=0),j===void 0&&(j=this.length),_<=j?this.forEachInner(g,_,j,0):this.forEachInvertedInner(g,_,j,0)};RopeSequence.prototype.map=function(g,_,j){_===void 0&&(_=0),j===void 0&&(j=this.length);var $=[];return this.forEach(function(_e,et){return $.push(g(_e,et))},_,j),$};RopeSequence.from=function(g){return g instanceof RopeSequence?g:g&&g.length?new Leaf(g):RopeSequence.empty};var Leaf=function(b){function g(j){b.call(this),this.values=j}b&&(g.__proto__=b),g.prototype=Object.create(b&&b.prototype),g.prototype.constructor=g;var _={length:{configurable:!0},depth:{configurable:!0}};return g.prototype.flatten=function(){return this.values},g.prototype.sliceInner=function($,_e){return $==0&&_e==this.length?this:new g(this.values.slice($,_e))},g.prototype.getInner=function($){return this.values[$]},g.prototype.forEachInner=function($,_e,et,tt){for(var nt=_e;nt<et;nt++)if($(this.values[nt],tt+nt)===!1)return!1},g.prototype.forEachInvertedInner=function($,_e,et,tt){for(var nt=_e-1;nt>=et;nt--)if($(this.values[nt],tt+nt)===!1)return!1},g.prototype.leafAppend=function($){if(this.length+$.length<=GOOD_LEAF_SIZE)return new g(this.values.concat($.flatten()))},g.prototype.leafPrepend=function($){if(this.length+$.length<=GOOD_LEAF_SIZE)return new g($.flatten().concat(this.values))},_.length.get=function(){return this.values.length},_.depth.get=function(){return 0},Object.defineProperties(g.prototype,_),g}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(b){function g(_,j){b.call(this),this.left=_,this.right=j,this.length=_.length+j.length,this.depth=Math.max(_.depth,j.depth)+1}return b&&(g.__proto__=b),g.prototype=Object.create(b&&b.prototype),g.prototype.constructor=g,g.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},g.prototype.getInner=function(j){return j<this.left.length?this.left.get(j):this.right.get(j-this.left.length)},g.prototype.forEachInner=function(j,$,_e,et){var tt=this.left.length;if($<tt&&this.left.forEachInner(j,$,Math.min(_e,tt),et)===!1||_e>tt&&this.right.forEachInner(j,Math.max($-tt,0),Math.min(this.length,_e)-tt,et+tt)===!1)return!1},g.prototype.forEachInvertedInner=function(j,$,_e,et){var tt=this.left.length;if($>tt&&this.right.forEachInvertedInner(j,$-tt,Math.max(_e,tt)-tt,et+tt)===!1||_e<tt&&this.left.forEachInvertedInner(j,Math.min($,tt),_e,et)===!1)return!1},g.prototype.sliceInner=function(j,$){if(j==0&&$==this.length)return this;var _e=this.left.length;return $<=_e?this.left.slice(j,$):j>=_e?this.right.slice(j-_e,$-_e):this.left.slice(j,_e).append(this.right.slice(0,$-_e))},g.prototype.leafAppend=function(j){var $=this.right.leafAppend(j);if($)return new g(this.left,$)},g.prototype.leafPrepend=function(j){var $=this.left.leafPrepend(j);if($)return new g($,this.right)},g.prototype.appendInner=function(j){return this.left.depth>=Math.max(this.right.depth,j.depth)+1?new g(this.left,new g(this.right,j)):new g(this,j)},g}(RopeSequence);const max_empty_items=500;class Branch{constructor(g,_){this.items=g,this.eventCount=_}popEvent(g,_){if(this.eventCount==0)return null;let j=this.items.length;for(;;j--)if(this.items.get(j-1).selection){--j;break}let $,_e;_&&($=this.remapping(j,this.items.length),_e=$.maps.length);let et=g.tr,tt,nt,rt=[],it=[];return this.items.forEach((st,ot)=>{if(!st.step){$||($=this.remapping(j,ot+1),_e=$.maps.length),_e--,it.push(st);return}if($){it.push(new Item(st.map));let lt=st.step.map($.slice(_e)),at;lt&&et.maybeStep(lt).doc&&(at=et.mapping.maps[et.mapping.maps.length-1],rt.push(new Item(at,void 0,void 0,rt.length+it.length))),_e--,at&&$.appendMap(at,_e)}else et.maybeStep(st.step);if(st.selection)return tt=$?st.selection.map($.slice(_e)):st.selection,nt=new Branch(this.items.slice(0,j).append(it.reverse().concat(rt)),this.eventCount-1),!1},this.items.length,0),{remaining:nt,transform:et,selection:tt}}addTransform(g,_,j,$){let _e=[],et=this.eventCount,tt=this.items,nt=!$&&tt.length?tt.get(tt.length-1):null;for(let it=0;it<g.steps.length;it++){let st=g.steps[it].invert(g.docs[it]),ot=new Item(g.mapping.maps[it],st,_),lt;(lt=nt&&nt.merge(ot))&&(ot=lt,it?_e.pop():tt=tt.slice(0,tt.length-1)),_e.push(ot),_&&(et++,_=void 0),$||(nt=ot)}let rt=et-j.depth;return rt>DEPTH_OVERFLOW&&(tt=cutOffEvents(tt,rt),et-=rt),new Branch(tt.append(_e),et)}remapping(g,_){let j=new Mapping;return this.items.forEach(($,_e)=>{let et=$.mirrorOffset!=null&&_e-$.mirrorOffset>=g?j.maps.length-$.mirrorOffset:void 0;j.appendMap($.map,et)},g,_),j}addMaps(g){return this.eventCount==0?this:new Branch(this.items.append(g.map(_=>new Item(_))),this.eventCount)}rebased(g,_){if(!this.eventCount)return this;let j=[],$=Math.max(0,this.items.length-_),_e=g.mapping,et=g.steps.length,tt=this.eventCount;this.items.forEach(ot=>{ot.selection&&tt--},$);let nt=_;this.items.forEach(ot=>{let lt=_e.getMirror(--nt);if(lt==null)return;et=Math.min(et,lt);let at=_e.maps[lt];if(ot.step){let ut=g.steps[lt].invert(g.docs[lt]),dt=ot.selection&&ot.selection.map(_e.slice(nt+1,lt));dt&&tt++,j.push(new Item(at,ut,dt))}else j.push(new Item(at))},$);let rt=[];for(let ot=_;ot<et;ot++)rt.push(new Item(_e.maps[ot]));let it=this.items.slice(0,$).append(rt).append(j),st=new Branch(it,tt);return st.emptyItemCount()>max_empty_items&&(st=st.compress(this.items.length-j.length)),st}emptyItemCount(){let g=0;return this.items.forEach(_=>{_.step||g++}),g}compress(g=this.items.length){let _=this.remapping(0,g),j=_.maps.length,$=[],_e=0;return this.items.forEach((et,tt)=>{if(tt>=g)$.push(et),et.selection&&_e++;else if(et.step){let nt=et.step.map(_.slice(j)),rt=nt&&nt.getMap();if(j--,rt&&_.appendMap(rt,j),nt){let it=et.selection&&et.selection.map(_.slice(j));it&&_e++;let st=new Item(rt.invert(),nt,it),ot,lt=$.length-1;(ot=$.length&&$[lt].merge(st))?$[lt]=ot:$.push(st)}}else et.map&&j--},this.items.length,0),new Branch(RopeSequence.from($.reverse()),_e)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(b,g){let _;return b.forEach((j,$)=>{if(j.selection&&g--==0)return _=$,!1}),b.slice(_)}class Item{constructor(g,_,j,$){this.map=g,this.step=_,this.selection=j,this.mirrorOffset=$}merge(g){if(this.step&&g.step&&!g.selection){let _=g.step.merge(this.step);if(_)return new Item(_.getMap().invert(),_,this.selection)}}}class HistoryState{constructor(g,_,j,$,_e){this.done=g,this.undone=_,this.prevRanges=j,this.prevTime=$,this.prevComposition=_e}}const DEPTH_OVERFLOW=20;function applyTransaction(b,g,_,j){let $=_.getMeta(historyKey),_e;if($)return $.historyState;_.getMeta(closeHistoryKey)&&(b=new HistoryState(b.done,b.undone,null,0,-1));let et=_.getMeta("appendedTransaction");if(_.steps.length==0)return b;if(et&&et.getMeta(historyKey))return et.getMeta(historyKey).redo?new HistoryState(b.done.addTransform(_,void 0,j,mustPreserveItems(g)),b.undone,rangesFor(_.mapping.maps),b.prevTime,b.prevComposition):new HistoryState(b.done,b.undone.addTransform(_,void 0,j,mustPreserveItems(g)),null,b.prevTime,b.prevComposition);if(_.getMeta("addToHistory")!==!1&&!(et&&et.getMeta("addToHistory")===!1)){let tt=_.getMeta("composition"),nt=b.prevTime==0||!et&&b.prevComposition!=tt&&(b.prevTime<(_.time||0)-j.newGroupDelay||!isAdjacentTo(_,b.prevRanges)),rt=et?mapRanges(b.prevRanges,_.mapping):rangesFor(_.mapping.maps);return new HistoryState(b.done.addTransform(_,nt?g.selection.getBookmark():void 0,j,mustPreserveItems(g)),Branch.empty,rt,_.time,tt??b.prevComposition)}else return(_e=_.getMeta("rebased"))?new HistoryState(b.done.rebased(_,_e),b.undone.rebased(_,_e),mapRanges(b.prevRanges,_.mapping),b.prevTime,b.prevComposition):new HistoryState(b.done.addMaps(_.mapping.maps),b.undone.addMaps(_.mapping.maps),mapRanges(b.prevRanges,_.mapping),b.prevTime,b.prevComposition)}function isAdjacentTo(b,g){if(!g)return!1;if(!b.docChanged)return!0;let _=!1;return b.mapping.maps[0].forEach((j,$)=>{for(let _e=0;_e<g.length;_e+=2)j<=g[_e+1]&&$>=g[_e]&&(_=!0)}),_}function rangesFor(b){let g=[];for(let _=b.length-1;_>=0&&g.length==0;_--)b[_].forEach((j,$,_e,et)=>g.push(_e,et));return g}function mapRanges(b,g){if(!b)return null;let _=[];for(let j=0;j<b.length;j+=2){let $=g.map(b[j],1),_e=g.map(b[j+1],-1);$<=_e&&_.push($,_e)}return _}function histTransaction(b,g,_){let j=mustPreserveItems(g),$=historyKey.get(g).spec.config,_e=(_?b.undone:b.done).popEvent(g,j);if(!_e)return null;let et=_e.selection.resolve(_e.transform.doc),tt=(_?b.done:b.undone).addTransform(_e.transform,g.selection.getBookmark(),$,j),nt=new HistoryState(_?tt:_e.remaining,_?_e.remaining:tt,null,0,-1);return _e.transform.setSelection(et).setMeta(historyKey,{redo:_,historyState:nt})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(b){let g=b.plugins;if(cachedPreserveItemsPlugins!=g){cachedPreserveItems=!1,cachedPreserveItemsPlugins=g;for(let _=0;_<g.length;_++)if(g[_].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(b={}){return b={depth:b.depth||100,newGroupDelay:b.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(g,_,j){return applyTransaction(_,j,g,b)}},config:b,props:{handleDOMEvents:{beforeinput(g,_){let j=_.inputType,$=j=="historyUndo"?undo:j=="historyRedo"?redo:null;return $?(_.preventDefault(),$(g.state,g.dispatch)):!1}}}})}function buildCommand(b,g){return(_,j)=>{let $=historyKey.getState(_);if(!$||(b?$.undone:$.done).eventCount==0)return!1;if(j){let _e=histTransaction($,_,b);_e&&j(g?_e.scrollIntoView():_e)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:b,dispatch:g})=>undo(b,g),redo:()=>({state:b,dispatch:g})=>redo(b,g)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),HorizontalRule=Node.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:b}){return["hr",mergeAttributes(this.options.HTMLAttributes,b)]},addCommands(){return{setHorizontalRule:()=>({chain:b,state:g})=>{const{selection:_}=g,{$from:j,$to:$}=_,_e=b();return j.parentOffset===0?_e.insertContentAt({from:Math.max(j.pos-1,0),to:$.pos},{type:this.name}):isNodeSelection(_)?_e.insertContentAt($.pos,{type:this.name}):_e.insertContent({type:this.name}),_e.command(({tr:et,dispatch:tt})=>{var nt;if(tt){const{$to:rt}=et.selection,it=rt.end();if(rt.nodeAfter)rt.nodeAfter.isTextblock?et.setSelection(TextSelection.create(et.doc,rt.pos+1)):rt.nodeAfter.isBlock?et.setSelection(NodeSelection.create(et.doc,rt.pos)):et.setSelection(TextSelection.create(et.doc,rt.pos));else{const st=(nt=rt.parent.type.contentMatch.defaultType)===null||nt===void 0?void 0:nt.create();st&&(et.insert(it,st),et.setSelection(TextSelection.create(et.doc,it+1)))}et.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:b=>b.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:b}){return["em",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{setItalic:()=>({commands:b})=>b.setMark(this.name),toggleItalic:()=>({commands:b})=>b.toggleMark(this.name),unsetItalic:()=>({commands:b})=>b.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),inputRegex$1=/^(\d+)\.\s$/,OrderedList=Node.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:b=>b.hasAttribute("start")?parseInt(b.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:b=>b.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:b}){const{start:g,..._}=b;return g===1?["ol",mergeAttributes(this.options.HTMLAttributes,_),0]:["ol",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{toggleOrderedList:()=>({commands:b,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem.name,this.editor.getAttributes(TextStyle.name)).run():b.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let b=wrappingInputRule({find:inputRegex$1,type:this.type,getAttributes:g=>({start:+g[1]}),joinPredicate:(g,_)=>_.childCount+_.attrs.start===+g[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(b=wrappingInputRule({find:inputRegex$1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:g=>({start:+g[1],...this.editor.getAttributes(TextStyle.name)}),joinPredicate:(g,_)=>_.childCount+_.attrs.start===+g[1],editor:this.editor})),[b]}}),Paragraph=Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:b}){return["p",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{setParagraph:()=>({commands:b})=>b.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:b=>b.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:b}){return["s",mergeAttributes(this.options.HTMLAttributes,b),0]},addCommands(){return{setStrike:()=>({commands:b})=>b.setMark(this.name),toggleStrike:()=>({commands:b})=>b.toggleMark(this.name),unsetStrike:()=>({commands:b})=>b.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text=Node.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var b,g,_,j,$,_e,et,tt,nt,rt,it,st,ot,lt,at,ut,dt,ct;const ht=[];return this.options.bold!==!1&&ht.push(Bold.configure((b=this.options)===null||b===void 0?void 0:b.bold)),this.options.blockquote!==!1&&ht.push(Blockquote.configure((g=this.options)===null||g===void 0?void 0:g.blockquote)),this.options.bulletList!==!1&&ht.push(BulletList.configure((_=this.options)===null||_===void 0?void 0:_.bulletList)),this.options.code!==!1&&ht.push(Code.configure((j=this.options)===null||j===void 0?void 0:j.code)),this.options.codeBlock!==!1&&ht.push(CodeBlock.configure(($=this.options)===null||$===void 0?void 0:$.codeBlock)),this.options.document!==!1&&ht.push(Document.configure((_e=this.options)===null||_e===void 0?void 0:_e.document)),this.options.dropcursor!==!1&&ht.push(Dropcursor.configure((et=this.options)===null||et===void 0?void 0:et.dropcursor)),this.options.gapcursor!==!1&&ht.push(Gapcursor.configure((tt=this.options)===null||tt===void 0?void 0:tt.gapcursor)),this.options.hardBreak!==!1&&ht.push(HardBreak.configure((nt=this.options)===null||nt===void 0?void 0:nt.hardBreak)),this.options.heading!==!1&&ht.push(Heading.configure((rt=this.options)===null||rt===void 0?void 0:rt.heading)),this.options.history!==!1&&ht.push(History.configure((it=this.options)===null||it===void 0?void 0:it.history)),this.options.horizontalRule!==!1&&ht.push(HorizontalRule.configure((st=this.options)===null||st===void 0?void 0:st.horizontalRule)),this.options.italic!==!1&&ht.push(Italic.configure((ot=this.options)===null||ot===void 0?void 0:ot.italic)),this.options.listItem!==!1&&ht.push(ListItem.configure((lt=this.options)===null||lt===void 0?void 0:lt.listItem)),this.options.orderedList!==!1&&ht.push(OrderedList.configure((at=this.options)===null||at===void 0?void 0:at.orderedList)),this.options.paragraph!==!1&&ht.push(Paragraph.configure((ut=this.options)===null||ut===void 0?void 0:ut.paragraph)),this.options.strike!==!1&&ht.push(Strike.configure((dt=this.options)===null||dt===void 0?void 0:dt.strike)),this.options.text!==!1&&ht.push(Text.configure((ct=this.options)===null||ct===void 0?void 0:ct.text)),ht}}),truncateFilename=b=>{const g=b.lastIndexOf(".");if(g===-1)return b;const _=b.slice(g),j=b.slice(0,g);return j.length<=10?b:`${j.slice(0,5)}...${_}`},FileTokenComponent=({node:b,selected:g})=>{const{fileName:_}=b.attrs,j=et=>{var tt;return(tt=et.split(".").pop())==null?void 0:tt.toLowerCase()},$=et=>{switch(et){case"zip":case"rar":return"📦";case"mp3":case"wav":case"ogg":return"🎵";case"mp4":case"avi":case"mkv":return"🎥";case"pdf":case"doc":case"docx":return"📄";case"xls":case"xlsx":return"📊";case"csv":return"📑";default:return"📄"}},_e=j(_);return jsxRuntimeExports.jsx(NodeViewWrapper,{className:`inline-flex items-center rounded-xl py-1 px-2 mx-[5px] text-sm cursor-pointer border border-transparent ${g?"bg-white text-secondary":"bg-[#FFFFFF33] text-white"}`,onClick:()=>{console.log("Token clicked:",_)},children:jsxRuntimeExports.jsxs("span",{className:"flex gap-1 items-center",children:[jsxRuntimeExports.jsx("span",{children:$(_e)}),jsxRuntimeExports.jsx("span",{className:"text-inherit max-w-20 w-full truncate",children:truncateFilename(_)})]})})},FileTokenNode=Node.create({name:"fileToken",group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes(){return{fileName:{default:"Untitled File"},placeholderId:{default:null}}},parseHTML(){return[{tag:"file-token"}]},renderHTML({HTMLAttributes:b}){return["file-token",mergeAttributes(b)]},addNodeView(){return ReactNodeViewRenderer(FileTokenComponent)}}),doc="data:image/svg+xml,%3csvg%20width='11'%20height='14'%20viewBox='0%200%2011%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.31055%2013.0508C1.09766%2013.0508%200.494141%2012.4414%200.494141%2011.2168V2.32812C0.494141%201.10938%201.10352%200.488281%202.31055%200.488281H5V4.78906C5%205.53906%205.35742%205.89648%206.10742%205.89648H10.3496V11.2168C10.3496%2012.4355%209.74609%2013.0508%208.5332%2013.0508H2.31055ZM6.125%205.09375C5.9082%205.09375%205.80273%204.98828%205.80273%204.77734V0.552734C6.04883%200.59375%206.28906%200.763672%206.56445%201.04492L9.79297%204.33203C10.0742%204.61914%2010.2441%204.85352%2010.2793%205.09375H6.125Z'%20fill='white'/%3e%3c/svg%3e",loader="data:image/svg+xml,%3csvg%20width='313'%20height='257'%20viewBox='0%200%20313%20257'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_b_1_265)'%3e%3crect%20x='134.5'%20y='150.5'%20width='44'%20height='44'%20rx='22'%20transform='rotate(-90%20134.5%20150.5)'%20fill='%23191919'%20fill-opacity='0.7'/%3e%3crect%20x='135.5'%20y='149.5'%20width='42'%20height='42'%20rx='21'%20transform='rotate(-90%20135.5%20149.5)'%20stroke='url(%23paint0_angular_1_265)'%20stroke-width='2'/%3e%3cpath%20d='M162.882%20134.867C162.6%20135.157%20162.118%20135.149%20161.836%20134.867L156.515%20129.554L151.203%20134.867C150.92%20135.149%20150.447%20135.149%20150.157%20134.867C149.858%20134.584%20149.866%20134.095%20150.157%20133.812L155.469%20128.5L150.157%20123.188C149.866%20122.905%20149.866%20122.424%20150.157%20122.133C150.439%20121.843%20150.92%20121.851%20151.203%20122.133L156.515%20127.446L161.836%20122.133C162.118%20121.851%20162.591%20121.851%20162.882%20122.133C163.172%20122.416%20163.164%20122.905%20162.882%20123.188L157.569%20128.5L162.882%20133.812C163.164%20134.095%20163.164%20134.576%20162.882%20134.867Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_b_1_265'%20x='90.5'%20y='62.5'%20width='132'%20height='132'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeGaussianBlur%20in='BackgroundImageFix'%20stdDeviation='22'/%3e%3cfeComposite%20in2='SourceAlpha'%20operator='in'%20result='effect1_backgroundBlur_1_265'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_backgroundBlur_1_265'%20result='shape'/%3e%3c/filter%3e%3cradialGradient%20id='paint0_angular_1_265'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(156.5%20172.5)%20rotate(90)%20scale(22)'%3e%3cstop%20offset='0.359655'%20stop-color='%231D49E5'/%3e%3cstop%20offset='0.493962'%20stop-color='%231D49E5'%20stop-opacity='0'/%3e%3cstop%20offset='0.7538'%20stop-color='%233076FF'%20stop-opacity='0'/%3e%3cstop%20offset='0.918877'%20stop-color='%233076FF'/%3e%3c/radialGradient%3e%3c/defs%3e%3c/svg%3e";function PreviewBox({file:b}){const g=b==null?void 0:b.name,_=b==null?void 0:b.type,j=_==null?void 0:_.startsWith("image/"),$=_==null?void 0:_.startsWith("video/"),_e=_==null?void 0:_.startsWith("audio/"),et=_==="application/pdf",tt=_==="application/zip"||(g==null?void 0:g.endsWith(".zip")),nt=_==="text/csv"||(g==null?void 0:g.endsWith(".csv")),rt=_==="application/vnd.ms-excel"||_==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",it=b?URL.createObjectURL(b):"";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full max-w-xs p-3 bg-white rounded-2xl border",children:[j&&jsxRuntimeExports.jsx("img",{src:it,alt:`${g} Preview`,className:"w-full h-auto rounded-2xl border"}),$&&jsxRuntimeExports.jsxs("video",{controls:!0,className:"w-full max-h-[200px] h-auto rounded-lg mt-2 border",children:[jsxRuntimeExports.jsx("source",{src:it,type:_}),"Your browser does not support the video tag."]}),_e&&jsxRuntimeExports.jsxs("audio",{controls:!0,className:"w-full mt-2 border rounded-lg",children:[jsxRuntimeExports.jsx("source",{src:it,type:_}),"Your browser does not support the audio element."]}),et&&jsxRuntimeExports.jsx("iframe",{src:it,className:"w-full h-[400px] rounded-lg border mt-2",title:`${g} Preview`}),tt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#d9534f] text-sm mt-2",children:[jsxRuntimeExports.jsx("p",{children:g}),jsxRuntimeExports.jsx("p",{children:"(ZIP File)"})]}),nt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#5cb85c] text-sm mt-2",children:[jsxRuntimeExports.jsx("p",{children:g}),jsxRuntimeExports.jsx("p",{children:"(CSV File)"})]}),rt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#2a9d8f] text-sm mt-2",children:[jsxRuntimeExports.jsx("p",{children:g}),jsxRuntimeExports.jsx("p",{children:"(Excel File)"})]}),!j&&!$&&!_e&&!et&&!tt&&!nt&&!rt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#666] text-sm mt-2",children:[jsxRuntimeExports.jsx("p",{children:g}),jsxRuntimeExports.jsxs("p",{children:["(",_,")"]})]})]})}const formatFileSize=b=>{const g=b/1073741824;return g>=1?`${g.toFixed(2)} GB`:`${(b/1048576).toFixed(2)} MB`},calculateCumulativeFileSize=b=>b.reduce((g,_)=>g+_.file.size,0),TextBubble=React.forwardRef((b,g)=>{const{selectedFiles:_,linkGenerated:j,isGenerating:$,setDisabledState:_e,step:et,handleFileUpload:tt,setSelectedFiles:nt}=b,[rt,it]=reactExports.useState(null),st=useEditor({extensions:[StarterKit,FileTokenNode,Paragraph.configure({HTMLAttributes:{class:"text-left focus:border-transparent text-white text-left overflow-y-visible focus:outline-none"}})],content:`
    <p></p>
    `,onUpdate:({editor:pt})=>{pt.isEmpty?_e(!0):_e(!1)},autofocus:!0,editable:!(et>=1),editorProps:{attributes:{class:"w-[290px] text-left min-h-[220px] text-white text-left overflow-visible focus:outline-none"}},onSelectionUpdate:({editor:pt})=>{const mt=pt.state.selection,ft=mt.from,gt=mt.to;let xt;_.forEach(vt=>{const{placeholderId:St}=vt;pt.view.state.doc.descendants((Tt,bt)=>{var At;if(((At=Tt.attrs)==null?void 0:At.placeholderId)===St&&bt>=ft&&bt<=gt)return xt=vt,!1})}),it(xt?xt.file:null)}}),ot=reactExports.useCallback(pt=>{pt.forEach(mt=>{const ft=`file-token-${Math.random().toString(36).substring(2,9)}`;st==null||st.commands.insertContent({type:"fileToken",attrs:{fileName:mt.name,placeholderId:ft}}),st==null||st.commands.insertContent({type:"text",text:" "}),nt(gt=>[...gt,{file:mt,placeholderId:ft}])})},[st,nt]);reactExports.useImperativeHandle(g,()=>({insertFileTokens:ot,getEditorContent:()=>st==null?void 0:st.getHTML()}));const lt=reactExports.useRef(null),at=()=>{lt.current&&lt.current.click()},ut=reactExports.useCallback(pt=>{pt.preventDefault(),pt.stopPropagation();const mt=Array.from(pt.dataTransfer.files);mt.length&&ot(mt)},[ot]),dt=pt=>{pt.preventDefault(),pt.stopPropagation()},ct=calculateCumulativeFileSize(_),ht=formatFileSize(ct);return jsxRuntimeExports.jsxs("div",{className:`w-full h-full trunc rounded-2xl pb-2 -translate-y-16 relative ${et>=2&&!j?"bg-[#97b8fd] cursor-none":"bg-gradient-to-b from-[#3076FF] to-[#1D49E5] "} ${et>=1&&et!==4?"mb-44":""}`,onDrop:ut,onDragOver:dt,children:[jsxRuntimeExports.jsx("div",{className:"text-bubble w-full h-full text-white",children:jsxRuntimeExports.jsx(EditorContent,{editor:st})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{disabled:et>=1,contentEditable:!1,className:`flex items-center gap-2 bg-[#FFFFFF33] text-white text-xs py-1 px-2 rounded-3xl mx-auto ${et>=1?"cursor-not-allowed":"cursor-pointer"}`,onClick:at,children:["Add files",jsxRuntimeExports.jsx("img",{src:doc,alt:"Document Icon"})]}),jsxRuntimeExports.jsx("input",{type:"file",ref:lt,className:"hidden",onChange:tt,multiple:!0})]}),rt&&jsxRuntimeExports.jsxs("div",{className:"mt-2 relative translate-y-3",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full max-w-xs",children:jsxRuntimeExports.jsx(PreviewBox,{file:rt})}),et>=2&&!j&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-30 rounded-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("img",{src:loader,alt:"Loader",className:`w-full ${$?"block":"hidden"}`})}),jsxRuntimeExports.jsx("div",{className:"flex w-full justify-center",children:jsxRuntimeExports.jsxs("p",{className:"text-white text-xs absolute bottom-4 text-center w-[150px] bg-[#19191980] py-1 px-2 rounded-full",children:[ht," ",$?"Uploading":"Selected"]})})]})]})]})}),back="data:image/svg+xml,%3csvg%20width='17'%20height='14'%20viewBox='0%200%2017%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.616699%206.99023C0.616699%206.70801%200.741211%206.42578%200.94043%206.22656L6.37744%200.797852C6.60986%200.56543%206.86719%200.45752%207.12451%200.45752C7.72217%200.45752%208.13721%200.880859%208.13721%201.44531C8.13721%201.74414%208.0127%201.99316%207.82178%202.18408L5.9707%204.06006L3.7793%206.06055L5.66357%205.95264H15.4502C16.0811%205.95264%2016.5044%206.37598%2016.5044%206.99023C16.5044%207.60449%2016.0811%208.02783%2015.4502%208.02783H5.66357L3.7793%207.91992L5.9707%209.92041L7.82178%2011.7964C8.0127%2011.979%208.13721%2012.228%208.13721%2012.5352C8.13721%2013.0913%207.72217%2013.5146%207.12451%2013.5146C6.86719%2013.5146%206.60986%2013.415%206.39404%2013.1992L0.94043%207.75391C0.741211%207.55469%200.616699%207.27246%200.616699%206.99023Z'%20fill='%237E7E7E'/%3e%3c/svg%3e",exportIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAUCAYAAACEYr13AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFASURBVHgBtVNNToUwEIbSPH4WBBckwMb3TqDeAE/05ATiSV48gfEExhPoDawLAgkbFixYEPAbU5JGUiDq+5Jmpu3M981MWstYQBiG177vO23bNroYprtIkuSec/5mmuZLFEV7XZypSx7HMVeOBPa3VVWJ1QqmZKxH2k9WV8mMYBiGFEkPcHN5NJI6LM1hRqAFqcVxPMKeluJ4AHied4RKOh32fZ9JRbW1E2L2ctvAz2gm3HVd6vlODbYsK/hJIAUmAppJCu0Dh59K1Zu6rt/VFlSCsiwPZKliiD5R3m63S2mIpGaoyUtoAFTzSj5jLGDGH3E+AsdxpiF+GgvgugshRIN5XVDPxm8qIKwlrxJswf8RLP35WRJjl9IVNMRnrCOe5gc+zyYCPCQyzTeBbdt513UBCK5wERjbIPBfsqIoxBfnI4Ubz+6yogAAAABJRU5ErkJggg==",copyIcon="data:image/svg+xml,%3csvg%20width='18'%20height='22'%20viewBox='0%200%2018%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.6948%2017.2988V12.501C14.6948%2011.3721%2014.5205%2010.4092%2013.5908%209.47119L8.87598%204.76465C7.94629%203.83496%207.0083%203.56934%205.84619%203.56934H4.64258V3.09619C4.64258%201.43604%205.53076%200.556152%207.21582%200.556152H11.6401V5.46191C11.6401%206.3252%2012.1299%206.81494%2013.0015%206.81494H17.5918V14.6924C17.5918%2016.4189%2016.7202%2017.2988%2015.0186%2017.2988H14.6948ZM13.1592%205.77734C12.8188%205.77734%2012.6943%205.63623%2012.6943%205.2959L12.686%200.896484C12.9434%200.929688%2013.1841%201.1123%2013.4663%201.41113L16.9775%204.98877C17.2681%205.2793%2017.4507%205.51172%2017.4922%205.77734H13.1592ZM3.18994%2021.4409C1.47168%2021.4409%200.616699%2020.5693%200.616699%2018.8345V7.30469C0.616699%205.56982%201.47998%204.69824%203.18994%204.69824H6.20312V10.708C6.20312%2011.7705%206.70117%2012.2769%207.77197%2012.2769H13.5659V18.8345C13.5659%2020.561%2012.7109%2021.4409%2010.9927%2021.4409H3.18994ZM7.76367%2011.1396C7.48145%2011.1396%207.33203%2010.9985%207.33203%2010.7163V4.90576C7.65576%204.99707%207.97119%205.24609%208.33643%205.61963L12.769%2010.1353C13.1426%2010.5171%2013.3335%2010.8159%2013.4165%2011.1396H7.76367Z'%20fill='url(%23paint0_linear_1_530)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_1_530'%20x1='9.5'%20y1='0'%20x2='9.5'%20y2='22'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%233076FF'/%3e%3cstop%20offset='1'%20stop-color='%231D49E5'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",GenerateLinkButton=({linkGenerated:b,isGenerating:g,handleCreateBubble:_,setLinkGenerated:j,setIsGenerating:$})=>{const[_e,et]=reactExports.useState(!1),[tt,nt]=reactExports.useState(""),rt=async()=>{$(!0),et(!0);try{const{bubbleId:st}=await _();if(st){const lt=`https://typo.inc/bubble/${st}`;nt(lt),j(!0)}else console.error("Bubble ID not available")}catch(st){console.error("Error creating bubble:",st)}finally{$(!1),et(!1)}},it=()=>{navigator.clipboard.writeText(tt),alert("Link copied to clipboard!")};return jsxRuntimeExports.jsx("button",{onClick:rt,disabled:_e||tt!=="",className:`bg-[#F3F3F3BF] text-secondary px-4 py-2.5 rounded-full w-[260px] flex items-center gap-2 font-semibold ${_e?"opacity-40 cursor-not-allowed":""} shadow-sm shadow-secondary`,children:b?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 max-w-[250px] w-full truncate",children:[jsxRuntimeExports.jsx("img",{src:copyIcon,alt:"Copy icon",className:"w-4 h-4 cursor-pointer",onClick:it}),jsxRuntimeExports.jsx("a",{href:tt,target:"_blank",rel:"noopener noreferrer",children:tt})]}):g?jsxRuntimeExports.jsx("span",{className:"w-full text-center",children:"Generating link..."}):jsxRuntimeExports.jsx("span",{className:"w-full text-center",children:"Generate link"})})},BASE_URL$1="https://production-1016379130133.us-central1.run.app",createUser=async b=>{try{return await(await fetch(`${BASE_URL$1}/api/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json()}catch(g){throw console.error("Error creating user:",g),g}},uploadFiles=async b=>{const g=new FormData;b.forEach(_=>{g.append("files",_)});try{const _=await fetch(`${BASE_URL$1}/api/tokens/upload`,{method:"POST",body:g});if(!_.ok)throw new Error("Failed to upload files");return await _.json()}catch(_){throw console.error("Error uploading files:",_),_}},createBubble=async(b,g,_)=>{const j={content:b,tokens:g,createdByPhone:_};try{const $=await fetch(`${BASE_URL$1}/api/bubbles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!$.ok)throw new Error("Failed to create bubble");return await $.json()}catch($){throw console.error("Error creating bubble:",$),$}};function StepOneBottom({disabledState:b,linkGenerated:g,isGenerating:_,handleCreateBubble:j,step:$,setStep:_e,setIsGenerating:et,setLinkGenerated:tt,setUserPhone:nt}){const[rt,it]=reactExports.useState({name:"",phone:"",countryCode:""}),[st,ot]=reactExports.useState(""),lt=async()=>{try{if(!rt.name||!rt.phone)return;await createUser({name:rt.name,phone:rt.countryCode+rt.phone})&&(nt(rt.countryCode+rt.phone),_e(3))}catch(at){console.error("Error creating user:",at),alert("Error creating user")}};return jsxRuntimeExports.jsx("div",{className:"absolute bottom-12",children:{0:jsxRuntimeExports.jsxs("button",{onClick:()=>_e(1),disabled:b,className:`bg-[#F3F3F3BF] text-primary px-4 py-2.5 rounded-full flex items-center gap-2 font-semibold ${b?"opacity-40 cursor-not-allowed":""}`,children:[jsxRuntimeExports.jsx("img",{src:exportIcon,alt:"plus icon",className:"w-3.5 h-4"}),"Share an idea"]}),1:jsxRuntimeExports.jsxs("div",{className:"bg-[#F3F3F3BF] w-[320px] p-6 rounded-2xl",children:[jsxRuntimeExports.jsx("h2",{className:"text-primary font-bold text-xl max-w-xs w-full text-center",children:"What's your name?"}),jsxRuntimeExports.jsx("p",{className:"text-[#7E7E7E] text-sm text-center",children:"We'll send you a copy of your link so you can easily find it in the future!"}),jsxRuntimeExports.jsx("input",{name:"name",placeholder:"Your name...",onChange:at=>it({...rt,name:at.target.value}),className:"rounded-3xl bg-white p-2 px-4 w-full text-primary placeholder:text-[#7E7E7E] outline-none my-4"}),jsxRuntimeExports.jsx("button",{onClick:()=>{rt.name&&_e(2)},className:"bg-[#191919CC] text-white rounded-3xl py-3 px-4 w-full font-semibold",children:"Continue"})]}),2:jsxRuntimeExports.jsxs("div",{className:"bg-[#F3F3F3BF] w-[320px] p-6 rounded-2xl",children:[jsxRuntimeExports.jsx("h2",{className:"text-primary font-bold text-xl max-w-xs w-full text-center",children:"What's your number?"}),jsxRuntimeExports.jsx("p",{className:"text-[#7E7E7E] text-sm text-center",children:"We'll send you a copy of your link so you can easily find it in the future!"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center my-4",children:[jsxRuntimeExports.jsxs("select",{className:"rounded-3xl bg-white p-2 px-4 appearance-none w-[120px] text-primary placeholder:text-primary outline-none",onChange:at=>it({...rt,countryCode:at.target.value}),children:[jsxRuntimeExports.jsx("option",{value:"",children:"--"}),jsxRuntimeExports.jsx("option",{value:"+1",children:"🇺🇸 +1"}),jsxRuntimeExports.jsx("option",{value:"+1CA",children:"🇨🇦 +1"}),jsxRuntimeExports.jsx("option",{value:"+44",children:"🇬🇧 +44"}),jsxRuntimeExports.jsx("option",{value:"+61",children:"🇦🇺 +61"}),jsxRuntimeExports.jsx("option",{value:"+81",children:"🇯🇵 +81"}),jsxRuntimeExports.jsx("option",{value:"+82",children:"🇰🇷 +82"}),jsxRuntimeExports.jsx("option",{value:"+65",children:"🇸🇬 +65"}),jsxRuntimeExports.jsx("option",{value:"+971",children:"🇦🇪 +971"}),jsxRuntimeExports.jsx("option",{value:"+355",children:"🇦🇱 +355"}),jsxRuntimeExports.jsx("option",{value:"+376",children:"🇦🇩 +376"}),jsxRuntimeExports.jsx("option",{value:"+374",children:"🇦🇲 +374"}),jsxRuntimeExports.jsx("option",{value:"+43",children:"🇦🇹 +43"}),jsxRuntimeExports.jsx("option",{value:"+994",children:"🇦🇿 +994"}),jsxRuntimeExports.jsx("option",{value:"+375",children:"🇧🇾 +375"}),jsxRuntimeExports.jsx("option",{value:"+32",children:"🇧🇪 +32"}),jsxRuntimeExports.jsx("option",{value:"+387",children:"🇧🇦 +387"}),jsxRuntimeExports.jsx("option",{value:"+359",children:"🇧🇬 +359"}),jsxRuntimeExports.jsx("option",{value:"+385",children:"🇭🇷 +385"}),jsxRuntimeExports.jsx("option",{value:"+357",children:"🇨🇾 +357"}),jsxRuntimeExports.jsx("option",{value:"+420",children:"🇨🇿 +420"}),jsxRuntimeExports.jsx("option",{value:"+45",children:"🇩🇰 +45"}),jsxRuntimeExports.jsx("option",{value:"+372",children:"🇪🇪 +372"}),jsxRuntimeExports.jsx("option",{value:"+358",children:"🇫🇮 +358"}),jsxRuntimeExports.jsx("option",{value:"+33",children:"🇫🇷 +33"}),jsxRuntimeExports.jsx("option",{value:"+995",children:"🇬🇪 +995"}),jsxRuntimeExports.jsx("option",{value:"+30",children:"🇬🇷 +30"}),jsxRuntimeExports.jsx("option",{value:"+36",children:"+36"}),jsxRuntimeExports.jsx("option",{value:"+354",children:"🇮🇸 +354"}),jsxRuntimeExports.jsx("option",{value:"+353",children:"🇮🇪 +353"}),jsxRuntimeExports.jsx("option",{value:"+39",children:"🇮🇹 +39"}),jsxRuntimeExports.jsx("option",{value:"+7",children:"🇰🇿 +7"}),jsxRuntimeExports.jsx("option",{value:"+371",children:"🇱🇻 +371"}),jsxRuntimeExports.jsx("option",{value:"+423",children:"🇱🇮 +423"}),jsxRuntimeExports.jsx("option",{value:"+370",children:"🇱🇹 +370"}),jsxRuntimeExports.jsx("option",{value:"+352",children:"🇱🇺 +352"}),jsxRuntimeExports.jsx("option",{value:"+389",children:"🇲🇰 +389"}),jsxRuntimeExports.jsx("option",{value:"+356",children:"🇲🇹 +356"}),jsxRuntimeExports.jsx("option",{value:"+373",children:"🇲🇩 +373"}),jsxRuntimeExports.jsx("option",{value:"+377",children:"🇲🇨 +377"}),jsxRuntimeExports.jsx("option",{value:"+382",children:"🇲🇪 +382"}),jsxRuntimeExports.jsx("option",{value:"+31",children:"🇳🇱 +31"}),jsxRuntimeExports.jsx("option",{value:"+47",children:"🇳🇴 +47"}),jsxRuntimeExports.jsx("option",{value:"+48",children:"🇵🇱 +48"}),jsxRuntimeExports.jsx("option",{value:"+351",children:"🇵🇹 +351"}),jsxRuntimeExports.jsx("option",{value:"+40",children:"🇷🇴 +40"}),jsxRuntimeExports.jsx("option",{value:"+7",children:"🇷🇺 +7"}),jsxRuntimeExports.jsx("option",{value:"+381",children:"🇷🇸 +381"}),jsxRuntimeExports.jsx("option",{value:"+421",children:"🇸🇰 +421"}),jsxRuntimeExports.jsx("option",{value:"+386",children:"🇸🇮 +386"}),jsxRuntimeExports.jsx("option",{value:"+34",children:"🇪🇸 +34"}),jsxRuntimeExports.jsx("option",{value:"+46",children:"🇸🇪 +46"}),jsxRuntimeExports.jsx("option",{value:"+41",children:"🇨🇭 +41"}),jsxRuntimeExports.jsx("option",{value:"+90",children:"🇹🇷 +90"}),jsxRuntimeExports.jsx("option",{value:"+380",children:"🇺🇦 +380"}),jsxRuntimeExports.jsx("option",{value:"+39",children:"🇻🇦 +39"}),jsxRuntimeExports.jsx("option",{value:"+54",children:"🇦🇷 +54"}),jsxRuntimeExports.jsx("option",{value:"+591",children:"🇧🇴 +591"}),jsxRuntimeExports.jsx("option",{value:"+55",children:"🇧🇷 +55"}),jsxRuntimeExports.jsx("option",{value:"+56",children:"🇨🇱 +56"}),jsxRuntimeExports.jsx("option",{value:"+57",children:"🇨🇴 +57"}),jsxRuntimeExports.jsx("option",{value:"+593",children:"🇪🇨 +593"}),jsxRuntimeExports.jsx("option",{value:"+592",children:"🇬🇾 +592"}),jsxRuntimeExports.jsx("option",{value:"+595",children:"🇵🇾 +595"}),jsxRuntimeExports.jsx("option",{value:"+51",children:"🇵🇪 +51"}),jsxRuntimeExports.jsx("option",{value:"+597",children:"🇸🇷 +597"}),jsxRuntimeExports.jsx("option",{value:"+598",children:"🇺🇾 +598"}),jsxRuntimeExports.jsx("option",{value:"+58",children:"🇻🇪 +58"}),jsxRuntimeExports.jsx("option",{value:"+93",children:"🇦🇫 +93"}),jsxRuntimeExports.jsx("option",{value:"+374",children:"🇦🇲 +374"}),jsxRuntimeExports.jsx("option",{value:"+994",children:"🇦🇿 +994"}),jsxRuntimeExports.jsx("option",{value:"+973",children:"🇧🇭 +973"}),jsxRuntimeExports.jsx("option",{value:"+880",children:"🇧🇩 +880"}),jsxRuntimeExports.jsx("option",{value:"+975",children:"🇧🇹 +975"}),jsxRuntimeExports.jsx("option",{value:"+673",children:"🇧🇳 +673"}),jsxRuntimeExports.jsx("option",{value:"+95",children:"🇲🇲 +95"}),jsxRuntimeExports.jsx("option",{value:"+855",children:"🇰🇭 +855"}),jsxRuntimeExports.jsx("option",{value:"+86",children:"🇨🇳 +86"}),jsxRuntimeExports.jsx("option",{value:"+357",children:"🇨🇾 +357"}),jsxRuntimeExports.jsx("option",{value:"+995",children:"🇬🇪 +995"}),jsxRuntimeExports.jsx("option",{value:"+91",children:"🇮🇳 +91"}),jsxRuntimeExports.jsx("option",{value:"+62",children:"🇮🇩 +62"}),jsxRuntimeExports.jsx("option",{value:"+98",children:"🇮🇷 +98"}),jsxRuntimeExports.jsx("option",{value:"+964",children:"🇮🇶 +964"}),jsxRuntimeExports.jsx("option",{value:"+972",children:"🇮🇱 +972"}),jsxRuntimeExports.jsx("option",{value:"+81",children:"🇯🇵 +81"}),jsxRuntimeExports.jsx("option",{value:"+962",children:"🇯🇴 +962"}),jsxRuntimeExports.jsx("option",{value:"+7",children:"🇰🇿 +7"}),jsxRuntimeExports.jsx("option",{value:"+965",children:"🇰🇼 +965"}),jsxRuntimeExports.jsx("option",{value:"+996",children:"🇰🇬 +996"}),jsxRuntimeExports.jsx("option",{value:"+856",children:"🇱🇦 +856"}),jsxRuntimeExports.jsx("option",{value:"+961",children:"🇱🇧 +961"}),jsxRuntimeExports.jsx("option",{value:"+60",children:"🇲🇾 +60"}),jsxRuntimeExports.jsx("option",{value:"+960",children:"🇲🇻 +960"}),jsxRuntimeExports.jsx("option",{value:"+976",children:"🇲🇳 +976"}),jsxRuntimeExports.jsx("option",{value:"+977",children:"🇳🇵 +977"}),jsxRuntimeExports.jsx("option",{value:"+850",children:"🇰🇵 +850"}),jsxRuntimeExports.jsx("option",{value:"+968",children:"🇴🇲 +968"}),jsxRuntimeExports.jsx("option",{value:"+92",children:"🇵🇰 +92"}),jsxRuntimeExports.jsx("option",{value:"+63",children:"🇵🇭 +63"}),jsxRuntimeExports.jsx("option",{value:"+974",children:"🇶🇦 +974"}),jsxRuntimeExports.jsx("option",{value:"+966",children:"🇸🇦 +966"}),jsxRuntimeExports.jsx("option",{value:"+65",children:"🇸🇬 +65"}),jsxRuntimeExports.jsx("option",{value:"+82",children:"🇰🇷 +82"}),jsxRuntimeExports.jsx("option",{value:"+94",children:"🇱🇰 +94"}),jsxRuntimeExports.jsx("option",{value:"+963",children:"🇸🇾 +963"}),jsxRuntimeExports.jsx("option",{value:"+992",children:"🇹🇯 +992"}),jsxRuntimeExports.jsx("option",{value:"+66",children:"🇹🇭 +66"}),jsxRuntimeExports.jsx("option",{value:"+90",children:"🇹🇷 +90"}),jsxRuntimeExports.jsx("option",{value:"+993",children:"🇹🇲 +993"}),jsxRuntimeExports.jsx("option",{value:"+971",children:"🇦🇪 +971"}),jsxRuntimeExports.jsx("option",{value:"+998",children:"🇺🇿 +998"}),jsxRuntimeExports.jsx("option",{value:"+84",children:"🇻🇳 +84"}),jsxRuntimeExports.jsx("option",{value:"+967",children:"🇾🇪 +967"}),jsxRuntimeExports.jsx("option",{value:"+213",children:"🇩🇿 +213"}),jsxRuntimeExports.jsx("option",{value:"+244",children:"🇦🇴 +244"}),jsxRuntimeExports.jsx("option",{value:"+229",children:"🇧🇯 +229"}),jsxRuntimeExports.jsx("option",{value:"+267",children:"🇧🇼 +267"}),jsxRuntimeExports.jsx("option",{value:"+226",children:"🇧🇫 +226"}),jsxRuntimeExports.jsx("option",{value:"+257",children:"🇧🇮 +257"}),jsxRuntimeExports.jsx("option",{value:"+238",children:"🇨🇻 +238"}),jsxRuntimeExports.jsx("option",{value:"+237",children:"🇨🇲 +237"}),jsxRuntimeExports.jsx("option",{value:"+236",children:"🇨🇫 +236"}),jsxRuntimeExports.jsx("option",{value:"+235",children:"🇹🇩 +235"}),jsxRuntimeExports.jsx("option",{value:"+269",children:"🇰🇲 +269"}),jsxRuntimeExports.jsx("option",{value:"+243",children:"🇨🇩 +243"}),jsxRuntimeExports.jsx("option",{value:"+253",children:"🇩🇯 +253"}),jsxRuntimeExports.jsx("option",{value:"+20",children:"🇪🇬 +20"}),jsxRuntimeExports.jsx("option",{value:"+240",children:"🇬🇶 +240"}),jsxRuntimeExports.jsx("option",{value:"+291",children:"🇪🇷 +291"}),jsxRuntimeExports.jsx("option",{value:"+251",children:"🇪🇹 +251"}),jsxRuntimeExports.jsx("option",{value:"+241",children:"🇬🇦 +241"}),jsxRuntimeExports.jsx("option",{value:"+220",children:"🇬🇲 +220"}),jsxRuntimeExports.jsx("option",{value:"+233",children:"🇬🇭 +233"}),jsxRuntimeExports.jsx("option",{value:"+224",children:"🇬🇳 +224"}),jsxRuntimeExports.jsx("option",{value:"+245",children:"🇬🇼 +245"}),jsxRuntimeExports.jsx("option",{value:"+225",children:"🇨🇮 +225"}),jsxRuntimeExports.jsx("option",{value:"+254",children:"🇰🇪 +254"}),jsxRuntimeExports.jsx("option",{value:"+266",children:"🇱🇸 +266"}),jsxRuntimeExports.jsx("option",{value:"+231",children:"🇱🇷 +231"}),jsxRuntimeExports.jsx("option",{value:"+218",children:"🇱🇾 +218"}),jsxRuntimeExports.jsx("option",{value:"+261",children:"🇲🇬 +261"}),jsxRuntimeExports.jsx("option",{value:"+265",children:"🇲🇼 +265"}),jsxRuntimeExports.jsx("option",{value:"+223",children:"🇲🇱 +223"}),jsxRuntimeExports.jsx("option",{value:"+222",children:"🇲🇷 +222"}),jsxRuntimeExports.jsx("option",{value:"+230",children:"🇲🇺 +230"}),jsxRuntimeExports.jsx("option",{value:"+212",children:"🇲🇦 +212"}),jsxRuntimeExports.jsx("option",{value:"+258",children:"🇲🇿 +258"}),jsxRuntimeExports.jsx("option",{value:"+264",children:"🇳🇦 +264"}),jsxRuntimeExports.jsx("option",{value:"+227",children:"🇳🇪 +227"}),jsxRuntimeExports.jsx("option",{value:"+234",children:"🇳🇬 +234"}),jsxRuntimeExports.jsx("option",{value:"+242",children:"🇨🇬 +242"}),jsxRuntimeExports.jsx("option",{value:"+250",children:"🇷🇼 +250"}),jsxRuntimeExports.jsx("option",{value:"+239",children:"🇸🇹 +239"}),jsxRuntimeExports.jsx("option",{value:"+221",children:"🇸🇳 +221"}),jsxRuntimeExports.jsx("option",{value:"+248",children:"🇸🇨 +248"}),jsxRuntimeExports.jsx("option",{value:"+232",children:"🇸🇱 +232"}),jsxRuntimeExports.jsx("option",{value:"+252",children:"🇸🇴 +252"}),jsxRuntimeExports.jsx("option",{value:"+27",children:"🇿🇦 +27"}),jsxRuntimeExports.jsx("option",{value:"+211",children:"🇸🇸 +211"}),jsxRuntimeExports.jsx("option",{value:"+249",children:"🇸🇩 +249"}),jsxRuntimeExports.jsx("option",{value:"+255",children:"🇹🇿 +255"}),jsxRuntimeExports.jsx("option",{value:"+228",children:"🇹🇬 +228"}),jsxRuntimeExports.jsx("option",{value:"+216",children:"🇹🇳 +216"}),jsxRuntimeExports.jsx("option",{value:"+256",children:"🇺🇬 +256"}),jsxRuntimeExports.jsx("option",{value:"+260",children:"🇿🇲 +260"}),jsxRuntimeExports.jsx("option",{value:"+263",children:"🇿🇼 +263"})]}),jsxRuntimeExports.jsx("input",{name:"phone",placeholder:"(404) 291-4982",onChange:at=>it({...rt,phone:at.target.value}),className:"rounded-3xl bg-white p-2 px-4 w-full text-primary placeholder:text-[#7E7E7E] outline-none"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{lt()},className:"bg-[#191919CC] text-white rounded-3xl py-3 px-4 w-full font-semibold",children:"Continue"})]}),3:jsxRuntimeExports.jsxs("div",{className:"bg-[#F3F3F3BF] w-[320px] p-6 rounded-2xl relative",children:[jsxRuntimeExports.jsx("img",{src:back,alt:"back",className:"absolute top-8 left-4 cursor-pointer",onClick:()=>_e(2)}),jsxRuntimeExports.jsx("h2",{className:"text-primary font-bold text-xl max-w-xs w-full text-center",children:"Enter verification code"}),jsxRuntimeExports.jsx("p",{className:"text-[#7E7E7E] text-[15px] text-center",children:"Enter the verification code we just sent to your phone number"}),jsxRuntimeExports.jsx("input",{name:"code",onChange:at=>ot(at.target.value),placeholder:"123456",className:"rounded-3xl bg-white p-2 px-4 w-full text-primary placeholder:text-[#7E7E7E] text-center placeholder:text-center outline-none my-4"}),jsxRuntimeExports.jsx("button",{onClick:()=>{st==="123456"?_e(4):alert("Invalid code")},className:"bg-[#191919CC] text-white rounded-3xl py-3 px-4 w-full font-semibold",children:"Continue"})]}),4:jsxRuntimeExports.jsx(GenerateLinkButton,{linkGenerated:g,isGenerating:_,setIsGenerating:et,setLinkGenerated:tt,handleCreateBubble:j})}[$]})}const App$1=()=>{const[b,g]=reactExports.useState([]),[_,j]=reactExports.useState([]),[$,_e]=reactExports.useState(""),et=reactExports.useRef(null),[tt,nt]=reactExports.useState(!0);console.log("Current selected files:",_),console.log("Current created tokens:",b);const rt=mt=>{var ft;mt.preventDefault(),mt.stopPropagation(),(ft=mt.dataTransfer)!=null&&ft.files&&Array.from(mt.dataTransfer.files).forEach(gt=>j(xt=>[...xt,{file:gt,placeholderId:`file-token-${Math.random().toString(36).substr(2,9)}`}]))},it=mt=>{mt.preventDefault()};reactExports.useEffect(()=>(window.addEventListener("dragover",it),window.addEventListener("drop",rt),()=>{window.removeEventListener("dragover",it),window.removeEventListener("drop",rt)}),[]);const[st,ot]=reactExports.useState(0),[lt,at]=reactExports.useState(!1),[ut,dt]=reactExports.useState(!1),ct=mt=>{const ft=Array.from(mt.target.files||[]);if(et.current){const gt=ft.filter(xt=>!_.some(vt=>vt.file.name===xt.name));console.log("New files after filtering duplicates:",gt),gt.length>0?(et.current.insertFileTokens(gt),j(xt=>{const St=[...xt,...gt.map(Tt=>({file:Tt,placeholderId:`file-token-${Math.random().toString(36).substring(2,9)}`}))].filter((Tt,bt,At)=>bt===At.findIndex(Pt=>Pt.file.name===Tt.file.name));return console.log("Unique updated files:",St),St})):console.log("No new files to add.")}},ht=mt=>mt.replace(/(<(?!file-token)[^>\s]+)([^>]*)/g,"$1").replace(/<file-token([^>]*?)>/g,(xt,vt)=>{const St=vt.match(/id="[^"]+"/);return St?`<file-token ${St[0]}>`:"<file-token>"}),pt=async()=>{if(!et.current)return console.error("Editor reference not found."),{bubbleId:null};let mt=et.current.getEditorContent();if(console.log("Editor content before token replacement:",mt),!mt)return console.error("No content found in the editor."),{bubbleId:null};mt=ht(mt),console.log("Cleaned bubble content:",mt);try{if(_.length===0)return console.error("No files selected for upload."),{bubbleId:null};console.log("Starting to upload files:",_);const ft=await uploadFiles(_.map(vt=>vt.file));console.log("Uploaded files and received tokens:",ft);const gt=ft.filter((vt,St,Tt)=>St===Tt.findIndex(bt=>bt._id===vt._id));g(gt),console.log("Unique tokens after filtering:",gt),_.forEach((vt,St)=>{const Tt=vt.placeholderId,bt=gt[St],At=new RegExp(`<file-token[^>]*id="${Tt}"></file-token>`,"g");mt=mt==null?void 0:mt.replace(At,`<file-token id="${bt._id}"></file-token>`)}),console.log("Final bubble content to send:",mt);const xt=await createBubble(mt,gt.map(vt=>vt._id),$);return console.log("Bubble created successfully:",xt),{bubbleId:xt._id}}catch(ft){return console.error("Error creating bubble:",ft),{bubbleId:null}}};return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen flex justify-center items-center flex-col py-16 relative p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-6 w-[360px] items-end mx-auto p-6",children:jsxRuntimeExports.jsx(TextBubble,{ref:et,selectedFiles:_,setSelectedFiles:j,setDisabledState:nt,linkGenerated:lt,handleFileUpload:ct,isGenerating:ut,step:st})}),jsxRuntimeExports.jsx(StepOneBottom,{disabledState:tt,setStep:ot,step:st,linkGenerated:lt,setLinkGenerated:at,handleCreateBubble:pt,setUserPhone:_e,isGenerating:ut,setIsGenerating:dt})]})};function App(){const[b,g]=reactExports.useState(0),[_,j]=reactExports.useState(""),$=()=>{j("forward"),setTimeout(()=>{g(b+1),j("")},1e3)};return jsxRuntimeExports.jsx("div",{className:`transition-transform ease-in-out duration-1000 max-w-screen-2xl mx-auto w-full h-screen ${_==="forward"?"slide-in":_==="backward"?"slide-reverse":"slide-out"}`,children:{0:jsxRuntimeExports.jsx(StepZero,{handleNext:$}),1:jsxRuntimeExports.jsx(App$1,{})}[b]})}function bind(b,g){return function(){return b.apply(g,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(b=>g=>{const _=toString.call(g);return b[_]||(b[_]=_.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=b=>(b=b.toLowerCase(),g=>kindOf(g)===b),typeOfTest=b=>g=>typeof g===b,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(b){return b!==null&&!isUndefined(b)&&b.constructor!==null&&!isUndefined(b.constructor)&&isFunction(b.constructor.isBuffer)&&b.constructor.isBuffer(b)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(b){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(b):g=b&&b.buffer&&isArrayBuffer(b.buffer),g}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$3=b=>b!==null&&typeof b=="object",isBoolean=b=>b===!0||b===!1,isPlainObject=b=>{if(kindOf(b)!=="object")return!1;const g=getPrototypeOf(b);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in b)&&!(Symbol.iterator in b)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=b=>isObject$3(b)&&isFunction(b.pipe),isFormData=b=>{let g;return b&&(typeof FormData=="function"&&b instanceof FormData||isFunction(b.append)&&((g=kindOf(b))==="formdata"||g==="object"&&isFunction(b.toString)&&b.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=b=>b.trim?b.trim():b.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(b,g,{allOwnKeys:_=!1}={}){if(b===null||typeof b>"u")return;let j,$;if(typeof b!="object"&&(b=[b]),isArray(b))for(j=0,$=b.length;j<$;j++)g.call(null,b[j],j,b);else{const _e=_?Object.getOwnPropertyNames(b):Object.keys(b),et=_e.length;let tt;for(j=0;j<et;j++)tt=_e[j],g.call(null,b[tt],tt,b)}}function findKey(b,g){g=g.toLowerCase();const _=Object.keys(b);let j=_.length,$;for(;j-- >0;)if($=_[j],g===$.toLowerCase())return $;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=b=>!isUndefined(b)&&b!==_global;function merge(){const{caseless:b}=isContextDefined(this)&&this||{},g={},_=(j,$)=>{const _e=b&&findKey(g,$)||$;isPlainObject(g[_e])&&isPlainObject(j)?g[_e]=merge(g[_e],j):isPlainObject(j)?g[_e]=merge({},j):isArray(j)?g[_e]=j.slice():g[_e]=j};for(let j=0,$=arguments.length;j<$;j++)arguments[j]&&forEach(arguments[j],_);return g}const extend$3=(b,g,_,{allOwnKeys:j}={})=>(forEach(g,($,_e)=>{_&&isFunction($)?b[_e]=bind($,_):b[_e]=$},{allOwnKeys:j}),b),stripBOM=b=>(b.charCodeAt(0)===65279&&(b=b.slice(1)),b),inherits=(b,g,_,j)=>{b.prototype=Object.create(g.prototype,j),b.prototype.constructor=b,Object.defineProperty(b,"super",{value:g.prototype}),_&&Object.assign(b.prototype,_)},toFlatObject=(b,g,_,j)=>{let $,_e,et;const tt={};if(g=g||{},b==null)return g;do{for($=Object.getOwnPropertyNames(b),_e=$.length;_e-- >0;)et=$[_e],(!j||j(et,b,g))&&!tt[et]&&(g[et]=b[et],tt[et]=!0);b=_!==!1&&getPrototypeOf(b)}while(b&&(!_||_(b,g))&&b!==Object.prototype);return g},endsWith=(b,g,_)=>{b=String(b),(_===void 0||_>b.length)&&(_=b.length),_-=g.length;const j=b.indexOf(g,_);return j!==-1&&j===_},toArray=b=>{if(!b)return null;if(isArray(b))return b;let g=b.length;if(!isNumber(g))return null;const _=new Array(g);for(;g-- >0;)_[g]=b[g];return _},isTypedArray=(b=>g=>b&&g instanceof b)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(b,g)=>{const j=(b&&b[Symbol.iterator]).call(b);let $;for(;($=j.next())&&!$.done;){const _e=$.value;g.call(b,_e[0],_e[1])}},matchAll=(b,g)=>{let _;const j=[];for(;(_=b.exec(g))!==null;)j.push(_);return j},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=b=>b.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(_,j,$){return j.toUpperCase()+$}),hasOwnProperty=(({hasOwnProperty:b})=>(g,_)=>b.call(g,_))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(b,g)=>{const _=Object.getOwnPropertyDescriptors(b),j={};forEach(_,($,_e)=>{let et;(et=g($,_e,b))!==!1&&(j[_e]=et||$)}),Object.defineProperties(b,j)},freezeMethods=b=>{reduceDescriptors(b,(g,_)=>{if(isFunction(b)&&["arguments","caller","callee"].indexOf(_)!==-1)return!1;const j=b[_];if(isFunction(j)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+_+"'")})}})},toObjectSet=(b,g)=>{const _={},j=$=>{$.forEach(_e=>{_[_e]=!0})};return isArray(b)?j(b):j(String(b).split(g)),_},noop=()=>{},toFiniteNumber=(b,g)=>b!=null&&Number.isFinite(b=+b)?b:g,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(b=16,g=ALPHABET.ALPHA_DIGIT)=>{let _="";const{length:j}=g;for(;b--;)_+=g[Math.random()*j|0];return _};function isSpecCompliantForm(b){return!!(b&&isFunction(b.append)&&b[Symbol.toStringTag]==="FormData"&&b[Symbol.iterator])}const toJSONObject=b=>{const g=new Array(10),_=(j,$)=>{if(isObject$3(j)){if(g.indexOf(j)>=0)return;if(!("toJSON"in j)){g[$]=j;const _e=isArray(j)?[]:{};return forEach(j,(et,tt)=>{const nt=_(et,$+1);!isUndefined(nt)&&(_e[tt]=nt)}),g[$]=void 0,_e}}return j};return _(b,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=b=>b&&(isObject$3(b)||isFunction(b))&&isFunction(b.then)&&isFunction(b.catch),_setImmediate=((b,g)=>b?setImmediate:g?((_,j)=>(_global.addEventListener("message",({source:$,data:_e})=>{$===_global&&_e===_&&j.length&&j.shift()()},!1),$=>{j.push($),_global.postMessage(_,"*")}))(`axios@${Math.random()}`,[]):_=>setTimeout(_))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$3,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend:extend$3,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(b,g,_,j,$){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=b,this.name="AxiosError",g&&(this.code=g),_&&(this.config=_),j&&(this.request=j),$&&(this.response=$,this.status=$.status?$.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(b=>{descriptors[b]={value:b}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(b,g,_,j,$,_e)=>{const et=Object.create(prototype$1);return utils$1.toFlatObject(b,et,function(nt){return nt!==Error.prototype},tt=>tt!=="isAxiosError"),AxiosError.call(et,b.message,g,_,j,$),et.cause=b,et.name=b.name,_e&&Object.assign(et,_e),et};const httpAdapter=null;function isVisitable(b){return utils$1.isPlainObject(b)||utils$1.isArray(b)}function removeBrackets(b){return utils$1.endsWith(b,"[]")?b.slice(0,-2):b}function renderKey(b,g,_){return b?b.concat(g).map(function($,_e){return $=removeBrackets($),!_&&_e?"["+$+"]":$}).join(_?".":""):g}function isFlatArray(b){return utils$1.isArray(b)&&!b.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(g){return/^is[A-Z]/.test(g)});function toFormData(b,g,_){if(!utils$1.isObject(b))throw new TypeError("target must be an object");g=g||new FormData,_=utils$1.toFlatObject(_,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ut,dt){return!utils$1.isUndefined(dt[ut])});const j=_.metaTokens,$=_.visitor||it,_e=_.dots,et=_.indexes,nt=(_.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(g);if(!utils$1.isFunction($))throw new TypeError("visitor must be a function");function rt(at){if(at===null)return"";if(utils$1.isDate(at))return at.toISOString();if(!nt&&utils$1.isBlob(at))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(at)||utils$1.isTypedArray(at)?nt&&typeof Blob=="function"?new Blob([at]):Buffer.from(at):at}function it(at,ut,dt){let ct=at;if(at&&!dt&&typeof at=="object"){if(utils$1.endsWith(ut,"{}"))ut=j?ut:ut.slice(0,-2),at=JSON.stringify(at);else if(utils$1.isArray(at)&&isFlatArray(at)||(utils$1.isFileList(at)||utils$1.endsWith(ut,"[]"))&&(ct=utils$1.toArray(at)))return ut=removeBrackets(ut),ct.forEach(function(pt,mt){!(utils$1.isUndefined(pt)||pt===null)&&g.append(et===!0?renderKey([ut],mt,_e):et===null?ut:ut+"[]",rt(pt))}),!1}return isVisitable(at)?!0:(g.append(renderKey(dt,ut,_e),rt(at)),!1)}const st=[],ot=Object.assign(predicates,{defaultVisitor:it,convertValue:rt,isVisitable});function lt(at,ut){if(!utils$1.isUndefined(at)){if(st.indexOf(at)!==-1)throw Error("Circular reference detected in "+ut.join("."));st.push(at),utils$1.forEach(at,function(ct,ht){(!(utils$1.isUndefined(ct)||ct===null)&&$.call(g,ct,utils$1.isString(ht)?ht.trim():ht,ut,ot))===!0&&lt(ct,ut?ut.concat(ht):[ht])}),st.pop()}}if(!utils$1.isObject(b))throw new TypeError("data must be an object");return lt(b),g}function encode$1(b){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(b).replace(/[!'()~]|%20|%00/g,function(j){return g[j]})}function AxiosURLSearchParams(b,g){this._pairs=[],b&&toFormData(b,this,g)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(g,_){this._pairs.push([g,_])};prototype.toString=function(g){const _=g?function(j){return g.call(this,j,encode$1)}:encode$1;return this._pairs.map(function($){return _($[0])+"="+_($[1])},"").join("&")};function encode(b){return encodeURIComponent(b).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(b,g,_){if(!g)return b;const j=_&&_.encode||encode,$=_&&_.serialize;let _e;if($?_e=$(g,_):_e=utils$1.isURLSearchParams(g)?g.toString():new AxiosURLSearchParams(g,_).toString(j),_e){const et=b.indexOf("#");et!==-1&&(b=b.slice(0,et)),b+=(b.indexOf("?")===-1?"?":"&")+_e}return b}class InterceptorManager{constructor(){this.handlers=[]}use(g,_,j){return this.handlers.push({fulfilled:g,rejected:_,synchronous:j?j.synchronous:!1,runWhen:j?j.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){utils$1.forEach(this.handlers,function(j){j!==null&&g(j)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(b,g){return toFormData(b,new platform.classes.URLSearchParams,Object.assign({visitor:function(_,j,$,_e){return platform.isNode&&utils$1.isBuffer(_)?(this.append(j,_.toString("base64")),!1):_e.defaultVisitor.apply(this,arguments)}},g))}function parsePropPath(b){return utils$1.matchAll(/\w+|\[(\w*)]/g,b).map(g=>g[0]==="[]"?"":g[1]||g[0])}function arrayToObject(b){const g={},_=Object.keys(b);let j;const $=_.length;let _e;for(j=0;j<$;j++)_e=_[j],g[_e]=b[_e];return g}function formDataToJSON(b){function g(_,j,$,_e){let et=_[_e++];if(et==="__proto__")return!0;const tt=Number.isFinite(+et),nt=_e>=_.length;return et=!et&&utils$1.isArray($)?$.length:et,nt?(utils$1.hasOwnProp($,et)?$[et]=[$[et],j]:$[et]=j,!tt):((!$[et]||!utils$1.isObject($[et]))&&($[et]=[]),g(_,j,$[et],_e)&&utils$1.isArray($[et])&&($[et]=arrayToObject($[et])),!tt)}if(utils$1.isFormData(b)&&utils$1.isFunction(b.entries)){const _={};return utils$1.forEachEntry(b,(j,$)=>{g(parsePropPath(j),$,_,0)}),_}return null}function stringifySafely(b,g,_){if(utils$1.isString(b))try{return(g||JSON.parse)(b),utils$1.trim(b)}catch(j){if(j.name!=="SyntaxError")throw j}return(0,JSON.stringify)(b)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(g,_){const j=_.getContentType()||"",$=j.indexOf("application/json")>-1,_e=utils$1.isObject(g);if(_e&&utils$1.isHTMLForm(g)&&(g=new FormData(g)),utils$1.isFormData(g))return $?JSON.stringify(formDataToJSON(g)):g;if(utils$1.isArrayBuffer(g)||utils$1.isBuffer(g)||utils$1.isStream(g)||utils$1.isFile(g)||utils$1.isBlob(g)||utils$1.isReadableStream(g))return g;if(utils$1.isArrayBufferView(g))return g.buffer;if(utils$1.isURLSearchParams(g))return _.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let tt;if(_e){if(j.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(g,this.formSerializer).toString();if((tt=utils$1.isFileList(g))||j.indexOf("multipart/form-data")>-1){const nt=this.env&&this.env.FormData;return toFormData(tt?{"files[]":g}:g,nt&&new nt,this.formSerializer)}}return _e||$?(_.setContentType("application/json",!1),stringifySafely(g)):g}],transformResponse:[function(g){const _=this.transitional||defaults$1.transitional,j=_&&_.forcedJSONParsing,$=this.responseType==="json";if(utils$1.isResponse(g)||utils$1.isReadableStream(g))return g;if(g&&utils$1.isString(g)&&(j&&!this.responseType||$)){const et=!(_&&_.silentJSONParsing)&&$;try{return JSON.parse(g)}catch(tt){if(et)throw tt.name==="SyntaxError"?AxiosError.from(tt,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):tt}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],b=>{defaults$1.headers[b]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=b=>{const g={};let _,j,$;return b&&b.split(`
`).forEach(function(et){$=et.indexOf(":"),_=et.substring(0,$).trim().toLowerCase(),j=et.substring($+1).trim(),!(!_||g[_]&&ignoreDuplicateOf[_])&&(_==="set-cookie"?g[_]?g[_].push(j):g[_]=[j]:g[_]=g[_]?g[_]+", "+j:j)}),g},$internals=Symbol("internals");function normalizeHeader(b){return b&&String(b).trim().toLowerCase()}function normalizeValue(b){return b===!1||b==null?b:utils$1.isArray(b)?b.map(normalizeValue):String(b)}function parseTokens(b){const g=Object.create(null),_=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let j;for(;j=_.exec(b);)g[j[1]]=j[2];return g}const isValidHeaderName=b=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(b.trim());function matchHeaderValue(b,g,_,j,$){if(utils$1.isFunction(j))return j.call(this,g,_);if($&&(g=_),!!utils$1.isString(g)){if(utils$1.isString(j))return g.indexOf(j)!==-1;if(utils$1.isRegExp(j))return j.test(g)}}function formatHeader(b){return b.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,_,j)=>_.toUpperCase()+j)}function buildAccessors(b,g){const _=utils$1.toCamelCase(" "+g);["get","set","has"].forEach(j=>{Object.defineProperty(b,j+_,{value:function($,_e,et){return this[j].call(this,g,$,_e,et)},configurable:!0})})}class AxiosHeaders{constructor(g){g&&this.set(g)}set(g,_,j){const $=this;function _e(tt,nt,rt){const it=normalizeHeader(nt);if(!it)throw new Error("header name must be a non-empty string");const st=utils$1.findKey($,it);(!st||$[st]===void 0||rt===!0||rt===void 0&&$[st]!==!1)&&($[st||nt]=normalizeValue(tt))}const et=(tt,nt)=>utils$1.forEach(tt,(rt,it)=>_e(rt,it,nt));if(utils$1.isPlainObject(g)||g instanceof this.constructor)et(g,_);else if(utils$1.isString(g)&&(g=g.trim())&&!isValidHeaderName(g))et(parseHeaders(g),_);else if(utils$1.isHeaders(g))for(const[tt,nt]of g.entries())_e(nt,tt,j);else g!=null&&_e(_,g,j);return this}get(g,_){if(g=normalizeHeader(g),g){const j=utils$1.findKey(this,g);if(j){const $=this[j];if(!_)return $;if(_===!0)return parseTokens($);if(utils$1.isFunction(_))return _.call(this,$,j);if(utils$1.isRegExp(_))return _.exec($);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,_){if(g=normalizeHeader(g),g){const j=utils$1.findKey(this,g);return!!(j&&this[j]!==void 0&&(!_||matchHeaderValue(this,this[j],j,_)))}return!1}delete(g,_){const j=this;let $=!1;function _e(et){if(et=normalizeHeader(et),et){const tt=utils$1.findKey(j,et);tt&&(!_||matchHeaderValue(j,j[tt],tt,_))&&(delete j[tt],$=!0)}}return utils$1.isArray(g)?g.forEach(_e):_e(g),$}clear(g){const _=Object.keys(this);let j=_.length,$=!1;for(;j--;){const _e=_[j];(!g||matchHeaderValue(this,this[_e],_e,g,!0))&&(delete this[_e],$=!0)}return $}normalize(g){const _=this,j={};return utils$1.forEach(this,($,_e)=>{const et=utils$1.findKey(j,_e);if(et){_[et]=normalizeValue($),delete _[_e];return}const tt=g?formatHeader(_e):String(_e).trim();tt!==_e&&delete _[_e],_[tt]=normalizeValue($),j[tt]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const _=Object.create(null);return utils$1.forEach(this,(j,$)=>{j!=null&&j!==!1&&(_[$]=g&&utils$1.isArray(j)?j.join(", "):j)}),_}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,_])=>g+": "+_).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,..._){const j=new this(g);return _.forEach($=>j.set($)),j}static accessor(g){const j=(this[$internals]=this[$internals]={accessors:{}}).accessors,$=this.prototype;function _e(et){const tt=normalizeHeader(et);j[tt]||(buildAccessors($,et),j[tt]=!0)}return utils$1.isArray(g)?g.forEach(_e):_e(g),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:b},g)=>{let _=g[0].toUpperCase()+g.slice(1);return{get:()=>b,set(j){this[_]=j}}});utils$1.freezeMethods(AxiosHeaders);function transformData(b,g){const _=this||defaults$1,j=g||_,$=AxiosHeaders.from(j.headers);let _e=j.data;return utils$1.forEach(b,function(tt){_e=tt.call(_,_e,$.normalize(),g?g.status:void 0)}),$.normalize(),_e}function isCancel(b){return!!(b&&b.__CANCEL__)}function CanceledError(b,g,_){AxiosError.call(this,b??"canceled",AxiosError.ERR_CANCELED,g,_),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(b,g,_){const j=_.config.validateStatus;!_.status||!j||j(_.status)?b(_):g(new AxiosError("Request failed with status code "+_.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(_.status/100)-4],_.config,_.request,_))}function parseProtocol(b){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(b);return g&&g[1]||""}function speedometer(b,g){b=b||10;const _=new Array(b),j=new Array(b);let $=0,_e=0,et;return g=g!==void 0?g:1e3,function(nt){const rt=Date.now(),it=j[_e];et||(et=rt),_[$]=nt,j[$]=rt;let st=_e,ot=0;for(;st!==$;)ot+=_[st++],st=st%b;if($=($+1)%b,$===_e&&(_e=(_e+1)%b),rt-et<g)return;const lt=it&&rt-it;return lt?Math.round(ot*1e3/lt):void 0}}function throttle(b,g){let _=0,j=1e3/g,$,_e;const et=(rt,it=Date.now())=>{_=it,$=null,_e&&(clearTimeout(_e),_e=null),b.apply(null,rt)};return[(...rt)=>{const it=Date.now(),st=it-_;st>=j?et(rt,it):($=rt,_e||(_e=setTimeout(()=>{_e=null,et($)},j-st)))},()=>$&&et($)]}const progressEventReducer=(b,g,_=3)=>{let j=0;const $=speedometer(50,250);return throttle(_e=>{const et=_e.loaded,tt=_e.lengthComputable?_e.total:void 0,nt=et-j,rt=$(nt),it=et<=tt;j=et;const st={loaded:et,total:tt,progress:tt?et/tt:void 0,bytes:nt,rate:rt||void 0,estimated:rt&&tt&&it?(tt-et)/rt:void 0,event:_e,lengthComputable:tt!=null,[g?"download":"upload"]:!0};b(st)},_)},progressEventDecorator=(b,g)=>{const _=b!=null;return[j=>g[0]({lengthComputable:_,total:b,loaded:j}),g[1]]},asyncDecorator=b=>(...g)=>utils$1.asap(()=>b(...g)),isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const g=platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent),_=document.createElement("a");let j;function $(_e){let et=_e;return g&&(_.setAttribute("href",et),et=_.href),_.setAttribute("href",et),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:_.pathname.charAt(0)==="/"?_.pathname:"/"+_.pathname}}return j=$(window.location.href),function(et){const tt=utils$1.isString(et)?$(et):et;return tt.protocol===j.protocol&&tt.host===j.host}}():function(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(b,g,_,j,$,_e){const et=[b+"="+encodeURIComponent(g)];utils$1.isNumber(_)&&et.push("expires="+new Date(_).toGMTString()),utils$1.isString(j)&&et.push("path="+j),utils$1.isString($)&&et.push("domain="+$),_e===!0&&et.push("secure"),document.cookie=et.join("; ")},read(b){const g=document.cookie.match(new RegExp("(^|;\\s*)("+b+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(b){this.write(b,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(b){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(b)}function combineURLs(b,g){return g?b.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):b}function buildFullPath(b,g){return b&&!isAbsoluteURL(g)?combineURLs(b,g):g}const headersToObject=b=>b instanceof AxiosHeaders?{...b}:b;function mergeConfig(b,g){g=g||{};const _={};function j(rt,it,st){return utils$1.isPlainObject(rt)&&utils$1.isPlainObject(it)?utils$1.merge.call({caseless:st},rt,it):utils$1.isPlainObject(it)?utils$1.merge({},it):utils$1.isArray(it)?it.slice():it}function $(rt,it,st){if(utils$1.isUndefined(it)){if(!utils$1.isUndefined(rt))return j(void 0,rt,st)}else return j(rt,it,st)}function _e(rt,it){if(!utils$1.isUndefined(it))return j(void 0,it)}function et(rt,it){if(utils$1.isUndefined(it)){if(!utils$1.isUndefined(rt))return j(void 0,rt)}else return j(void 0,it)}function tt(rt,it,st){if(st in g)return j(rt,it);if(st in b)return j(void 0,rt)}const nt={url:_e,method:_e,data:_e,baseURL:et,transformRequest:et,transformResponse:et,paramsSerializer:et,timeout:et,timeoutMessage:et,withCredentials:et,withXSRFToken:et,adapter:et,responseType:et,xsrfCookieName:et,xsrfHeaderName:et,onUploadProgress:et,onDownloadProgress:et,decompress:et,maxContentLength:et,maxBodyLength:et,beforeRedirect:et,transport:et,httpAgent:et,httpsAgent:et,cancelToken:et,socketPath:et,responseEncoding:et,validateStatus:tt,headers:(rt,it)=>$(headersToObject(rt),headersToObject(it),!0)};return utils$1.forEach(Object.keys(Object.assign({},b,g)),function(it){const st=nt[it]||$,ot=st(b[it],g[it],it);utils$1.isUndefined(ot)&&st!==tt||(_[it]=ot)}),_}const resolveConfig=b=>{const g=mergeConfig({},b);let{data:_,withXSRFToken:j,xsrfHeaderName:$,xsrfCookieName:_e,headers:et,auth:tt}=g;g.headers=et=AxiosHeaders.from(et),g.url=buildURL(buildFullPath(g.baseURL,g.url),b.params,b.paramsSerializer),tt&&et.set("Authorization","Basic "+btoa((tt.username||"")+":"+(tt.password?unescape(encodeURIComponent(tt.password)):"")));let nt;if(utils$1.isFormData(_)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)et.setContentType(void 0);else if((nt=et.getContentType())!==!1){const[rt,...it]=nt?nt.split(";").map(st=>st.trim()).filter(Boolean):[];et.setContentType([rt||"multipart/form-data",...it].join("; "))}}if(platform.hasStandardBrowserEnv&&(j&&utils$1.isFunction(j)&&(j=j(g)),j||j!==!1&&isURLSameOrigin(g.url))){const rt=$&&_e&&cookies.read(_e);rt&&et.set($,rt)}return g},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(b){return new Promise(function(_,j){const $=resolveConfig(b);let _e=$.data;const et=AxiosHeaders.from($.headers).normalize();let{responseType:tt,onUploadProgress:nt,onDownloadProgress:rt}=$,it,st,ot,lt,at;function ut(){lt&&lt(),at&&at(),$.cancelToken&&$.cancelToken.unsubscribe(it),$.signal&&$.signal.removeEventListener("abort",it)}let dt=new XMLHttpRequest;dt.open($.method.toUpperCase(),$.url,!0),dt.timeout=$.timeout;function ct(){if(!dt)return;const pt=AxiosHeaders.from("getAllResponseHeaders"in dt&&dt.getAllResponseHeaders()),ft={data:!tt||tt==="text"||tt==="json"?dt.responseText:dt.response,status:dt.status,statusText:dt.statusText,headers:pt,config:b,request:dt};settle(function(xt){_(xt),ut()},function(xt){j(xt),ut()},ft),dt=null}"onloadend"in dt?dt.onloadend=ct:dt.onreadystatechange=function(){!dt||dt.readyState!==4||dt.status===0&&!(dt.responseURL&&dt.responseURL.indexOf("file:")===0)||setTimeout(ct)},dt.onabort=function(){dt&&(j(new AxiosError("Request aborted",AxiosError.ECONNABORTED,b,dt)),dt=null)},dt.onerror=function(){j(new AxiosError("Network Error",AxiosError.ERR_NETWORK,b,dt)),dt=null},dt.ontimeout=function(){let mt=$.timeout?"timeout of "+$.timeout+"ms exceeded":"timeout exceeded";const ft=$.transitional||transitionalDefaults;$.timeoutErrorMessage&&(mt=$.timeoutErrorMessage),j(new AxiosError(mt,ft.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,b,dt)),dt=null},_e===void 0&&et.setContentType(null),"setRequestHeader"in dt&&utils$1.forEach(et.toJSON(),function(mt,ft){dt.setRequestHeader(ft,mt)}),utils$1.isUndefined($.withCredentials)||(dt.withCredentials=!!$.withCredentials),tt&&tt!=="json"&&(dt.responseType=$.responseType),rt&&([ot,at]=progressEventReducer(rt,!0),dt.addEventListener("progress",ot)),nt&&dt.upload&&([st,lt]=progressEventReducer(nt),dt.upload.addEventListener("progress",st),dt.upload.addEventListener("loadend",lt)),($.cancelToken||$.signal)&&(it=pt=>{dt&&(j(!pt||pt.type?new CanceledError(null,b,dt):pt),dt.abort(),dt=null)},$.cancelToken&&$.cancelToken.subscribe(it),$.signal&&($.signal.aborted?it():$.signal.addEventListener("abort",it)));const ht=parseProtocol($.url);if(ht&&platform.protocols.indexOf(ht)===-1){j(new AxiosError("Unsupported protocol "+ht+":",AxiosError.ERR_BAD_REQUEST,b));return}dt.send(_e||null)})},composeSignals=(b,g)=>{const{length:_}=b=b?b.filter(Boolean):[];if(g||_){let j=new AbortController,$;const _e=function(rt){if(!$){$=!0,tt();const it=rt instanceof Error?rt:this.reason;j.abort(it instanceof AxiosError?it:new CanceledError(it instanceof Error?it.message:it))}};let et=g&&setTimeout(()=>{et=null,_e(new AxiosError(`timeout ${g} of ms exceeded`,AxiosError.ETIMEDOUT))},g);const tt=()=>{b&&(et&&clearTimeout(et),et=null,b.forEach(rt=>{rt.unsubscribe?rt.unsubscribe(_e):rt.removeEventListener("abort",_e)}),b=null)};b.forEach(rt=>rt.addEventListener("abort",_e));const{signal:nt}=j;return nt.unsubscribe=()=>utils$1.asap(tt),nt}},streamChunk=function*(b,g){let _=b.byteLength;if(_<g){yield b;return}let j=0,$;for(;j<_;)$=j+g,yield b.slice(j,$),j=$},readBytes=async function*(b,g){for await(const _ of readStream(b))yield*streamChunk(_,g)},readStream=async function*(b){if(b[Symbol.asyncIterator]){yield*b;return}const g=b.getReader();try{for(;;){const{done:_,value:j}=await g.read();if(_)break;yield j}}finally{await g.cancel()}},trackStream=(b,g,_,j)=>{const $=readBytes(b,g);let _e=0,et,tt=nt=>{et||(et=!0,j&&j(nt))};return new ReadableStream({async pull(nt){try{const{done:rt,value:it}=await $.next();if(rt){tt(),nt.close();return}let st=it.byteLength;if(_){let ot=_e+=st;_(ot)}nt.enqueue(new Uint8Array(it))}catch(rt){throw tt(rt),rt}},cancel(nt){return tt(nt),$.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(b=>g=>b.encode(g))(new TextEncoder):async b=>new Uint8Array(await new Response(b).arrayBuffer())),test=(b,...g)=>{try{return!!b(...g)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let b=!1;const g=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!g}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(b=>b.body)};isFetchSupported&&(b=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!resolvers[g]&&(resolvers[g]=utils$1.isFunction(b[g])?_=>_[g]():(_,j)=>{throw new AxiosError(`Response type '${g}' is not supported`,AxiosError.ERR_NOT_SUPPORT,j)})})})(new Response);const getBodyLength=async b=>{if(b==null)return 0;if(utils$1.isBlob(b))return b.size;if(utils$1.isSpecCompliantForm(b))return(await new Request(platform.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(b)||utils$1.isArrayBuffer(b))return b.byteLength;if(utils$1.isURLSearchParams(b)&&(b=b+""),utils$1.isString(b))return(await encodeText(b)).byteLength},resolveBodyLength=async(b,g)=>{const _=utils$1.toFiniteNumber(b.getContentLength());return _??getBodyLength(g)},fetchAdapter=isFetchSupported&&(async b=>{let{url:g,method:_,data:j,signal:$,cancelToken:_e,timeout:et,onDownloadProgress:tt,onUploadProgress:nt,responseType:rt,headers:it,withCredentials:st="same-origin",fetchOptions:ot}=resolveConfig(b);rt=rt?(rt+"").toLowerCase():"text";let lt=composeSignals([$,_e&&_e.toAbortSignal()],et),at;const ut=lt&&lt.unsubscribe&&(()=>{lt.unsubscribe()});let dt;try{if(nt&&supportsRequestStream&&_!=="get"&&_!=="head"&&(dt=await resolveBodyLength(it,j))!==0){let ft=new Request(g,{method:"POST",body:j,duplex:"half"}),gt;if(utils$1.isFormData(j)&&(gt=ft.headers.get("content-type"))&&it.setContentType(gt),ft.body){const[xt,vt]=progressEventDecorator(dt,progressEventReducer(asyncDecorator(nt)));j=trackStream(ft.body,DEFAULT_CHUNK_SIZE,xt,vt)}}utils$1.isString(st)||(st=st?"include":"omit");const ct="credentials"in Request.prototype;at=new Request(g,{...ot,signal:lt,method:_.toUpperCase(),headers:it.normalize().toJSON(),body:j,duplex:"half",credentials:ct?st:void 0});let ht=await fetch(at);const pt=supportsResponseStream&&(rt==="stream"||rt==="response");if(supportsResponseStream&&(tt||pt&&ut)){const ft={};["status","statusText","headers"].forEach(St=>{ft[St]=ht[St]});const gt=utils$1.toFiniteNumber(ht.headers.get("content-length")),[xt,vt]=tt&&progressEventDecorator(gt,progressEventReducer(asyncDecorator(tt),!0))||[];ht=new Response(trackStream(ht.body,DEFAULT_CHUNK_SIZE,xt,()=>{vt&&vt(),ut&&ut()}),ft)}rt=rt||"text";let mt=await resolvers[utils$1.findKey(resolvers,rt)||"text"](ht,b);return!pt&&ut&&ut(),await new Promise((ft,gt)=>{settle(ft,gt,{data:mt,headers:AxiosHeaders.from(ht.headers),status:ht.status,statusText:ht.statusText,config:b,request:at})})}catch(ct){throw ut&&ut(),ct&&ct.name==="TypeError"&&/fetch/i.test(ct.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,b,at),{cause:ct.cause||ct}):AxiosError.from(ct,ct&&ct.code,b,at)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(b,g)=>{if(b){try{Object.defineProperty(b,"name",{value:g})}catch{}Object.defineProperty(b,"adapterName",{value:g})}});const renderReason=b=>`- ${b}`,isResolvedHandle=b=>utils$1.isFunction(b)||b===null||b===!1,adapters={getAdapter:b=>{b=utils$1.isArray(b)?b:[b];const{length:g}=b;let _,j;const $={};for(let _e=0;_e<g;_e++){_=b[_e];let et;if(j=_,!isResolvedHandle(_)&&(j=knownAdapters[(et=String(_)).toLowerCase()],j===void 0))throw new AxiosError(`Unknown adapter '${et}'`);if(j)break;$[et||"#"+_e]=j}if(!j){const _e=Object.entries($).map(([tt,nt])=>`adapter ${tt} `+(nt===!1?"is not supported by the environment":"is not available in the build"));let et=g?_e.length>1?`since :
`+_e.map(renderReason).join(`
`):" "+renderReason(_e[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+et,"ERR_NOT_SUPPORT")}return j},adapters:knownAdapters};function throwIfCancellationRequested(b){if(b.cancelToken&&b.cancelToken.throwIfRequested(),b.signal&&b.signal.aborted)throw new CanceledError(null,b)}function dispatchRequest(b){return throwIfCancellationRequested(b),b.headers=AxiosHeaders.from(b.headers),b.data=transformData.call(b,b.transformRequest),["post","put","patch"].indexOf(b.method)!==-1&&b.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(b.adapter||defaults$1.adapter)(b).then(function(j){return throwIfCancellationRequested(b),j.data=transformData.call(b,b.transformResponse,j),j.headers=AxiosHeaders.from(j.headers),j},function(j){return isCancel(j)||(throwIfCancellationRequested(b),j&&j.response&&(j.response.data=transformData.call(b,b.transformResponse,j.response),j.response.headers=AxiosHeaders.from(j.response.headers))),Promise.reject(j)})}const VERSION="1.7.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((b,g)=>{validators$1[b]=function(j){return typeof j===b||"a"+(g<1?"n ":" ")+b}});const deprecatedWarnings={};validators$1.transitional=function(g,_,j){function $(_e,et){return"[Axios v"+VERSION+"] Transitional option '"+_e+"'"+et+(j?". "+j:"")}return(_e,et,tt)=>{if(g===!1)throw new AxiosError($(et," has been removed"+(_?" in "+_:"")),AxiosError.ERR_DEPRECATED);return _&&!deprecatedWarnings[et]&&(deprecatedWarnings[et]=!0,console.warn($(et," has been deprecated since v"+_+" and will be removed in the near future"))),g?g(_e,et,tt):!0}};function assertOptions(b,g,_){if(typeof b!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const j=Object.keys(b);let $=j.length;for(;$-- >0;){const _e=j[$],et=g[_e];if(et){const tt=b[_e],nt=tt===void 0||et(tt,_e,b);if(nt!==!0)throw new AxiosError("option "+_e+" must be "+nt,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(_!==!0)throw new AxiosError("Unknown option "+_e,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(g){this.defaults=g,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(g,_){try{return await this._request(g,_)}catch(j){if(j instanceof Error){let $;Error.captureStackTrace?Error.captureStackTrace($={}):$=new Error;const _e=$.stack?$.stack.replace(/^.+\n/,""):"";try{j.stack?_e&&!String(j.stack).endsWith(_e.replace(/^.+\n.+\n/,""))&&(j.stack+=`
`+_e):j.stack=_e}catch{}}throw j}}_request(g,_){typeof g=="string"?(_=_||{},_.url=g):_=g||{},_=mergeConfig(this.defaults,_);const{transitional:j,paramsSerializer:$,headers:_e}=_;j!==void 0&&validator.assertOptions(j,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),$!=null&&(utils$1.isFunction($)?_.paramsSerializer={serialize:$}:validator.assertOptions($,{encode:validators.function,serialize:validators.function},!0)),_.method=(_.method||this.defaults.method||"get").toLowerCase();let et=_e&&utils$1.merge(_e.common,_e[_.method]);_e&&utils$1.forEach(["delete","get","head","post","put","patch","common"],at=>{delete _e[at]}),_.headers=AxiosHeaders.concat(et,_e);const tt=[];let nt=!0;this.interceptors.request.forEach(function(ut){typeof ut.runWhen=="function"&&ut.runWhen(_)===!1||(nt=nt&&ut.synchronous,tt.unshift(ut.fulfilled,ut.rejected))});const rt=[];this.interceptors.response.forEach(function(ut){rt.push(ut.fulfilled,ut.rejected)});let it,st=0,ot;if(!nt){const at=[dispatchRequest.bind(this),void 0];for(at.unshift.apply(at,tt),at.push.apply(at,rt),ot=at.length,it=Promise.resolve(_);st<ot;)it=it.then(at[st++],at[st++]);return it}ot=tt.length;let lt=_;for(st=0;st<ot;){const at=tt[st++],ut=tt[st++];try{lt=at(lt)}catch(dt){ut.call(this,dt);break}}try{it=dispatchRequest.call(this,lt)}catch(at){return Promise.reject(at)}for(st=0,ot=rt.length;st<ot;)it=it.then(rt[st++],rt[st++]);return it}getUri(g){g=mergeConfig(this.defaults,g);const _=buildFullPath(g.baseURL,g.url);return buildURL(_,g.params,g.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(g){Axios.prototype[g]=function(_,j){return this.request(mergeConfig(j||{},{method:g,url:_,data:(j||{}).data}))}});utils$1.forEach(["post","put","patch"],function(g){function _(j){return function(_e,et,tt){return this.request(mergeConfig(tt||{},{method:g,headers:j?{"Content-Type":"multipart/form-data"}:{},url:_e,data:et}))}}Axios.prototype[g]=_(),Axios.prototype[g+"Form"]=_(!0)});class CancelToken{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let _;this.promise=new Promise(function(_e){_=_e});const j=this;this.promise.then($=>{if(!j._listeners)return;let _e=j._listeners.length;for(;_e-- >0;)j._listeners[_e]($);j._listeners=null}),this.promise.then=$=>{let _e;const et=new Promise(tt=>{j.subscribe(tt),_e=tt}).then($);return et.cancel=function(){j.unsubscribe(_e)},et},g(function(_e,et,tt){j.reason||(j.reason=new CanceledError(_e,et,tt),_(j.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const _=this._listeners.indexOf(g);_!==-1&&this._listeners.splice(_,1)}toAbortSignal(){const g=new AbortController,_=j=>{g.abort(j)};return this.subscribe(_),g.signal.unsubscribe=()=>this.unsubscribe(_),g.signal}static source(){let g;return{token:new CancelToken(function($){g=$}),cancel:g}}}function spread(b){return function(_){return b.apply(null,_)}}function isAxiosError(b){return utils$1.isObject(b)&&b.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([b,g])=>{HttpStatusCode[g]=b});function createInstance(b){const g=new Axios(b),_=bind(Axios.prototype.request,g);return utils$1.extend(_,Axios.prototype,g,{allOwnKeys:!0}),utils$1.extend(_,g,null,{allOwnKeys:!0}),_.create=function($){return createInstance(mergeConfig(b,$))},_}const axios=createInstance(defaults$1);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(g){return Promise.all(g)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=b=>formDataToJSON(utils$1.isHTMLForm(b)?new FormData(b):b);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;function TokenPreview({token:b}){const{url:g,fileName:_,type:j}=b,$=j.startsWith("image/")||/\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(g),_e=j.startsWith("video/")||/\.(mp4|webm|ogg)$/i.test(g),et=j.startsWith("audio/")||/\.(mp3|wav|ogg)$/i.test(g),tt=j==="application/pdf"||/\.pdf$/i.test(g),nt=j==="application/zip"||/\.zip$/i.test(g),rt=j==="text/csv"||/\.csv$/i.test(g),it=j==="application/vnd.ms-excel"||j==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||/\.(xls|xlsx)$/i.test(g);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full bg-white rounded-2xl border",children:[$&&jsxRuntimeExports.jsx("img",{src:g,alt:`${_} Preview`,className:"w-full h-auto rounded-2xl border"}),_e&&jsxRuntimeExports.jsxs("video",{controls:!0,className:"w-full max-h-[300px] h-auto rounded-lg border",children:[jsxRuntimeExports.jsx("source",{src:g,type:j}),"Your browser does not support the video tag."]}),et&&jsxRuntimeExports.jsxs("audio",{controls:!0,className:"w-full border rounded-lg",children:[jsxRuntimeExports.jsx("source",{src:g,type:j}),"Your browser does not support the audio element."]}),tt&&jsxRuntimeExports.jsx("iframe",{src:g,className:"w-full h-[300px] rounded-lg border",title:`${_} Preview`}),nt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#d9534f] text-sm",children:[jsxRuntimeExports.jsx("p",{children:_}),jsxRuntimeExports.jsx("p",{children:"(ZIP File)"})]}),rt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#5cb85c] text-sm",children:[jsxRuntimeExports.jsx("p",{children:_}),jsxRuntimeExports.jsx("p",{children:"(CSV File)"})]}),it&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#2a9d8f] text-sm",children:[jsxRuntimeExports.jsx("p",{children:_}),jsxRuntimeExports.jsx("p",{children:"(Excel File)"})]}),!$&&!_e&&!et&&!tt&&!nt&&!rt&&!it&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center p-5 border border-dashed rounded-lg text-[#666] text-sm",children:[jsxRuntimeExports.jsx("p",{children:_}),jsxRuntimeExports.jsxs("p",{children:["(",j,")"]})]})]})}const BASE_URL="https://production-1016379130133.us-central1.run.app";function Bubble(){const{slug:b}=useParams(),[g,_]=reactExports.useState(null),[j,$]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{const nt=(await axios.get(`${BASE_URL}/api/bubbles/${b}`)).data;_(nt),nt.tokens.length>0&&$(nt.tokens[0])}catch(tt){console.error("Error fetching bubble data",tt)}})()},[b]);const _e=(et,tt)=>{const nt=[];let rt="";const it=(at,ut)=>{at&&nt.push(jsxRuntimeExports.jsx("span",{className:"text-white inline",dangerouslySetInnerHTML:{__html:at.replace(/\s+/g," ")}},`text-${ut}`))},st=at=>{var dt;switch((dt=at.split(".").pop())==null?void 0:dt.toLowerCase()){case"zip":case"rar":return"📦";case"mp3":case"wav":case"ogg":return"🎵";case"mp4":case"avi":case"mkv":return"🎥";case"pdf":case"doc":case"docx":return"📄";case"xls":case"xlsx":return"📊";case"csv":return"📑";default:return"📄"}},ot=(at,ut)=>{const dt=tt.find(ct=>ct._id===at);dt&&nt.push(jsxRuntimeExports.jsxs("button",{onClick:()=>$(dt),className:`inline-flex items-center gap-0.5 text-xs py-1 px-2 mx-0.5 rounded-3xl w-fit cursor-pointer ${(j==null?void 0:j._id)===dt._id?"bg-white text-secondary":"bg-[#FFFFFF33] text-white"}`,children:[jsxRuntimeExports.jsx("span",{children:st(dt.fileName)}),jsxRuntimeExports.jsx("span",{className:"text-inherit max-w-20 w-full truncate",children:truncateFilename(dt.fileName)})]},`token-${dt._id}-${ut}`))};return(()=>{et=et.replace(/<\/?p>/g,"");let at=0;for(;at<et.length;)if(et.slice(at).startsWith("<file-token")){it(rt,at),rt="";const ut=et.indexOf(">",at);if(ut!==-1){const dt=et.slice(at,ut).match(/id="([^"]+)"/);dt&&ot(dt[1],nt.length),at=et.indexOf("</file-token>",ut)+13}else rt+=et[at],at++}else rt+=et[at],at++;rt&&it(rt,nt.length)})(),nt};return g?jsxRuntimeExports.jsx("div",{className:"w-full min-h-screen flex justify-center items-center flex-col py-16 relative p-4",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-6 w-[360px] items-end mx-auto p-6",children:jsxRuntimeExports.jsxs("article",{className:"bg-gradient-to-b from-[#3076FF] overflow-hidden to-[#1D49E5] w-full text-[17px] pt-3 rounded-2xl",children:[jsxRuntimeExports.jsx("div",{className:"px-3 font-light text-white whitespace-pre-wrap break-words",children:_e(g.content,g.tokens)}),jsxRuntimeExports.jsx("div",{className:"bubble-bottom mt-2 w-full",children:j&&jsxRuntimeExports.jsx(TokenPreview,{token:j})})]})})}):jsxRuntimeExports.jsx("div",{children:"Loading..."})}function isObject$2(b){return b!==null&&typeof b=="object"&&"constructor"in b&&b.constructor===Object}function extend$2(b,g){b===void 0&&(b={}),g===void 0&&(g={}),Object.keys(g).forEach(_=>{typeof b[_]>"u"?b[_]=g[_]:isObject$2(g[_])&&isObject$2(b[_])&&Object.keys(g[_]).length>0&&extend$2(b[_],g[_])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const b=typeof document<"u"?document:{};return extend$2(b,ssrDocument),b}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(b){return typeof setTimeout>"u"?(b(),null):setTimeout(b,0)},cancelAnimationFrame(b){typeof setTimeout>"u"||clearTimeout(b)}};function getWindow(){const b=typeof window<"u"?window:{};return extend$2(b,ssrWindow),b}function classesToTokens(b){return b===void 0&&(b=""),b.trim().split(" ").filter(g=>!!g.trim())}function deleteProps(b){const g=b;Object.keys(g).forEach(_=>{try{g[_]=null}catch{}try{delete g[_]}catch{}})}function nextTick(b,g){return g===void 0&&(g=0),setTimeout(b,g)}function now(){return Date.now()}function getComputedStyle$1(b){const g=getWindow();let _;return g.getComputedStyle&&(_=g.getComputedStyle(b,null)),!_&&b.currentStyle&&(_=b.currentStyle),_||(_=b.style),_}function getTranslate(b,g){g===void 0&&(g="x");const _=getWindow();let j,$,_e;const et=getComputedStyle$1(b);return _.WebKitCSSMatrix?($=et.transform||et.webkitTransform,$.split(",").length>6&&($=$.split(", ").map(tt=>tt.replace(",",".")).join(", ")),_e=new _.WebKitCSSMatrix($==="none"?"":$)):(_e=et.MozTransform||et.OTransform||et.MsTransform||et.msTransform||et.transform||et.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),j=_e.toString().split(",")),g==="x"&&(_.WebKitCSSMatrix?$=_e.m41:j.length===16?$=parseFloat(j[12]):$=parseFloat(j[4])),g==="y"&&(_.WebKitCSSMatrix?$=_e.m42:j.length===16?$=parseFloat(j[13]):$=parseFloat(j[5])),$||0}function isObject$1(b){return typeof b=="object"&&b!==null&&b.constructor&&Object.prototype.toString.call(b).slice(8,-1)==="Object"}function isNode(b){return typeof window<"u"&&typeof window.HTMLElement<"u"?b instanceof HTMLElement:b&&(b.nodeType===1||b.nodeType===11)}function extend$1(){const b=Object(arguments.length<=0?void 0:arguments[0]),g=["__proto__","constructor","prototype"];for(let _=1;_<arguments.length;_+=1){const j=_<0||arguments.length<=_?void 0:arguments[_];if(j!=null&&!isNode(j)){const $=Object.keys(Object(j)).filter(_e=>g.indexOf(_e)<0);for(let _e=0,et=$.length;_e<et;_e+=1){const tt=$[_e],nt=Object.getOwnPropertyDescriptor(j,tt);nt!==void 0&&nt.enumerable&&(isObject$1(b[tt])&&isObject$1(j[tt])?j[tt].__swiper__?b[tt]=j[tt]:extend$1(b[tt],j[tt]):!isObject$1(b[tt])&&isObject$1(j[tt])?(b[tt]={},j[tt].__swiper__?b[tt]=j[tt]:extend$1(b[tt],j[tt])):b[tt]=j[tt])}}}return b}function setCSSProperty(b,g,_){b.style.setProperty(g,_)}function animateCSSModeScroll(b){let{swiper:g,targetPosition:_,side:j}=b;const $=getWindow(),_e=-g.translate;let et=null,tt;const nt=g.params.speed;g.wrapperEl.style.scrollSnapType="none",$.cancelAnimationFrame(g.cssModeFrameID);const rt=_>_e?"next":"prev",it=(ot,lt)=>rt==="next"&&ot>=lt||rt==="prev"&&ot<=lt,st=()=>{tt=new Date().getTime(),et===null&&(et=tt);const ot=Math.max(Math.min((tt-et)/nt,1),0),lt=.5-Math.cos(ot*Math.PI)/2;let at=_e+lt*(_-_e);if(it(at,_)&&(at=_),g.wrapperEl.scrollTo({[j]:at}),it(at,_)){g.wrapperEl.style.overflow="hidden",g.wrapperEl.style.scrollSnapType="",setTimeout(()=>{g.wrapperEl.style.overflow="",g.wrapperEl.scrollTo({[j]:at})}),$.cancelAnimationFrame(g.cssModeFrameID);return}g.cssModeFrameID=$.requestAnimationFrame(st)};st()}function elementChildren(b,g){g===void 0&&(g="");const _=[...b.children];return b instanceof HTMLSlotElement&&_.push(...b.assignedElements()),g?_.filter(j=>j.matches(g)):_}function elementIsChildOf(b,g){const _=g.contains(b);return!_&&g instanceof HTMLSlotElement?[...g.assignedElements()].includes(b):_}function showWarning(b){try{console.warn(b);return}catch{}}function createElement(b,g){g===void 0&&(g=[]);const _=document.createElement(b);return _.classList.add(...Array.isArray(g)?g:classesToTokens(g)),_}function elementPrevAll(b,g){const _=[];for(;b.previousElementSibling;){const j=b.previousElementSibling;g?j.matches(g)&&_.push(j):_.push(j),b=j}return _}function elementNextAll(b,g){const _=[];for(;b.nextElementSibling;){const j=b.nextElementSibling;g?j.matches(g)&&_.push(j):_.push(j),b=j}return _}function elementStyle(b,g){return getWindow().getComputedStyle(b,null).getPropertyValue(g)}function elementIndex(b){let g=b,_;if(g){for(_=0;(g=g.previousSibling)!==null;)g.nodeType===1&&(_+=1);return _}}function elementParents(b,g){const _=[];let j=b.parentElement;for(;j;)_.push(j),j=j.parentElement;return _}function elementOuterSize(b,g,_){const j=getWindow();return b[g==="width"?"offsetWidth":"offsetHeight"]+parseFloat(j.getComputedStyle(b,null).getPropertyValue(g==="width"?"margin-right":"margin-top"))+parseFloat(j.getComputedStyle(b,null).getPropertyValue(g==="width"?"margin-left":"margin-bottom"))}let support;function calcSupport(){const b=getWindow(),g=getDocument();return{smoothScroll:g.documentElement&&g.documentElement.style&&"scrollBehavior"in g.documentElement.style,touch:!!("ontouchstart"in b||b.DocumentTouch&&g instanceof b.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(b){let{userAgent:g}=b===void 0?{}:b;const _=getSupport(),j=getWindow(),$=j.navigator.platform,_e=g||j.navigator.userAgent,et={ios:!1,android:!1},tt=j.screen.width,nt=j.screen.height,rt=_e.match(/(Android);?[\s\/]+([\d.]+)?/);let it=_e.match(/(iPad).*OS\s([\d_]+)/);const st=_e.match(/(iPod)(.*OS\s([\d_]+))?/),ot=!it&&_e.match(/(iPhone\sOS|iOS)\s([\d_]+)/),lt=$==="Win32";let at=$==="MacIntel";const ut=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!it&&at&&_.touch&&ut.indexOf(`${tt}x${nt}`)>=0&&(it=_e.match(/(Version)\/([\d.]+)/),it||(it=[0,1,"13_0_0"]),at=!1),rt&&!lt&&(et.os="android",et.android=!0),(it||ot||st)&&(et.os="ios",et.ios=!0),et}function getDevice(b){return b===void 0&&(b={}),deviceCached||(deviceCached=calcDevice(b)),deviceCached}let browser;function calcBrowser(){const b=getWindow(),g=getDevice();let _=!1;function j(){const tt=b.navigator.userAgent.toLowerCase();return tt.indexOf("safari")>=0&&tt.indexOf("chrome")<0&&tt.indexOf("android")<0}if(j()){const tt=String(b.navigator.userAgent);if(tt.includes("Version/")){const[nt,rt]=tt.split("Version/")[1].split(" ")[0].split(".").map(it=>Number(it));_=nt<16||nt===16&&rt<2}}const $=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(b.navigator.userAgent),_e=j(),et=_e||$&&g.ios;return{isSafari:_||_e,needPerspectiveFix:_,need3dFix:et,isWebView:$}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize(b){let{swiper:g,on:_,emit:j}=b;const $=getWindow();let _e=null,et=null;const tt=()=>{!g||g.destroyed||!g.initialized||(j("beforeResize"),j("resize"))},nt=()=>{!g||g.destroyed||!g.initialized||(_e=new ResizeObserver(st=>{et=$.requestAnimationFrame(()=>{const{width:ot,height:lt}=g;let at=ot,ut=lt;st.forEach(dt=>{let{contentBoxSize:ct,contentRect:ht,target:pt}=dt;pt&&pt!==g.el||(at=ht?ht.width:(ct[0]||ct).inlineSize,ut=ht?ht.height:(ct[0]||ct).blockSize)}),(at!==ot||ut!==lt)&&tt()})}),_e.observe(g.el))},rt=()=>{et&&$.cancelAnimationFrame(et),_e&&_e.unobserve&&g.el&&(_e.unobserve(g.el),_e=null)},it=()=>{!g||g.destroyed||!g.initialized||j("orientationchange")};_("init",()=>{if(g.params.resizeObserver&&typeof $.ResizeObserver<"u"){nt();return}$.addEventListener("resize",tt),$.addEventListener("orientationchange",it)}),_("destroy",()=>{rt(),$.removeEventListener("resize",tt),$.removeEventListener("orientationchange",it)})}function Observer(b){let{swiper:g,extendParams:_,on:j,emit:$}=b;const _e=[],et=getWindow(),tt=function(it,st){st===void 0&&(st={});const ot=et.MutationObserver||et.WebkitMutationObserver,lt=new ot(at=>{if(g.__preventObserver__)return;if(at.length===1){$("observerUpdate",at[0]);return}const ut=function(){$("observerUpdate",at[0])};et.requestAnimationFrame?et.requestAnimationFrame(ut):et.setTimeout(ut,0)});lt.observe(it,{attributes:typeof st.attributes>"u"?!0:st.attributes,childList:g.isElement||(typeof st.childList>"u"?!0:st).childList,characterData:typeof st.characterData>"u"?!0:st.characterData}),_e.push(lt)},nt=()=>{if(g.params.observer){if(g.params.observeParents){const it=elementParents(g.hostEl);for(let st=0;st<it.length;st+=1)tt(it[st])}tt(g.hostEl,{childList:g.params.observeSlideChildren}),tt(g.wrapperEl,{attributes:!1})}},rt=()=>{_e.forEach(it=>{it.disconnect()}),_e.splice(0,_e.length)};_({observer:!1,observeParents:!1,observeSlideChildren:!1}),j("init",nt),j("destroy",rt)}var eventsEmitter={on(b,g,_){const j=this;if(!j.eventsListeners||j.destroyed||typeof g!="function")return j;const $=_?"unshift":"push";return b.split(" ").forEach(_e=>{j.eventsListeners[_e]||(j.eventsListeners[_e]=[]),j.eventsListeners[_e][$](g)}),j},once(b,g,_){const j=this;if(!j.eventsListeners||j.destroyed||typeof g!="function")return j;function $(){j.off(b,$),$.__emitterProxy&&delete $.__emitterProxy;for(var _e=arguments.length,et=new Array(_e),tt=0;tt<_e;tt++)et[tt]=arguments[tt];g.apply(j,et)}return $.__emitterProxy=g,j.on(b,$,_)},onAny(b,g){const _=this;if(!_.eventsListeners||_.destroyed||typeof b!="function")return _;const j=g?"unshift":"push";return _.eventsAnyListeners.indexOf(b)<0&&_.eventsAnyListeners[j](b),_},offAny(b){const g=this;if(!g.eventsListeners||g.destroyed||!g.eventsAnyListeners)return g;const _=g.eventsAnyListeners.indexOf(b);return _>=0&&g.eventsAnyListeners.splice(_,1),g},off(b,g){const _=this;return!_.eventsListeners||_.destroyed||!_.eventsListeners||b.split(" ").forEach(j=>{typeof g>"u"?_.eventsListeners[j]=[]:_.eventsListeners[j]&&_.eventsListeners[j].forEach(($,_e)=>{($===g||$.__emitterProxy&&$.__emitterProxy===g)&&_.eventsListeners[j].splice(_e,1)})}),_},emit(){const b=this;if(!b.eventsListeners||b.destroyed||!b.eventsListeners)return b;let g,_,j;for(var $=arguments.length,_e=new Array($),et=0;et<$;et++)_e[et]=arguments[et];return typeof _e[0]=="string"||Array.isArray(_e[0])?(g=_e[0],_=_e.slice(1,_e.length),j=b):(g=_e[0].events,_=_e[0].data,j=_e[0].context||b),_.unshift(j),(Array.isArray(g)?g:g.split(" ")).forEach(nt=>{b.eventsAnyListeners&&b.eventsAnyListeners.length&&b.eventsAnyListeners.forEach(rt=>{rt.apply(j,[nt,..._])}),b.eventsListeners&&b.eventsListeners[nt]&&b.eventsListeners[nt].forEach(rt=>{rt.apply(j,_)})}),b}};function updateSize(){const b=this;let g,_;const j=b.el;typeof b.params.width<"u"&&b.params.width!==null?g=b.params.width:g=j.clientWidth,typeof b.params.height<"u"&&b.params.height!==null?_=b.params.height:_=j.clientHeight,!(g===0&&b.isHorizontal()||_===0&&b.isVertical())&&(g=g-parseInt(elementStyle(j,"padding-left")||0,10)-parseInt(elementStyle(j,"padding-right")||0,10),_=_-parseInt(elementStyle(j,"padding-top")||0,10)-parseInt(elementStyle(j,"padding-bottom")||0,10),Number.isNaN(g)&&(g=0),Number.isNaN(_)&&(_=0),Object.assign(b,{width:g,height:_,size:b.isHorizontal()?g:_}))}function updateSlides(){const b=this;function g(Tt,bt){return parseFloat(Tt.getPropertyValue(b.getDirectionLabel(bt))||0)}const _=b.params,{wrapperEl:j,slidesEl:$,size:_e,rtlTranslate:et,wrongRTL:tt}=b,nt=b.virtual&&_.virtual.enabled,rt=nt?b.virtual.slides.length:b.slides.length,it=elementChildren($,`.${b.params.slideClass}, swiper-slide`),st=nt?b.virtual.slides.length:it.length;let ot=[];const lt=[],at=[];let ut=_.slidesOffsetBefore;typeof ut=="function"&&(ut=_.slidesOffsetBefore.call(b));let dt=_.slidesOffsetAfter;typeof dt=="function"&&(dt=_.slidesOffsetAfter.call(b));const ct=b.snapGrid.length,ht=b.slidesGrid.length;let pt=_.spaceBetween,mt=-ut,ft=0,gt=0;if(typeof _e>"u")return;typeof pt=="string"&&pt.indexOf("%")>=0?pt=parseFloat(pt.replace("%",""))/100*_e:typeof pt=="string"&&(pt=parseFloat(pt)),b.virtualSize=-pt,it.forEach(Tt=>{et?Tt.style.marginLeft="":Tt.style.marginRight="",Tt.style.marginBottom="",Tt.style.marginTop=""}),_.centeredSlides&&_.cssMode&&(setCSSProperty(j,"--swiper-centered-offset-before",""),setCSSProperty(j,"--swiper-centered-offset-after",""));const xt=_.grid&&_.grid.rows>1&&b.grid;xt?b.grid.initSlides(it):b.grid&&b.grid.unsetSlides();let vt;const St=_.slidesPerView==="auto"&&_.breakpoints&&Object.keys(_.breakpoints).filter(Tt=>typeof _.breakpoints[Tt].slidesPerView<"u").length>0;for(let Tt=0;Tt<st;Tt+=1){vt=0;let bt;if(it[Tt]&&(bt=it[Tt]),xt&&b.grid.updateSlide(Tt,bt,it),!(it[Tt]&&elementStyle(bt,"display")==="none")){if(_.slidesPerView==="auto"){St&&(it[Tt].style[b.getDirectionLabel("width")]="");const At=getComputedStyle(bt),Pt=bt.style.transform,en=bt.style.webkitTransform;if(Pt&&(bt.style.transform="none"),en&&(bt.style.webkitTransform="none"),_.roundLengths)vt=b.isHorizontal()?elementOuterSize(bt,"width"):elementOuterSize(bt,"height");else{const Wt=g(At,"width"),Jt=g(At,"padding-left"),zt=g(At,"padding-right"),Ht=g(At,"margin-left"),Rt=g(At,"margin-right"),jt=At.getPropertyValue("box-sizing");if(jt&&jt==="border-box")vt=Wt+Ht+Rt;else{const{clientWidth:Zt,offsetWidth:Ot}=bt;vt=Wt+Jt+zt+Ht+Rt+(Ot-Zt)}}Pt&&(bt.style.transform=Pt),en&&(bt.style.webkitTransform=en),_.roundLengths&&(vt=Math.floor(vt))}else vt=(_e-(_.slidesPerView-1)*pt)/_.slidesPerView,_.roundLengths&&(vt=Math.floor(vt)),it[Tt]&&(it[Tt].style[b.getDirectionLabel("width")]=`${vt}px`);it[Tt]&&(it[Tt].swiperSlideSize=vt),at.push(vt),_.centeredSlides?(mt=mt+vt/2+ft/2+pt,ft===0&&Tt!==0&&(mt=mt-_e/2-pt),Tt===0&&(mt=mt-_e/2-pt),Math.abs(mt)<1/1e3&&(mt=0),_.roundLengths&&(mt=Math.floor(mt)),gt%_.slidesPerGroup===0&&ot.push(mt),lt.push(mt)):(_.roundLengths&&(mt=Math.floor(mt)),(gt-Math.min(b.params.slidesPerGroupSkip,gt))%b.params.slidesPerGroup===0&&ot.push(mt),lt.push(mt),mt=mt+vt+pt),b.virtualSize+=vt+pt,ft=vt,gt+=1}}if(b.virtualSize=Math.max(b.virtualSize,_e)+dt,et&&tt&&(_.effect==="slide"||_.effect==="coverflow")&&(j.style.width=`${b.virtualSize+pt}px`),_.setWrapperSize&&(j.style[b.getDirectionLabel("width")]=`${b.virtualSize+pt}px`),xt&&b.grid.updateWrapperSize(vt,ot),!_.centeredSlides){const Tt=[];for(let bt=0;bt<ot.length;bt+=1){let At=ot[bt];_.roundLengths&&(At=Math.floor(At)),ot[bt]<=b.virtualSize-_e&&Tt.push(At)}ot=Tt,Math.floor(b.virtualSize-_e)-Math.floor(ot[ot.length-1])>1&&ot.push(b.virtualSize-_e)}if(nt&&_.loop){const Tt=at[0]+pt;if(_.slidesPerGroup>1){const bt=Math.ceil((b.virtual.slidesBefore+b.virtual.slidesAfter)/_.slidesPerGroup),At=Tt*_.slidesPerGroup;for(let Pt=0;Pt<bt;Pt+=1)ot.push(ot[ot.length-1]+At)}for(let bt=0;bt<b.virtual.slidesBefore+b.virtual.slidesAfter;bt+=1)_.slidesPerGroup===1&&ot.push(ot[ot.length-1]+Tt),lt.push(lt[lt.length-1]+Tt),b.virtualSize+=Tt}if(ot.length===0&&(ot=[0]),pt!==0){const Tt=b.isHorizontal()&&et?"marginLeft":b.getDirectionLabel("marginRight");it.filter((bt,At)=>!_.cssMode||_.loop?!0:At!==it.length-1).forEach(bt=>{bt.style[Tt]=`${pt}px`})}if(_.centeredSlides&&_.centeredSlidesBounds){let Tt=0;at.forEach(At=>{Tt+=At+(pt||0)}),Tt-=pt;const bt=Tt>_e?Tt-_e:0;ot=ot.map(At=>At<=0?-ut:At>bt?bt+dt:At)}if(_.centerInsufficientSlides){let Tt=0;at.forEach(At=>{Tt+=At+(pt||0)}),Tt-=pt;const bt=(_.slidesOffsetBefore||0)+(_.slidesOffsetAfter||0);if(Tt+bt<_e){const At=(_e-Tt-bt)/2;ot.forEach((Pt,en)=>{ot[en]=Pt-At}),lt.forEach((Pt,en)=>{lt[en]=Pt+At})}}if(Object.assign(b,{slides:it,snapGrid:ot,slidesGrid:lt,slidesSizesGrid:at}),_.centeredSlides&&_.cssMode&&!_.centeredSlidesBounds){setCSSProperty(j,"--swiper-centered-offset-before",`${-ot[0]}px`),setCSSProperty(j,"--swiper-centered-offset-after",`${b.size/2-at[at.length-1]/2}px`);const Tt=-b.snapGrid[0],bt=-b.slidesGrid[0];b.snapGrid=b.snapGrid.map(At=>At+Tt),b.slidesGrid=b.slidesGrid.map(At=>At+bt)}if(st!==rt&&b.emit("slidesLengthChange"),ot.length!==ct&&(b.params.watchOverflow&&b.checkOverflow(),b.emit("snapGridLengthChange")),lt.length!==ht&&b.emit("slidesGridLengthChange"),_.watchSlidesProgress&&b.updateSlidesOffset(),b.emit("slidesUpdated"),!nt&&!_.cssMode&&(_.effect==="slide"||_.effect==="fade")){const Tt=`${_.containerModifierClass}backface-hidden`,bt=b.el.classList.contains(Tt);st<=_.maxBackfaceHiddenSlides?bt||b.el.classList.add(Tt):bt&&b.el.classList.remove(Tt)}}function updateAutoHeight(b){const g=this,_=[],j=g.virtual&&g.params.virtual.enabled;let $=0,_e;typeof b=="number"?g.setTransition(b):b===!0&&g.setTransition(g.params.speed);const et=tt=>j?g.slides[g.getSlideIndexByData(tt)]:g.slides[tt];if(g.params.slidesPerView!=="auto"&&g.params.slidesPerView>1)if(g.params.centeredSlides)(g.visibleSlides||[]).forEach(tt=>{_.push(tt)});else for(_e=0;_e<Math.ceil(g.params.slidesPerView);_e+=1){const tt=g.activeIndex+_e;if(tt>g.slides.length&&!j)break;_.push(et(tt))}else _.push(et(g.activeIndex));for(_e=0;_e<_.length;_e+=1)if(typeof _[_e]<"u"){const tt=_[_e].offsetHeight;$=tt>$?tt:$}($||$===0)&&(g.wrapperEl.style.height=`${$}px`)}function updateSlidesOffset(){const b=this,g=b.slides,_=b.isElement?b.isHorizontal()?b.wrapperEl.offsetLeft:b.wrapperEl.offsetTop:0;for(let j=0;j<g.length;j+=1)g[j].swiperSlideOffset=(b.isHorizontal()?g[j].offsetLeft:g[j].offsetTop)-_-b.cssOverflowAdjustment()}const toggleSlideClasses$1=(b,g,_)=>{g&&!b.classList.contains(_)?b.classList.add(_):!g&&b.classList.contains(_)&&b.classList.remove(_)};function updateSlidesProgress(b){b===void 0&&(b=this&&this.translate||0);const g=this,_=g.params,{slides:j,rtlTranslate:$,snapGrid:_e}=g;if(j.length===0)return;typeof j[0].swiperSlideOffset>"u"&&g.updateSlidesOffset();let et=-b;$&&(et=b),g.visibleSlidesIndexes=[],g.visibleSlides=[];let tt=_.spaceBetween;typeof tt=="string"&&tt.indexOf("%")>=0?tt=parseFloat(tt.replace("%",""))/100*g.size:typeof tt=="string"&&(tt=parseFloat(tt));for(let nt=0;nt<j.length;nt+=1){const rt=j[nt];let it=rt.swiperSlideOffset;_.cssMode&&_.centeredSlides&&(it-=j[0].swiperSlideOffset);const st=(et+(_.centeredSlides?g.minTranslate():0)-it)/(rt.swiperSlideSize+tt),ot=(et-_e[0]+(_.centeredSlides?g.minTranslate():0)-it)/(rt.swiperSlideSize+tt),lt=-(et-it),at=lt+g.slidesSizesGrid[nt],ut=lt>=0&&lt<=g.size-g.slidesSizesGrid[nt],dt=lt>=0&&lt<g.size-1||at>1&&at<=g.size||lt<=0&&at>=g.size;dt&&(g.visibleSlides.push(rt),g.visibleSlidesIndexes.push(nt)),toggleSlideClasses$1(rt,dt,_.slideVisibleClass),toggleSlideClasses$1(rt,ut,_.slideFullyVisibleClass),rt.progress=$?-st:st,rt.originalProgress=$?-ot:ot}}function updateProgress(b){const g=this;if(typeof b>"u"){const it=g.rtlTranslate?-1:1;b=g&&g.translate&&g.translate*it||0}const _=g.params,j=g.maxTranslate()-g.minTranslate();let{progress:$,isBeginning:_e,isEnd:et,progressLoop:tt}=g;const nt=_e,rt=et;if(j===0)$=0,_e=!0,et=!0;else{$=(b-g.minTranslate())/j;const it=Math.abs(b-g.minTranslate())<1,st=Math.abs(b-g.maxTranslate())<1;_e=it||$<=0,et=st||$>=1,it&&($=0),st&&($=1)}if(_.loop){const it=g.getSlideIndexByData(0),st=g.getSlideIndexByData(g.slides.length-1),ot=g.slidesGrid[it],lt=g.slidesGrid[st],at=g.slidesGrid[g.slidesGrid.length-1],ut=Math.abs(b);ut>=ot?tt=(ut-ot)/at:tt=(ut+at-lt)/at,tt>1&&(tt-=1)}Object.assign(g,{progress:$,progressLoop:tt,isBeginning:_e,isEnd:et}),(_.watchSlidesProgress||_.centeredSlides&&_.autoHeight)&&g.updateSlidesProgress(b),_e&&!nt&&g.emit("reachBeginning toEdge"),et&&!rt&&g.emit("reachEnd toEdge"),(nt&&!_e||rt&&!et)&&g.emit("fromEdge"),g.emit("progress",$)}const toggleSlideClasses=(b,g,_)=>{g&&!b.classList.contains(_)?b.classList.add(_):!g&&b.classList.contains(_)&&b.classList.remove(_)};function updateSlidesClasses(){const b=this,{slides:g,params:_,slidesEl:j,activeIndex:$}=b,_e=b.virtual&&_.virtual.enabled,et=b.grid&&_.grid&&_.grid.rows>1,tt=st=>elementChildren(j,`.${_.slideClass}${st}, swiper-slide${st}`)[0];let nt,rt,it;if(_e)if(_.loop){let st=$-b.virtual.slidesBefore;st<0&&(st=b.virtual.slides.length+st),st>=b.virtual.slides.length&&(st-=b.virtual.slides.length),nt=tt(`[data-swiper-slide-index="${st}"]`)}else nt=tt(`[data-swiper-slide-index="${$}"]`);else et?(nt=g.filter(st=>st.column===$)[0],it=g.filter(st=>st.column===$+1)[0],rt=g.filter(st=>st.column===$-1)[0]):nt=g[$];nt&&(et||(it=elementNextAll(nt,`.${_.slideClass}, swiper-slide`)[0],_.loop&&!it&&(it=g[0]),rt=elementPrevAll(nt,`.${_.slideClass}, swiper-slide`)[0],_.loop&&!rt===0&&(rt=g[g.length-1]))),g.forEach(st=>{toggleSlideClasses(st,st===nt,_.slideActiveClass),toggleSlideClasses(st,st===it,_.slideNextClass),toggleSlideClasses(st,st===rt,_.slidePrevClass)}),b.emitSlidesClasses()}const processLazyPreloader=(b,g)=>{if(!b||b.destroyed||!b.params)return;const _=()=>b.isElement?"swiper-slide":`.${b.params.slideClass}`,j=g.closest(_());if(j){let $=j.querySelector(`.${b.params.lazyPreloaderClass}`);!$&&b.isElement&&(j.shadowRoot?$=j.shadowRoot.querySelector(`.${b.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{j.shadowRoot&&($=j.shadowRoot.querySelector(`.${b.params.lazyPreloaderClass}`),$&&$.remove())})),$&&$.remove()}},unlazy=(b,g)=>{if(!b.slides[g])return;const _=b.slides[g].querySelector('[loading="lazy"]');_&&_.removeAttribute("loading")},preload=b=>{if(!b||b.destroyed||!b.params)return;let g=b.params.lazyPreloadPrevNext;const _=b.slides.length;if(!_||!g||g<0)return;g=Math.min(g,_);const j=b.params.slidesPerView==="auto"?b.slidesPerViewDynamic():Math.ceil(b.params.slidesPerView),$=b.activeIndex;if(b.params.grid&&b.params.grid.rows>1){const et=$,tt=[et-g];tt.push(...Array.from({length:g}).map((nt,rt)=>et+j+rt)),b.slides.forEach((nt,rt)=>{tt.includes(nt.column)&&unlazy(b,rt)});return}const _e=$+j-1;if(b.params.rewind||b.params.loop)for(let et=$-g;et<=_e+g;et+=1){const tt=(et%_+_)%_;(tt<$||tt>_e)&&unlazy(b,tt)}else for(let et=Math.max($-g,0);et<=Math.min(_e+g,_-1);et+=1)et!==$&&(et>_e||et<$)&&unlazy(b,et)};function getActiveIndexByTranslate(b){const{slidesGrid:g,params:_}=b,j=b.rtlTranslate?b.translate:-b.translate;let $;for(let _e=0;_e<g.length;_e+=1)typeof g[_e+1]<"u"?j>=g[_e]&&j<g[_e+1]-(g[_e+1]-g[_e])/2?$=_e:j>=g[_e]&&j<g[_e+1]&&($=_e+1):j>=g[_e]&&($=_e);return _.normalizeSlideIndex&&($<0||typeof $>"u")&&($=0),$}function updateActiveIndex(b){const g=this,_=g.rtlTranslate?g.translate:-g.translate,{snapGrid:j,params:$,activeIndex:_e,realIndex:et,snapIndex:tt}=g;let nt=b,rt;const it=lt=>{let at=lt-g.virtual.slidesBefore;return at<0&&(at=g.virtual.slides.length+at),at>=g.virtual.slides.length&&(at-=g.virtual.slides.length),at};if(typeof nt>"u"&&(nt=getActiveIndexByTranslate(g)),j.indexOf(_)>=0)rt=j.indexOf(_);else{const lt=Math.min($.slidesPerGroupSkip,nt);rt=lt+Math.floor((nt-lt)/$.slidesPerGroup)}if(rt>=j.length&&(rt=j.length-1),nt===_e&&!g.params.loop){rt!==tt&&(g.snapIndex=rt,g.emit("snapIndexChange"));return}if(nt===_e&&g.params.loop&&g.virtual&&g.params.virtual.enabled){g.realIndex=it(nt);return}const st=g.grid&&$.grid&&$.grid.rows>1;let ot;if(g.virtual&&$.virtual.enabled&&$.loop)ot=it(nt);else if(st){const lt=g.slides.filter(ut=>ut.column===nt)[0];let at=parseInt(lt.getAttribute("data-swiper-slide-index"),10);Number.isNaN(at)&&(at=Math.max(g.slides.indexOf(lt),0)),ot=Math.floor(at/$.grid.rows)}else if(g.slides[nt]){const lt=g.slides[nt].getAttribute("data-swiper-slide-index");lt?ot=parseInt(lt,10):ot=nt}else ot=nt;Object.assign(g,{previousSnapIndex:tt,snapIndex:rt,previousRealIndex:et,realIndex:ot,previousIndex:_e,activeIndex:nt}),g.initialized&&preload(g),g.emit("activeIndexChange"),g.emit("snapIndexChange"),(g.initialized||g.params.runCallbacksOnInit)&&(et!==ot&&g.emit("realIndexChange"),g.emit("slideChange"))}function updateClickedSlide(b,g){const _=this,j=_.params;let $=b.closest(`.${j.slideClass}, swiper-slide`);!$&&_.isElement&&g&&g.length>1&&g.includes(b)&&[...g.slice(g.indexOf(b)+1,g.length)].forEach(tt=>{!$&&tt.matches&&tt.matches(`.${j.slideClass}, swiper-slide`)&&($=tt)});let _e=!1,et;if($){for(let tt=0;tt<_.slides.length;tt+=1)if(_.slides[tt]===$){_e=!0,et=tt;break}}if($&&_e)_.clickedSlide=$,_.virtual&&_.params.virtual.enabled?_.clickedIndex=parseInt($.getAttribute("data-swiper-slide-index"),10):_.clickedIndex=et;else{_.clickedSlide=void 0,_.clickedIndex=void 0;return}j.slideToClickedSlide&&_.clickedIndex!==void 0&&_.clickedIndex!==_.activeIndex&&_.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(b){b===void 0&&(b=this.isHorizontal()?"x":"y");const g=this,{params:_,rtlTranslate:j,translate:$,wrapperEl:_e}=g;if(_.virtualTranslate)return j?-$:$;if(_.cssMode)return $;let et=getTranslate(_e,b);return et+=g.cssOverflowAdjustment(),j&&(et=-et),et||0}function setTranslate(b,g){const _=this,{rtlTranslate:j,params:$,wrapperEl:_e,progress:et}=_;let tt=0,nt=0;const rt=0;_.isHorizontal()?tt=j?-b:b:nt=b,$.roundLengths&&(tt=Math.floor(tt),nt=Math.floor(nt)),_.previousTranslate=_.translate,_.translate=_.isHorizontal()?tt:nt,$.cssMode?_e[_.isHorizontal()?"scrollLeft":"scrollTop"]=_.isHorizontal()?-tt:-nt:$.virtualTranslate||(_.isHorizontal()?tt-=_.cssOverflowAdjustment():nt-=_.cssOverflowAdjustment(),_e.style.transform=`translate3d(${tt}px, ${nt}px, ${rt}px)`);let it;const st=_.maxTranslate()-_.minTranslate();st===0?it=0:it=(b-_.minTranslate())/st,it!==et&&_.updateProgress(b),_.emit("setTranslate",_.translate,g)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(b,g,_,j,$){b===void 0&&(b=0),g===void 0&&(g=this.params.speed),_===void 0&&(_=!0),j===void 0&&(j=!0);const _e=this,{params:et,wrapperEl:tt}=_e;if(_e.animating&&et.preventInteractionOnTransition)return!1;const nt=_e.minTranslate(),rt=_e.maxTranslate();let it;if(j&&b>nt?it=nt:j&&b<rt?it=rt:it=b,_e.updateProgress(it),et.cssMode){const st=_e.isHorizontal();if(g===0)tt[st?"scrollLeft":"scrollTop"]=-it;else{if(!_e.support.smoothScroll)return animateCSSModeScroll({swiper:_e,targetPosition:-it,side:st?"left":"top"}),!0;tt.scrollTo({[st?"left":"top"]:-it,behavior:"smooth"})}return!0}return g===0?(_e.setTransition(0),_e.setTranslate(it),_&&(_e.emit("beforeTransitionStart",g,$),_e.emit("transitionEnd"))):(_e.setTransition(g),_e.setTranslate(it),_&&(_e.emit("beforeTransitionStart",g,$),_e.emit("transitionStart")),_e.animating||(_e.animating=!0,_e.onTranslateToWrapperTransitionEnd||(_e.onTranslateToWrapperTransitionEnd=function(ot){!_e||_e.destroyed||ot.target===this&&(_e.wrapperEl.removeEventListener("transitionend",_e.onTranslateToWrapperTransitionEnd),_e.onTranslateToWrapperTransitionEnd=null,delete _e.onTranslateToWrapperTransitionEnd,_e.animating=!1,_&&_e.emit("transitionEnd"))}),_e.wrapperEl.addEventListener("transitionend",_e.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(b,g){const _=this;_.params.cssMode||(_.wrapperEl.style.transitionDuration=`${b}ms`,_.wrapperEl.style.transitionDelay=b===0?"0ms":""),_.emit("setTransition",b,g)}function transitionEmit(b){let{swiper:g,runCallbacks:_,direction:j,step:$}=b;const{activeIndex:_e,previousIndex:et}=g;let tt=j;if(tt||(_e>et?tt="next":_e<et?tt="prev":tt="reset"),g.emit(`transition${$}`),_&&_e!==et){if(tt==="reset"){g.emit(`slideResetTransition${$}`);return}g.emit(`slideChangeTransition${$}`),tt==="next"?g.emit(`slideNextTransition${$}`):g.emit(`slidePrevTransition${$}`)}}function transitionStart(b,g){b===void 0&&(b=!0);const _=this,{params:j}=_;j.cssMode||(j.autoHeight&&_.updateAutoHeight(),transitionEmit({swiper:_,runCallbacks:b,direction:g,step:"Start"}))}function transitionEnd(b,g){b===void 0&&(b=!0);const _=this,{params:j}=_;_.animating=!1,!j.cssMode&&(_.setTransition(0),transitionEmit({swiper:_,runCallbacks:b,direction:g,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(b,g,_,j,$){b===void 0&&(b=0),_===void 0&&(_=!0),typeof b=="string"&&(b=parseInt(b,10));const _e=this;let et=b;et<0&&(et=0);const{params:tt,snapGrid:nt,slidesGrid:rt,previousIndex:it,activeIndex:st,rtlTranslate:ot,wrapperEl:lt,enabled:at}=_e;if(!at&&!j&&!$||_e.destroyed||_e.animating&&tt.preventInteractionOnTransition)return!1;typeof g>"u"&&(g=_e.params.speed);const ut=Math.min(_e.params.slidesPerGroupSkip,et);let dt=ut+Math.floor((et-ut)/_e.params.slidesPerGroup);dt>=nt.length&&(dt=nt.length-1);const ct=-nt[dt];if(tt.normalizeSlideIndex)for(let ft=0;ft<rt.length;ft+=1){const gt=-Math.floor(ct*100),xt=Math.floor(rt[ft]*100),vt=Math.floor(rt[ft+1]*100);typeof rt[ft+1]<"u"?gt>=xt&&gt<vt-(vt-xt)/2?et=ft:gt>=xt&&gt<vt&&(et=ft+1):gt>=xt&&(et=ft)}if(_e.initialized&&et!==st&&(!_e.allowSlideNext&&(ot?ct>_e.translate&&ct>_e.minTranslate():ct<_e.translate&&ct<_e.minTranslate())||!_e.allowSlidePrev&&ct>_e.translate&&ct>_e.maxTranslate()&&(st||0)!==et))return!1;et!==(it||0)&&_&&_e.emit("beforeSlideChangeStart"),_e.updateProgress(ct);let ht;et>st?ht="next":et<st?ht="prev":ht="reset";const pt=_e.virtual&&_e.params.virtual.enabled;if(!(pt&&$)&&(ot&&-ct===_e.translate||!ot&&ct===_e.translate))return _e.updateActiveIndex(et),tt.autoHeight&&_e.updateAutoHeight(),_e.updateSlidesClasses(),tt.effect!=="slide"&&_e.setTranslate(ct),ht!=="reset"&&(_e.transitionStart(_,ht),_e.transitionEnd(_,ht)),!1;if(tt.cssMode){const ft=_e.isHorizontal(),gt=ot?ct:-ct;if(g===0)pt&&(_e.wrapperEl.style.scrollSnapType="none",_e._immediateVirtual=!0),pt&&!_e._cssModeVirtualInitialSet&&_e.params.initialSlide>0?(_e._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{lt[ft?"scrollLeft":"scrollTop"]=gt})):lt[ft?"scrollLeft":"scrollTop"]=gt,pt&&requestAnimationFrame(()=>{_e.wrapperEl.style.scrollSnapType="",_e._immediateVirtual=!1});else{if(!_e.support.smoothScroll)return animateCSSModeScroll({swiper:_e,targetPosition:gt,side:ft?"left":"top"}),!0;lt.scrollTo({[ft?"left":"top"]:gt,behavior:"smooth"})}return!0}return _e.setTransition(g),_e.setTranslate(ct),_e.updateActiveIndex(et),_e.updateSlidesClasses(),_e.emit("beforeTransitionStart",g,j),_e.transitionStart(_,ht),g===0?_e.transitionEnd(_,ht):_e.animating||(_e.animating=!0,_e.onSlideToWrapperTransitionEnd||(_e.onSlideToWrapperTransitionEnd=function(gt){!_e||_e.destroyed||gt.target===this&&(_e.wrapperEl.removeEventListener("transitionend",_e.onSlideToWrapperTransitionEnd),_e.onSlideToWrapperTransitionEnd=null,delete _e.onSlideToWrapperTransitionEnd,_e.transitionEnd(_,ht))}),_e.wrapperEl.addEventListener("transitionend",_e.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(b,g,_,j){b===void 0&&(b=0),_===void 0&&(_=!0),typeof b=="string"&&(b=parseInt(b,10));const $=this;if($.destroyed)return;typeof g>"u"&&(g=$.params.speed);const _e=$.grid&&$.params.grid&&$.params.grid.rows>1;let et=b;if($.params.loop)if($.virtual&&$.params.virtual.enabled)et=et+$.virtual.slidesBefore;else{let tt;if(_e){const ot=et*$.params.grid.rows;tt=$.slides.filter(lt=>lt.getAttribute("data-swiper-slide-index")*1===ot)[0].column}else tt=$.getSlideIndexByData(et);const nt=_e?Math.ceil($.slides.length/$.params.grid.rows):$.slides.length,{centeredSlides:rt}=$.params;let it=$.params.slidesPerView;it==="auto"?it=$.slidesPerViewDynamic():(it=Math.ceil(parseFloat($.params.slidesPerView,10)),rt&&it%2===0&&(it=it+1));let st=nt-tt<it;if(rt&&(st=st||tt<Math.ceil(it/2)),j&&rt&&$.params.slidesPerView!=="auto"&&!_e&&(st=!1),st){const ot=rt?tt<$.activeIndex?"prev":"next":tt-$.activeIndex-1<$.params.slidesPerView?"next":"prev";$.loopFix({direction:ot,slideTo:!0,activeSlideIndex:ot==="next"?tt+1:tt-nt+1,slideRealIndex:ot==="next"?$.realIndex:void 0})}if(_e){const ot=et*$.params.grid.rows;et=$.slides.filter(lt=>lt.getAttribute("data-swiper-slide-index")*1===ot)[0].column}else et=$.getSlideIndexByData(et)}return requestAnimationFrame(()=>{$.slideTo(et,g,_,j)}),$}function slideNext(b,g,_){g===void 0&&(g=!0);const j=this,{enabled:$,params:_e,animating:et}=j;if(!$||j.destroyed)return j;typeof b>"u"&&(b=j.params.speed);let tt=_e.slidesPerGroup;_e.slidesPerView==="auto"&&_e.slidesPerGroup===1&&_e.slidesPerGroupAuto&&(tt=Math.max(j.slidesPerViewDynamic("current",!0),1));const nt=j.activeIndex<_e.slidesPerGroupSkip?1:tt,rt=j.virtual&&_e.virtual.enabled;if(_e.loop){if(et&&!rt&&_e.loopPreventsSliding)return!1;if(j.loopFix({direction:"next"}),j._clientLeft=j.wrapperEl.clientLeft,j.activeIndex===j.slides.length-1&&_e.cssMode)return requestAnimationFrame(()=>{j.slideTo(j.activeIndex+nt,b,g,_)}),!0}return _e.rewind&&j.isEnd?j.slideTo(0,b,g,_):j.slideTo(j.activeIndex+nt,b,g,_)}function slidePrev(b,g,_){g===void 0&&(g=!0);const j=this,{params:$,snapGrid:_e,slidesGrid:et,rtlTranslate:tt,enabled:nt,animating:rt}=j;if(!nt||j.destroyed)return j;typeof b>"u"&&(b=j.params.speed);const it=j.virtual&&$.virtual.enabled;if($.loop){if(rt&&!it&&$.loopPreventsSliding)return!1;j.loopFix({direction:"prev"}),j._clientLeft=j.wrapperEl.clientLeft}const st=tt?j.translate:-j.translate;function ot(ct){return ct<0?-Math.floor(Math.abs(ct)):Math.floor(ct)}const lt=ot(st),at=_e.map(ct=>ot(ct));let ut=_e[at.indexOf(lt)-1];if(typeof ut>"u"&&$.cssMode){let ct;_e.forEach((ht,pt)=>{lt>=ht&&(ct=pt)}),typeof ct<"u"&&(ut=_e[ct>0?ct-1:ct])}let dt=0;if(typeof ut<"u"&&(dt=et.indexOf(ut),dt<0&&(dt=j.activeIndex-1),$.slidesPerView==="auto"&&$.slidesPerGroup===1&&$.slidesPerGroupAuto&&(dt=dt-j.slidesPerViewDynamic("previous",!0)+1,dt=Math.max(dt,0))),$.rewind&&j.isBeginning){const ct=j.params.virtual&&j.params.virtual.enabled&&j.virtual?j.virtual.slides.length-1:j.slides.length-1;return j.slideTo(ct,b,g,_)}else if($.loop&&j.activeIndex===0&&$.cssMode)return requestAnimationFrame(()=>{j.slideTo(dt,b,g,_)}),!0;return j.slideTo(dt,b,g,_)}function slideReset(b,g,_){g===void 0&&(g=!0);const j=this;if(!j.destroyed)return typeof b>"u"&&(b=j.params.speed),j.slideTo(j.activeIndex,b,g,_)}function slideToClosest(b,g,_,j){g===void 0&&(g=!0),j===void 0&&(j=.5);const $=this;if($.destroyed)return;typeof b>"u"&&(b=$.params.speed);let _e=$.activeIndex;const et=Math.min($.params.slidesPerGroupSkip,_e),tt=et+Math.floor((_e-et)/$.params.slidesPerGroup),nt=$.rtlTranslate?$.translate:-$.translate;if(nt>=$.snapGrid[tt]){const rt=$.snapGrid[tt],it=$.snapGrid[tt+1];nt-rt>(it-rt)*j&&(_e+=$.params.slidesPerGroup)}else{const rt=$.snapGrid[tt-1],it=$.snapGrid[tt];nt-rt<=(it-rt)*j&&(_e-=$.params.slidesPerGroup)}return _e=Math.max(_e,0),_e=Math.min(_e,$.slidesGrid.length-1),$.slideTo(_e,b,g,_)}function slideToClickedSlide(){const b=this;if(b.destroyed)return;const{params:g,slidesEl:_}=b,j=g.slidesPerView==="auto"?b.slidesPerViewDynamic():g.slidesPerView;let $=b.clickedIndex,_e;const et=b.isElement?"swiper-slide":`.${g.slideClass}`;if(g.loop){if(b.animating)return;_e=parseInt(b.clickedSlide.getAttribute("data-swiper-slide-index"),10),g.centeredSlides?$<b.loopedSlides-j/2||$>b.slides.length-b.loopedSlides+j/2?(b.loopFix(),$=b.getSlideIndex(elementChildren(_,`${et}[data-swiper-slide-index="${_e}"]`)[0]),nextTick(()=>{b.slideTo($)})):b.slideTo($):$>b.slides.length-j?(b.loopFix(),$=b.getSlideIndex(elementChildren(_,`${et}[data-swiper-slide-index="${_e}"]`)[0]),nextTick(()=>{b.slideTo($)})):b.slideTo($)}else b.slideTo($)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(b){const g=this,{params:_,slidesEl:j}=g;if(!_.loop||g.virtual&&g.params.virtual.enabled)return;const $=()=>{elementChildren(j,`.${_.slideClass}, swiper-slide`).forEach((st,ot)=>{st.setAttribute("data-swiper-slide-index",ot)})},_e=g.grid&&_.grid&&_.grid.rows>1,et=_.slidesPerGroup*(_e?_.grid.rows:1),tt=g.slides.length%et!==0,nt=_e&&g.slides.length%_.grid.rows!==0,rt=it=>{for(let st=0;st<it;st+=1){const ot=g.isElement?createElement("swiper-slide",[_.slideBlankClass]):createElement("div",[_.slideClass,_.slideBlankClass]);g.slidesEl.append(ot)}};if(tt){if(_.loopAddBlankSlides){const it=et-g.slides.length%et;rt(it),g.recalcSlides(),g.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");$()}else if(nt){if(_.loopAddBlankSlides){const it=_.grid.rows-g.slides.length%_.grid.rows;rt(it),g.recalcSlides(),g.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");$()}else $();g.loopFix({slideRealIndex:b,direction:_.centeredSlides?void 0:"next"})}function loopFix(b){let{slideRealIndex:g,slideTo:_=!0,direction:j,setTranslate:$,activeSlideIndex:_e,byController:et,byMousewheel:tt}=b===void 0?{}:b;const nt=this;if(!nt.params.loop)return;nt.emit("beforeLoopFix");const{slides:rt,allowSlidePrev:it,allowSlideNext:st,slidesEl:ot,params:lt}=nt,{centeredSlides:at}=lt;if(nt.allowSlidePrev=!0,nt.allowSlideNext=!0,nt.virtual&&lt.virtual.enabled){_&&(!lt.centeredSlides&&nt.snapIndex===0?nt.slideTo(nt.virtual.slides.length,0,!1,!0):lt.centeredSlides&&nt.snapIndex<lt.slidesPerView?nt.slideTo(nt.virtual.slides.length+nt.snapIndex,0,!1,!0):nt.snapIndex===nt.snapGrid.length-1&&nt.slideTo(nt.virtual.slidesBefore,0,!1,!0)),nt.allowSlidePrev=it,nt.allowSlideNext=st,nt.emit("loopFix");return}let ut=lt.slidesPerView;ut==="auto"?ut=nt.slidesPerViewDynamic():(ut=Math.ceil(parseFloat(lt.slidesPerView,10)),at&&ut%2===0&&(ut=ut+1));const dt=lt.slidesPerGroupAuto?ut:lt.slidesPerGroup;let ct=dt;ct%dt!==0&&(ct+=dt-ct%dt),ct+=lt.loopAdditionalSlides,nt.loopedSlides=ct;const ht=nt.grid&&lt.grid&&lt.grid.rows>1;rt.length<ut+ct?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):ht&&lt.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const pt=[],mt=[];let ft=nt.activeIndex;typeof _e>"u"?_e=nt.getSlideIndex(rt.filter(Pt=>Pt.classList.contains(lt.slideActiveClass))[0]):ft=_e;const gt=j==="next"||!j,xt=j==="prev"||!j;let vt=0,St=0;const Tt=ht?Math.ceil(rt.length/lt.grid.rows):rt.length,At=(ht?rt[_e].column:_e)+(at&&typeof $>"u"?-ut/2+.5:0);if(At<ct){vt=Math.max(ct-At,dt);for(let Pt=0;Pt<ct-At;Pt+=1){const en=Pt-Math.floor(Pt/Tt)*Tt;if(ht){const Wt=Tt-en-1;for(let Jt=rt.length-1;Jt>=0;Jt-=1)rt[Jt].column===Wt&&pt.push(Jt)}else pt.push(Tt-en-1)}}else if(At+ut>Tt-ct){St=Math.max(At-(Tt-ct*2),dt);for(let Pt=0;Pt<St;Pt+=1){const en=Pt-Math.floor(Pt/Tt)*Tt;ht?rt.forEach((Wt,Jt)=>{Wt.column===en&&mt.push(Jt)}):mt.push(en)}}if(nt.__preventObserver__=!0,requestAnimationFrame(()=>{nt.__preventObserver__=!1}),xt&&pt.forEach(Pt=>{rt[Pt].swiperLoopMoveDOM=!0,ot.prepend(rt[Pt]),rt[Pt].swiperLoopMoveDOM=!1}),gt&&mt.forEach(Pt=>{rt[Pt].swiperLoopMoveDOM=!0,ot.append(rt[Pt]),rt[Pt].swiperLoopMoveDOM=!1}),nt.recalcSlides(),lt.slidesPerView==="auto"?nt.updateSlides():ht&&(pt.length>0&&xt||mt.length>0&&gt)&&nt.slides.forEach((Pt,en)=>{nt.grid.updateSlide(en,Pt,nt.slides)}),lt.watchSlidesProgress&&nt.updateSlidesOffset(),_){if(pt.length>0&&xt){if(typeof g>"u"){const Pt=nt.slidesGrid[ft],Wt=nt.slidesGrid[ft+vt]-Pt;tt?nt.setTranslate(nt.translate-Wt):(nt.slideTo(ft+Math.ceil(vt),0,!1,!0),$&&(nt.touchEventsData.startTranslate=nt.touchEventsData.startTranslate-Wt,nt.touchEventsData.currentTranslate=nt.touchEventsData.currentTranslate-Wt))}else if($){const Pt=ht?pt.length/lt.grid.rows:pt.length;nt.slideTo(nt.activeIndex+Pt,0,!1,!0),nt.touchEventsData.currentTranslate=nt.translate}}else if(mt.length>0&&gt)if(typeof g>"u"){const Pt=nt.slidesGrid[ft],Wt=nt.slidesGrid[ft-St]-Pt;tt?nt.setTranslate(nt.translate-Wt):(nt.slideTo(ft-St,0,!1,!0),$&&(nt.touchEventsData.startTranslate=nt.touchEventsData.startTranslate-Wt,nt.touchEventsData.currentTranslate=nt.touchEventsData.currentTranslate-Wt))}else{const Pt=ht?mt.length/lt.grid.rows:mt.length;nt.slideTo(nt.activeIndex-Pt,0,!1,!0)}}if(nt.allowSlidePrev=it,nt.allowSlideNext=st,nt.controller&&nt.controller.control&&!et){const Pt={slideRealIndex:g,direction:j,setTranslate:$,activeSlideIndex:_e,byController:!0};Array.isArray(nt.controller.control)?nt.controller.control.forEach(en=>{!en.destroyed&&en.params.loop&&en.loopFix({...Pt,slideTo:en.params.slidesPerView===lt.slidesPerView?_:!1})}):nt.controller.control instanceof nt.constructor&&nt.controller.control.params.loop&&nt.controller.control.loopFix({...Pt,slideTo:nt.controller.control.params.slidesPerView===lt.slidesPerView?_:!1})}nt.emit("loopFix")}function loopDestroy(){const b=this,{params:g,slidesEl:_}=b;if(!g.loop||b.virtual&&b.params.virtual.enabled)return;b.recalcSlides();const j=[];b.slides.forEach($=>{const _e=typeof $.swiperSlideIndex>"u"?$.getAttribute("data-swiper-slide-index")*1:$.swiperSlideIndex;j[_e]=$}),b.slides.forEach($=>{$.removeAttribute("data-swiper-slide-index")}),j.forEach($=>{_.append($)}),b.recalcSlides(),b.slideTo(b.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(b){const g=this;if(!g.params.simulateTouch||g.params.watchOverflow&&g.isLocked||g.params.cssMode)return;const _=g.params.touchEventsTarget==="container"?g.el:g.wrapperEl;g.isElement&&(g.__preventObserver__=!0),_.style.cursor="move",_.style.cursor=b?"grabbing":"grab",g.isElement&&requestAnimationFrame(()=>{g.__preventObserver__=!1})}function unsetGrabCursor(){const b=this;b.params.watchOverflow&&b.isLocked||b.params.cssMode||(b.isElement&&(b.__preventObserver__=!0),b[b.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",b.isElement&&requestAnimationFrame(()=>{b.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(b,g){g===void 0&&(g=this);function _(j){if(!j||j===getDocument()||j===getWindow())return null;j.assignedSlot&&(j=j.assignedSlot);const $=j.closest(b);return!$&&!j.getRootNode?null:$||_(j.getRootNode().host)}return _(g)}function preventEdgeSwipe(b,g,_){const j=getWindow(),{params:$}=b,_e=$.edgeSwipeDetection,et=$.edgeSwipeThreshold;return _e&&(_<=et||_>=j.innerWidth-et)?_e==="prevent"?(g.preventDefault(),!0):!1:!0}function onTouchStart(b){const g=this,_=getDocument();let j=b;j.originalEvent&&(j=j.originalEvent);const $=g.touchEventsData;if(j.type==="pointerdown"){if($.pointerId!==null&&$.pointerId!==j.pointerId)return;$.pointerId=j.pointerId}else j.type==="touchstart"&&j.targetTouches.length===1&&($.touchId=j.targetTouches[0].identifier);if(j.type==="touchstart"){preventEdgeSwipe(g,j,j.targetTouches[0].pageX);return}const{params:_e,touches:et,enabled:tt}=g;if(!tt||!_e.simulateTouch&&j.pointerType==="mouse"||g.animating&&_e.preventInteractionOnTransition)return;!g.animating&&_e.cssMode&&_e.loop&&g.loopFix();let nt=j.target;if(_e.touchEventsTarget==="wrapper"&&!elementIsChildOf(nt,g.wrapperEl)||"which"in j&&j.which===3||"button"in j&&j.button>0||$.isTouched&&$.isMoved)return;const rt=!!_e.noSwipingClass&&_e.noSwipingClass!=="",it=j.composedPath?j.composedPath():j.path;rt&&j.target&&j.target.shadowRoot&&it&&(nt=it[0]);const st=_e.noSwipingSelector?_e.noSwipingSelector:`.${_e.noSwipingClass}`,ot=!!(j.target&&j.target.shadowRoot);if(_e.noSwiping&&(ot?closestElement(st,nt):nt.closest(st))){g.allowClick=!0;return}if(_e.swipeHandler&&!nt.closest(_e.swipeHandler))return;et.currentX=j.pageX,et.currentY=j.pageY;const lt=et.currentX,at=et.currentY;if(!preventEdgeSwipe(g,j,lt))return;Object.assign($,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),et.startX=lt,et.startY=at,$.touchStartTime=now(),g.allowClick=!0,g.updateSize(),g.swipeDirection=void 0,_e.threshold>0&&($.allowThresholdMove=!1);let ut=!0;nt.matches($.focusableElements)&&(ut=!1,nt.nodeName==="SELECT"&&($.isTouched=!1)),_.activeElement&&_.activeElement.matches($.focusableElements)&&_.activeElement!==nt&&(j.pointerType==="mouse"||j.pointerType!=="mouse"&&!nt.matches($.focusableElements))&&_.activeElement.blur();const dt=ut&&g.allowTouchMove&&_e.touchStartPreventDefault;(_e.touchStartForcePreventDefault||dt)&&!nt.isContentEditable&&j.preventDefault(),_e.freeMode&&_e.freeMode.enabled&&g.freeMode&&g.animating&&!_e.cssMode&&g.freeMode.onTouchStart(),g.emit("touchStart",j)}function onTouchMove(b){const g=getDocument(),_=this,j=_.touchEventsData,{params:$,touches:_e,rtlTranslate:et,enabled:tt}=_;if(!tt||!$.simulateTouch&&b.pointerType==="mouse")return;let nt=b;if(nt.originalEvent&&(nt=nt.originalEvent),nt.type==="pointermove"&&(j.touchId!==null||nt.pointerId!==j.pointerId))return;let rt;if(nt.type==="touchmove"){if(rt=[...nt.changedTouches].filter(gt=>gt.identifier===j.touchId)[0],!rt||rt.identifier!==j.touchId)return}else rt=nt;if(!j.isTouched){j.startMoving&&j.isScrolling&&_.emit("touchMoveOpposite",nt);return}const it=rt.pageX,st=rt.pageY;if(nt.preventedByNestedSwiper){_e.startX=it,_e.startY=st;return}if(!_.allowTouchMove){nt.target.matches(j.focusableElements)||(_.allowClick=!1),j.isTouched&&(Object.assign(_e,{startX:it,startY:st,currentX:it,currentY:st}),j.touchStartTime=now());return}if($.touchReleaseOnEdges&&!$.loop){if(_.isVertical()){if(st<_e.startY&&_.translate<=_.maxTranslate()||st>_e.startY&&_.translate>=_.minTranslate()){j.isTouched=!1,j.isMoved=!1;return}}else if(it<_e.startX&&_.translate<=_.maxTranslate()||it>_e.startX&&_.translate>=_.minTranslate())return}if(g.activeElement&&g.activeElement.matches(j.focusableElements)&&g.activeElement!==nt.target&&nt.pointerType!=="mouse"&&g.activeElement.blur(),g.activeElement&&nt.target===g.activeElement&&nt.target.matches(j.focusableElements)){j.isMoved=!0,_.allowClick=!1;return}j.allowTouchCallbacks&&_.emit("touchMove",nt),_e.previousX=_e.currentX,_e.previousY=_e.currentY,_e.currentX=it,_e.currentY=st;const ot=_e.currentX-_e.startX,lt=_e.currentY-_e.startY;if(_.params.threshold&&Math.sqrt(ot**2+lt**2)<_.params.threshold)return;if(typeof j.isScrolling>"u"){let gt;_.isHorizontal()&&_e.currentY===_e.startY||_.isVertical()&&_e.currentX===_e.startX?j.isScrolling=!1:ot*ot+lt*lt>=25&&(gt=Math.atan2(Math.abs(lt),Math.abs(ot))*180/Math.PI,j.isScrolling=_.isHorizontal()?gt>$.touchAngle:90-gt>$.touchAngle)}if(j.isScrolling&&_.emit("touchMoveOpposite",nt),typeof j.startMoving>"u"&&(_e.currentX!==_e.startX||_e.currentY!==_e.startY)&&(j.startMoving=!0),j.isScrolling||nt.type==="touchmove"&&j.preventTouchMoveFromPointerMove){j.isTouched=!1;return}if(!j.startMoving)return;_.allowClick=!1,!$.cssMode&&nt.cancelable&&nt.preventDefault(),$.touchMoveStopPropagation&&!$.nested&&nt.stopPropagation();let at=_.isHorizontal()?ot:lt,ut=_.isHorizontal()?_e.currentX-_e.previousX:_e.currentY-_e.previousY;$.oneWayMovement&&(at=Math.abs(at)*(et?1:-1),ut=Math.abs(ut)*(et?1:-1)),_e.diff=at,at*=$.touchRatio,et&&(at=-at,ut=-ut);const dt=_.touchesDirection;_.swipeDirection=at>0?"prev":"next",_.touchesDirection=ut>0?"prev":"next";const ct=_.params.loop&&!$.cssMode,ht=_.touchesDirection==="next"&&_.allowSlideNext||_.touchesDirection==="prev"&&_.allowSlidePrev;if(!j.isMoved){if(ct&&ht&&_.loopFix({direction:_.swipeDirection}),j.startTranslate=_.getTranslate(),_.setTransition(0),_.animating){const gt=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});_.wrapperEl.dispatchEvent(gt)}j.allowMomentumBounce=!1,$.grabCursor&&(_.allowSlideNext===!0||_.allowSlidePrev===!0)&&_.setGrabCursor(!0),_.emit("sliderFirstMove",nt)}let pt;if(new Date().getTime(),j.isMoved&&j.allowThresholdMove&&dt!==_.touchesDirection&&ct&&ht&&Math.abs(at)>=1){Object.assign(_e,{startX:it,startY:st,currentX:it,currentY:st,startTranslate:j.currentTranslate}),j.loopSwapReset=!0,j.startTranslate=j.currentTranslate;return}_.emit("sliderMove",nt),j.isMoved=!0,j.currentTranslate=at+j.startTranslate;let mt=!0,ft=$.resistanceRatio;if($.touchReleaseOnEdges&&(ft=0),at>0?(ct&&ht&&!pt&&j.allowThresholdMove&&j.currentTranslate>($.centeredSlides?_.minTranslate()-_.slidesSizesGrid[_.activeIndex+1]-($.slidesPerView!=="auto"&&_.slides.length-$.slidesPerView>=2?_.slidesSizesGrid[_.activeIndex+1]+_.params.spaceBetween:0)-_.params.spaceBetween:_.minTranslate())&&_.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),j.currentTranslate>_.minTranslate()&&(mt=!1,$.resistance&&(j.currentTranslate=_.minTranslate()-1+(-_.minTranslate()+j.startTranslate+at)**ft))):at<0&&(ct&&ht&&!pt&&j.allowThresholdMove&&j.currentTranslate<($.centeredSlides?_.maxTranslate()+_.slidesSizesGrid[_.slidesSizesGrid.length-1]+_.params.spaceBetween+($.slidesPerView!=="auto"&&_.slides.length-$.slidesPerView>=2?_.slidesSizesGrid[_.slidesSizesGrid.length-1]+_.params.spaceBetween:0):_.maxTranslate())&&_.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:_.slides.length-($.slidesPerView==="auto"?_.slidesPerViewDynamic():Math.ceil(parseFloat($.slidesPerView,10)))}),j.currentTranslate<_.maxTranslate()&&(mt=!1,$.resistance&&(j.currentTranslate=_.maxTranslate()+1-(_.maxTranslate()-j.startTranslate-at)**ft))),mt&&(nt.preventedByNestedSwiper=!0),!_.allowSlideNext&&_.swipeDirection==="next"&&j.currentTranslate<j.startTranslate&&(j.currentTranslate=j.startTranslate),!_.allowSlidePrev&&_.swipeDirection==="prev"&&j.currentTranslate>j.startTranslate&&(j.currentTranslate=j.startTranslate),!_.allowSlidePrev&&!_.allowSlideNext&&(j.currentTranslate=j.startTranslate),$.threshold>0)if(Math.abs(at)>$.threshold||j.allowThresholdMove){if(!j.allowThresholdMove){j.allowThresholdMove=!0,_e.startX=_e.currentX,_e.startY=_e.currentY,j.currentTranslate=j.startTranslate,_e.diff=_.isHorizontal()?_e.currentX-_e.startX:_e.currentY-_e.startY;return}}else{j.currentTranslate=j.startTranslate;return}!$.followFinger||$.cssMode||(($.freeMode&&$.freeMode.enabled&&_.freeMode||$.watchSlidesProgress)&&(_.updateActiveIndex(),_.updateSlidesClasses()),$.freeMode&&$.freeMode.enabled&&_.freeMode&&_.freeMode.onTouchMove(),_.updateProgress(j.currentTranslate),_.setTranslate(j.currentTranslate))}function onTouchEnd(b){const g=this,_=g.touchEventsData;let j=b;j.originalEvent&&(j=j.originalEvent);let $;if(j.type==="touchend"||j.type==="touchcancel"){if($=[...j.changedTouches].filter(ft=>ft.identifier===_.touchId)[0],!$||$.identifier!==_.touchId)return}else{if(_.touchId!==null||j.pointerId!==_.pointerId)return;$=j}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(j.type)&&!(["pointercancel","contextmenu"].includes(j.type)&&(g.browser.isSafari||g.browser.isWebView)))return;_.pointerId=null,_.touchId=null;const{params:et,touches:tt,rtlTranslate:nt,slidesGrid:rt,enabled:it}=g;if(!it||!et.simulateTouch&&j.pointerType==="mouse")return;if(_.allowTouchCallbacks&&g.emit("touchEnd",j),_.allowTouchCallbacks=!1,!_.isTouched){_.isMoved&&et.grabCursor&&g.setGrabCursor(!1),_.isMoved=!1,_.startMoving=!1;return}et.grabCursor&&_.isMoved&&_.isTouched&&(g.allowSlideNext===!0||g.allowSlidePrev===!0)&&g.setGrabCursor(!1);const st=now(),ot=st-_.touchStartTime;if(g.allowClick){const ft=j.path||j.composedPath&&j.composedPath();g.updateClickedSlide(ft&&ft[0]||j.target,ft),g.emit("tap click",j),ot<300&&st-_.lastClickTime<300&&g.emit("doubleTap doubleClick",j)}if(_.lastClickTime=now(),nextTick(()=>{g.destroyed||(g.allowClick=!0)}),!_.isTouched||!_.isMoved||!g.swipeDirection||tt.diff===0&&!_.loopSwapReset||_.currentTranslate===_.startTranslate&&!_.loopSwapReset){_.isTouched=!1,_.isMoved=!1,_.startMoving=!1;return}_.isTouched=!1,_.isMoved=!1,_.startMoving=!1;let lt;if(et.followFinger?lt=nt?g.translate:-g.translate:lt=-_.currentTranslate,et.cssMode)return;if(et.freeMode&&et.freeMode.enabled){g.freeMode.onTouchEnd({currentPos:lt});return}const at=lt>=-g.maxTranslate()&&!g.params.loop;let ut=0,dt=g.slidesSizesGrid[0];for(let ft=0;ft<rt.length;ft+=ft<et.slidesPerGroupSkip?1:et.slidesPerGroup){const gt=ft<et.slidesPerGroupSkip-1?1:et.slidesPerGroup;typeof rt[ft+gt]<"u"?(at||lt>=rt[ft]&&lt<rt[ft+gt])&&(ut=ft,dt=rt[ft+gt]-rt[ft]):(at||lt>=rt[ft])&&(ut=ft,dt=rt[rt.length-1]-rt[rt.length-2])}let ct=null,ht=null;et.rewind&&(g.isBeginning?ht=et.virtual&&et.virtual.enabled&&g.virtual?g.virtual.slides.length-1:g.slides.length-1:g.isEnd&&(ct=0));const pt=(lt-rt[ut])/dt,mt=ut<et.slidesPerGroupSkip-1?1:et.slidesPerGroup;if(ot>et.longSwipesMs){if(!et.longSwipes){g.slideTo(g.activeIndex);return}g.swipeDirection==="next"&&(pt>=et.longSwipesRatio?g.slideTo(et.rewind&&g.isEnd?ct:ut+mt):g.slideTo(ut)),g.swipeDirection==="prev"&&(pt>1-et.longSwipesRatio?g.slideTo(ut+mt):ht!==null&&pt<0&&Math.abs(pt)>et.longSwipesRatio?g.slideTo(ht):g.slideTo(ut))}else{if(!et.shortSwipes){g.slideTo(g.activeIndex);return}g.navigation&&(j.target===g.navigation.nextEl||j.target===g.navigation.prevEl)?j.target===g.navigation.nextEl?g.slideTo(ut+mt):g.slideTo(ut):(g.swipeDirection==="next"&&g.slideTo(ct!==null?ct:ut+mt),g.swipeDirection==="prev"&&g.slideTo(ht!==null?ht:ut))}}function onResize(){const b=this,{params:g,el:_}=b;if(_&&_.offsetWidth===0)return;g.breakpoints&&b.setBreakpoint();const{allowSlideNext:j,allowSlidePrev:$,snapGrid:_e}=b,et=b.virtual&&b.params.virtual.enabled;b.allowSlideNext=!0,b.allowSlidePrev=!0,b.updateSize(),b.updateSlides(),b.updateSlidesClasses();const tt=et&&g.loop;(g.slidesPerView==="auto"||g.slidesPerView>1)&&b.isEnd&&!b.isBeginning&&!b.params.centeredSlides&&!tt?b.slideTo(b.slides.length-1,0,!1,!0):b.params.loop&&!et?b.slideToLoop(b.realIndex,0,!1,!0):b.slideTo(b.activeIndex,0,!1,!0),b.autoplay&&b.autoplay.running&&b.autoplay.paused&&(clearTimeout(b.autoplay.resizeTimeout),b.autoplay.resizeTimeout=setTimeout(()=>{b.autoplay&&b.autoplay.running&&b.autoplay.paused&&b.autoplay.resume()},500)),b.allowSlidePrev=$,b.allowSlideNext=j,b.params.watchOverflow&&_e!==b.snapGrid&&b.checkOverflow()}function onClick(b){const g=this;g.enabled&&(g.allowClick||(g.params.preventClicks&&b.preventDefault(),g.params.preventClicksPropagation&&g.animating&&(b.stopPropagation(),b.stopImmediatePropagation())))}function onScroll(){const b=this,{wrapperEl:g,rtlTranslate:_,enabled:j}=b;if(!j)return;b.previousTranslate=b.translate,b.isHorizontal()?b.translate=-g.scrollLeft:b.translate=-g.scrollTop,b.translate===0&&(b.translate=0),b.updateActiveIndex(),b.updateSlidesClasses();let $;const _e=b.maxTranslate()-b.minTranslate();_e===0?$=0:$=(b.translate-b.minTranslate())/_e,$!==b.progress&&b.updateProgress(_?-b.translate:b.translate),b.emit("setTranslate",b.translate,!1)}function onLoad(b){const g=this;processLazyPreloader(g,b.target),!(g.params.cssMode||g.params.slidesPerView!=="auto"&&!g.params.autoHeight)&&g.update()}function onDocumentTouchStart(){const b=this;b.documentTouchHandlerProceeded||(b.documentTouchHandlerProceeded=!0,b.params.touchReleaseOnEdges&&(b.el.style.touchAction="auto"))}const events=(b,g)=>{const _=getDocument(),{params:j,el:$,wrapperEl:_e,device:et}=b,tt=!!j.nested,nt=g==="on"?"addEventListener":"removeEventListener",rt=g;!$||typeof $=="string"||(_[nt]("touchstart",b.onDocumentTouchStart,{passive:!1,capture:tt}),$[nt]("touchstart",b.onTouchStart,{passive:!1}),$[nt]("pointerdown",b.onTouchStart,{passive:!1}),_[nt]("touchmove",b.onTouchMove,{passive:!1,capture:tt}),_[nt]("pointermove",b.onTouchMove,{passive:!1,capture:tt}),_[nt]("touchend",b.onTouchEnd,{passive:!0}),_[nt]("pointerup",b.onTouchEnd,{passive:!0}),_[nt]("pointercancel",b.onTouchEnd,{passive:!0}),_[nt]("touchcancel",b.onTouchEnd,{passive:!0}),_[nt]("pointerout",b.onTouchEnd,{passive:!0}),_[nt]("pointerleave",b.onTouchEnd,{passive:!0}),_[nt]("contextmenu",b.onTouchEnd,{passive:!0}),(j.preventClicks||j.preventClicksPropagation)&&$[nt]("click",b.onClick,!0),j.cssMode&&_e[nt]("scroll",b.onScroll),j.updateOnWindowResize?b[rt](et.ios||et.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):b[rt]("observerUpdate",onResize,!0),$[nt]("load",b.onLoad,{capture:!0}))};function attachEvents(){const b=this,{params:g}=b;b.onTouchStart=onTouchStart.bind(b),b.onTouchMove=onTouchMove.bind(b),b.onTouchEnd=onTouchEnd.bind(b),b.onDocumentTouchStart=onDocumentTouchStart.bind(b),g.cssMode&&(b.onScroll=onScroll.bind(b)),b.onClick=onClick.bind(b),b.onLoad=onLoad.bind(b),events(b,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(b,g)=>b.grid&&g.grid&&g.grid.rows>1;function setBreakpoint(){const b=this,{realIndex:g,initialized:_,params:j,el:$}=b,_e=j.breakpoints;if(!_e||_e&&Object.keys(_e).length===0)return;const et=b.getBreakpoint(_e,b.params.breakpointsBase,b.el);if(!et||b.currentBreakpoint===et)return;const nt=(et in _e?_e[et]:void 0)||b.originalParams,rt=isGridEnabled(b,j),it=isGridEnabled(b,nt),st=b.params.grabCursor,ot=nt.grabCursor,lt=j.enabled;rt&&!it?($.classList.remove(`${j.containerModifierClass}grid`,`${j.containerModifierClass}grid-column`),b.emitContainerClasses()):!rt&&it&&($.classList.add(`${j.containerModifierClass}grid`),(nt.grid.fill&&nt.grid.fill==="column"||!nt.grid.fill&&j.grid.fill==="column")&&$.classList.add(`${j.containerModifierClass}grid-column`),b.emitContainerClasses()),st&&!ot?b.unsetGrabCursor():!st&&ot&&b.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(pt=>{if(typeof nt[pt]>"u")return;const mt=j[pt]&&j[pt].enabled,ft=nt[pt]&&nt[pt].enabled;mt&&!ft&&b[pt].disable(),!mt&&ft&&b[pt].enable()});const at=nt.direction&&nt.direction!==j.direction,ut=j.loop&&(nt.slidesPerView!==j.slidesPerView||at),dt=j.loop;at&&_&&b.changeDirection(),extend$1(b.params,nt);const ct=b.params.enabled,ht=b.params.loop;Object.assign(b,{allowTouchMove:b.params.allowTouchMove,allowSlideNext:b.params.allowSlideNext,allowSlidePrev:b.params.allowSlidePrev}),lt&&!ct?b.disable():!lt&&ct&&b.enable(),b.currentBreakpoint=et,b.emit("_beforeBreakpoint",nt),_&&(ut?(b.loopDestroy(),b.loopCreate(g),b.updateSlides()):!dt&&ht?(b.loopCreate(g),b.updateSlides()):dt&&!ht&&b.loopDestroy()),b.emit("breakpoint",nt)}function getBreakpoint(b,g,_){if(g===void 0&&(g="window"),!b||g==="container"&&!_)return;let j=!1;const $=getWindow(),_e=g==="window"?$.innerHeight:_.clientHeight,et=Object.keys(b).map(tt=>{if(typeof tt=="string"&&tt.indexOf("@")===0){const nt=parseFloat(tt.substr(1));return{value:_e*nt,point:tt}}return{value:tt,point:tt}});et.sort((tt,nt)=>parseInt(tt.value,10)-parseInt(nt.value,10));for(let tt=0;tt<et.length;tt+=1){const{point:nt,value:rt}=et[tt];g==="window"?$.matchMedia(`(min-width: ${rt}px)`).matches&&(j=nt):rt<=_.clientWidth&&(j=nt)}return j||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(b,g){const _=[];return b.forEach(j=>{typeof j=="object"?Object.keys(j).forEach($=>{j[$]&&_.push(g+$)}):typeof j=="string"&&_.push(g+j)}),_}function addClasses(){const b=this,{classNames:g,params:_,rtl:j,el:$,device:_e}=b,et=prepareClasses(["initialized",_.direction,{"free-mode":b.params.freeMode&&_.freeMode.enabled},{autoheight:_.autoHeight},{rtl:j},{grid:_.grid&&_.grid.rows>1},{"grid-column":_.grid&&_.grid.rows>1&&_.grid.fill==="column"},{android:_e.android},{ios:_e.ios},{"css-mode":_.cssMode},{centered:_.cssMode&&_.centeredSlides},{"watch-progress":_.watchSlidesProgress}],_.containerModifierClass);g.push(...et),$.classList.add(...g),b.emitContainerClasses()}function removeClasses(){const b=this,{el:g,classNames:_}=b;!g||typeof g=="string"||(g.classList.remove(..._),b.emitContainerClasses())}var classes={addClasses,removeClasses};function checkOverflow(){const b=this,{isLocked:g,params:_}=b,{slidesOffsetBefore:j}=_;if(j){const $=b.slides.length-1,_e=b.slidesGrid[$]+b.slidesSizesGrid[$]+j*2;b.isLocked=b.size>_e}else b.isLocked=b.snapGrid.length===1;_.allowSlideNext===!0&&(b.allowSlideNext=!b.isLocked),_.allowSlidePrev===!0&&(b.allowSlidePrev=!b.isLocked),g&&g!==b.isLocked&&(b.isEnd=!1),g!==b.isLocked&&b.emit(b.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(b,g){return function(j){j===void 0&&(j={});const $=Object.keys(j)[0],_e=j[$];if(typeof _e!="object"||_e===null){extend$1(g,j);return}if(b[$]===!0&&(b[$]={enabled:!0}),$==="navigation"&&b[$]&&b[$].enabled&&!b[$].prevEl&&!b[$].nextEl&&(b[$].auto=!0),["pagination","scrollbar"].indexOf($)>=0&&b[$]&&b[$].enabled&&!b[$].el&&(b[$].auto=!0),!($ in b&&"enabled"in _e)){extend$1(g,j);return}typeof b[$]=="object"&&!("enabled"in b[$])&&(b[$].enabled=!0),b[$]||(b[$]={enabled:!1}),extend$1(g,j)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class gs{constructor(){let g,_;for(var j=arguments.length,$=new Array(j),_e=0;_e<j;_e++)$[_e]=arguments[_e];$.length===1&&$[0].constructor&&Object.prototype.toString.call($[0]).slice(8,-1)==="Object"?_=$[0]:[g,_]=$,_||(_={}),_=extend$1({},_),g&&!_.el&&(_.el=g);const et=getDocument();if(_.el&&typeof _.el=="string"&&et.querySelectorAll(_.el).length>1){const it=[];return et.querySelectorAll(_.el).forEach(st=>{const ot=extend$1({},_,{el:st});it.push(new gs(ot))}),it}const tt=this;tt.__swiper__=!0,tt.support=getSupport(),tt.device=getDevice({userAgent:_.userAgent}),tt.browser=getBrowser(),tt.eventsListeners={},tt.eventsAnyListeners=[],tt.modules=[...tt.__modules__],_.modules&&Array.isArray(_.modules)&&tt.modules.push(..._.modules);const nt={};tt.modules.forEach(it=>{it({params:_,swiper:tt,extendParams:moduleExtendParams(_,nt),on:tt.on.bind(tt),once:tt.once.bind(tt),off:tt.off.bind(tt),emit:tt.emit.bind(tt)})});const rt=extend$1({},defaults,nt);return tt.params=extend$1({},rt,extendedDefaults,_),tt.originalParams=extend$1({},tt.params),tt.passedParams=extend$1({},_),tt.params&&tt.params.on&&Object.keys(tt.params.on).forEach(it=>{tt.on(it,tt.params.on[it])}),tt.params&&tt.params.onAny&&tt.onAny(tt.params.onAny),Object.assign(tt,{enabled:tt.params.enabled,el:g,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return tt.params.direction==="horizontal"},isVertical(){return tt.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:tt.params.allowSlideNext,allowSlidePrev:tt.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:tt.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:tt.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),tt.emit("_swiper"),tt.params.init&&tt.init(),tt}getDirectionLabel(g){return this.isHorizontal()?g:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[g]}getSlideIndex(g){const{slidesEl:_,params:j}=this,$=elementChildren(_,`.${j.slideClass}, swiper-slide`),_e=elementIndex($[0]);return elementIndex(g)-_e}getSlideIndexByData(g){return this.getSlideIndex(this.slides.filter(_=>_.getAttribute("data-swiper-slide-index")*1===g)[0])}recalcSlides(){const g=this,{slidesEl:_,params:j}=g;g.slides=elementChildren(_,`.${j.slideClass}, swiper-slide`)}enable(){const g=this;g.enabled||(g.enabled=!0,g.params.grabCursor&&g.setGrabCursor(),g.emit("enable"))}disable(){const g=this;g.enabled&&(g.enabled=!1,g.params.grabCursor&&g.unsetGrabCursor(),g.emit("disable"))}setProgress(g,_){const j=this;g=Math.min(Math.max(g,0),1);const $=j.minTranslate(),et=(j.maxTranslate()-$)*g+$;j.translateTo(et,typeof _>"u"?0:_),j.updateActiveIndex(),j.updateSlidesClasses()}emitContainerClasses(){const g=this;if(!g.params._emitClasses||!g.el)return;const _=g.el.className.split(" ").filter(j=>j.indexOf("swiper")===0||j.indexOf(g.params.containerModifierClass)===0);g.emit("_containerClasses",_.join(" "))}getSlideClasses(g){const _=this;return _.destroyed?"":g.className.split(" ").filter(j=>j.indexOf("swiper-slide")===0||j.indexOf(_.params.slideClass)===0).join(" ")}emitSlidesClasses(){const g=this;if(!g.params._emitClasses||!g.el)return;const _=[];g.slides.forEach(j=>{const $=g.getSlideClasses(j);_.push({slideEl:j,classNames:$}),g.emit("_slideClass",j,$)}),g.emit("_slideClasses",_)}slidesPerViewDynamic(g,_){g===void 0&&(g="current"),_===void 0&&(_=!1);const j=this,{params:$,slides:_e,slidesGrid:et,slidesSizesGrid:tt,size:nt,activeIndex:rt}=j;let it=1;if(typeof $.slidesPerView=="number")return $.slidesPerView;if($.centeredSlides){let st=_e[rt]?Math.ceil(_e[rt].swiperSlideSize):0,ot;for(let lt=rt+1;lt<_e.length;lt+=1)_e[lt]&&!ot&&(st+=Math.ceil(_e[lt].swiperSlideSize),it+=1,st>nt&&(ot=!0));for(let lt=rt-1;lt>=0;lt-=1)_e[lt]&&!ot&&(st+=_e[lt].swiperSlideSize,it+=1,st>nt&&(ot=!0))}else if(g==="current")for(let st=rt+1;st<_e.length;st+=1)(_?et[st]+tt[st]-et[rt]<nt:et[st]-et[rt]<nt)&&(it+=1);else for(let st=rt-1;st>=0;st-=1)et[rt]-et[st]<nt&&(it+=1);return it}update(){const g=this;if(!g||g.destroyed)return;const{snapGrid:_,params:j}=g;j.breakpoints&&g.setBreakpoint(),[...g.el.querySelectorAll('[loading="lazy"]')].forEach(et=>{et.complete&&processLazyPreloader(g,et)}),g.updateSize(),g.updateSlides(),g.updateProgress(),g.updateSlidesClasses();function $(){const et=g.rtlTranslate?g.translate*-1:g.translate,tt=Math.min(Math.max(et,g.maxTranslate()),g.minTranslate());g.setTranslate(tt),g.updateActiveIndex(),g.updateSlidesClasses()}let _e;if(j.freeMode&&j.freeMode.enabled&&!j.cssMode)$(),j.autoHeight&&g.updateAutoHeight();else{if((j.slidesPerView==="auto"||j.slidesPerView>1)&&g.isEnd&&!j.centeredSlides){const et=g.virtual&&j.virtual.enabled?g.virtual.slides:g.slides;_e=g.slideTo(et.length-1,0,!1,!0)}else _e=g.slideTo(g.activeIndex,0,!1,!0);_e||$()}j.watchOverflow&&_!==g.snapGrid&&g.checkOverflow(),g.emit("update")}changeDirection(g,_){_===void 0&&(_=!0);const j=this,$=j.params.direction;return g||(g=$==="horizontal"?"vertical":"horizontal"),g===$||g!=="horizontal"&&g!=="vertical"||(j.el.classList.remove(`${j.params.containerModifierClass}${$}`),j.el.classList.add(`${j.params.containerModifierClass}${g}`),j.emitContainerClasses(),j.params.direction=g,j.slides.forEach(_e=>{g==="vertical"?_e.style.width="":_e.style.height=""}),j.emit("changeDirection"),_&&j.update()),j}changeLanguageDirection(g){const _=this;_.rtl&&g==="rtl"||!_.rtl&&g==="ltr"||(_.rtl=g==="rtl",_.rtlTranslate=_.params.direction==="horizontal"&&_.rtl,_.rtl?(_.el.classList.add(`${_.params.containerModifierClass}rtl`),_.el.dir="rtl"):(_.el.classList.remove(`${_.params.containerModifierClass}rtl`),_.el.dir="ltr"),_.update())}mount(g){const _=this;if(_.mounted)return!0;let j=g||_.params.el;if(typeof j=="string"&&(j=document.querySelector(j)),!j)return!1;j.swiper=_,j.parentNode&&j.parentNode.host&&j.parentNode.host.nodeName===_.params.swiperElementNodeName.toUpperCase()&&(_.isElement=!0);const $=()=>`.${(_.params.wrapperClass||"").trim().split(" ").join(".")}`;let et=j&&j.shadowRoot&&j.shadowRoot.querySelector?j.shadowRoot.querySelector($()):elementChildren(j,$())[0];return!et&&_.params.createElements&&(et=createElement("div",_.params.wrapperClass),j.append(et),elementChildren(j,`.${_.params.slideClass}`).forEach(tt=>{et.append(tt)})),Object.assign(_,{el:j,wrapperEl:et,slidesEl:_.isElement&&!j.parentNode.host.slideSlots?j.parentNode.host:et,hostEl:_.isElement?j.parentNode.host:j,mounted:!0,rtl:j.dir.toLowerCase()==="rtl"||elementStyle(j,"direction")==="rtl",rtlTranslate:_.params.direction==="horizontal"&&(j.dir.toLowerCase()==="rtl"||elementStyle(j,"direction")==="rtl"),wrongRTL:elementStyle(et,"display")==="-webkit-box"}),!0}init(g){const _=this;if(_.initialized||_.mount(g)===!1)return _;_.emit("beforeInit"),_.params.breakpoints&&_.setBreakpoint(),_.addClasses(),_.updateSize(),_.updateSlides(),_.params.watchOverflow&&_.checkOverflow(),_.params.grabCursor&&_.enabled&&_.setGrabCursor(),_.params.loop&&_.virtual&&_.params.virtual.enabled?_.slideTo(_.params.initialSlide+_.virtual.slidesBefore,0,_.params.runCallbacksOnInit,!1,!0):_.slideTo(_.params.initialSlide,0,_.params.runCallbacksOnInit,!1,!0),_.params.loop&&_.loopCreate(),_.attachEvents();const $=[..._.el.querySelectorAll('[loading="lazy"]')];return _.isElement&&$.push(..._.hostEl.querySelectorAll('[loading="lazy"]')),$.forEach(_e=>{_e.complete?processLazyPreloader(_,_e):_e.addEventListener("load",et=>{processLazyPreloader(_,et.target)})}),preload(_),_.initialized=!0,preload(_),_.emit("init"),_.emit("afterInit"),_}destroy(g,_){g===void 0&&(g=!0),_===void 0&&(_=!0);const j=this,{params:$,el:_e,wrapperEl:et,slides:tt}=j;return typeof j.params>"u"||j.destroyed||(j.emit("beforeDestroy"),j.initialized=!1,j.detachEvents(),$.loop&&j.loopDestroy(),_&&(j.removeClasses(),_e&&typeof _e!="string"&&_e.removeAttribute("style"),et&&et.removeAttribute("style"),tt&&tt.length&&tt.forEach(nt=>{nt.classList.remove($.slideVisibleClass,$.slideFullyVisibleClass,$.slideActiveClass,$.slideNextClass,$.slidePrevClass),nt.removeAttribute("style"),nt.removeAttribute("data-swiper-slide-index")})),j.emit("destroy"),Object.keys(j.eventsListeners).forEach(nt=>{j.off(nt)}),g!==!1&&(j.el&&typeof j.el!="string"&&(j.el.swiper=null),deleteProps(j)),j.destroyed=!0),null}static extendDefaults(g){extend$1(extendedDefaults,g)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(g){gs.prototype.__modules__||(gs.prototype.__modules__=[]);const _=gs.prototype.__modules__;typeof g=="function"&&_.indexOf(g)<0&&_.push(g)}static use(g){return Array.isArray(g)?(g.forEach(_=>gs.installModule(_)),gs):(gs.installModule(g),gs)}};Object.keys(prototypes).forEach(b=>{Object.keys(prototypes[b]).forEach(g=>{Swiper$1.prototype[g]=prototypes[b][g]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject(b){return typeof b=="object"&&b!==null&&b.constructor&&Object.prototype.toString.call(b).slice(8,-1)==="Object"&&!b.__swiper__}function extend(b,g){const _=["__proto__","constructor","prototype"];Object.keys(g).filter(j=>_.indexOf(j)<0).forEach(j=>{typeof b[j]>"u"?b[j]=g[j]:isObject(g[j])&&isObject(b[j])&&Object.keys(g[j]).length>0?g[j].__swiper__?b[j]=g[j]:extend(b[j],g[j]):b[j]=g[j]})}function needsNavigation(b){return b===void 0&&(b={}),b.navigation&&typeof b.navigation.nextEl>"u"&&typeof b.navigation.prevEl>"u"}function needsPagination(b){return b===void 0&&(b={}),b.pagination&&typeof b.pagination.el>"u"}function needsScrollbar(b){return b===void 0&&(b={}),b.scrollbar&&typeof b.scrollbar.el>"u"}function uniqueClasses(b){b===void 0&&(b="");const g=b.split(" ").map(j=>j.trim()).filter(j=>!!j),_=[];return g.forEach(j=>{_.indexOf(j)<0&&_.push(j)}),_.join(" ")}function wrapperClass(b){return b===void 0&&(b=""),b?b.includes("swiper-wrapper")?b:`swiper-wrapper ${b}`:"swiper-wrapper"}function updateSwiper(b){let{swiper:g,slides:_,passedParams:j,changedParams:$,nextEl:_e,prevEl:et,scrollbarEl:tt,paginationEl:nt}=b;const rt=$.filter(St=>St!=="children"&&St!=="direction"&&St!=="wrapperClass"),{params:it,pagination:st,navigation:ot,scrollbar:lt,virtual:at,thumbs:ut}=g;let dt,ct,ht,pt,mt,ft,gt,xt;$.includes("thumbs")&&j.thumbs&&j.thumbs.swiper&&!j.thumbs.swiper.destroyed&&it.thumbs&&(!it.thumbs.swiper||it.thumbs.swiper.destroyed)&&(dt=!0),$.includes("controller")&&j.controller&&j.controller.control&&it.controller&&!it.controller.control&&(ct=!0),$.includes("pagination")&&j.pagination&&(j.pagination.el||nt)&&(it.pagination||it.pagination===!1)&&st&&!st.el&&(ht=!0),$.includes("scrollbar")&&j.scrollbar&&(j.scrollbar.el||tt)&&(it.scrollbar||it.scrollbar===!1)&&lt&&!lt.el&&(pt=!0),$.includes("navigation")&&j.navigation&&(j.navigation.prevEl||et)&&(j.navigation.nextEl||_e)&&(it.navigation||it.navigation===!1)&&ot&&!ot.prevEl&&!ot.nextEl&&(mt=!0);const vt=St=>{g[St]&&(g[St].destroy(),St==="navigation"?(g.isElement&&(g[St].prevEl.remove(),g[St].nextEl.remove()),it[St].prevEl=void 0,it[St].nextEl=void 0,g[St].prevEl=void 0,g[St].nextEl=void 0):(g.isElement&&g[St].el.remove(),it[St].el=void 0,g[St].el=void 0))};$.includes("loop")&&g.isElement&&(it.loop&&!j.loop?ft=!0:!it.loop&&j.loop?gt=!0:xt=!0),rt.forEach(St=>{if(isObject(it[St])&&isObject(j[St]))Object.assign(it[St],j[St]),(St==="navigation"||St==="pagination"||St==="scrollbar")&&"enabled"in j[St]&&!j[St].enabled&&vt(St);else{const Tt=j[St];(Tt===!0||Tt===!1)&&(St==="navigation"||St==="pagination"||St==="scrollbar")?Tt===!1&&vt(St):it[St]=j[St]}}),rt.includes("controller")&&!ct&&g.controller&&g.controller.control&&it.controller&&it.controller.control&&(g.controller.control=it.controller.control),$.includes("children")&&_&&at&&it.virtual.enabled?(at.slides=_,at.update(!0)):$.includes("virtual")&&at&&it.virtual.enabled&&(_&&(at.slides=_),at.update(!0)),$.includes("children")&&_&&it.loop&&(xt=!0),dt&&ut.init()&&ut.update(!0),ct&&(g.controller.control=it.controller.control),ht&&(g.isElement&&(!nt||typeof nt=="string")&&(nt=document.createElement("div"),nt.classList.add("swiper-pagination"),nt.part.add("pagination"),g.el.appendChild(nt)),nt&&(it.pagination.el=nt),st.init(),st.render(),st.update()),pt&&(g.isElement&&(!tt||typeof tt=="string")&&(tt=document.createElement("div"),tt.classList.add("swiper-scrollbar"),tt.part.add("scrollbar"),g.el.appendChild(tt)),tt&&(it.scrollbar.el=tt),lt.init(),lt.updateSize(),lt.setTranslate()),mt&&(g.isElement&&((!_e||typeof _e=="string")&&(_e=document.createElement("div"),_e.classList.add("swiper-button-next"),_e.innerHTML=g.hostEl.constructor.nextButtonSvg,_e.part.add("button-next"),g.el.appendChild(_e)),(!et||typeof et=="string")&&(et=document.createElement("div"),et.classList.add("swiper-button-prev"),et.innerHTML=g.hostEl.constructor.prevButtonSvg,et.part.add("button-prev"),g.el.appendChild(et))),_e&&(it.navigation.nextEl=_e),et&&(it.navigation.prevEl=et),ot.init(),ot.update()),$.includes("allowSlideNext")&&(g.allowSlideNext=j.allowSlideNext),$.includes("allowSlidePrev")&&(g.allowSlidePrev=j.allowSlidePrev),$.includes("direction")&&g.changeDirection(j.direction,!1),(ft||xt)&&g.loopDestroy(),(gt||xt)&&g.loopCreate(),g.update()}function getParams(b,g){b===void 0&&(b={}),g===void 0&&(g=!0);const _={on:{}},j={},$={};extend(_,defaults),_._emitClasses=!0,_.init=!1;const _e={},et=paramsList.map(nt=>nt.replace(/_/,"")),tt=Object.assign({},b);return Object.keys(tt).forEach(nt=>{typeof b[nt]>"u"||(et.indexOf(nt)>=0?isObject(b[nt])?(_[nt]={},$[nt]={},extend(_[nt],b[nt]),extend($[nt],b[nt])):(_[nt]=b[nt],$[nt]=b[nt]):nt.search(/on[A-Z]/)===0&&typeof b[nt]=="function"?g?j[`${nt[2].toLowerCase()}${nt.substr(3)}`]=b[nt]:_.on[`${nt[2].toLowerCase()}${nt.substr(3)}`]=b[nt]:_e[nt]=b[nt])}),["navigation","pagination","scrollbar"].forEach(nt=>{_[nt]===!0&&(_[nt]={}),_[nt]===!1&&delete _[nt]}),{params:_,passedParams:$,rest:_e,events:j}}function mountSwiper(b,g){let{el:_,nextEl:j,prevEl:$,paginationEl:_e,scrollbarEl:et,swiper:tt}=b;needsNavigation(g)&&j&&$&&(tt.params.navigation.nextEl=j,tt.originalParams.navigation.nextEl=j,tt.params.navigation.prevEl=$,tt.originalParams.navigation.prevEl=$),needsPagination(g)&&_e&&(tt.params.pagination.el=_e,tt.originalParams.pagination.el=_e),needsScrollbar(g)&&et&&(tt.params.scrollbar.el=et,tt.originalParams.scrollbar.el=et),tt.init(_)}function getChangedParams(b,g,_,j,$){const _e=[];if(!g)return _e;const et=nt=>{_e.indexOf(nt)<0&&_e.push(nt)};if(_&&j){const nt=j.map($),rt=_.map($);nt.join("")!==rt.join("")&&et("children"),j.length!==_.length&&et("children")}return paramsList.filter(nt=>nt[0]==="_").map(nt=>nt.replace(/_/,"")).forEach(nt=>{if(nt in b&&nt in g)if(isObject(b[nt])&&isObject(g[nt])){const rt=Object.keys(b[nt]),it=Object.keys(g[nt]);rt.length!==it.length?et(nt):(rt.forEach(st=>{b[nt][st]!==g[nt][st]&&et(nt)}),it.forEach(st=>{b[nt][st]!==g[nt][st]&&et(nt)}))}else b[nt]!==g[nt]&&et(nt)}),_e}const updateOnVirtualData=b=>{!b||b.destroyed||!b.params.virtual||b.params.virtual&&!b.params.virtual.enabled||(b.updateSlides(),b.updateProgress(),b.updateSlidesClasses(),b.parallax&&b.params.parallax&&b.params.parallax.enabled&&b.parallax.setTranslate())};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var _=arguments[g];for(var j in _)Object.prototype.hasOwnProperty.call(_,j)&&(b[j]=_[j])}return b},_extends$1.apply(this,arguments)}function isChildSwiperSlide(b){return b.type&&b.type.displayName&&b.type.displayName.includes("SwiperSlide")}function processChildren(b){const g=[];return React.Children.toArray(b).forEach(_=>{isChildSwiperSlide(_)?g.push(_):_.props&&_.props.children&&processChildren(_.props.children).forEach(j=>g.push(j))}),g}function getChildren(b){const g=[],_={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(b).forEach(j=>{if(isChildSwiperSlide(j))g.push(j);else if(j.props&&j.props.slot&&_[j.props.slot])_[j.props.slot].push(j);else if(j.props&&j.props.children){const $=processChildren(j.props.children);$.length>0?$.forEach(_e=>g.push(_e)):_["container-end"].push(j)}else _["container-end"].push(j)}),{slides:g,slots:_}}function renderVirtual(b,g,_){if(!_)return null;const j=it=>{let st=it;return it<0?st=g.length+it:st>=g.length&&(st=st-g.length),st},$=b.isHorizontal()?{[b.rtlTranslate?"right":"left"]:`${_.offset}px`}:{top:`${_.offset}px`},{from:_e,to:et}=_,tt=b.params.loop?-g.length:0,nt=b.params.loop?g.length*2:g.length,rt=[];for(let it=tt;it<nt;it+=1)it>=_e&&it<=et&&rt.push(g[j(it)]);return rt.map((it,st)=>React.cloneElement(it,{swiper:b,style:$,key:it.props.virtualIndex||it.key||`slide-${st}`}))}function useIsomorphicLayoutEffect(b,g){return typeof window>"u"?reactExports.useEffect(b,g):reactExports.useLayoutEffect(b,g)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(b,g){let{className:_,tag:j="div",wrapperTag:$="div",children:_e,onSwiper:et,...tt}=b===void 0?{}:b,nt=!1;const[rt,it]=reactExports.useState("swiper"),[st,ot]=reactExports.useState(null),[lt,at]=reactExports.useState(!1),ut=reactExports.useRef(!1),dt=reactExports.useRef(null),ct=reactExports.useRef(null),ht=reactExports.useRef(null),pt=reactExports.useRef(null),mt=reactExports.useRef(null),ft=reactExports.useRef(null),gt=reactExports.useRef(null),xt=reactExports.useRef(null),{params:vt,passedParams:St,rest:Tt,events:bt}=getParams(tt),{slides:At,slots:Pt}=getChildren(_e),en=()=>{at(!lt)};Object.assign(vt.on,{_containerClasses(Rt,jt){it(jt)}});const Wt=()=>{Object.assign(vt.on,bt),nt=!0;const Rt={...vt};if(delete Rt.wrapperClass,ct.current=new Swiper$1(Rt),ct.current.virtual&&ct.current.params.virtual.enabled){ct.current.virtual.slides=At;const jt={cache:!1,slides:At,renderExternal:ot,renderExternalUpdate:!1};extend(ct.current.params.virtual,jt),extend(ct.current.originalParams.virtual,jt)}};dt.current||Wt(),ct.current&&ct.current.on("_beforeBreakpoint",en);const Jt=()=>{nt||!bt||!ct.current||Object.keys(bt).forEach(Rt=>{ct.current.on(Rt,bt[Rt])})},zt=()=>{!bt||!ct.current||Object.keys(bt).forEach(Rt=>{ct.current.off(Rt,bt[Rt])})};reactExports.useEffect(()=>()=>{ct.current&&ct.current.off("_beforeBreakpoint",en)}),reactExports.useEffect(()=>{!ut.current&&ct.current&&(ct.current.emitSlidesClasses(),ut.current=!0)}),useIsomorphicLayoutEffect(()=>{if(g&&(g.current=dt.current),!!dt.current)return ct.current.destroyed&&Wt(),mountSwiper({el:dt.current,nextEl:mt.current,prevEl:ft.current,paginationEl:gt.current,scrollbarEl:xt.current,swiper:ct.current},vt),et&&!ct.current.destroyed&&et(ct.current),()=>{ct.current&&!ct.current.destroyed&&ct.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect(()=>{Jt();const Rt=getChangedParams(St,ht.current,At,pt.current,jt=>jt.key);return ht.current=St,pt.current=At,Rt.length&&ct.current&&!ct.current.destroyed&&updateSwiper({swiper:ct.current,slides:At,passedParams:St,changedParams:Rt,nextEl:mt.current,prevEl:ft.current,scrollbarEl:xt.current,paginationEl:gt.current}),()=>{zt()}}),useIsomorphicLayoutEffect(()=>{updateOnVirtualData(ct.current)},[st]);function Ht(){return vt.virtual?renderVirtual(ct.current,At,st):At.map((Rt,jt)=>React.cloneElement(Rt,{swiper:ct.current,swiperSlideIndex:jt}))}return React.createElement(j,_extends$1({ref:dt,className:uniqueClasses(`${rt}${_?` ${_}`:""}`)},Tt),React.createElement(SwiperContext.Provider,{value:ct.current},Pt["container-start"],React.createElement($,{className:wrapperClass(vt.wrapperClass)},Pt["wrapper-start"],Ht(),Pt["wrapper-end"]),needsNavigation(vt)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:ft,className:"swiper-button-prev"}),React.createElement("div",{ref:mt,className:"swiper-button-next"})),needsScrollbar(vt)&&React.createElement("div",{ref:xt,className:"swiper-scrollbar"}),needsPagination(vt)&&React.createElement("div",{ref:gt,className:"swiper-pagination"}),Pt["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(b,g){let{tag:_="div",children:j,className:$="",swiper:_e,zoom:et,lazy:tt,virtualIndex:nt,swiperSlideIndex:rt,...it}=b===void 0?{}:b;const st=reactExports.useRef(null),[ot,lt]=reactExports.useState("swiper-slide"),[at,ut]=reactExports.useState(!1);function dt(mt,ft,gt){ft===st.current&&lt(gt)}useIsomorphicLayoutEffect(()=>{if(typeof rt<"u"&&(st.current.swiperSlideIndex=rt),g&&(g.current=st.current),!(!st.current||!_e)){if(_e.destroyed){ot!=="swiper-slide"&&lt("swiper-slide");return}return _e.on("_slideClass",dt),()=>{_e&&_e.off("_slideClass",dt)}}}),useIsomorphicLayoutEffect(()=>{_e&&st.current&&!_e.destroyed&&lt(_e.getSlideClasses(st.current))},[_e]);const ct={isActive:ot.indexOf("swiper-slide-active")>=0,isVisible:ot.indexOf("swiper-slide-visible")>=0,isPrev:ot.indexOf("swiper-slide-prev")>=0,isNext:ot.indexOf("swiper-slide-next")>=0},ht=()=>typeof j=="function"?j(ct):j,pt=()=>{ut(!0)};return React.createElement(_,_extends$1({ref:st,className:uniqueClasses(`${ot}${$?` ${$}`:""}`),"data-swiper-slide-index":nt,onLoad:pt},it),et&&React.createElement(SwiperSlideContext.Provider,{value:ct},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof et=="number"?et:void 0},ht(),tt&&!at&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!et&&React.createElement(SwiperSlideContext.Provider,{value:ct},ht(),tt&&!at&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(b,g){if(b==null)return{};var _=_objectWithoutPropertiesLoose(b,g),j,$;if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(b);for($=0;$<_e.length;$++)j=_e[$],!(g.indexOf(j)>=0)&&Object.prototype.propertyIsEnumerable.call(b,j)&&(_[j]=b[j])}return _}function _objectWithoutPropertiesLoose(b,g){if(b==null)return{};var _={};for(var j in b)if(Object.prototype.hasOwnProperty.call(b,j)){if(g.indexOf(j)>=0)continue;_[j]=b[j]}return _}function _extends(){return _extends=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var _=arguments[g];for(var j in _)Object.prototype.hasOwnProperty.call(_,j)&&(b[j]=_[j])}return b},_extends.apply(this,arguments)}function ownKeys(b,g){var _=Object.keys(b);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(b);g&&(j=j.filter(function($){return Object.getOwnPropertyDescriptor(b,$).enumerable})),_.push.apply(_,j)}return _}function _objectSpread(b){for(var g=1;g<arguments.length;g++){var _=arguments[g]!=null?arguments[g]:{};g%2?ownKeys(Object(_),!0).forEach(function(j){_defineProperty(b,j,_[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(j){Object.defineProperty(b,j,Object.getOwnPropertyDescriptor(_,j))})}return b}function _defineProperty(b,g,_){return g=_toPropertyKey(g),g in b?Object.defineProperty(b,g,{value:_,enumerable:!0,configurable:!0,writable:!0}):b[g]=_,b}function _toPropertyKey(b){var g=_toPrimitive(b,"string");return typeof g=="symbol"?g:g+""}function _toPrimitive(b,g){if(typeof b!="object"||!b)return b;var _=b[Symbol.toPrimitive];if(_!==void 0){var j=_.call(b,g||"default");if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(b)}function Tree2Element(b){return b&&b.map((g,_)=>React.createElement(g.tag,_objectSpread({key:_},g.attr),Tree2Element(g.child)))}function GenIcon(b){return g=>React.createElement(IconBase,_extends({attr:_objectSpread({},b.attr)},g),Tree2Element(b.child))}function IconBase(b){var g=_=>{var{attr:j,size:$,title:_e}=b,et=_objectWithoutProperties(b,_excluded),tt=$||_.size||"1em",nt;return _.className&&(nt=_.className),b.className&&(nt=(nt?nt+" ":"")+b.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},_.attr,j,et,{className:nt,style:_objectSpread(_objectSpread({color:b.color||_.color},_.style),b.style),height:tt,width:tt,xmlns:"http://www.w3.org/2000/svg"}),_e&&React.createElement("title",null,_e),b.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,_=>g(_)):g(DefaultContext)}function SlClose(b){return GenIcon({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512 282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0zm0 961.008c-247.024 0-448-201.984-448-449.01 0-247.024 200.976-448 448-448s448 200.977 448 448-200.976 449.01-448 449.01zm181.008-630.016c-12.496-12.496-32.752-12.496-45.248 0L512 466.752l-135.76-135.76c-12.496-12.496-32.752-12.496-45.264 0-12.496 12.496-12.496 32.752 0 45.248L466.736 512l-135.76 135.76c-12.496 12.48-12.496 32.769 0 45.249 12.496 12.496 32.752 12.496 45.264 0L512 557.249l135.76 135.76c12.496 12.496 32.752 12.496 45.248 0 12.496-12.48 12.496-32.769 0-45.249L557.248 512l135.76-135.76c12.512-12.512 12.512-32.768 0-45.248z"},child:[]}]})(b)}function ImageModal({isOpen:b,onClose:g,imageUrl:_,altText:j}){const[$,_e]=reactExports.useState(!1);return reactExports.useEffect(()=>{const et=tt=>{tt.key==="Escape"&&g()};return b&&document.addEventListener("keydown",et),()=>{document.removeEventListener("keydown",et)}},[b,g]),jsxRuntimeExports.jsx(AnimatePresence,{children:b&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",onClick:g,children:jsxRuntimeExports.jsxs(motion.div,{initial:{y:0},animate:{y:0},exit:{y:0},drag:"y",dragConstraints:{top:0,bottom:100},onDragEnd:(et,tt)=>{tt.offset.y>100&&g()},className:"relative w-auto h-full",onClick:et=>et.stopPropagation(),onMouseEnter:()=>_e(!0),onMouseLeave:()=>_e(!1),children:[jsxRuntimeExports.jsx("button",{onClick:g,className:`absolute top-0 left-5 p-2 text-white hover:text-gray-300 transition-colors ${$?"opacity-100":"opacity-0"}`,"aria-label":"Close modal",children:jsxRuntimeExports.jsx(SlClose,{size:24})}),jsxRuntimeExports.jsx("img",{src:_,alt:j,className:"h-full w-auto object-contain"})]})})})}const fallback="/assets/fallbackLinkImage-B3cIdgB3.svg";function RenderLinkPreview({getDisplayUrl:b,token:g,setFaviconError:_,faviconError:j,openImageModal:$,ContentWrapper:_e}){var tt,nt,rt,it,st,ot;const{hostname:et}=b(((tt=g.content)==null?void 0:tt.url)||"");return jsxRuntimeExports.jsx(_e,{children:jsxRuntimeExports.jsxs("div",{className:"flex max-w-xs w-full p-3 flex-col gap-3 rounded-[14px] bg-white border border-solid border-[#1919191a]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center self-stretch gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center self-stretch gap-3 flex-nowrap",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded border border-solid border-[#1919191a] flex items-center justify-center",children:j?jsxRuntimeExports.jsx("img",{src:fallback,alt:"Site favicon",className:"w-full h-full object-contain"}):jsxRuntimeExports.jsx("img",{src:((nt=g.metaData)==null?void 0:nt.faviconUrl)||fallback,alt:"Site favicon",className:"w-full h-full object-contain",onError:()=>_(!0)})}),jsxRuntimeExports.jsx("div",{className:"inline-block items-center gap-1.5 text-xs font-medium text-primary whitespace-nowrap max-w-[137px] truncate overflow-hidden",children:et})]}),jsxRuntimeExports.jsx("a",{href:(rt=g.content)==null?void 0:rt.url,target:"_blank",rel:"noopener noreferrer",className:"bg-transparent border border-solid border-[#1919191A] text-xs text-[#191919] px-2 py-1 rounded-full",children:et.includes("twitter.com")?"Visit Tweet":"Visit Link"})]}),jsxRuntimeExports.jsx("h2",{className:"text-[#7e7e7e] text-sm line-clamp-1",children:(it=g.metaData)==null?void 0:it.title}),jsxRuntimeExports.jsx("p",{className:"inline-block self-stretch text-[#7e7e7e] text-sm",children:(st=g.metaData)==null?void 0:st.dataText}),((ot=g.metaData)==null?void 0:ot.mediaUrl)&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"max-w-xs max-h-[175px] rounded-lg cursor-pointer relative group",onClick:()=>{var lt;return $((lt=g.metaData)==null?void 0:lt.mediaUrl,`${et} Preview`)},children:[jsxRuntimeExports.jsx("img",{src:g.metaData.mediaUrl,alt:`${et} Preview`,className:"h-[175px] w-full rounded-lg object-cover border border-solid border-[#1919191a] transition-opacity group-hover:opacity-90"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-lg"})]})})]})})}const PauseIcon="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_b_80_419)'%3e%3ccircle%20cx='16'%20cy='16'%20r='16'%20fill='%23191919'%20fill-opacity='0.7'/%3e%3c/g%3e%3cpath%20d='M12.3672%2021.7983C11.6714%2021.7983%2011.3126%2021.4395%2011.3199%2020.751V10.6802C11.3199%209.9917%2011.6788%209.63281%2012.3672%209.63281H14.0811C14.7769%209.64014%2015.1285%209.96973%2015.1285%2010.6802V20.751C15.1285%2021.4395%2014.7769%2021.7983%2014.0811%2021.7983H12.3672ZM17.9117%2021.7983C17.2159%2021.7983%2016.8643%2021.4395%2016.8643%2020.751V10.6802C16.8643%209.9917%2017.2159%209.63281%2017.9117%209.63281H19.6255C20.314%209.63281%2020.6729%209.96973%2020.6729%2010.6802V20.751C20.6729%2021.4395%2020.314%2021.7983%2019.6255%2021.7983H17.9117Z'%20fill='white'/%3e%3cdefs%3e%3cfilter%20id='filter0_b_80_419'%20x='-44'%20y='-44'%20width='120'%20height='120'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeGaussianBlur%20in='BackgroundImageFix'%20stdDeviation='22'/%3e%3cfeComposite%20in2='SourceAlpha'%20operator='in'%20result='effect1_backgroundBlur_80_419'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_backgroundBlur_80_419'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",PlayIcon="data:image/svg+xml,%3csvg%20width='45'%20height='45'%20viewBox='0%200%2045%2045'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_b_80_570)'%3e%3crect%20x='0.5'%20y='44.5'%20width='44'%20height='44'%20rx='22'%20transform='rotate(-90%200.5%2044.5)'%20fill='%23191919'%20fill-opacity='0.7'/%3e%3crect%20x='1'%20y='44'%20width='43'%20height='43'%20rx='21.5'%20transform='rotate(-90%201%2044)'%20stroke='white'%20stroke-opacity='0.1'/%3e%3cpath%20d='M18.167%2029.5459C17.5527%2029.5459%2017.1709%2029.0728%2017.1709%2028.3506V16.6797C17.1709%2015.9575%2017.5527%2015.4927%2018.167%2015.4927C18.499%2015.4927%2018.7812%2015.6172%2019.1133%2015.8081L28.792%2021.4111C29.481%2021.8096%2029.7217%2022.0752%2029.7217%2022.5151C29.7217%2022.9551%2029.481%2023.2207%2028.792%2023.6274L19.1133%2029.2222C18.7812%2029.4131%2018.499%2029.5459%2018.167%2029.5459Z'%20fill='white'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_b_80_570'%20x='-43.5'%20y='-43.5'%20width='132'%20height='132'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeGaussianBlur%20in='BackgroundImageFix'%20stdDeviation='22'/%3e%3cfeComposite%20in2='SourceAlpha'%20operator='in'%20result='effect1_backgroundBlur_80_570'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_backgroundBlur_80_570'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",Subtract="data:image/svg+xml,%3csvg%20width='130'%20height='28'%20viewBox='0%200%20130%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M129.927%2028C122.211%2027.9805%20115.963%2021.72%20115.963%2014C115.963%206.26805%20109.695%202.87489e-05%20101.963%202.80729e-05L27.9628%202.16036e-05C20.2309%202.09277e-05%2013.9628%206.26804%2013.9628%2014C13.9628%2021.7199%207.71438%2027.9805%20-0.000961304%2028L129.927%2028Z'%20fill='%23F3F3F3'/%3e%3c/svg%3e";function t$1(b,g,_,j){return new(_||(_=Promise))(function($,_e){function et(rt){try{nt(j.next(rt))}catch(it){_e(it)}}function tt(rt){try{nt(j.throw(rt))}catch(it){_e(it)}}function nt(rt){var it;rt.done?$(rt.value):(it=rt.value,it instanceof _?it:new _(function(st){st(it)})).then(et,tt)}nt((j=j.apply(b,g||[])).next())})}let e$1=class{constructor(){this.listeners={}}on(g,_,j){if(this.listeners[g]||(this.listeners[g]=new Set),this.listeners[g].add(_),j==null?void 0:j.once){const $=()=>{this.un(g,$),this.un(g,_)};return this.on(g,$),$}return()=>this.un(g,_)}un(g,_){var j;(j=this.listeners[g])===null||j===void 0||j.delete(_)}once(g,_){return this.on(g,_,{once:!0})}unAll(){this.listeners={}}emit(g,..._){this.listeners[g]&&this.listeners[g].forEach(j=>j(..._))}};const i$2={decode:function(b,g){return t$1(this,void 0,void 0,function*(){const _=new AudioContext({sampleRate:g});return _.decodeAudioData(b).finally(()=>_.close())})},createBuffer:function(b,g){return typeof b[0]=="number"&&(b=[b]),function(_){const j=_[0];if(j.some($=>$>1||$<-1)){const $=j.length;let _e=0;for(let et=0;et<$;et++){const tt=Math.abs(j[et]);tt>_e&&(_e=tt)}for(const et of _)for(let tt=0;tt<$;tt++)et[tt]/=_e}}(b),{duration:g,length:b[0].length,sampleRate:b[0].length/g,numberOfChannels:b.length,getChannelData:_=>b==null?void 0:b[_],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function s$1(b,g){const _=g.xmlns?document.createElementNS(g.xmlns,b):document.createElement(b);for(const[j,$]of Object.entries(g))if(j==="children")for(const[_e,et]of Object.entries(g))typeof et=="string"?_.appendChild(document.createTextNode(et)):_.appendChild(s$1(_e,et));else j==="style"?Object.assign(_.style,$):j==="textContent"?_.textContent=$:_.setAttribute(j,$.toString());return _}function n$1(b,g,_){const j=s$1(b,g||{});return _==null||_.appendChild(j),j}var r$1=Object.freeze({__proto__:null,createElement:n$1,default:n$1});const o={fetchBlob:function(b,g,_){return t$1(this,void 0,void 0,function*(){const j=yield fetch(b,_);if(j.status>=400)throw new Error(`Failed to fetch ${b}: ${j.status} (${j.statusText})`);return function($,_e){t$1(this,void 0,void 0,function*(){if(!$.body||!$.headers)return;const et=$.body.getReader(),tt=Number($.headers.get("Content-Length"))||0;let nt=0;const rt=st=>t$1(this,void 0,void 0,function*(){nt+=(st==null?void 0:st.length)||0;const ot=Math.round(nt/tt*100);_e(ot)}),it=()=>t$1(this,void 0,void 0,function*(){let st;try{st=yield et.read()}catch{return}st.done||(rt(st.value),yield it())});it()})}(j.clone(),g),j.blob()})}};let a$1=class extends e$1{constructor(g){super(),this.isExternalMedia=!1,g.media?(this.media=g.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),g.mediaControls&&(this.media.controls=!0),g.autoplay&&(this.media.autoplay=!0),g.playbackRate!=null&&this.onMediaEvent("canplay",()=>{g.playbackRate!=null&&(this.media.playbackRate=g.playbackRate)},{once:!0})}onMediaEvent(g,_,j){return this.media.addEventListener(g,_,j),()=>this.media.removeEventListener(g,_,j)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const g=this.getSrc();g.startsWith("blob:")&&URL.revokeObjectURL(g)}canPlayType(g){return this.media.canPlayType(g)!==""}setSrc(g,_){const j=this.getSrc();if(g&&j===g)return;this.revokeSrc();const $=_ instanceof Blob&&(this.canPlayType(_.type)||!g)?URL.createObjectURL(_):g;try{this.media.src=$}catch{this.media.src=g}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(g){this.media=g}play(){return t$1(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(g){this.media.currentTime=g}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(g){this.media.volume=g}getMuted(){return this.media.muted}setMuted(g){this.media.muted=g}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(g,_){_!=null&&(this.media.preservesPitch=_),this.media.playbackRate=g}getMediaElement(){return this.media}setSinkId(g){return this.media.setSinkId(g)}};class h extends e$1{constructor(g,_){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=g;const j=this.parentFromOptionsContainer(g.container);this.parent=j;const[$,_e]=this.initHtml();j.appendChild($),this.container=$,this.scrollContainer=_e.querySelector(".scroll"),this.wrapper=_e.querySelector(".wrapper"),this.canvasWrapper=_e.querySelector(".canvases"),this.progressWrapper=_e.querySelector(".progress"),this.cursor=_e.querySelector(".cursor"),_&&_e.appendChild(_),this.initEvents()}parentFromOptionsContainer(g){let _;if(typeof g=="string"?_=document.querySelector(g):g instanceof HTMLElement&&(_=g),!_)throw new Error("Container not found");return _}initEvents(){const g=_=>{const j=this.wrapper.getBoundingClientRect(),$=_.clientX-j.left,_e=_.clientY-j.top;return[$/j.width,_e/j.height]};if(this.wrapper.addEventListener("click",_=>{const[j,$]=g(_);this.emit("click",j,$)}),this.wrapper.addEventListener("dblclick",_=>{const[j,$]=g(_);this.emit("dblclick",j,$)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:_,scrollWidth:j,clientWidth:$}=this.scrollContainer,_e=_/j,et=(_+$)/j;this.emit("scroll",_e,et,_,_+$)}),typeof ResizeObserver=="function"){const _=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{_().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const g=this.parent.clientWidth;g===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=g,this.reRender())}initDrag(){this.subscriptions.push(function(g,_,j,$,_e=3,et=0,tt=100){if(!g)return()=>{};const nt=matchMedia("(pointer: coarse)").matches;let rt=()=>{};const it=st=>{if(st.button!==et)return;st.preventDefault(),st.stopPropagation();let ot=st.clientX,lt=st.clientY,at=!1;const ut=Date.now(),dt=ft=>{if(ft.preventDefault(),ft.stopPropagation(),nt&&Date.now()-ut<tt)return;const gt=ft.clientX,xt=ft.clientY,vt=gt-ot,St=xt-lt;if(at||Math.abs(vt)>_e||Math.abs(St)>_e){const Tt=g.getBoundingClientRect(),{left:bt,top:At}=Tt;at||(j==null||j(ot-bt,lt-At),at=!0),_(vt,St,gt-bt,xt-At),ot=gt,lt=xt}},ct=ft=>{if(at){const gt=ft.clientX,xt=ft.clientY,vt=g.getBoundingClientRect(),{left:St,top:Tt}=vt;$==null||$(gt-St,xt-Tt)}rt()},ht=ft=>{ft.relatedTarget&&ft.relatedTarget!==document.documentElement||ct(ft)},pt=ft=>{at&&(ft.stopPropagation(),ft.preventDefault())},mt=ft=>{at&&ft.preventDefault()};document.addEventListener("pointermove",dt),document.addEventListener("pointerup",ct),document.addEventListener("pointerout",ht),document.addEventListener("pointercancel",ht),document.addEventListener("touchmove",mt,{passive:!1}),document.addEventListener("click",pt,{capture:!0}),rt=()=>{document.removeEventListener("pointermove",dt),document.removeEventListener("pointerup",ct),document.removeEventListener("pointerout",ht),document.removeEventListener("pointercancel",ht),document.removeEventListener("touchmove",mt),setTimeout(()=>{document.removeEventListener("click",pt,{capture:!0})},10)}};return g.addEventListener("pointerdown",it),()=>{rt(),g.removeEventListener("pointerdown",it)}}(this.wrapper,(g,_,j)=>{this.emit("drag",Math.max(0,Math.min(1,j/this.wrapper.getBoundingClientRect().width)))},g=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,g/this.wrapper.getBoundingClientRect().width)))},g=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,g/this.wrapper.getBoundingClientRect().width)))}))}getHeight(g,_){var j;const $=((j=this.audioData)===null||j===void 0?void 0:j.numberOfChannels)||1;if(g==null)return 128;if(!isNaN(Number(g)))return Number(g);if(g==="auto"){const _e=this.parent.clientHeight||128;return _!=null&&_.every(et=>!et.overlay)?_e/$:_e}return 128}initHtml(){const g=document.createElement("div"),_=g.attachShadow({mode:"open"}),j=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return _.innerHTML=`
      <style${j?` nonce="${j}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[g,_]}setOptions(g){if(this.options.container!==g.container){const _=this.parentFromOptionsContainer(g.container);_.appendChild(this.container),this.parent=_}g.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=g,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(g){this.scrollContainer.scrollLeft=g}setScrollPercentage(g){const{scrollWidth:_}=this.scrollContainer,j=_*g;this.setScroll(j)}destroy(){var g,_;this.subscriptions.forEach(j=>j()),this.container.remove(),(g=this.resizeObserver)===null||g===void 0||g.disconnect(),(_=this.unsubscribeOnScroll)===null||_===void 0||_.call(this)}createDelay(g=10){let _,j;const $=()=>{_&&clearTimeout(_),j&&j()};return this.timeouts.push($),()=>new Promise((_e,et)=>{$(),j=et,_=setTimeout(()=>{_=void 0,j=void 0,_e()},g)})}convertColorValues(g){if(!Array.isArray(g))return g||"";if(g.length<2)return g[0]||"";const _=document.createElement("canvas"),j=_.getContext("2d"),$=_.height*(window.devicePixelRatio||1),_e=j.createLinearGradient(0,0,0,$),et=1/(g.length-1);return g.forEach((tt,nt)=>{const rt=nt*et;_e.addColorStop(rt,tt)}),_e}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(g,_,j,$){const _e=g[0],et=g[1]||g[0],tt=_e.length,{width:nt,height:rt}=j.canvas,it=rt/2,st=this.getPixelRatio(),ot=_.barWidth?_.barWidth*st:1,lt=_.barGap?_.barGap*st:_.barWidth?ot/2:0,at=_.barRadius||0,ut=nt/(ot+lt)/tt,dt=at&&"roundRect"in j?"roundRect":"rect";j.beginPath();let ct=0,ht=0,pt=0;for(let mt=0;mt<=tt;mt++){const ft=Math.round(mt*ut);if(ft>ct){const vt=Math.round(ht*it*$),St=vt+Math.round(pt*it*$)||1;let Tt=it-vt;_.barAlign==="top"?Tt=0:_.barAlign==="bottom"&&(Tt=rt-St),j[dt](ct*(ot+lt),Tt,ot,St,at),ct=ft,ht=0,pt=0}const gt=Math.abs(_e[mt]||0),xt=Math.abs(et[mt]||0);gt>ht&&(ht=gt),xt>pt&&(pt=xt)}j.fill(),j.closePath()}renderLineWaveform(g,_,j,$){const _e=et=>{const tt=g[et]||g[0],nt=tt.length,{height:rt}=j.canvas,it=rt/2,st=j.canvas.width/nt;j.moveTo(0,it);let ot=0,lt=0;for(let at=0;at<=nt;at++){const ut=Math.round(at*st);if(ut>ot){const ct=it+(Math.round(lt*it*$)||1)*(et===0?-1:1);j.lineTo(ot,ct),ot=ut,lt=0}const dt=Math.abs(tt[at]||0);dt>lt&&(lt=dt)}j.lineTo(ot,it)};j.beginPath(),_e(0),_e(1),j.fill(),j.closePath()}renderWaveform(g,_,j){if(j.fillStyle=this.convertColorValues(_.waveColor),_.renderFunction)return void _.renderFunction(g,j);let $=_.barHeight||1;if(_.normalize){const _e=Array.from(g[0]).reduce((et,tt)=>Math.max(et,Math.abs(tt)),0);$=_e?1/_e:1}_.barWidth||_.barGap||_.barAlign?this.renderBarWaveform(g,_,j,$):this.renderLineWaveform(g,_,j,$)}renderSingleCanvas(g,_,j,$,_e,et,tt){const nt=this.getPixelRatio(),rt=document.createElement("canvas");rt.width=Math.round(j*nt),rt.height=Math.round($*nt),rt.style.width=`${j}px`,rt.style.height=`${$}px`,rt.style.left=`${Math.round(_e)}px`,et.appendChild(rt);const it=rt.getContext("2d");if(this.renderWaveform(g,_,it),rt.width>0&&rt.height>0){const st=rt.cloneNode(),ot=st.getContext("2d");ot.drawImage(rt,0,0),ot.globalCompositeOperation="source-in",ot.fillStyle=this.convertColorValues(_.progressColor),ot.fillRect(0,0,rt.width,rt.height),tt.appendChild(st)}}renderMultiCanvas(g,_,j,$,_e,et){const tt=this.getPixelRatio(),{clientWidth:nt}=this.scrollContainer,rt=j/tt;let it=Math.min(h.MAX_CANVAS_WIDTH,nt,rt),st={};if(_.barWidth||_.barGap){const dt=_.barWidth||.5,ct=dt+(_.barGap||dt/2);it%ct!=0&&(it=Math.floor(it/ct)*ct)}const ot=dt=>{if(dt<0||dt>=lt||st[dt])return;st[dt]=!0;const ct=dt*it,ht=Math.min(rt-ct,it);if(ht<=0)return;const pt=g.map(mt=>{const ft=Math.floor(ct/rt*mt.length),gt=Math.floor((ct+ht)/rt*mt.length);return mt.slice(ft,gt)});this.renderSingleCanvas(pt,_,ht,$,ct,_e,et)},lt=Math.ceil(rt/it);if(!this.isScrollable){for(let dt=0;dt<lt;dt++)ot(dt);return}const at=this.scrollContainer.scrollLeft/rt,ut=Math.floor(at*lt);ot(ut-1),ot(ut),ot(ut+1),lt>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:dt}=this.scrollContainer,ct=Math.floor(dt/rt*lt);Object.keys(st).length>h.MAX_NODES&&(_e.innerHTML="",et.innerHTML="",st={}),ot(ct-1),ot(ct),ot(ct+1)}))}renderChannel(g,_,j,$){var{overlay:_e}=_,et=function(it,st){var ot={};for(var lt in it)Object.prototype.hasOwnProperty.call(it,lt)&&st.indexOf(lt)<0&&(ot[lt]=it[lt]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function"){var at=0;for(lt=Object.getOwnPropertySymbols(it);at<lt.length;at++)st.indexOf(lt[at])<0&&Object.prototype.propertyIsEnumerable.call(it,lt[at])&&(ot[lt[at]]=it[lt[at]])}return ot}(_,["overlay"]);const tt=document.createElement("div"),nt=this.getHeight(et.height,et.splitChannels);tt.style.height=`${nt}px`,_e&&$>0&&(tt.style.marginTop=`-${nt}px`),this.canvasWrapper.style.minHeight=`${nt}px`,this.canvasWrapper.appendChild(tt);const rt=tt.cloneNode();this.progressWrapper.appendChild(rt),this.renderMultiCanvas(g,et,j,nt,tt,rt)}render(g){return t$1(this,void 0,void 0,function*(){var _;this.timeouts.forEach(nt=>nt()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const j=this.getPixelRatio(),$=this.scrollContainer.clientWidth,_e=Math.ceil(g.duration*(this.options.minPxPerSec||0));this.isScrollable=_e>$;const et=this.options.fillParent&&!this.isScrollable,tt=(et?$:_e)*j;if(this.wrapper.style.width=et?"100%":`${_e}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=g,this.emit("render"),this.options.splitChannels)for(let nt=0;nt<g.numberOfChannels;nt++){const rt=Object.assign(Object.assign({},this.options),(_=this.options.splitChannels)===null||_===void 0?void 0:_[nt]);this.renderChannel([g.getChannelData(nt)],rt,tt,nt)}else{const nt=[g.getChannelData(0)];g.numberOfChannels>1&&nt.push(g.getChannelData(1)),this.renderChannel(nt,this.options,tt,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var g;if((g=this.unsubscribeOnScroll)===null||g===void 0||g.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:_}=this.scrollContainer,{right:j}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&_!==this.scrollContainer.scrollWidth){const{right:$}=this.progressWrapper.getBoundingClientRect();let _e=$-j;_e*=2,_e=_e<0?Math.floor(_e):Math.ceil(_e),_e/=2,this.scrollContainer.scrollLeft+=_e}}zoom(g){this.options.minPxPerSec=g,this.reRender()}scrollIntoView(g,_=!1){const{scrollLeft:j,scrollWidth:$,clientWidth:_e}=this.scrollContainer,et=g*$,tt=j,nt=j+_e,rt=_e/2;if(this.isDragging)et+30>nt?this.scrollContainer.scrollLeft+=30:et-30<tt&&(this.scrollContainer.scrollLeft-=30);else{(et<tt||et>nt)&&(this.scrollContainer.scrollLeft=et-(this.options.autoCenter?rt:0));const it=et-j-rt;_&&this.options.autoCenter&&it>0&&(this.scrollContainer.scrollLeft+=Math.min(it,10))}{const it=this.scrollContainer.scrollLeft,st=it/$,ot=(it+_e)/$;this.emit("scroll",st,ot,it,it+_e)}}renderProgress(g,_){if(isNaN(g))return;const j=100*g;this.canvasWrapper.style.clipPath=`polygon(${j}% 0, 100% 0, 100% 100%, ${j}% 100%)`,this.progressWrapper.style.width=`${j}%`,this.cursor.style.left=`${j}%`,this.cursor.style.transform=`translateX(-${Math.round(j)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(g,_)}exportImage(g,_,j){return t$1(this,void 0,void 0,function*(){const $=this.canvasWrapper.querySelectorAll("canvas");if(!$.length)throw new Error("No waveform data");if(j==="dataURL"){const _e=Array.from($).map(et=>et.toDataURL(g,_));return Promise.resolve(_e)}return Promise.all(Array.from($).map(_e=>new Promise((et,tt)=>{_e.toBlob(nt=>{nt?et(nt):tt(new Error("Could not export image"))},g,_)})))})}}h.MAX_CANVAS_WIDTH=8e3,h.MAX_NODES=10;class l extends e$1{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class d extends e$1{constructor(g=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=g,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t$1(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(g){if(this.currentSrc=g,this._duration=void 0,!g)return this.buffer=null,void this.emit("emptied");fetch(g).then(_=>{if(_.status>=400)throw new Error(`Failed to fetch ${g}: ${_.status} (${_.statusText})`);return _.arrayBuffer()}).then(_=>this.currentSrc!==g?null:this.audioContext.decodeAudioData(_)).then(_=>{this.currentSrc===g&&(this.buffer=_,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var g;if(!this.paused)return;this.paused=!1,(g=this.bufferNode)===null||g===void 0||g.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let _=this.playedDuration*this._playbackRate;_>=this.duration&&(_=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,_),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var g;this.paused=!0,(g=this.bufferNode)===null||g===void 0||g.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return t$1(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(g){var _,j;const $=g-this.currentTime;(_=this.bufferNode)===null||_===void 0||_.stop(this.audioContext.currentTime+$),(j=this.bufferNode)===null||j===void 0||j.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(g){return t$1(this,void 0,void 0,function*(){return this.audioContext.setSinkId(g)})}get playbackRate(){return this._playbackRate}set playbackRate(g){this._playbackRate=g,this.bufferNode&&(this.bufferNode.playbackRate.value=g)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(g){const _=!this.paused;_&&this._pause(),this.playedDuration=g/this._playbackRate,_&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var g,_;return(g=this._duration)!==null&&g!==void 0?g:((_=this.buffer)===null||_===void 0?void 0:_.duration)||0}set duration(g){this._duration=g}get volume(){return this.gainNode.gain.value}set volume(g){this.gainNode.gain.value=g,this.emit("volumechange")}get muted(){return this._muted}set muted(g){this._muted!==g&&(this._muted=g,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(g){return/^(audio|video)\//.test(g)}getGainNode(){return this.gainNode}getChannelData(){const g=[];if(!this.buffer)return g;const _=this.buffer.numberOfChannels;for(let j=0;j<_;j++)g.push(this.buffer.getChannelData(j));return g}}const c={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let u$1=class Hl extends a$1{static create(g){return new Hl(g)}constructor(g){const _=g.media||(g.backend==="WebAudio"?new d:void 0);super({media:_,mediaControls:g.mediaControls,autoplay:g.autoplay,playbackRate:g.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},c,g),this.timer=new l;const j=_?void 0:this.getMediaElement();this.renderer=new h(this.options,j),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const $=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:_e,duration:et}=this.options;($||_e&&et)&&this.load($,_e,et).catch(()=>null)})}updateProgress(g=this.getCurrentTime()){return this.renderer.renderProgress(g/this.getDuration(),this.isPlaying()),g}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const g=this.updateProgress();this.emit("timeupdate",g),this.emit("audioprocess",g)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const g=this.updateProgress();this.emit("timeupdate",g)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",g=>{this.emit("error",g.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(g,_)=>{this.options.interact&&(this.seekTo(g),this.emit("interaction",g*this.getDuration()),this.emit("click",g,_))}),this.renderer.on("dblclick",(g,_)=>{this.emit("dblclick",g,_)}),this.renderer.on("scroll",(g,_,j,$)=>{const _e=this.getDuration();this.emit("scroll",g*_e,_*_e,j,$)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",g=>{this.emit("dragstart",g)}),this.renderer.on("dragend",g=>{this.emit("dragend",g)}));{let g;this.subscriptions.push(this.renderer.on("drag",_=>{if(!this.options.interact)return;let j;this.renderer.renderProgress(_),clearTimeout(g),this.isPlaying()?j=0:this.options.dragToSeek===!0?j=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(j=this.options.dragToSeek.debounceTime),g=setTimeout(()=>{this.seekTo(_)},j),this.emit("interaction",_*this.getDuration()),this.emit("drag",_)}))}}initPlugins(){var g;!((g=this.options.plugins)===null||g===void 0)&&g.length&&this.options.plugins.forEach(_=>{this.registerPlugin(_)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(g=>g()),this.mediaSubscriptions=[]}setOptions(g){this.options=Object.assign({},this.options,g),this.renderer.setOptions(this.options),g.audioRate&&this.setPlaybackRate(g.audioRate),g.mediaControls!=null&&(this.getMediaElement().controls=g.mediaControls)}registerPlugin(g){return g._init(this),this.plugins.push(g),this.subscriptions.push(g.once("destroy",()=>{this.plugins=this.plugins.filter(_=>_!==g)})),g}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(g){return this.renderer.setScroll(g)}setScrollTime(g){const _=g/this.getDuration();this.renderer.setScrollPercentage(_)}getActivePlugins(){return this.plugins}loadAudio(g,_,j,$){return t$1(this,void 0,void 0,function*(){var _e;if(this.emit("load",g),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!_&&!j){const tt=this.options.fetchParams||{};window.AbortController&&!tt.signal&&(this.abortController=new AbortController,tt.signal=(_e=this.abortController)===null||_e===void 0?void 0:_e.signal);const nt=rt=>this.emit("loading",rt);_=yield o.fetchBlob(g,nt,tt)}this.setSrc(g,_);const et=yield new Promise(tt=>{const nt=$||this.getDuration();nt?tt(nt):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>tt(this.getDuration()),{once:!0}))});if(!g&&!_){const tt=this.getMediaElement();tt instanceof d&&(tt.duration=et)}if(j)this.decodedData=i$2.createBuffer(j,et||0);else if(_){const tt=yield _.arrayBuffer();this.decodedData=yield i$2.decode(tt,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(g,_,j){return t$1(this,void 0,void 0,function*(){try{return yield this.loadAudio(g,void 0,_,j)}catch($){throw this.emit("error",$),$}})}loadBlob(g,_,j){return t$1(this,void 0,void 0,function*(){try{return yield this.loadAudio("",g,_,j)}catch($){throw this.emit("error",$),$}})}zoom(g){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(g),this.emit("zoom",g)}getDecodedData(){return this.decodedData}exportPeaks({channels:g=2,maxLength:_=8e3,precision:j=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const $=Math.min(g,this.decodedData.numberOfChannels),_e=[];for(let et=0;et<$;et++){const tt=this.decodedData.getChannelData(et),nt=[],rt=tt.length/_;for(let it=0;it<_;it++){const st=tt.slice(Math.floor(it*rt),Math.ceil((it+1)*rt));let ot=0;for(let lt=0;lt<st.length;lt++){const at=st[lt];Math.abs(at)>Math.abs(ot)&&(ot=at)}nt.push(Math.round(ot*j)/j)}_e.push(nt)}return _e}getDuration(){let g=super.getDuration()||0;return g!==0&&g!==1/0||!this.decodedData||(g=this.decodedData.duration),g}toggleInteraction(g){this.options.interact=g}setTime(g){super.setTime(g),this.updateProgress(g),this.emit("timeupdate",g)}seekTo(g){const _=this.getDuration()*g;this.setTime(_)}playPause(){return t$1(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(g){this.setTime(this.getCurrentTime()+g)}empty(){this.load("",[[0]],.001)}setMediaElement(g){this.unsubscribePlayerEvents(),super.setMediaElement(g),this.initPlayerEvents()}exportImage(){return t$1(this,arguments,void 0,function*(g="image/png",_=1,j="dataURL"){return this.renderer.exportImage(g,_,j)})}destroy(){var g;this.emit("destroy"),(g=this.abortController)===null||g===void 0||g.abort(),this.plugins.forEach(_=>_.destroy()),this.subscriptions.forEach(_=>_()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};u$1.BasePlugin=class extends e$1{constructor(b){super(),this.subscriptions=[],this.options=b}onInit(){}_init(b){this.wavesurfer=b,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(b=>b())}},u$1.dom=r$1;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function i$1(b,g){const[_,j]=reactExports.useState(null),$=reactExports.useMemo(()=>Object.entries(g).flat(),[g]);return reactExports.useEffect(()=>{if(!b.current)return;const _e=u$1.create(Object.assign(Object.assign({},g),{container:b.current}));return j(_e),()=>{_e.destroy()}},[b,...$]),_}const a=/^on([A-Z])/,u=b=>a.test(b);function f(b,g){const _=reactExports.useMemo(()=>Object.entries(g).flat(),[g]);reactExports.useEffect(()=>{if(!b)return;const j=Object.entries(g);if(!j.length)return;const $=j.map(([_e,et])=>{const tt=_e.replace(a,(nt,rt)=>rt.toLowerCase());return b.on(tt,(...nt)=>et(b,...nt))});return()=>{$.forEach(_e=>_e())}},[b,..._])}reactExports.memo(b=>{const g=reactExports.useRef(null),[_,j]=function($){return reactExports.useMemo(()=>{const _e=Object.assign({},$),et=Object.assign({},$);for(const tt in _e)u(tt)?delete _e[tt]:delete et[tt];return[_e,et]},[$])}(b);return f(i$1(g,_),j),jsxRuntimeExports.jsx("div",{ref:g})});function p(b){var{container:g}=b;const _=i$1(g,function($,_e){var et={};for(var tt in $)Object.prototype.hasOwnProperty.call($,tt)&&_e.indexOf(tt)<0&&(et[tt]=$[tt]);if($!=null&&typeof Object.getOwnPropertySymbols=="function"){var nt=0;for(tt=Object.getOwnPropertySymbols($);nt<tt.length;nt++)_e.indexOf(tt[nt])<0&&Object.prototype.propertyIsEnumerable.call($,tt[nt])&&(et[tt[nt]]=$[tt[nt]])}return et}(b,["container"])),j=function($){const[_e,et]=reactExports.useState(!1),[tt,nt]=reactExports.useState(!1),[rt,it]=reactExports.useState(0);return reactExports.useEffect(()=>{if(!$)return;const st=[$.on("load",()=>{et(!1),nt(!1),it(0)}),$.on("ready",()=>{et(!0),nt(!1),it(0)}),$.on("play",()=>{nt(!0)}),$.on("pause",()=>{nt(!1)}),$.on("timeupdate",()=>{it($.getCurrentTime())}),$.on("destroy",()=>{et(!1),nt(!1)})];return()=>{st.forEach(ot=>ot())}},[$]),reactExports.useMemo(()=>({isReady:_e,isPlaying:tt,currentTime:rt}),[tt,rt,_e])}(_);return reactExports.useMemo(()=>Object.assign(Object.assign({},j),{wavesurfer:_}),[j,_])}class t{constructor(){this.listeners={}}on(g,_,j){if(this.listeners[g]||(this.listeners[g]=new Set),this.listeners[g].add(_),j==null?void 0:j.once){const $=()=>{this.un(g,$),this.un(g,_)};return this.on(g,$),$}return()=>this.un(g,_)}un(g,_){var j;(j=this.listeners[g])===null||j===void 0||j.delete(_)}once(g,_){return this.on(g,_,{once:!0})}unAll(){this.listeners={}}emit(g,..._){this.listeners[g]&&this.listeners[g].forEach(j=>j(..._))}}class e extends t{constructor(g){super(),this.subscriptions=[],this.options=g}onInit(){}_init(g){this.wavesurfer=g,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(g=>g())}}function i(b,g){const _=g.xmlns?document.createElementNS(g.xmlns,b):document.createElement(b);for(const[j,$]of Object.entries(g))if(j==="children")for(const[_e,et]of Object.entries(g))typeof et=="string"?_.appendChild(document.createTextNode(et)):_.appendChild(i(_e,et));else j==="style"?Object.assign(_.style,$):j==="textContent"?_.textContent=$:_.setAttribute(j,$.toString());return _}function n(b,g,_){return i(b,g||{})}const s={height:20,formatTimeCallback:b=>b/60>1?`${Math.floor(b/60)}:${`${(b=Math.round(b%60))<10?"0":""}${b}`}`:`${Math.round(1e3*b)/1e3}`};class r extends e{constructor(g){super(g||{}),this.options=Object.assign({},s,g),this.timelineWrapper=this.initTimelineWrapper()}static create(g){return new r(g)}onInit(){var g;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");let _=this.wavesurfer.getWrapper();if(this.options.container instanceof HTMLElement)_=this.options.container;else if(typeof this.options.container=="string"){const j=document.querySelector(this.options.container);if(!j)throw Error(`No Timeline container found matching ${this.options.container}`);_=j}this.options.insertPosition?(_.firstElementChild||_).insertAdjacentElement(this.options.insertPosition,this.timelineWrapper):_.appendChild(this.timelineWrapper),this.subscriptions.push(this.wavesurfer.on("redraw",()=>this.initTimeline())),(!((g=this.wavesurfer)===null||g===void 0)&&g.getDuration()||this.options.duration)&&this.initTimeline()}destroy(){this.timelineWrapper.remove(),super.destroy()}initTimelineWrapper(){return n("div",{part:"timeline-wrapper",style:{pointerEvents:"none"}})}defaultTimeInterval(g){return g>=25?1:5*g>=25?5:15*g>=25?15:60*Math.ceil(.5/g)}defaultPrimaryLabelInterval(g){return g>=25?10:5*g>=25?6:4}defaultSecondaryLabelInterval(g){return g>=25?5:2}virtualAppend(g,_,j){let $=!1;const _e=(nt,rt)=>{if(!this.wavesurfer)return;const it=j.clientWidth,st=g>nt&&g+it<rt;st!==$&&($=st,st?_.appendChild(j):j.remove())};if(!this.wavesurfer)return;const et=this.wavesurfer.getScroll(),tt=et+this.wavesurfer.getWidth();_e(et,tt),this.subscriptions.push(this.wavesurfer.on("scroll",(nt,rt,it,st)=>{_e(it,st)}))}initTimeline(){var g,_,j,$,_e,et,tt,nt;const rt=(j=(_=(g=this.wavesurfer)===null||g===void 0?void 0:g.getDuration())!==null&&_!==void 0?_:this.options.duration)!==null&&j!==void 0?j:0,it=((($=this.wavesurfer)===null||$===void 0?void 0:$.getWrapper().scrollWidth)||this.timelineWrapper.scrollWidth)/rt,st=(_e=this.options.timeInterval)!==null&&_e!==void 0?_e:this.defaultTimeInterval(it),ot=(et=this.options.primaryLabelInterval)!==null&&et!==void 0?et:this.defaultPrimaryLabelInterval(it),lt=this.options.primaryLabelSpacing,at=(tt=this.options.secondaryLabelInterval)!==null&&tt!==void 0?tt:this.defaultSecondaryLabelInterval(it),ut=this.options.secondaryLabelSpacing,dt=this.options.insertPosition==="beforebegin",ct=n("div",{style:Object.assign({height:`${this.options.height}px`,overflow:"hidden",fontSize:this.options.height/2+"px",whiteSpace:"nowrap"},dt?{position:"absolute",top:"0",left:"0",right:"0",zIndex:"2"}:{position:"relative"})});ct.setAttribute("part","timeline"),typeof this.options.style=="string"?ct.setAttribute("style",ct.getAttribute("style")+this.options.style):typeof this.options.style=="object"&&Object.assign(ct.style,this.options.style);const ht=n("div",{style:{width:"0",height:"50%",display:"flex",flexDirection:"column",justifyContent:dt?"flex-start":"flex-end",top:dt?"0":"auto",bottom:dt?"auto":"0",overflow:"visible",borderLeft:"1px solid currentColor",opacity:`${(nt=this.options.secondaryLabelOpacity)!==null&&nt!==void 0?nt:.25}`,position:"absolute",zIndex:"1"}});for(let pt=0,mt=0;pt<rt;pt+=st,mt++){const ft=ht.cloneNode(),gt=Math.round(100*pt)/100%ot==0||lt&&mt%lt==0,xt=Math.round(100*pt)/100%at==0||ut&&mt%ut==0;(gt||xt)&&(ft.style.height="100%",ft.style.textIndent="3px",ft.textContent=this.options.formatTimeCallback(pt),gt&&(ft.style.opacity="1"));const vt=gt?"primary":xt?"secondary":"tick";ft.setAttribute("part",`timeline-notch timeline-notch-${vt}`);const St=pt*it;ft.style.left=`${St}px`,this.virtualAppend(St,ct,ft)}this.timelineWrapper.innerHTML="",this.timelineWrapper.appendChild(ct),this.emit("ready")}}const AudioPlayer=({audioUrl:b,filename:g,fileSize:_})=>{const j=reactExports.useRef(null),[$,_e]=reactExports.useState("00:00"),[et,tt]=reactExports.useState("00:00"),{wavesurfer:nt,isPlaying:rt}=p({barWidth:2,cursorWidth:1,cursorColor:"transparent",container:j,height:80,waveColor:"#B2B2B2",progressColor:"#2C6BF8",url:b,plugins:reactExports.useMemo(()=>[r.create()],[])}),it=ot=>{const lt=Math.floor(ot/60),at=Math.floor(ot%60);return`${lt.toString().padStart(2,"0")}:${at.toString().padStart(2,"0")}`},st=reactExports.useCallback(()=>{nt&&nt.playPause()},[nt]);return reactExports.useEffect(()=>{if(nt){const ot=()=>{const at=nt.getCurrentTime();_e(it(at))},lt=()=>{const at=nt.getDuration();tt(it(at))};return nt.on("ready",lt),nt.on("timeupdate",ot),()=>{nt.un("ready",lt),nt.un("timeupdate",ot)}}},[nt]),jsxRuntimeExports.jsxs("div",{className:"max-w-xs w-full p-3 flex flex-col gap-3 rounded-[14px] bg-white border border-solid border-[#1919191a]",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-medium max-w-40 truncate text-[#191919]",children:g})}),jsxRuntimeExports.jsx("span",{className:"text-xs text-[#7E7E7E] -mt-3",children:_}),jsxRuntimeExports.jsxs("div",{className:"relative flex justify-center items-center",children:[jsxRuntimeExports.jsx("img",{src:Subtract}),jsxRuntimeExports.jsxs("div",{className:"absolute text-xs text-center text-[#7E7E7E] font-mono",children:[$," / ",et]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 -mt-3 bg-[#F3F3F3] px-2 rounded-2xl py-0.5 overflow-hidden",children:[jsxRuntimeExports.jsx("button",{onClick:st,className:"",children:rt?jsxRuntimeExports.jsx("img",{src:PauseIcon,alt:"Pause",className:"w-8 h-8"}):jsxRuntimeExports.jsx("img",{src:PlayIcon,alt:"Play",className:"w-8 h-8"})}),jsxRuntimeExports.jsx("div",{ref:j,className:"flex-1 cursor-pointer h-20"})]})]})};var lib={exports:{}},core_min={};function commonjsRequire(b){throw new Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(g,_){module.exports=g.pdfjsLib=_()})(globalThis,()=>(()=>{var __webpack_modules__=[,(b,g)=>{var Rr;Object.defineProperty(g,"__esModule",{value:!0}),g.VerbosityLevel=g.Util=g.UnknownErrorException=g.UnexpectedResponseException=g.TextRenderingMode=g.RenderingIntentFlag=g.PromiseCapability=g.PermissionFlag=g.PasswordResponses=g.PasswordException=g.PageActionEventType=g.OPS=g.MissingPDFException=g.MAX_IMAGE_SIZE_TO_CACHE=g.LINE_FACTOR=g.LINE_DESCENT_FACTOR=g.InvalidPDFException=g.ImageKind=g.IDENTITY_MATRIX=g.FormatError=g.FeatureTest=g.FONT_IDENTITY_MATRIX=g.DocumentActionEventType=g.CMapCompressionType=g.BaseException=g.BASELINE_FACTOR=g.AnnotationType=g.AnnotationReplyType=g.AnnotationPrefix=g.AnnotationMode=g.AnnotationFlag=g.AnnotationFieldFlag=g.AnnotationEditorType=g.AnnotationEditorPrefix=g.AnnotationEditorParamsType=g.AnnotationBorderStyleType=g.AnnotationActionEventType=g.AbortException=void 0,g.assert=Rt,g.bytesToString=vn,g.createValidAbsoluteUrl=Zt,g.getModificationDate=Dn,g.getUuid=Zn,g.getVerbosityLevel=Wt,g.info=Jt,g.isArrayBuffer=tn,g.isArrayEqual=Ln,g.isNodeJS=void 0,g.normalizeUnicode=Hn,g.objectFromMap=kn,g.objectSize=An,g.setVerbosityLevel=en,g.shadow=Ot,g.string32=En,g.stringToBytes=xn,g.stringToPDFString=Sn,g.stringToUTF8String=_n,g.unreachable=Ht,g.utf8StringToString=Cn,g.warn=zt;const _=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");g.isNodeJS=_;const j=[1,0,0,1,0,0];g.IDENTITY_MATRIX=j;const $=[.001,0,0,.001,0,0];g.FONT_IDENTITY_MATRIX=$;const _e=1e7;g.MAX_IMAGE_SIZE_TO_CACHE=_e;const et=1.35;g.LINE_FACTOR=et;const tt=.35;g.LINE_DESCENT_FACTOR=tt;const nt=tt/et;g.BASELINE_FACTOR=nt;const rt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};g.RenderingIntentFlag=rt;const it={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};g.AnnotationMode=it;const st="pdfjs_internal_editor_";g.AnnotationEditorPrefix=st;const ot={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};g.AnnotationEditorType=ot;const lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};g.AnnotationEditorParamsType=lt;const at={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};g.PermissionFlag=at;const ut={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};g.TextRenderingMode=ut;const dt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};g.ImageKind=dt;const ct={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};g.AnnotationType=ct;const ht={GROUP:"Group",REPLY:"R"};g.AnnotationReplyType=ht;const pt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};g.AnnotationFlag=pt;const mt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};g.AnnotationFieldFlag=mt;const ft={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};g.AnnotationBorderStyleType=ft;const gt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};g.AnnotationActionEventType=gt;const xt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};g.DocumentActionEventType=xt;const vt={O:"PageOpen",C:"PageClose"};g.PageActionEventType=vt;const St={ERRORS:0,WARNINGS:1,INFOS:5};g.VerbosityLevel=St;const Tt={NONE:0,BINARY:1};g.CMapCompressionType=Tt;const bt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};g.OPS=bt;const At={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};g.PasswordResponses=At;let Pt=St.WARNINGS;function en(wn){Number.isInteger(wn)&&(Pt=wn)}function Wt(){return Pt}function Jt(wn){Pt>=St.INFOS&&console.log(`Info: ${wn}`)}function zt(wn){Pt>=St.WARNINGS&&console.log(`Warning: ${wn}`)}function Ht(wn){throw new Error(wn)}function Rt(wn,rn){wn||Ht(rn)}function jt(wn){switch(wn==null?void 0:wn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Zt(wn,rn=null,on=null){if(!wn)return null;try{if(on&&typeof wn=="string"){if(on.addDefaultProtocol&&wn.startsWith("www.")){const Gn=wn.match(/\./g);(Gn==null?void 0:Gn.length)>=2&&(wn=`http://${wn}`)}if(on.tryConvertEncoding)try{wn=_n(wn)}catch{}}const zn=rn?new URL(wn,rn):new URL(wn);if(jt(zn))return zn}catch{}return null}function Ot(wn,rn,on,zn=!1){return Object.defineProperty(wn,rn,{value:on,enumerable:!zn,configurable:!0,writable:!1}),on}const wt=function(){function rn(on,zn){this.constructor===rn&&Ht("Cannot initialize BaseException."),this.message=on,this.name=zn}return rn.prototype=new Error,rn.constructor=rn,rn}();g.BaseException=wt;class Ct extends wt{constructor(rn,on){super(rn,"PasswordException"),this.code=on}}g.PasswordException=Ct;class _t extends wt{constructor(rn,on){super(rn,"UnknownErrorException"),this.details=on}}g.UnknownErrorException=_t;class Nt extends wt{constructor(rn){super(rn,"InvalidPDFException")}}g.InvalidPDFException=Nt;class Lt extends wt{constructor(rn){super(rn,"MissingPDFException")}}g.MissingPDFException=Lt;class It extends wt{constructor(rn,on){super(rn,"UnexpectedResponseException"),this.status=on}}g.UnexpectedResponseException=It;class Yt extends wt{constructor(rn){super(rn,"FormatError")}}g.FormatError=Yt;class mn extends wt{constructor(rn){super(rn,"AbortException")}}g.AbortException=mn;function vn(wn){(typeof wn!="object"||(wn==null?void 0:wn.length)===void 0)&&Ht("Invalid argument for bytesToString");const rn=wn.length,on=8192;if(rn<on)return String.fromCharCode.apply(null,wn);const zn=[];for(let Gn=0;Gn<rn;Gn+=on){const nr=Math.min(Gn+on,rn),Vt=wn.subarray(Gn,nr);zn.push(String.fromCharCode.apply(null,Vt))}return zn.join("")}function xn(wn){typeof wn!="string"&&Ht("Invalid argument for stringToBytes");const rn=wn.length,on=new Uint8Array(rn);for(let zn=0;zn<rn;++zn)on[zn]=wn.charCodeAt(zn)&255;return on}function En(wn){return String.fromCharCode(wn>>24&255,wn>>16&255,wn>>8&255,wn&255)}function An(wn){return Object.keys(wn).length}function kn(wn){const rn=Object.create(null);for(const[on,zn]of wn)rn[on]=zn;return rn}function ln(){const wn=new Uint8Array(4);return wn[0]=1,new Uint32Array(wn.buffer,0,1)[0]===1}function un(){try{return new Function(""),!0}catch{return!1}}class Mt{static get isLittleEndian(){return Ot(this,"isLittleEndian",ln())}static get isEvalSupported(){return Ot(this,"isEvalSupported",un())}static get isOffscreenCanvasSupported(){return Ot(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ot(this,"platform",{isWin:!1,isMac:!1}):Ot(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var rn,on;return Ot(this,"isCSSRoundSupported",(on=(rn=globalThis.CSS)==null?void 0:rn.supports)==null?void 0:on.call(rn,"width: round(1.5px, 1px)"))}}g.FeatureTest=Mt;const Bt=[...Array(256).keys()].map(wn=>wn.toString(16).padStart(2,"0"));class nn{static makeHexColor(rn,on,zn){return`#${Bt[rn]}${Bt[on]}${Bt[zn]}`}static scaleMinMax(rn,on){let zn;rn[0]?(rn[0]<0&&(zn=on[0],on[0]=on[1],on[1]=zn),on[0]*=rn[0],on[1]*=rn[0],rn[3]<0&&(zn=on[2],on[2]=on[3],on[3]=zn),on[2]*=rn[3],on[3]*=rn[3]):(zn=on[0],on[0]=on[2],on[2]=zn,zn=on[1],on[1]=on[3],on[3]=zn,rn[1]<0&&(zn=on[2],on[2]=on[3],on[3]=zn),on[2]*=rn[1],on[3]*=rn[1],rn[2]<0&&(zn=on[0],on[0]=on[1],on[1]=zn),on[0]*=rn[2],on[1]*=rn[2]),on[0]+=rn[4],on[1]+=rn[4],on[2]+=rn[5],on[3]+=rn[5]}static transform(rn,on){return[rn[0]*on[0]+rn[2]*on[1],rn[1]*on[0]+rn[3]*on[1],rn[0]*on[2]+rn[2]*on[3],rn[1]*on[2]+rn[3]*on[3],rn[0]*on[4]+rn[2]*on[5]+rn[4],rn[1]*on[4]+rn[3]*on[5]+rn[5]]}static applyTransform(rn,on){const zn=rn[0]*on[0]+rn[1]*on[2]+on[4],Gn=rn[0]*on[1]+rn[1]*on[3]+on[5];return[zn,Gn]}static applyInverseTransform(rn,on){const zn=on[0]*on[3]-on[1]*on[2],Gn=(rn[0]*on[3]-rn[1]*on[2]+on[2]*on[5]-on[4]*on[3])/zn,nr=(-rn[0]*on[1]+rn[1]*on[0]+on[4]*on[1]-on[5]*on[0])/zn;return[Gn,nr]}static getAxialAlignedBoundingBox(rn,on){const zn=this.applyTransform(rn,on),Gn=this.applyTransform(rn.slice(2,4),on),nr=this.applyTransform([rn[0],rn[3]],on),Vt=this.applyTransform([rn[2],rn[1]],on);return[Math.min(zn[0],Gn[0],nr[0],Vt[0]),Math.min(zn[1],Gn[1],nr[1],Vt[1]),Math.max(zn[0],Gn[0],nr[0],Vt[0]),Math.max(zn[1],Gn[1],nr[1],Vt[1])]}static inverseTransform(rn){const on=rn[0]*rn[3]-rn[1]*rn[2];return[rn[3]/on,-rn[1]/on,-rn[2]/on,rn[0]/on,(rn[2]*rn[5]-rn[4]*rn[3])/on,(rn[4]*rn[1]-rn[5]*rn[0])/on]}static singularValueDecompose2dScale(rn){const on=[rn[0],rn[2],rn[1],rn[3]],zn=rn[0]*on[0]+rn[1]*on[2],Gn=rn[0]*on[1]+rn[1]*on[3],nr=rn[2]*on[0]+rn[3]*on[2],Vt=rn[2]*on[1]+rn[3]*on[3],bn=(zn+Vt)/2,In=Math.sqrt((zn+Vt)**2-4*(zn*Vt-nr*Gn))/2,qn=bn+In||1,Yn=bn-In||1;return[Math.sqrt(qn),Math.sqrt(Yn)]}static normalizeRect(rn){const on=rn.slice(0);return rn[0]>rn[2]&&(on[0]=rn[2],on[2]=rn[0]),rn[1]>rn[3]&&(on[1]=rn[3],on[3]=rn[1]),on}static intersect(rn,on){const zn=Math.max(Math.min(rn[0],rn[2]),Math.min(on[0],on[2])),Gn=Math.min(Math.max(rn[0],rn[2]),Math.max(on[0],on[2]));if(zn>Gn)return null;const nr=Math.max(Math.min(rn[1],rn[3]),Math.min(on[1],on[3])),Vt=Math.min(Math.max(rn[1],rn[3]),Math.max(on[1],on[3]));return nr>Vt?null:[zn,nr,Gn,Vt]}static bezierBoundingBox(rn,on,zn,Gn,nr,Vt,bn,In){const qn=[],Yn=[[],[]];let $n,Ft,Dt,Kt,gn,yn,Tn,On;for(let fr=0;fr<2;++fr){if(fr===0?(Ft=6*rn-12*zn+6*nr,$n=-3*rn+9*zn-9*nr+3*bn,Dt=3*zn-3*rn):(Ft=6*on-12*Gn+6*Vt,$n=-3*on+9*Gn-9*Vt+3*In,Dt=3*Gn-3*on),Math.abs($n)<1e-12){if(Math.abs(Ft)<1e-12)continue;Kt=-Dt/Ft,0<Kt&&Kt<1&&qn.push(Kt);continue}Tn=Ft*Ft-4*Dt*$n,On=Math.sqrt(Tn),!(Tn<0)&&(gn=(-Ft+On)/(2*$n),0<gn&&gn<1&&qn.push(gn),yn=(-Ft-On)/(2*$n),0<yn&&yn<1&&qn.push(yn))}let Kn=qn.length,Un;const Bn=Kn;for(;Kn--;)Kt=qn[Kn],Un=1-Kt,Yn[0][Kn]=Un*Un*Un*rn+3*Un*Un*Kt*zn+3*Un*Kt*Kt*nr+Kt*Kt*Kt*bn,Yn[1][Kn]=Un*Un*Un*on+3*Un*Un*Kt*Gn+3*Un*Kt*Kt*Vt+Kt*Kt*Kt*In;return Yn[0][Bn]=rn,Yn[1][Bn]=on,Yn[0][Bn+1]=bn,Yn[1][Bn+1]=In,Yn[0].length=Yn[1].length=Bn+2,[Math.min(...Yn[0]),Math.min(...Yn[1]),Math.max(...Yn[0]),Math.max(...Yn[1])]}}g.Util=nn;const dn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Sn(wn){if(wn[0]>="ï"){let on;if(wn[0]==="þ"&&wn[1]==="ÿ"?on="utf-16be":wn[0]==="ÿ"&&wn[1]==="þ"?on="utf-16le":wn[0]==="ï"&&wn[1]==="»"&&wn[2]==="¿"&&(on="utf-8"),on)try{const zn=new TextDecoder(on,{fatal:!0}),Gn=xn(wn);return zn.decode(Gn)}catch(zn){zt(`stringToPDFString: "${zn}".`)}}const rn=[];for(let on=0,zn=wn.length;on<zn;on++){const Gn=dn[wn.charCodeAt(on)];rn.push(Gn?String.fromCharCode(Gn):wn.charAt(on))}return rn.join("")}function _n(wn){return decodeURIComponent(escape(wn))}function Cn(wn){return unescape(encodeURIComponent(wn))}function tn(wn){return typeof wn=="object"&&(wn==null?void 0:wn.byteLength)!==void 0}function Ln(wn,rn){if(wn.length!==rn.length)return!1;for(let on=0,zn=wn.length;on<zn;on++)if(wn[on]!==rn[on])return!1;return!0}function Dn(wn=new Date){return[wn.getUTCFullYear().toString(),(wn.getUTCMonth()+1).toString().padStart(2,"0"),wn.getUTCDate().toString().padStart(2,"0"),wn.getUTCHours().toString().padStart(2,"0"),wn.getUTCMinutes().toString().padStart(2,"0"),wn.getUTCSeconds().toString().padStart(2,"0")].join("")}class ur{constructor(){fn(this,Rr,!1);this.promise=new Promise((rn,on)=>{this.resolve=zn=>{pn(this,Rr,!0),rn(zn)},this.reject=zn=>{pn(this,Rr,!0),on(zn)}})}get settled(){return yt(this,Rr)}}Rr=new WeakMap,g.PromiseCapability=ur;let rr=null,br=null;function Hn(wn){return rr||(rr=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,br=new Map([["ﬅ","ſt"]])),wn.replaceAll(rr,(rn,on,zn)=>on?on.normalize("NFKC"):br.get(zn))}function Zn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const wn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(wn);else for(let rn=0;rn<32;rn++)wn[rn]=Math.floor(Math.random()*255);return vn(wn)}const mr="pdfjs_internal_id_";g.AnnotationPrefix=mr},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var b,_,j,$,Rs,Zs,tt,nt,rt,it,st,ot,lt,at,ut,Qs,ct,ht,_o,mt,ft;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(xt){if(typeof xt=="string"||xt instanceof URL?xt={url:xt}:(0,_util.isArrayBuffer)(xt)&&(xt={data:xt}),typeof xt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!xt.url&&!xt.data&&!xt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const vt=new PDFDocumentLoadingTask,{docId:St}=vt,Tt=xt.url?getUrlProp(xt.url):null,bt=xt.data?getDataProp(xt.data):null,At=xt.httpHeaders||null,Pt=xt.withCredentials===!0,en=xt.password??null,Wt=xt.range instanceof PDFDataRangeTransport?xt.range:null,Jt=Number.isInteger(xt.rangeChunkSize)&&xt.rangeChunkSize>0?xt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let zt=xt.worker instanceof PDFWorker?xt.worker:null;const Ht=xt.verbosity,Rt=typeof xt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(xt.docBaseUrl)?xt.docBaseUrl:null,jt=typeof xt.cMapUrl=="string"?xt.cMapUrl:null,Zt=xt.cMapPacked!==!1,Ot=xt.CMapReaderFactory||DefaultCMapReaderFactory,wt=typeof xt.standardFontDataUrl=="string"?xt.standardFontDataUrl:null,Ct=xt.StandardFontDataFactory||DefaultStandardFontDataFactory,_t=xt.stopAtErrors!==!0,Nt=Number.isInteger(xt.maxImageSize)&&xt.maxImageSize>-1?xt.maxImageSize:-1,Lt=xt.isEvalSupported!==!1,It=typeof xt.isOffscreenCanvasSupported=="boolean"?xt.isOffscreenCanvasSupported:!_util.isNodeJS,Yt=Number.isInteger(xt.canvasMaxAreaInBytes)?xt.canvasMaxAreaInBytes:-1,mn=typeof xt.disableFontFace=="boolean"?xt.disableFontFace:_util.isNodeJS,vn=xt.fontExtraProperties===!0,xn=xt.enableXfa===!0,En=xt.ownerDocument||globalThis.document,An=xt.disableRange===!0,kn=xt.disableStream===!0,ln=xt.disableAutoFetch===!0,un=xt.pdfBug===!0,Mt=Wt?Wt.length:xt.length??NaN,Bt=typeof xt.useSystemFonts=="boolean"?xt.useSystemFonts:!_util.isNodeJS&&!mn,nn=typeof xt.useWorkerFetch=="boolean"?xt.useWorkerFetch:Ot===_display_utils.DOMCMapReaderFactory&&Ct===_display_utils.DOMStandardFontDataFactory&&jt&&wt&&(0,_display_utils.isValidFetchUrl)(jt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(wt,document.baseURI),dn=xt.canvasFactory||new DefaultCanvasFactory({ownerDocument:En}),Sn=xt.filterFactory||new DefaultFilterFactory({docId:St,ownerDocument:En}),_n=null;(0,_util.setVerbosityLevel)(Ht);const Cn={canvasFactory:dn,filterFactory:Sn};if(nn||(Cn.cMapReaderFactory=new Ot({baseUrl:jt,isCompressed:Zt}),Cn.standardFontDataFactory=new Ct({baseUrl:wt})),!zt){const Dn={verbosity:Ht,port:_worker_options.GlobalWorkerOptions.workerPort};zt=Dn.port?PDFWorker.fromPort(Dn):new PDFWorker(Dn),vt._worker=zt}const tn={docId:St,apiVersion:"3.11.174",data:bt,password:en,disableAutoFetch:ln,rangeChunkSize:Jt,length:Mt,docBaseUrl:Rt,enableXfa:xn,evaluatorOptions:{maxImageSize:Nt,disableFontFace:mn,ignoreErrors:_t,isEvalSupported:Lt,isOffscreenCanvasSupported:It,canvasMaxAreaInBytes:Yt,fontExtraProperties:vn,useSystemFonts:Bt,cMapUrl:nn?jt:null,standardFontDataUrl:nn?wt:null}},Ln={ignoreErrors:_t,isEvalSupported:Lt,disableFontFace:mn,fontExtraProperties:vn,enableXfa:xn,ownerDocument:En,disableAutoFetch:ln,pdfBug:un,styleElement:_n};return zt.promise.then(function(){if(vt.destroyed)throw new Error("Loading aborted");const Dn=_fetchDocument(zt,tn),ur=new Promise(function(rr){let br;Wt?br=new _transport_stream.PDFDataTransportStream({length:Mt,initialData:Wt.initialData,progressiveDone:Wt.progressiveDone,contentDispositionFilename:Wt.contentDispositionFilename,disableRange:An,disableStream:kn},Wt):bt||(br=(Zn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Zn):(0,_display_utils.isValidFetchUrl)(Zn.url)?new _displayFetch_stream.PDFFetchStream(Zn):new _displayNetwork.PDFNetworkStream(Zn))({url:Tt,length:Mt,httpHeaders:At,withCredentials:Pt,rangeChunkSize:Jt,disableRange:An,disableStream:kn})),rr(br)});return Promise.all([Dn,ur]).then(function([rr,br]){if(vt.destroyed)throw new Error("Loading aborted");const Hn=new _message_handler.MessageHandler(St,rr,zt.port),Zn=new WorkerTransport(Hn,vt,br,Ln,Cn);vt._transport=Zn,Hn.send("Ready",null)})}).catch(vt._capability.reject),vt}async function _fetchDocument(xt,vt){if(xt.destroyed)throw new Error("Worker was destroyed");const St=await xt.messageHandler.sendWithPromise("GetDocRequest",vt,vt.data?[vt.data.buffer]:null);if(xt.destroyed)throw new Error("Worker was destroyed");return St}function getUrlProp(xt){if(xt instanceof URL)return xt.href;try{return new URL(xt,window.location).href}catch{if(_util.isNodeJS&&typeof xt=="string")return xt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(xt){if(_util.isNodeJS&&typeof Buffer<"u"&&xt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(xt instanceof Uint8Array&&xt.byteLength===xt.buffer.byteLength)return xt;if(typeof xt=="string")return(0,_util.stringToBytes)(xt);if(typeof xt=="object"&&!isNaN(xt==null?void 0:xt.length)||(0,_util.isArrayBuffer)(xt))return new Uint8Array(xt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const g=class g{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Is(g,b)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var vt,St,Tt;this.destroyed=!0;try{(vt=this._worker)!=null&&vt.port&&(this._worker._pendingDestroy=!0),await((St=this._transport)==null?void 0:St.destroy())}catch(bt){throw(Tt=this._worker)!=null&&Tt.port&&delete this._worker._pendingDestroy,bt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};b=new WeakMap,fn(g,b,0);let PDFDocumentLoadingTask=g;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(vt,St,Tt=!1,bt=null){this.length=vt,this.initialData=St,this.progressiveDone=Tt,this.contentDispositionFilename=bt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(vt){this._rangeListeners.push(vt)}addProgressListener(vt){this._progressListeners.push(vt)}addProgressiveReadListener(vt){this._progressiveReadListeners.push(vt)}addProgressiveDoneListener(vt){this._progressiveDoneListeners.push(vt)}onDataRange(vt,St){for(const Tt of this._rangeListeners)Tt(vt,St)}onDataProgress(vt,St){this._readyCapability.promise.then(()=>{for(const Tt of this._progressListeners)Tt(vt,St)})}onDataProgressiveRead(vt){this._readyCapability.promise.then(()=>{for(const St of this._progressiveReadListeners)St(vt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const vt of this._progressiveDoneListeners)vt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(vt,St){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(vt,St){this._pdfInfo=vt,this._transport=St,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Tt=>{if(!Tt)return Tt;const bt=[];for(const At in Tt)bt.push(...Tt[At]);return bt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(vt){return this._transport.getPage(vt)}getPageIndex(vt){return this._transport.getPageIndex(vt)}getDestinations(){return this._transport.getDestinations()}getDestination(vt){return this._transport.getDestination(vt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(vt=!1){return this._transport.startCleanup(vt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(vt,St,Tt,bt=!1){fn(this,$);fn(this,_,null);fn(this,j,!1);this._pageIndex=vt,this._pageInfo=St,this._transport=Tt,this._stats=bt?new _display_utils.StatTimer:null,this._pdfBug=bt,this.commonObjs=Tt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:vt,rotation:St=this.rotate,offsetX:Tt=0,offsetY:bt=0,dontFlip:At=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:vt,rotation:St,offsetX:Tt,offsetY:bt,dontFlip:At})}getAnnotations({intent:vt="display"}={}){const St=this._transport.getRenderingIntent(vt);return this._transport.getAnnotations(this._pageIndex,St.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var vt;return((vt=this._transport._htmlForXfa)==null?void 0:vt.children[this._pageIndex])||null}render({canvasContext:vt,viewport:St,intent:Tt="display",annotationMode:bt=_util.AnnotationMode.ENABLE,transform:At=null,background:Pt=null,optionalContentConfigPromise:en=null,annotationCanvasMap:Wt=null,pageColors:Jt=null,printAnnotationStorage:zt=null}){var Ct,_t;(Ct=this._stats)==null||Ct.time("Overall");const Ht=this._transport.getRenderingIntent(Tt,bt,zt);pn(this,j,!1),Qt(this,$,Zs).call(this),en||(en=this._transport.getOptionalContentConfig());let Rt=this._intentStates.get(Ht.cacheKey);Rt||(Rt=Object.create(null),this._intentStates.set(Ht.cacheKey,Rt)),Rt.streamReaderCancelTimeout&&(clearTimeout(Rt.streamReaderCancelTimeout),Rt.streamReaderCancelTimeout=null);const jt=!!(Ht.renderingIntent&_util.RenderingIntentFlag.PRINT);Rt.displayReadyCapability||(Rt.displayReadyCapability=new _util.PromiseCapability,Rt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_t=this._stats)==null||_t.time("Page Request"),this._pumpOperatorList(Ht));const Zt=Nt=>{var Lt,It;Rt.renderTasks.delete(Ot),(this._maybeCleanupAfterRender||jt)&&pn(this,j,!0),Qt(this,$,Rs).call(this,!jt),Nt?(Ot.capability.reject(Nt),this._abortOperatorList({intentState:Rt,reason:Nt instanceof Error?Nt:new Error(Nt)})):Ot.capability.resolve(),(Lt=this._stats)==null||Lt.timeEnd("Rendering"),(It=this._stats)==null||It.timeEnd("Overall")},Ot=new InternalRenderTask({callback:Zt,params:{canvasContext:vt,viewport:St,transform:At,background:Pt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Wt,operatorList:Rt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!jt,pdfBug:this._pdfBug,pageColors:Jt});(Rt.renderTasks||(Rt.renderTasks=new Set)).add(Ot);const wt=Ot.task;return Promise.all([Rt.displayReadyCapability.promise,en]).then(([Nt,Lt])=>{var It;if(this.destroyed){Zt();return}(It=this._stats)==null||It.time("Rendering"),Ot.initializeGraphics({transparency:Nt,optionalContentConfig:Lt}),Ot.operatorListChanged()}).catch(Zt),wt}getOperatorList({intent:vt="display",annotationMode:St=_util.AnnotationMode.ENABLE,printAnnotationStorage:Tt=null}={}){var Wt;function bt(){Pt.operatorList.lastChunk&&(Pt.opListReadCapability.resolve(Pt.operatorList),Pt.renderTasks.delete(en))}const At=this._transport.getRenderingIntent(vt,St,Tt,!0);let Pt=this._intentStates.get(At.cacheKey);Pt||(Pt=Object.create(null),this._intentStates.set(At.cacheKey,Pt));let en;return Pt.opListReadCapability||(en=Object.create(null),en.operatorListChanged=bt,Pt.opListReadCapability=new _util.PromiseCapability,(Pt.renderTasks||(Pt.renderTasks=new Set)).add(en),Pt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Wt=this._stats)==null||Wt.time("Page Request"),this._pumpOperatorList(At)),Pt.opListReadCapability.promise}streamTextContent({includeMarkedContent:vt=!1,disableNormalization:St=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:vt===!0,disableNormalization:St===!0},{highWaterMark:100,size(bt){return bt.items.length}})}getTextContent(vt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Tt=>_xfa_text.XfaText.textContent(Tt));const St=this.streamTextContent(vt);return new Promise(function(Tt,bt){function At(){Pt.read().then(function({value:Wt,done:Jt}){if(Jt){Tt(en);return}Object.assign(en.styles,Wt.styles),en.items.push(...Wt.items),At()},bt)}const Pt=St.getReader(),en={items:[],styles:Object.create(null)};At()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const vt=[];for(const St of this._intentStates.values())if(this._abortOperatorList({intentState:St,reason:new Error("Page was destroyed."),force:!0}),!St.opListReadCapability)for(const Tt of St.renderTasks)vt.push(Tt.completed),Tt.cancel();return this.objs.clear(),pn(this,j,!1),Qt(this,$,Zs).call(this),Promise.all(vt)}cleanup(vt=!1){pn(this,j,!0);const St=Qt(this,$,Rs).call(this,!1);return vt&&St&&this._stats&&(this._stats=new _display_utils.StatTimer),St}_startRenderPage(vt,St){var bt,At;const Tt=this._intentStates.get(St);Tt&&((bt=this._stats)==null||bt.timeEnd("Page Request"),(At=Tt.displayReadyCapability)==null||At.resolve(vt))}_renderPageChunk(vt,St){for(let Tt=0,bt=vt.length;Tt<bt;Tt++)St.operatorList.fnArray.push(vt.fnArray[Tt]),St.operatorList.argsArray.push(vt.argsArray[Tt]);St.operatorList.lastChunk=vt.lastChunk,St.operatorList.separateAnnots=vt.separateAnnots;for(const Tt of St.renderTasks)Tt.operatorListChanged();vt.lastChunk&&Qt(this,$,Rs).call(this,!0)}_pumpOperatorList({renderingIntent:vt,cacheKey:St,annotationStorageSerializable:Tt}){const{map:bt,transfers:At}=Tt,en=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:vt,cacheKey:St,annotationStorage:bt},At).getReader(),Wt=this._intentStates.get(St);Wt.streamReader=en;const Jt=()=>{en.read().then(({value:zt,done:Ht})=>{if(Ht){Wt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(zt,Wt),Jt())},zt=>{if(Wt.streamReader=null,!this._transport.destroyed){if(Wt.operatorList){Wt.operatorList.lastChunk=!0;for(const Ht of Wt.renderTasks)Ht.operatorListChanged();Qt(this,$,Rs).call(this,!0)}if(Wt.displayReadyCapability)Wt.displayReadyCapability.reject(zt);else if(Wt.opListReadCapability)Wt.opListReadCapability.reject(zt);else throw zt}})};Jt()}_abortOperatorList({intentState:vt,reason:St,force:Tt=!1}){if(vt.streamReader){if(vt.streamReaderCancelTimeout&&(clearTimeout(vt.streamReaderCancelTimeout),vt.streamReaderCancelTimeout=null),!Tt){if(vt.renderTasks.size>0)return;if(St instanceof _display_utils.RenderingCancelledException){let bt=RENDERING_CANCELLED_TIMEOUT;St.extraDelay>0&&St.extraDelay<1e3&&(bt+=St.extraDelay),vt.streamReaderCancelTimeout=setTimeout(()=>{vt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:vt,reason:St,force:!0})},bt);return}}if(vt.streamReader.cancel(new _util.AbortException(St.message)).catch(()=>{}),vt.streamReader=null,!this._transport.destroyed){for(const[bt,At]of this._intentStates)if(At===vt){this._intentStates.delete(bt);break}this.cleanup()}}}get stats(){return this._stats}}_=new WeakMap,j=new WeakMap,$=new WeakSet,Rs=function(vt=!1){if(Qt(this,$,Zs).call(this),!yt(this,j)||this.destroyed)return!1;if(vt)return pn(this,_,setTimeout(()=>{pn(this,_,null),Qt(this,$,Rs).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:St,operatorList:Tt}of this._intentStates.values())if(St.size>0||!Tt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),pn(this,j,!1),!0},Zs=function(){yt(this,_)&&(clearTimeout(yt(this,_)),pn(this,_,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){fn(this,tt,new Set);fn(this,nt,Promise.resolve())}postMessage(vt,St){const Tt={data:structuredClone(vt,St?{transfer:St}:null)};yt(this,nt).then(()=>{for(const bt of yt(this,tt))bt.call(this,Tt)})}addEventListener(vt,St){yt(this,tt).add(St)}removeEventListener(vt,St){yt(this,tt).delete(St)}terminate(){yt(this,tt).clear()}}tt=new WeakMap,nt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const xt=(rt=document==null?void 0:document.currentScript)==null?void 0:rt.src;xt&&(PDFWorkerUtil.fallbackWorkerSrc=xt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(xt,vt){let St;try{if(St=new URL(xt),!St.origin||St.origin==="null")return!1}catch{return!1}const Tt=new URL(vt,St);return St.origin===Tt.origin},PDFWorkerUtil.createCDNWrapper=function(xt){const vt=`importScripts("${xt}");`;return URL.createObjectURL(new Blob([vt]))}}const _PDFWorker=class _PDFWorker{constructor({name:xt=null,port:vt=null,verbosity:St=(0,_util.getVerbosityLevel)()}={}){var Tt;if(this.name=xt,this.destroyed=!1,this.verbosity=St,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,vt){if((Tt=yt(_PDFWorker,it))!=null&&Tt.has(vt))throw new Error("Cannot use more than one PDFWorker per port.");(yt(_PDFWorker,it)||pn(_PDFWorker,it,new WeakMap)).set(vt,this),this._initializeFromPort(vt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(xt){this._port=xt,this._messageHandler=new _message_handler.MessageHandler("main","worker",xt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:xt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,xt)||(xt=PDFWorkerUtil.createCDNWrapper(new URL(xt,window.location).href));const vt=new Worker(xt),St=new _message_handler.MessageHandler("main","worker",vt),Tt=()=>{vt.removeEventListener("error",bt),St.destroy(),vt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},bt=()=>{this._webWorker||Tt()};vt.addEventListener("error",bt),St.on("test",Pt=>{if(vt.removeEventListener("error",bt),this.destroyed){Tt();return}Pt?(this._messageHandler=St,this._port=vt,this._webWorker=vt,this._readyCapability.resolve(),St.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),St.destroy(),vt.terminate())}),St.on("ready",Pt=>{if(vt.removeEventListener("error",bt),this.destroyed){Tt();return}try{At()}catch{this._setupFakeWorker()}});const At=()=>{const Pt=new Uint8Array;St.send("test",Pt,[Pt.buffer])};At();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(xt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const vt=new LoopbackPort;this._port=vt;const St=`fake${PDFWorkerUtil.fakeWorkerId++}`,Tt=new _message_handler.MessageHandler(St+"_worker",St,vt);xt.setup(Tt,vt);const bt=new _message_handler.MessageHandler(St,St+"_worker",vt);this._messageHandler=bt,this._readyCapability.resolve(),bt.send("configure",{verbosity:this.verbosity})}).catch(xt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${xt.message}".`))})}destroy(){var xt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(xt=yt(_PDFWorker,it))==null||xt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(xt){var St;if(!(xt!=null&&xt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const vt=(St=yt(this,it))==null?void 0:St.get(xt.port);if(vt){if(vt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return vt}return new _PDFWorker(xt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var xt;try{return((xt=globalThis.pdfjsWorker)==null?void 0:xt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};it=new WeakMap,fn(_PDFWorker,it);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(vt,St,Tt,bt,At){fn(this,ut);fn(this,st,new Map);fn(this,ot,new Map);fn(this,lt,new Map);fn(this,at,null);this.messageHandler=vt,this.loadingTask=St,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:bt.ownerDocument,styleElement:bt.styleElement}),this._params=bt,this.canvasFactory=At.canvasFactory,this.filterFactory=At.filterFactory,this.cMapReaderFactory=At.cMapReaderFactory,this.standardFontDataFactory=At.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Tt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(vt,St=_util.AnnotationMode.ENABLE,Tt=null,bt=!1){let At=_util.RenderingIntentFlag.DISPLAY,Pt=_annotation_storage.SerializableEmpty;switch(vt){case"any":At=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":At=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${vt}`)}switch(St){case _util.AnnotationMode.DISABLE:At+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:At+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:At+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Pt=(At&_util.RenderingIntentFlag.PRINT&&Tt instanceof _annotation_storage.PrintAnnotationStorage?Tt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${St}`)}return bt&&(At+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:At,cacheKey:`${At}_${Pt.hash}`,annotationStorageSerializable:Pt}}destroy(){var Tt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Tt=yt(this,at))==null||Tt.reject(new Error("Worker was destroyed during onPassword callback"));const vt=[];for(const bt of yt(this,ot).values())vt.push(bt._destroy());yt(this,ot).clear(),yt(this,lt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const St=this.messageHandler.sendWithPromise("Terminate",null);return vt.push(St),Promise.all(vt).then(()=>{var bt;this.commonObjs.clear(),this.fontLoader.clear(),yt(this,st).clear(),this.filterFactory.destroy(),(bt=this._networkStream)==null||bt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:vt,loadingTask:St}=this;vt.on("GetReader",(Tt,bt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=At=>{this._lastProgress={loaded:At.loaded,total:At.total}},bt.onPull=()=>{this._fullReader.read().then(function({value:At,done:Pt}){if(Pt){bt.close();return}(0,_util.assert)(At instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(At),1,[At])}).catch(At=>{bt.error(At)})},bt.onCancel=At=>{this._fullReader.cancel(At),bt.ready.catch(Pt=>{if(!this.destroyed)throw Pt})}}),vt.on("ReaderHeadersReady",Tt=>{const bt=new _util.PromiseCapability,At=this._fullReader;return At.headersReady.then(()=>{var Pt;(!At.isStreamingSupported||!At.isRangeSupported)&&(this._lastProgress&&((Pt=St.onProgress)==null||Pt.call(St,this._lastProgress)),At.onProgress=en=>{var Wt;(Wt=St.onProgress)==null||Wt.call(St,{loaded:en.loaded,total:en.total})}),bt.resolve({isStreamingSupported:At.isStreamingSupported,isRangeSupported:At.isRangeSupported,contentLength:At.contentLength})},bt.reject),bt.promise}),vt.on("GetRangeReader",(Tt,bt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const At=this._networkStream.getRangeReader(Tt.begin,Tt.end);if(!At){bt.close();return}bt.onPull=()=>{At.read().then(function({value:Pt,done:en}){if(en){bt.close();return}(0,_util.assert)(Pt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),bt.enqueue(new Uint8Array(Pt),1,[Pt])}).catch(Pt=>{bt.error(Pt)})},bt.onCancel=Pt=>{At.cancel(Pt),bt.ready.catch(en=>{if(!this.destroyed)throw en})}}),vt.on("GetDoc",({pdfInfo:Tt})=>{this._numPages=Tt.numPages,this._htmlForXfa=Tt.htmlForXfa,delete Tt.htmlForXfa,St._capability.resolve(new PDFDocumentProxy(Tt,this))}),vt.on("DocException",function(Tt){let bt;switch(Tt.name){case"PasswordException":bt=new _util.PasswordException(Tt.message,Tt.code);break;case"InvalidPDFException":bt=new _util.InvalidPDFException(Tt.message);break;case"MissingPDFException":bt=new _util.MissingPDFException(Tt.message);break;case"UnexpectedResponseException":bt=new _util.UnexpectedResponseException(Tt.message,Tt.status);break;case"UnknownErrorException":bt=new _util.UnknownErrorException(Tt.message,Tt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}St._capability.reject(bt)}),vt.on("PasswordRequest",Tt=>{if(pn(this,at,new _util.PromiseCapability),St.onPassword){const bt=At=>{At instanceof Error?yt(this,at).reject(At):yt(this,at).resolve({password:At})};try{St.onPassword(bt,Tt.code)}catch(At){yt(this,at).reject(At)}}else yt(this,at).reject(new _util.PasswordException(Tt.message,Tt.code));return yt(this,at).promise}),vt.on("DataLoaded",Tt=>{var bt;(bt=St.onProgress)==null||bt.call(St,{loaded:Tt.length,total:Tt.length}),this.downloadInfoCapability.resolve(Tt)}),vt.on("StartRenderPage",Tt=>{if(this.destroyed)return;yt(this,ot).get(Tt.pageIndex)._startRenderPage(Tt.transparency,Tt.cacheKey)}),vt.on("commonobj",([Tt,bt,At])=>{var Pt;if(!this.destroyed&&!this.commonObjs.has(Tt))switch(bt){case"Font":const en=this._params;if("error"in At){const zt=At.error;(0,_util.warn)(`Error during font loading: ${zt}`),this.commonObjs.resolve(Tt,zt);break}const Wt=en.pdfBug&&((Pt=globalThis.FontInspector)!=null&&Pt.enabled)?(zt,Ht)=>globalThis.FontInspector.fontAdded(zt,Ht):null,Jt=new _font_loader.FontFaceObject(At,{isEvalSupported:en.isEvalSupported,disableFontFace:en.disableFontFace,ignoreErrors:en.ignoreErrors,inspectFont:Wt});this.fontLoader.bind(Jt).catch(zt=>vt.sendWithPromise("FontFallback",{id:Tt})).finally(()=>{!en.fontExtraProperties&&Jt.data&&(Jt.data=null),this.commonObjs.resolve(Tt,Jt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Tt,At);break;default:throw new Error(`Got unknown common object type ${bt}`)}}),vt.on("obj",([Tt,bt,At,Pt])=>{var Wt;if(this.destroyed)return;const en=yt(this,ot).get(bt);if(!en.objs.has(Tt))switch(At){case"Image":if(en.objs.resolve(Tt,Pt),Pt){let Jt;if(Pt.bitmap){const{width:zt,height:Ht}=Pt;Jt=zt*Ht*4}else Jt=((Wt=Pt.data)==null?void 0:Wt.length)||0;Jt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(en._maybeCleanupAfterRender=!0)}break;case"Pattern":en.objs.resolve(Tt,Pt);break;default:throw new Error(`Got unknown object type ${At}`)}}),vt.on("DocProgress",Tt=>{var bt;this.destroyed||(bt=St.onProgress)==null||bt.call(St,{loaded:Tt.loaded,total:Tt.total})}),vt.on("FetchBuiltInCMap",Tt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Tt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),vt.on("FetchStandardFontData",Tt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Tt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Tt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:vt,transfers:St}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:vt,filename:((Tt=this._fullReader)==null?void 0:Tt.filename)??null},St).finally(()=>{this.annotationStorage.resetModified()})}getPage(vt){if(!Number.isInteger(vt)||vt<=0||vt>this._numPages)return Promise.reject(new Error("Invalid page request."));const St=vt-1,Tt=yt(this,lt).get(St);if(Tt)return Tt;const bt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:St}).then(At=>{if(this.destroyed)throw new Error("Transport destroyed");const Pt=new PDFPageProxy(St,At,this,this._params.pdfBug);return yt(this,ot).set(St,Pt),Pt});return yt(this,lt).set(St,bt),bt}getPageIndex(vt){return typeof vt!="object"||vt===null||!Number.isInteger(vt.num)||vt.num<0||!Number.isInteger(vt.gen)||vt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:vt.num,gen:vt.gen})}getAnnotations(vt,St){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:vt,intent:St})}getFieldObjects(){return Qt(this,ut,Qs).call(this,"GetFieldObjects")}hasJSActions(){return Qt(this,ut,Qs).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(vt){return typeof vt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:vt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Qt(this,ut,Qs).call(this,"GetDocJSActions")}getPageJSActions(vt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:vt})}getStructTree(vt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:vt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(vt=>new _optional_content_config.OptionalContentConfig(vt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const vt="GetMetadata",St=yt(this,st).get(vt);if(St)return St;const Tt=this.messageHandler.sendWithPromise(vt,null).then(bt=>{var At,Pt;return{info:bt[0],metadata:bt[1]?new _metadata.Metadata(bt[1]):null,contentDispositionFilename:((At=this._fullReader)==null?void 0:At.filename)??null,contentLength:((Pt=this._fullReader)==null?void 0:Pt.contentLength)??null}});return yt(this,st).set(vt,Tt),Tt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(vt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const St of yt(this,ot).values())if(!St.cleanup())throw new Error(`startCleanup: Page ${St.pageNumber} is currently rendering.`);this.commonObjs.clear(),vt||this.fontLoader.clear(),yt(this,st).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:vt,enableXfa:St}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:vt,enableXfa:St})}}st=new WeakMap,ot=new WeakMap,lt=new WeakMap,at=new WeakMap,ut=new WeakSet,Qs=function(vt,St=null){const Tt=yt(this,st).get(vt);if(Tt)return Tt;const bt=this.messageHandler.sendWithPromise(vt,St);return yt(this,st).set(vt,bt),bt};class PDFObjects{constructor(){fn(this,ht);fn(this,ct,Object.create(null))}get(vt,St=null){if(St){const bt=Qt(this,ht,_o).call(this,vt);return bt.capability.promise.then(()=>St(bt.data)),null}const Tt=yt(this,ct)[vt];if(!(Tt!=null&&Tt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${vt}.`);return Tt.data}has(vt){const St=yt(this,ct)[vt];return(St==null?void 0:St.capability.settled)||!1}resolve(vt,St=null){const Tt=Qt(this,ht,_o).call(this,vt);Tt.data=St,Tt.capability.resolve()}clear(){var vt;for(const St in yt(this,ct)){const{data:Tt}=yt(this,ct)[St];(vt=Tt==null?void 0:Tt.bitmap)==null||vt.close()}pn(this,ct,Object.create(null))}}ct=new WeakMap,ht=new WeakSet,_o=function(vt){var St;return(St=yt(this,ct))[vt]||(St[vt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(vt){fn(this,mt,null);pn(this,mt,vt),this.onContinue=null}get promise(){return yt(this,mt).capability.promise}cancel(vt=0){yt(this,mt).cancel(null,vt)}get separateAnnots(){const{separateAnnots:vt}=yt(this,mt).operatorList;if(!vt)return!1;const{annotationCanvasMap:St}=yt(this,mt);return vt.form||vt.canvas&&(St==null?void 0:St.size)>0}}mt=new WeakMap,exports.RenderTask=RenderTask;const gt=class gt{constructor({callback:vt,params:St,objs:Tt,commonObjs:bt,annotationCanvasMap:At,operatorList:Pt,pageIndex:en,canvasFactory:Wt,filterFactory:Jt,useRequestAnimationFrame:zt=!1,pdfBug:Ht=!1,pageColors:Rt=null}){this.callback=vt,this.params=St,this.objs=Tt,this.commonObjs=bt,this.annotationCanvasMap=At,this.operatorListIdx=null,this.operatorList=Pt,this._pageIndex=en,this.canvasFactory=Wt,this.filterFactory=Jt,this._pdfBug=Ht,this.pageColors=Rt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=zt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=St.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:vt=!1,optionalContentConfig:St}){var en,Wt;if(this.cancelled)return;if(this._canvas){if(yt(gt,ft).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");yt(gt,ft).add(this._canvas)}this._pdfBug&&((en=globalThis.StepperManager)!=null&&en.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Tt,viewport:bt,transform:At,background:Pt}=this.params;this.gfx=new _canvas.CanvasGraphics(Tt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:St},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:At,viewport:bt,transparency:vt,background:Pt}),this.operatorListIdx=0,this.graphicsReady=!0,(Wt=this.graphicsReadyCallback)==null||Wt.call(this)}cancel(vt=null,St=0){var Tt;this.running=!1,this.cancelled=!0,(Tt=this.gfx)==null||Tt.endDrawing(),yt(gt,ft).delete(this._canvas),this.callback(vt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,St))}operatorListChanged(){var vt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(vt=this.stepper)==null||vt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),yt(gt,ft).delete(this._canvas),this.callback())))}};ft=new WeakMap,fn(gt,ft,new WeakSet);let InternalRenderTask=gt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(b,g,_)=>{var rt,it,st,Ul,lt;Object.defineProperty(g,"__esModule",{value:!0}),g.SerializableEmpty=g.PrintAnnotationStorage=g.AnnotationStorage=void 0;var j=_(1),$=_(4),_e=_(8);const et=Object.freeze({map:null,hash:"",transfers:void 0});g.SerializableEmpty=et;class tt{constructor(){fn(this,st);fn(this,rt,!1);fn(this,it,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ut,dt){const ct=yt(this,it).get(ut);return ct===void 0?dt:Object.assign(dt,ct)}getRawValue(ut){return yt(this,it).get(ut)}remove(ut){if(yt(this,it).delete(ut),yt(this,it).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const dt of yt(this,it).values())if(dt instanceof $.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ut,dt){const ct=yt(this,it).get(ut);let ht=!1;if(ct!==void 0)for(const[pt,mt]of Object.entries(dt))ct[pt]!==mt&&(ht=!0,ct[pt]=mt);else ht=!0,yt(this,it).set(ut,dt);ht&&Qt(this,st,Ul).call(this),dt instanceof $.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(dt.constructor._type)}has(ut){return yt(this,it).has(ut)}getAll(){return yt(this,it).size>0?(0,j.objectFromMap)(yt(this,it)):null}setAll(ut){for(const[dt,ct]of Object.entries(ut))this.setValue(dt,ct)}get size(){return yt(this,it).size}resetModified(){yt(this,rt)&&(pn(this,rt,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new nt(this)}get serializable(){if(yt(this,it).size===0)return et;const ut=new Map,dt=new _e.MurmurHash3_64,ct=[],ht=Object.create(null);let pt=!1;for(const[mt,ft]of yt(this,it)){const gt=ft instanceof $.AnnotationEditor?ft.serialize(!1,ht):ft;gt&&(ut.set(mt,gt),dt.update(`${mt}:${JSON.stringify(gt)}`),pt||(pt=!!gt.bitmap))}if(pt)for(const mt of ut.values())mt.bitmap&&ct.push(mt.bitmap);return ut.size>0?{map:ut,hash:dt.hexdigest(),transfers:ct}:et}}rt=new WeakMap,it=new WeakMap,st=new WeakSet,Ul=function(){yt(this,rt)||(pn(this,rt,!0),typeof this.onSetModified=="function"&&this.onSetModified())},g.AnnotationStorage=tt;class nt extends tt{constructor(dt){super();fn(this,lt);const{map:ct,hash:ht,transfers:pt}=dt.serializable,mt=structuredClone(ct,pt?{transfer:pt}:null);pn(this,lt,{map:mt,hash:ht,transfers:pt})}get print(){(0,j.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return yt(this,lt)}}lt=new WeakMap,g.PrintAnnotationStorage=nt},(b,g,_)=>{var nt,rt,it,st,ot,lt,at,ut,dt,ct,ht,pt,mt,ft,gt,Ro,Po,St,Mo,Oo,Wl,Gl,Kl,Do,Xl;Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationEditor=void 0;var j=_(5),$=_(1),_e=_(6);const zt=class zt{constructor(Rt){fn(this,gt);fn(this,nt,"");fn(this,rt,!1);fn(this,it,null);fn(this,st,null);fn(this,ot,null);fn(this,lt,!1);fn(this,at,null);fn(this,ut,this.focusin.bind(this));fn(this,dt,this.focusout.bind(this));fn(this,ct,!1);fn(this,ht,!1);fn(this,pt,!1);$r(this,"_initialOptions",Object.create(null));$r(this,"_uiManager",null);$r(this,"_focusEventsAllowed",!0);$r(this,"_l10nPromise",null);fn(this,mt,!1);fn(this,ft,zt._zIndex++);this.constructor===zt&&(0,$.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Rt.parent,this.id=Rt.id,this.width=this.height=null,this.pageIndex=Rt.parent.pageIndex,this.name=Rt.name,this.div=null,this._uiManager=Rt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Rt.isCentered,this._structTreeParentId=null;const{rotation:jt,rawDims:{pageWidth:Zt,pageHeight:Ot,pageX:wt,pageY:Ct}}=this.parent.viewport;this.rotation=jt,this.pageRotation=(360+jt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Zt,Ot],this.pageTranslation=[wt,Ct];const[_t,Nt]=this.parentDimensions;this.x=Rt.x/_t,this.y=Rt.y/Nt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,$.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Rt){const jt=new tt({id:Rt.parent.getNextId(),parent:Rt.parent,uiManager:Rt._uiManager});jt.annotationElementId=Rt.annotationElementId,jt.deleted=!0,jt._uiManager.addToAnnotationStorage(jt)}static initialize(Rt,jt=null){if(zt._l10nPromise||(zt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Ot=>[Ot,Rt.get(Ot)]))),jt!=null&&jt.strings)for(const Ot of jt.strings)zt._l10nPromise.set(Ot,Rt.get(Ot));if(zt._borderLineWidth!==-1)return;const Zt=getComputedStyle(document.documentElement);zt._borderLineWidth=parseFloat(Zt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Rt,jt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Rt){return!1}static paste(Rt,jt){(0,$.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return yt(this,mt)}set _isDraggable(Rt){var jt;pn(this,mt,Rt),(jt=this.div)==null||jt.classList.toggle("draggable",Rt)}center(){const[Rt,jt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*jt/(Rt*2),this.y+=this.width*Rt/(jt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*jt/(Rt*2),this.y-=this.width*Rt/(jt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Rt){this._uiManager.addCommands(Rt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=yt(this,ft)}setParent(Rt){Rt!==null&&(this.pageIndex=Rt.pageIndex,this.pageDimensions=Rt.pageDimensions),this.parent=Rt}focusin(Rt){this._focusEventsAllowed&&(yt(this,ct)?pn(this,ct,!1):this.parent.setSelected(this))}focusout(Rt){var Zt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const jt=Rt.relatedTarget;jt!=null&&jt.closest(`#${this.id}`)||(Rt.preventDefault(),(Zt=this.parent)!=null&&Zt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Rt,jt,Zt,Ot){const[wt,Ct]=this.parentDimensions;[Zt,Ot]=this.screenToPageTranslation(Zt,Ot),this.x=(Rt+Zt)/wt,this.y=(jt+Ot)/Ct,this.fixAndSetPosition()}translate(Rt,jt){Qt(this,gt,Ro).call(this,this.parentDimensions,Rt,jt)}translateInPage(Rt,jt){Qt(this,gt,Ro).call(this,this.pageDimensions,Rt,jt),this.div.scrollIntoView({block:"nearest"})}drag(Rt,jt){const[Zt,Ot]=this.parentDimensions;if(this.x+=Rt/Zt,this.y+=jt/Ot,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Lt,y:It}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Lt,It)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:wt,y:Ct}=this;const[_t,Nt]=Qt(this,gt,Po).call(this);wt+=_t,Ct+=Nt,this.div.style.left=`${(100*wt).toFixed(2)}%`,this.div.style.top=`${(100*Ct).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Rt,jt]=this.pageDimensions;let{x:Zt,y:Ot,width:wt,height:Ct}=this;switch(wt*=Rt,Ct*=jt,Zt*=Rt,Ot*=jt,this.rotation){case 0:Zt=Math.max(0,Math.min(Rt-wt,Zt)),Ot=Math.max(0,Math.min(jt-Ct,Ot));break;case 90:Zt=Math.max(0,Math.min(Rt-Ct,Zt)),Ot=Math.min(jt,Math.max(wt,Ot));break;case 180:Zt=Math.min(Rt,Math.max(wt,Zt)),Ot=Math.min(jt,Math.max(Ct,Ot));break;case 270:Zt=Math.min(Rt,Math.max(Ct,Zt)),Ot=Math.max(0,Math.min(jt-wt,Ot));break}this.x=Zt/=Rt,this.y=Ot/=jt;const[_t,Nt]=Qt(this,gt,Po).call(this);Zt+=_t,Ot+=Nt;const{style:Lt}=this.div;Lt.left=`${(100*Zt).toFixed(2)}%`,Lt.top=`${(100*Ot).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Rt,jt){var Zt;return Qt(Zt=zt,St,Mo).call(Zt,Rt,jt,this.parentRotation)}pageTranslationToScreen(Rt,jt){var Zt;return Qt(Zt=zt,St,Mo).call(Zt,Rt,jt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Rt,pageDimensions:[jt,Zt]}=this,Ot=jt*Rt,wt=Zt*Rt;return $.FeatureTest.isCSSRoundSupported?[Math.round(Ot),Math.round(wt)]:[Ot,wt]}setDims(Rt,jt){var wt;const[Zt,Ot]=this.parentDimensions;this.div.style.width=`${(100*Rt/Zt).toFixed(2)}%`,yt(this,lt)||(this.div.style.height=`${(100*jt/Ot).toFixed(2)}%`),(wt=yt(this,it))==null||wt.classList.toggle("small",Rt<zt.SMALL_EDITOR_SIZE||jt<zt.SMALL_EDITOR_SIZE)}fixDims(){const{style:Rt}=this.div,{height:jt,width:Zt}=Rt,Ot=Zt.endsWith("%"),wt=!yt(this,lt)&&jt.endsWith("%");if(Ot&&wt)return;const[Ct,_t]=this.parentDimensions;Ot||(Rt.width=`${(100*parseFloat(Zt)/Ct).toFixed(2)}%`),!yt(this,lt)&&!wt&&(Rt.height=`${(100*parseFloat(jt)/_t).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(yt(this,it))return;const Rt=pn(this,it,document.createElement("button"));Rt.className="altText";const jt=await zt._l10nPromise.get("editor_alt_text_button_label");Rt.textContent=jt,Rt.setAttribute("aria-label",jt),Rt.tabIndex="0",Rt.addEventListener("contextmenu",_e.noContextMenu),Rt.addEventListener("pointerdown",Zt=>Zt.stopPropagation()),Rt.addEventListener("click",Zt=>{Zt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Rt.addEventListener("keydown",Zt=>{Zt.target===Rt&&Zt.key==="Enter"&&(Zt.preventDefault(),this._uiManager.editAltText(this))}),Qt(this,gt,Do).call(this),this.div.append(Rt),zt.SMALL_EDITOR_SIZE||(zt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Rt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:yt(this,nt),decorative:yt(this,rt)}}set altTextData({altText:Rt,decorative:jt}){yt(this,nt)===Rt&&yt(this,rt)===jt||(pn(this,nt,Rt),pn(this,rt,jt),Qt(this,gt,Do).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",yt(this,ut)),this.div.addEventListener("focusout",yt(this,dt));const[Rt,jt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*jt/Rt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Rt/jt).toFixed(2)}%`);const[Zt,Ot]=this.getInitialTranslation();return this.translate(Zt,Ot),(0,j.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Rt){const{isMac:jt}=$.FeatureTest.platform;if(Rt.button!==0||Rt.ctrlKey&&jt){Rt.preventDefault();return}pn(this,ct,!0),Qt(this,gt,Xl).call(this,Rt)}moveInDOM(){var Rt;(Rt=this.parent)==null||Rt.moveEditorInDOM(this)}_setParentAndPosition(Rt,jt,Zt){Rt.changeParent(this),this.x=jt,this.y=Zt,this.fixAndSetPosition()}getRect(Rt,jt){const Zt=this.parentScale,[Ot,wt]=this.pageDimensions,[Ct,_t]=this.pageTranslation,Nt=Rt/Zt,Lt=jt/Zt,It=this.x*Ot,Yt=this.y*wt,mn=this.width*Ot,vn=this.height*wt;switch(this.rotation){case 0:return[It+Nt+Ct,wt-Yt-Lt-vn+_t,It+Nt+mn+Ct,wt-Yt-Lt+_t];case 90:return[It+Lt+Ct,wt-Yt+Nt+_t,It+Lt+vn+Ct,wt-Yt+Nt+mn+_t];case 180:return[It-Nt-mn+Ct,wt-Yt+Lt+_t,It-Nt+Ct,wt-Yt+Lt+vn+_t];case 270:return[It-Lt-vn+Ct,wt-Yt-Nt-mn+_t,It-Lt+Ct,wt-Yt-Nt+_t];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Rt,jt){const[Zt,Ot,wt,Ct]=Rt,_t=wt-Zt,Nt=Ct-Ot;switch(this.rotation){case 0:return[Zt,jt-Ct,_t,Nt];case 90:return[Zt,jt-Ot,Nt,_t];case 180:return[wt,jt-Ot,_t,Nt];case 270:return[wt,jt-Ct,Nt,_t];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pn(this,pt,!0)}disableEditMode(){pn(this,pt,!1)}isInEditMode(){return yt(this,pt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Rt,jt;(Rt=this.div)==null||Rt.addEventListener("focusin",yt(this,ut)),(jt=this.div)==null||jt.addEventListener("focusout",yt(this,dt))}serialize(Rt=!1,jt=null){(0,$.unreachable)("An editor must be serializable")}static deserialize(Rt,jt,Zt){const Ot=new this.prototype.constructor({parent:jt,id:jt.getNextId(),uiManager:Zt});Ot.rotation=Rt.rotation;const[wt,Ct]=Ot.pageDimensions,[_t,Nt,Lt,It]=Ot.getRectInCurrentCoords(Rt.rect,Ct);return Ot.x=_t/wt,Ot.y=Nt/Ct,Ot.width=Lt/wt,Ot.height=It/Ct,Ot}remove(){var Rt;this.div.removeEventListener("focusin",yt(this,ut)),this.div.removeEventListener("focusout",yt(this,dt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Rt=yt(this,it))==null||Rt.remove(),pn(this,it,null),pn(this,st,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Qt(this,gt,Wl).call(this),yt(this,at).classList.remove("hidden"))}select(){var Rt;this.makeResizable(),(Rt=this.div)==null||Rt.classList.add("selectedEditor")}unselect(){var Rt,jt,Zt;(Rt=yt(this,at))==null||Rt.classList.add("hidden"),(jt=this.div)==null||jt.classList.remove("selectedEditor"),(Zt=this.div)!=null&&Zt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Rt,jt){}disableEditing(){yt(this,it)&&(yt(this,it).hidden=!0)}enableEditing(){yt(this,it)&&(yt(this,it).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return yt(this,ht)}set isEditing(Rt){pn(this,ht,Rt),this.parent&&(Rt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Rt,jt){pn(this,lt,!0);const Zt=Rt/jt,{style:Ot}=this.div;Ot.aspectRatio=Zt,Ot.height="auto"}static get MIN_SIZE(){return 16}};nt=new WeakMap,rt=new WeakMap,it=new WeakMap,st=new WeakMap,ot=new WeakMap,lt=new WeakMap,at=new WeakMap,ut=new WeakMap,dt=new WeakMap,ct=new WeakMap,ht=new WeakMap,pt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakSet,Ro=function([Rt,jt],Zt,Ot){[Zt,Ot]=this.screenToPageTranslation(Zt,Ot),this.x+=Zt/Rt,this.y+=Ot/jt,this.fixAndSetPosition()},Po=function(){const[Rt,jt]=this.parentDimensions,{_borderLineWidth:Zt}=zt,Ot=Zt/Rt,wt=Zt/jt;switch(this.rotation){case 90:return[-Ot,wt];case 180:return[Ot,wt];case 270:return[Ot,-wt];default:return[-Ot,-wt]}},St=new WeakSet,Mo=function(Rt,jt,Zt){switch(Zt){case 90:return[jt,-Rt];case 180:return[-Rt,-jt];case 270:return[-jt,Rt];default:return[Rt,jt]}},Oo=function(Rt){switch(Rt){case 90:{const[jt,Zt]=this.pageDimensions;return[0,-jt/Zt,Zt/jt,0]}case 180:return[-1,0,0,-1];case 270:{const[jt,Zt]=this.pageDimensions;return[0,jt/Zt,-Zt/jt,0]}default:return[1,0,0,1]}},Wl=function(){if(yt(this,at))return;pn(this,at,document.createElement("div")),yt(this,at).classList.add("resizers");const Rt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Rt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const jt of Rt){const Zt=document.createElement("div");yt(this,at).append(Zt),Zt.classList.add("resizer",jt),Zt.addEventListener("pointerdown",Qt(this,gt,Gl).bind(this,jt)),Zt.addEventListener("contextmenu",_e.noContextMenu)}this.div.prepend(yt(this,at))},Gl=function(Rt,jt){jt.preventDefault();const{isMac:Zt}=$.FeatureTest.platform;if(jt.button!==0||jt.ctrlKey&&Zt)return;const Ot=Qt(this,gt,Kl).bind(this,Rt),wt=this._isDraggable;this._isDraggable=!1;const Ct={passive:!0,capture:!0};window.addEventListener("pointermove",Ot,Ct);const _t=this.x,Nt=this.y,Lt=this.width,It=this.height,Yt=this.parent.div.style.cursor,mn=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(jt.target).cursor;const vn=()=>{this._isDraggable=wt,window.removeEventListener("pointerup",vn),window.removeEventListener("blur",vn),window.removeEventListener("pointermove",Ot,Ct),this.parent.div.style.cursor=Yt,this.div.style.cursor=mn;const xn=this.x,En=this.y,An=this.width,kn=this.height;xn===_t&&En===Nt&&An===Lt&&kn===It||this.addCommands({cmd:()=>{this.width=An,this.height=kn,this.x=xn,this.y=En;const[ln,un]=this.parentDimensions;this.setDims(ln*An,un*kn),this.fixAndSetPosition()},undo:()=>{this.width=Lt,this.height=It,this.x=_t,this.y=Nt;const[ln,un]=this.parentDimensions;this.setDims(ln*Lt,un*It),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",vn),window.addEventListener("blur",vn)},Kl=function(Rt,jt){const[Zt,Ot]=this.parentDimensions,wt=this.x,Ct=this.y,_t=this.width,Nt=this.height,Lt=zt.MIN_SIZE/Zt,It=zt.MIN_SIZE/Ot,Yt=Hn=>Math.round(Hn*1e4)/1e4,mn=Qt(this,gt,Oo).call(this,this.rotation),vn=(Hn,Zn)=>[mn[0]*Hn+mn[2]*Zn,mn[1]*Hn+mn[3]*Zn],xn=Qt(this,gt,Oo).call(this,360-this.rotation),En=(Hn,Zn)=>[xn[0]*Hn+xn[2]*Zn,xn[1]*Hn+xn[3]*Zn];let An,kn,ln=!1,un=!1;switch(Rt){case"topLeft":ln=!0,An=(Hn,Zn)=>[0,0],kn=(Hn,Zn)=>[Hn,Zn];break;case"topMiddle":An=(Hn,Zn)=>[Hn/2,0],kn=(Hn,Zn)=>[Hn/2,Zn];break;case"topRight":ln=!0,An=(Hn,Zn)=>[Hn,0],kn=(Hn,Zn)=>[0,Zn];break;case"middleRight":un=!0,An=(Hn,Zn)=>[Hn,Zn/2],kn=(Hn,Zn)=>[0,Zn/2];break;case"bottomRight":ln=!0,An=(Hn,Zn)=>[Hn,Zn],kn=(Hn,Zn)=>[0,0];break;case"bottomMiddle":An=(Hn,Zn)=>[Hn/2,Zn],kn=(Hn,Zn)=>[Hn/2,0];break;case"bottomLeft":ln=!0,An=(Hn,Zn)=>[0,Zn],kn=(Hn,Zn)=>[Hn,0];break;case"middleLeft":un=!0,An=(Hn,Zn)=>[0,Zn/2],kn=(Hn,Zn)=>[Hn,Zn/2];break}const Mt=An(_t,Nt),Bt=kn(_t,Nt);let nn=vn(...Bt);const dn=Yt(wt+nn[0]),Sn=Yt(Ct+nn[1]);let _n=1,Cn=1,[tn,Ln]=this.screenToPageTranslation(jt.movementX,jt.movementY);if([tn,Ln]=En(tn/Zt,Ln/Ot),ln){const Hn=Math.hypot(_t,Nt);_n=Cn=Math.max(Math.min(Math.hypot(Bt[0]-Mt[0]-tn,Bt[1]-Mt[1]-Ln)/Hn,1/_t,1/Nt),Lt/_t,It/Nt)}else un?_n=Math.max(Lt,Math.min(1,Math.abs(Bt[0]-Mt[0]-tn)))/_t:Cn=Math.max(It,Math.min(1,Math.abs(Bt[1]-Mt[1]-Ln)))/Nt;const Dn=Yt(_t*_n),ur=Yt(Nt*Cn);nn=vn(...kn(Dn,ur));const rr=dn-nn[0],br=Sn-nn[1];this.width=Dn,this.height=ur,this.x=rr,this.y=br,this.setDims(Zt*Dn,Ot*ur),this.fixAndSetPosition()},Do=async function(){var Zt;const Rt=yt(this,it);if(!Rt)return;if(!yt(this,nt)&&!yt(this,rt)){Rt.classList.remove("done"),(Zt=yt(this,st))==null||Zt.remove();return}zt._l10nPromise.get("editor_alt_text_edit_button_label").then(Ot=>{Rt.setAttribute("aria-label",Ot)});let jt=yt(this,st);if(!jt){pn(this,st,jt=document.createElement("span")),jt.className="tooltip",jt.setAttribute("role","tooltip");const Ot=jt.id=`alt-text-tooltip-${this.id}`;Rt.setAttribute("aria-describedby",Ot);const wt=100;Rt.addEventListener("mouseenter",()=>{pn(this,ot,setTimeout(()=>{pn(this,ot,null),yt(this,st).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},wt))}),Rt.addEventListener("mouseleave",()=>{var Ct;clearTimeout(yt(this,ot)),pn(this,ot,null),(Ct=yt(this,st))==null||Ct.classList.remove("show")})}Rt.classList.add("done"),jt.innerText=yt(this,rt)?await zt._l10nPromise.get("editor_alt_text_decorative_tooltip"):yt(this,nt),jt.parentNode||Rt.append(jt)},Xl=function(Rt){if(!this._isDraggable)return;const jt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Zt,Ot;jt&&(Zt={passive:!0,capture:!0},Ot=Ct=>{const[_t,Nt]=this.screenToPageTranslation(Ct.movementX,Ct.movementY);this._uiManager.dragSelectedEditors(_t,Nt)},window.addEventListener("pointermove",Ot,Zt));const wt=()=>{if(window.removeEventListener("pointerup",wt),window.removeEventListener("blur",wt),jt&&window.removeEventListener("pointermove",Ot,Zt),pn(this,ct,!1),!this._uiManager.endDragSession()){const{isMac:Ct}=$.FeatureTest.platform;Rt.ctrlKey&&!Ct||Rt.shiftKey||Rt.metaKey&&Ct?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",wt),window.addEventListener("blur",wt)},fn(zt,St),$r(zt,"_borderLineWidth",-1),$r(zt,"_colorManager",new j.ColorManager),$r(zt,"_zIndex",1),$r(zt,"SMALL_EDITOR_SIZE",0);let et=zt;g.AnnotationEditor=et;class tt extends et{constructor(Rt){super(Rt),this.annotationElementId=Rt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(b,g,_)=>{var lt,at,ut,dt,ct,No,mt,ft,gt,xt,vt,Yl,bt,At,Pt,en,Wt,Jt,zt,Ht,Rt,jt,Zt,Ot,wt,Ct,_t,Nt,Lt,It,Yt,mn,vn,xn,En,An,kn,ln,un,Mt,Bt,nn,dn,Sn,_n,Cn,tn,Jl,Fo,Io,eo,Lo,jo,cs,Ls,Zl,Ql,Bo,js,Vo;Object.defineProperty(g,"__esModule",{value:!0}),g.KeyboardManager=g.CommandManager=g.ColorManager=g.AnnotationEditorUIManager=void 0,g.bindEvents=_e,g.opacityToHex=et;var j=_(1),$=_(6);function _e(nr,Vt,bn){for(const In of bn)Vt.addEventListener(In,nr[In].bind(nr))}function et(nr){return Math.round(Math.min(255,Math.max(1,255*nr))).toString(16).padStart(2,"0")}class tt{constructor(){fn(this,lt,0)}getId(){return`${j.AnnotationEditorPrefix}${Is(this,lt)._++}`}}lt=new WeakMap;const pt=class pt{constructor(){fn(this,ct);fn(this,at,(0,j.getUuid)());fn(this,ut,0);fn(this,dt,null)}static get _isSVGFittingCanvas(){const Vt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',In=new OffscreenCanvas(1,3).getContext("2d"),qn=new Image;qn.src=Vt;const Yn=qn.decode().then(()=>(In.drawImage(qn,0,0,1,1,0,0,1,3),new Uint32Array(In.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,j.shadow)(this,"_isSVGFittingCanvas",Yn)}async getFromFile(Vt){const{lastModified:bn,name:In,size:qn,type:Yn}=Vt;return Qt(this,ct,No).call(this,`${bn}_${In}_${qn}_${Yn}`,Vt)}async getFromUrl(Vt){return Qt(this,ct,No).call(this,Vt,Vt)}async getFromId(Vt){yt(this,dt)||pn(this,dt,new Map);const bn=yt(this,dt).get(Vt);return bn?bn.bitmap?(bn.refCounter+=1,bn):bn.file?this.getFromFile(bn.file):this.getFromUrl(bn.url):null}getSvgUrl(Vt){const bn=yt(this,dt).get(Vt);return bn!=null&&bn.isSvg?bn.svgUrl:null}deleteId(Vt){yt(this,dt)||pn(this,dt,new Map);const bn=yt(this,dt).get(Vt);bn&&(bn.refCounter-=1,bn.refCounter===0&&(bn.bitmap=null))}isValidId(Vt){return Vt.startsWith(`image_${yt(this,at)}_`)}};at=new WeakMap,ut=new WeakMap,dt=new WeakMap,ct=new WeakSet,No=async function(Vt,bn){yt(this,dt)||pn(this,dt,new Map);let In=yt(this,dt).get(Vt);if(In===null)return null;if(In!=null&&In.bitmap)return In.refCounter+=1,In;try{In||(In={bitmap:null,id:`image_${yt(this,at)}_${Is(this,ut)._++}`,refCounter:0,isSvg:!1});let qn;if(typeof bn=="string"){In.url=bn;const Yn=await fetch(bn);if(!Yn.ok)throw new Error(Yn.statusText);qn=await Yn.blob()}else qn=In.file=bn;if(qn.type==="image/svg+xml"){const Yn=pt._isSVGFittingCanvas,$n=new FileReader,Ft=new Image,Dt=new Promise((Kt,gn)=>{Ft.onload=()=>{In.bitmap=Ft,In.isSvg=!0,Kt()},$n.onload=async()=>{const yn=In.svgUrl=$n.result;Ft.src=await Yn?`${yn}#svgView(preserveAspectRatio(none))`:yn},Ft.onerror=$n.onerror=gn});$n.readAsDataURL(qn),await Dt}else In.bitmap=await createImageBitmap(qn);In.refCounter=1}catch(qn){console.error(qn),In=null}return yt(this,dt).set(Vt,In),In&&yt(this,dt).set(In.id,In),In};let nt=pt;class rt{constructor(Vt=128){fn(this,mt,[]);fn(this,ft,!1);fn(this,gt);fn(this,xt,-1);pn(this,gt,Vt)}add({cmd:Vt,undo:bn,mustExec:In,type:qn=NaN,overwriteIfSameType:Yn=!1,keepUndo:$n=!1}){if(In&&Vt(),yt(this,ft))return;const Ft={cmd:Vt,undo:bn,type:qn};if(yt(this,xt)===-1){yt(this,mt).length>0&&(yt(this,mt).length=0),pn(this,xt,0),yt(this,mt).push(Ft);return}if(Yn&&yt(this,mt)[yt(this,xt)].type===qn){$n&&(Ft.undo=yt(this,mt)[yt(this,xt)].undo),yt(this,mt)[yt(this,xt)]=Ft;return}const Dt=yt(this,xt)+1;Dt===yt(this,gt)?yt(this,mt).splice(0,1):(pn(this,xt,Dt),Dt<yt(this,mt).length&&yt(this,mt).splice(Dt)),yt(this,mt).push(Ft)}undo(){yt(this,xt)!==-1&&(pn(this,ft,!0),yt(this,mt)[yt(this,xt)].undo(),pn(this,ft,!1),pn(this,xt,yt(this,xt)-1))}redo(){yt(this,xt)<yt(this,mt).length-1&&(pn(this,xt,yt(this,xt)+1),pn(this,ft,!0),yt(this,mt)[yt(this,xt)].cmd(),pn(this,ft,!1))}hasSomethingToUndo(){return yt(this,xt)!==-1}hasSomethingToRedo(){return yt(this,xt)<yt(this,mt).length-1}destroy(){pn(this,mt,null)}}mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,xt=new WeakMap,g.CommandManager=rt;class it{constructor(Vt){fn(this,vt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:bn}=j.FeatureTest.platform;for(const[In,qn,Yn={}]of Vt)for(const $n of In){const Ft=$n.startsWith("mac+");bn&&Ft?(this.callbacks.set($n.slice(4),{callback:qn,options:Yn}),this.allKeys.add($n.split("+").at(-1))):!bn&&!Ft&&(this.callbacks.set($n,{callback:qn,options:Yn}),this.allKeys.add($n.split("+").at(-1)))}}exec(Vt,bn){if(!this.allKeys.has(bn.key))return;const In=this.callbacks.get(Qt(this,vt,Yl).call(this,bn));if(!In)return;const{callback:qn,options:{bubbles:Yn=!1,args:$n=[],checker:Ft=null}}=In;Ft&&!Ft(Vt,bn)||(qn.bind(Vt,...$n)(),Yn||(bn.stopPropagation(),bn.preventDefault()))}}vt=new WeakSet,Yl=function(Vt){Vt.altKey&&this.buffer.push("alt"),Vt.ctrlKey&&this.buffer.push("ctrl"),Vt.metaKey&&this.buffer.push("meta"),Vt.shiftKey&&this.buffer.push("shift"),this.buffer.push(Vt.key);const bn=this.buffer.join("+");return this.buffer.length=0,bn},g.KeyboardManager=it;const Tt=class Tt{get _colors(){const Vt=new Map([["CanvasText",null],["Canvas",null]]);return(0,$.getColorValues)(Vt),(0,j.shadow)(this,"_colors",Vt)}convert(Vt){const bn=(0,$.getRGB)(Vt);if(!window.matchMedia("(forced-colors: active)").matches)return bn;for(const[In,qn]of this._colors)if(qn.every((Yn,$n)=>Yn===bn[$n]))return Tt._colorsMapping.get(In);return bn}getHexCode(Vt){const bn=this._colors.get(Vt);return bn?j.Util.makeHexColor(...bn):Vt}};$r(Tt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let st=Tt;g.ColorManager=st;const Gn=class Gn{constructor(Vt,bn,In,qn,Yn,$n){fn(this,tn);fn(this,bt,null);fn(this,At,new Map);fn(this,Pt,new Map);fn(this,en,null);fn(this,Wt,null);fn(this,Jt,new rt);fn(this,zt,0);fn(this,Ht,new Set);fn(this,Rt,null);fn(this,jt,null);fn(this,Zt,new Set);fn(this,Ot,null);fn(this,wt,new tt);fn(this,Ct,!1);fn(this,_t,!1);fn(this,Nt,null);fn(this,Lt,j.AnnotationEditorType.NONE);fn(this,It,new Set);fn(this,Yt,null);fn(this,mn,this.blur.bind(this));fn(this,vn,this.focus.bind(this));fn(this,xn,this.copy.bind(this));fn(this,En,this.cut.bind(this));fn(this,An,this.paste.bind(this));fn(this,kn,this.keydown.bind(this));fn(this,ln,this.onEditingAction.bind(this));fn(this,un,this.onPageChanging.bind(this));fn(this,Mt,this.onScaleChanging.bind(this));fn(this,Bt,this.onRotationChanging.bind(this));fn(this,nn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});fn(this,dn,[0,0]);fn(this,Sn,null);fn(this,_n,null);fn(this,Cn,null);pn(this,_n,Vt),pn(this,Cn,bn),pn(this,en,In),this._eventBus=qn,this._eventBus._on("editingaction",yt(this,ln)),this._eventBus._on("pagechanging",yt(this,un)),this._eventBus._on("scalechanging",yt(this,Mt)),this._eventBus._on("rotationchanging",yt(this,Bt)),pn(this,Wt,Yn.annotationStorage),pn(this,Ot,Yn.filterFactory),pn(this,Yt,$n),this.viewParameters={realScale:$.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Vt=Gn.prototype,bn=Yn=>{const{activeElement:$n}=document;return $n&&yt(Yn,_n).contains($n)&&Yn.hasSomethingToControl()},In=this.TRANSLATE_SMALL,qn=this.TRANSLATE_BIG;return(0,j.shadow)(this,"_keyboardManager",new it([[["ctrl+a","mac+meta+a"],Vt.selectAll],[["ctrl+z","mac+meta+z"],Vt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Vt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Vt.delete],[["Escape","mac+Escape"],Vt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Vt.translateSelectedEditors,{args:[-In,0],checker:bn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Vt.translateSelectedEditors,{args:[-qn,0],checker:bn}],[["ArrowRight","mac+ArrowRight"],Vt.translateSelectedEditors,{args:[In,0],checker:bn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Vt.translateSelectedEditors,{args:[qn,0],checker:bn}],[["ArrowUp","mac+ArrowUp"],Vt.translateSelectedEditors,{args:[0,-In],checker:bn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Vt.translateSelectedEditors,{args:[0,-qn],checker:bn}],[["ArrowDown","mac+ArrowDown"],Vt.translateSelectedEditors,{args:[0,In],checker:bn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Vt.translateSelectedEditors,{args:[0,qn],checker:bn}]]))}destroy(){Qt(this,tn,eo).call(this),Qt(this,tn,Fo).call(this),this._eventBus._off("editingaction",yt(this,ln)),this._eventBus._off("pagechanging",yt(this,un)),this._eventBus._off("scalechanging",yt(this,Mt)),this._eventBus._off("rotationchanging",yt(this,Bt));for(const Vt of yt(this,Pt).values())Vt.destroy();yt(this,Pt).clear(),yt(this,At).clear(),yt(this,Zt).clear(),pn(this,bt,null),yt(this,It).clear(),yt(this,Jt).destroy(),yt(this,en).destroy()}get hcmFilter(){return(0,j.shadow)(this,"hcmFilter",yt(this,Yt)?yt(this,Ot).addHCMFilter(yt(this,Yt).foreground,yt(this,Yt).background):"none")}get direction(){return(0,j.shadow)(this,"direction",getComputedStyle(yt(this,_n)).direction)}editAltText(Vt){var bn;(bn=yt(this,en))==null||bn.editAltText(this,Vt)}onPageChanging({pageNumber:Vt}){pn(this,zt,Vt-1)}focusMainContainer(){yt(this,_n).focus()}findParent(Vt,bn){for(const In of yt(this,Pt).values()){const{x:qn,y:Yn,width:$n,height:Ft}=In.div.getBoundingClientRect();if(Vt>=qn&&Vt<=qn+$n&&bn>=Yn&&bn<=Yn+Ft)return In}return null}disableUserSelect(Vt=!1){yt(this,Cn).classList.toggle("noUserSelect",Vt)}addShouldRescale(Vt){yt(this,Zt).add(Vt)}removeShouldRescale(Vt){yt(this,Zt).delete(Vt)}onScaleChanging({scale:Vt}){this.commitOrRemove(),this.viewParameters.realScale=Vt*$.PixelsPerInch.PDF_TO_CSS_UNITS;for(const bn of yt(this,Zt))bn.onScaleChanging()}onRotationChanging({pagesRotation:Vt}){this.commitOrRemove(),this.viewParameters.rotation=Vt}addToAnnotationStorage(Vt){!Vt.isEmpty()&&yt(this,Wt)&&!yt(this,Wt).has(Vt.id)&&yt(this,Wt).setValue(Vt.id,Vt)}blur(){if(!this.hasSelection)return;const{activeElement:Vt}=document;for(const bn of yt(this,It))if(bn.div.contains(Vt)){pn(this,Nt,[bn,Vt]),bn._focusEventsAllowed=!1;break}}focus(){if(!yt(this,Nt))return;const[Vt,bn]=yt(this,Nt);pn(this,Nt,null),bn.addEventListener("focusin",()=>{Vt._focusEventsAllowed=!0},{once:!0}),bn.focus()}addEditListeners(){Qt(this,tn,Io).call(this),Qt(this,tn,Lo).call(this)}removeEditListeners(){Qt(this,tn,eo).call(this),Qt(this,tn,jo).call(this)}copy(Vt){var In;if(Vt.preventDefault(),(In=yt(this,bt))==null||In.commitOrRemove(),!this.hasSelection)return;const bn=[];for(const qn of yt(this,It)){const Yn=qn.serialize(!0);Yn&&bn.push(Yn)}bn.length!==0&&Vt.clipboardData.setData("application/pdfjs",JSON.stringify(bn))}cut(Vt){this.copy(Vt),this.delete()}paste(Vt){Vt.preventDefault();const{clipboardData:bn}=Vt;for(const Yn of bn.items)for(const $n of yt(this,jt))if($n.isHandlingMimeForPasting(Yn.type)){$n.paste(Yn,this.currentLayer);return}let In=bn.getData("application/pdfjs");if(!In)return;try{In=JSON.parse(In)}catch(Yn){(0,j.warn)(`paste: "${Yn.message}".`);return}if(!Array.isArray(In))return;this.unselectAll();const qn=this.currentLayer;try{const Yn=[];for(const Dt of In){const Kt=qn.deserialize(Dt);if(!Kt)return;Yn.push(Kt)}const $n=()=>{for(const Dt of Yn)Qt(this,tn,Bo).call(this,Dt);Qt(this,tn,Vo).call(this,Yn)},Ft=()=>{for(const Dt of Yn)Dt.remove()};this.addCommands({cmd:$n,undo:Ft,mustExec:!0})}catch(Yn){(0,j.warn)(`paste: "${Yn.message}".`)}}keydown(Vt){var bn;(bn=this.getActive())!=null&&bn.shouldGetKeyboardEvents()||Gn._keyboardManager.exec(this,Vt)}onEditingAction(Vt){["undo","redo","delete","selectAll"].includes(Vt.name)&&this[Vt.name]()}setEditingState(Vt){Vt?(Qt(this,tn,Jl).call(this),Qt(this,tn,Io).call(this),Qt(this,tn,Lo).call(this),Qt(this,tn,cs).call(this,{isEditing:yt(this,Lt)!==j.AnnotationEditorType.NONE,isEmpty:Qt(this,tn,js).call(this),hasSomethingToUndo:yt(this,Jt).hasSomethingToUndo(),hasSomethingToRedo:yt(this,Jt).hasSomethingToRedo(),hasSelectedEditor:!1})):(Qt(this,tn,Fo).call(this),Qt(this,tn,eo).call(this),Qt(this,tn,jo).call(this),Qt(this,tn,cs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Vt){if(!yt(this,jt)){pn(this,jt,Vt);for(const bn of yt(this,jt))Qt(this,tn,Ls).call(this,bn.defaultPropertiesToUpdate)}}getId(){return yt(this,wt).getId()}get currentLayer(){return yt(this,Pt).get(yt(this,zt))}getLayer(Vt){return yt(this,Pt).get(Vt)}get currentPageIndex(){return yt(this,zt)}addLayer(Vt){yt(this,Pt).set(Vt.pageIndex,Vt),yt(this,Ct)?Vt.enable():Vt.disable()}removeLayer(Vt){yt(this,Pt).delete(Vt.pageIndex)}updateMode(Vt,bn=null){if(yt(this,Lt)!==Vt){if(pn(this,Lt,Vt),Vt===j.AnnotationEditorType.NONE){this.setEditingState(!1),Qt(this,tn,Ql).call(this);return}this.setEditingState(!0),Qt(this,tn,Zl).call(this),this.unselectAll();for(const In of yt(this,Pt).values())In.updateMode(Vt);if(bn){for(const In of yt(this,At).values())if(In.annotationElementId===bn){this.setSelected(In),In.enterInEditMode();break}}}}updateToolbar(Vt){Vt!==yt(this,Lt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Vt})}updateParams(Vt,bn){if(yt(this,jt)){if(Vt===j.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Vt);return}for(const In of yt(this,It))In.updateParams(Vt,bn);for(const In of yt(this,jt))In.updateDefaultParams(Vt,bn)}}enableWaiting(Vt=!1){if(yt(this,_t)!==Vt){pn(this,_t,Vt);for(const bn of yt(this,Pt).values())Vt?bn.disableClick():bn.enableClick(),bn.div.classList.toggle("waiting",Vt)}}getEditors(Vt){const bn=[];for(const In of yt(this,At).values())In.pageIndex===Vt&&bn.push(In);return bn}getEditor(Vt){return yt(this,At).get(Vt)}addEditor(Vt){yt(this,At).set(Vt.id,Vt)}removeEditor(Vt){var bn;yt(this,At).delete(Vt.id),this.unselect(Vt),(!Vt.annotationElementId||!yt(this,Ht).has(Vt.annotationElementId))&&((bn=yt(this,Wt))==null||bn.remove(Vt.id))}addDeletedAnnotationElement(Vt){yt(this,Ht).add(Vt.annotationElementId),Vt.deleted=!0}isDeletedAnnotationElement(Vt){return yt(this,Ht).has(Vt)}removeDeletedAnnotationElement(Vt){yt(this,Ht).delete(Vt.annotationElementId),Vt.deleted=!1}setActiveEditor(Vt){yt(this,bt)!==Vt&&(pn(this,bt,Vt),Vt&&Qt(this,tn,Ls).call(this,Vt.propertiesToUpdate))}toggleSelected(Vt){if(yt(this,It).has(Vt)){yt(this,It).delete(Vt),Vt.unselect(),Qt(this,tn,cs).call(this,{hasSelectedEditor:this.hasSelection});return}yt(this,It).add(Vt),Vt.select(),Qt(this,tn,Ls).call(this,Vt.propertiesToUpdate),Qt(this,tn,cs).call(this,{hasSelectedEditor:!0})}setSelected(Vt){for(const bn of yt(this,It))bn!==Vt&&bn.unselect();yt(this,It).clear(),yt(this,It).add(Vt),Vt.select(),Qt(this,tn,Ls).call(this,Vt.propertiesToUpdate),Qt(this,tn,cs).call(this,{hasSelectedEditor:!0})}isSelected(Vt){return yt(this,It).has(Vt)}unselect(Vt){Vt.unselect(),yt(this,It).delete(Vt),Qt(this,tn,cs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return yt(this,It).size!==0}undo(){yt(this,Jt).undo(),Qt(this,tn,cs).call(this,{hasSomethingToUndo:yt(this,Jt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Qt(this,tn,js).call(this)})}redo(){yt(this,Jt).redo(),Qt(this,tn,cs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:yt(this,Jt).hasSomethingToRedo(),isEmpty:Qt(this,tn,js).call(this)})}addCommands(Vt){yt(this,Jt).add(Vt),Qt(this,tn,cs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Qt(this,tn,js).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Vt=[...yt(this,It)],bn=()=>{for(const qn of Vt)qn.remove()},In=()=>{for(const qn of Vt)Qt(this,tn,Bo).call(this,qn)};this.addCommands({cmd:bn,undo:In,mustExec:!0})}commitOrRemove(){var Vt;(Vt=yt(this,bt))==null||Vt.commitOrRemove()}hasSomethingToControl(){return yt(this,bt)||this.hasSelection}selectAll(){for(const Vt of yt(this,It))Vt.commit();Qt(this,tn,Vo).call(this,yt(this,At).values())}unselectAll(){if(yt(this,bt)){yt(this,bt).commitOrRemove();return}if(this.hasSelection){for(const Vt of yt(this,It))Vt.unselect();yt(this,It).clear(),Qt(this,tn,cs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Vt,bn,In=!1){if(In||this.commitOrRemove(),!this.hasSelection)return;yt(this,dn)[0]+=Vt,yt(this,dn)[1]+=bn;const[qn,Yn]=yt(this,dn),$n=[...yt(this,It)],Ft=1e3;yt(this,Sn)&&clearTimeout(yt(this,Sn)),pn(this,Sn,setTimeout(()=>{pn(this,Sn,null),yt(this,dn)[0]=yt(this,dn)[1]=0,this.addCommands({cmd:()=>{for(const Dt of $n)yt(this,At).has(Dt.id)&&Dt.translateInPage(qn,Yn)},undo:()=>{for(const Dt of $n)yt(this,At).has(Dt.id)&&Dt.translateInPage(-qn,-Yn)},mustExec:!1})},Ft));for(const Dt of $n)Dt.translateInPage(Vt,bn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),pn(this,Rt,new Map);for(const Vt of yt(this,It))yt(this,Rt).set(Vt,{savedX:Vt.x,savedY:Vt.y,savedPageIndex:Vt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!yt(this,Rt))return!1;this.disableUserSelect(!1);const Vt=yt(this,Rt);pn(this,Rt,null);let bn=!1;for(const[{x:qn,y:Yn,pageIndex:$n},Ft]of Vt)Ft.newX=qn,Ft.newY=Yn,Ft.newPageIndex=$n,bn||(bn=qn!==Ft.savedX||Yn!==Ft.savedY||$n!==Ft.savedPageIndex);if(!bn)return!1;const In=(qn,Yn,$n,Ft)=>{if(yt(this,At).has(qn.id)){const Dt=yt(this,Pt).get(Ft);Dt?qn._setParentAndPosition(Dt,Yn,$n):(qn.pageIndex=Ft,qn.x=Yn,qn.y=$n)}};return this.addCommands({cmd:()=>{for(const[qn,{newX:Yn,newY:$n,newPageIndex:Ft}]of Vt)In(qn,Yn,$n,Ft)},undo:()=>{for(const[qn,{savedX:Yn,savedY:$n,savedPageIndex:Ft}]of Vt)In(qn,Yn,$n,Ft)},mustExec:!0}),!0}dragSelectedEditors(Vt,bn){if(yt(this,Rt))for(const In of yt(this,Rt).keys())In.drag(Vt,bn)}rebuild(Vt){if(Vt.parent===null){const bn=this.getLayer(Vt.pageIndex);bn?(bn.changeParent(Vt),bn.addOrRebuild(Vt)):(this.addEditor(Vt),this.addToAnnotationStorage(Vt),Vt.rebuild())}else Vt.parent.addOrRebuild(Vt)}isActive(Vt){return yt(this,bt)===Vt}getActive(){return yt(this,bt)}getMode(){return yt(this,Lt)}get imageManager(){return(0,j.shadow)(this,"imageManager",new nt)}};bt=new WeakMap,At=new WeakMap,Pt=new WeakMap,en=new WeakMap,Wt=new WeakMap,Jt=new WeakMap,zt=new WeakMap,Ht=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Zt=new WeakMap,Ot=new WeakMap,wt=new WeakMap,Ct=new WeakMap,_t=new WeakMap,Nt=new WeakMap,Lt=new WeakMap,It=new WeakMap,Yt=new WeakMap,mn=new WeakMap,vn=new WeakMap,xn=new WeakMap,En=new WeakMap,An=new WeakMap,kn=new WeakMap,ln=new WeakMap,un=new WeakMap,Mt=new WeakMap,Bt=new WeakMap,nn=new WeakMap,dn=new WeakMap,Sn=new WeakMap,_n=new WeakMap,Cn=new WeakMap,tn=new WeakSet,Jl=function(){window.addEventListener("focus",yt(this,vn)),window.addEventListener("blur",yt(this,mn))},Fo=function(){window.removeEventListener("focus",yt(this,vn)),window.removeEventListener("blur",yt(this,mn))},Io=function(){window.addEventListener("keydown",yt(this,kn),{capture:!0})},eo=function(){window.removeEventListener("keydown",yt(this,kn),{capture:!0})},Lo=function(){document.addEventListener("copy",yt(this,xn)),document.addEventListener("cut",yt(this,En)),document.addEventListener("paste",yt(this,An))},jo=function(){document.removeEventListener("copy",yt(this,xn)),document.removeEventListener("cut",yt(this,En)),document.removeEventListener("paste",yt(this,An))},cs=function(Vt){Object.entries(Vt).some(([In,qn])=>yt(this,nn)[In]!==qn)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(yt(this,nn),Vt)})},Ls=function(Vt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Vt})},Zl=function(){if(!yt(this,Ct)){pn(this,Ct,!0);for(const Vt of yt(this,Pt).values())Vt.enable()}},Ql=function(){if(this.unselectAll(),yt(this,Ct)){pn(this,Ct,!1);for(const Vt of yt(this,Pt).values())Vt.disable()}},Bo=function(Vt){const bn=yt(this,Pt).get(Vt.pageIndex);bn?bn.addOrRebuild(Vt):this.addEditor(Vt)},js=function(){if(yt(this,At).size===0)return!0;if(yt(this,At).size===1)for(const Vt of yt(this,At).values())return Vt.isEmpty();return!1},Vo=function(Vt){yt(this,It).clear();for(const bn of Vt)bn.isEmpty()||(yt(this,It).add(bn),bn.select());Qt(this,tn,cs).call(this,{hasSelectedEditor:!0})},$r(Gn,"TRANSLATE_SMALL",1),$r(Gn,"TRANSLATE_BIG",10);let ot=Gn;g.AnnotationEditorUIManager=ot},(b,g,_)=>{var zt,Ht,Rt,jt,Zt,Ot,wt,Ct,_t,Nt,Lt,It,Ps,Ms,$o,to,no,Bs,Vs;Object.defineProperty(g,"__esModule",{value:!0}),g.StatTimer=g.RenderingCancelledException=g.PixelsPerInch=g.PageViewport=g.PDFDateString=g.DOMStandardFontDataFactory=g.DOMSVGFactory=g.DOMFilterFactory=g.DOMCanvasFactory=g.DOMCMapReaderFactory=void 0,g.deprecated=xt,g.getColorValues=At,g.getCurrentTransform=Pt,g.getCurrentTransformInverse=en,g.getFilenameFromUrl=ct,g.getPdfFilenameFromUrl=ht,g.getRGB=bt,g.getXfaPageViewport=Tt,g.isDataScheme=ut,g.isPdfFile=dt,g.isValidFetchUrl=mt,g.loadScript=gt,g.noContextMenu=ft,g.setLayerDimensions=Wt;var j=_(7),$=_(1);const _e="http://www.w3.org/2000/svg",Jt=class Jt{};$r(Jt,"CSS",96),$r(Jt,"PDF",72),$r(Jt,"PDF_TO_CSS_UNITS",Jt.CSS/Jt.PDF);let et=Jt;g.PixelsPerInch=et;class tt extends j.BaseFilterFactory{constructor({docId:Mt,ownerDocument:Bt=globalThis.document}={}){super();fn(this,It);fn(this,zt);fn(this,Ht);fn(this,Rt);fn(this,jt);fn(this,Zt);fn(this,Ot);fn(this,wt);fn(this,Ct);fn(this,_t);fn(this,Nt);fn(this,Lt,0);pn(this,Rt,Mt),pn(this,jt,Bt)}addFilter(Mt){if(!Mt)return"none";let Bt=yt(this,It,Ps).get(Mt);if(Bt)return Bt;let nn,dn,Sn,_n;if(Mt.length===1){const Dn=Mt[0],ur=new Array(256);for(let rr=0;rr<256;rr++)ur[rr]=Dn[rr]/255;_n=nn=dn=Sn=ur.join(",")}else{const[Dn,ur,rr]=Mt,br=new Array(256),Hn=new Array(256),Zn=new Array(256);for(let mr=0;mr<256;mr++)br[mr]=Dn[mr]/255,Hn[mr]=ur[mr]/255,Zn[mr]=rr[mr]/255;nn=br.join(","),dn=Hn.join(","),Sn=Zn.join(","),_n=`${nn}${dn}${Sn}`}if(Bt=yt(this,It,Ps).get(_n),Bt)return yt(this,It,Ps).set(Mt,Bt),Bt;const Cn=`g_${yt(this,Rt)}_transfer_map_${Is(this,Lt)._++}`,tn=`url(#${Cn})`;yt(this,It,Ps).set(Mt,tn),yt(this,It,Ps).set(_n,tn);const Ln=Qt(this,It,to).call(this,Cn);return Qt(this,It,Bs).call(this,nn,dn,Sn,Ln),tn}addHCMFilter(Mt,Bt){var ur;const nn=`${Mt}-${Bt}`;if(yt(this,Ot)===nn)return yt(this,wt);if(pn(this,Ot,nn),pn(this,wt,"none"),(ur=yt(this,Zt))==null||ur.remove(),!Mt||!Bt)return yt(this,wt);const dn=Qt(this,It,Vs).call(this,Mt);Mt=$.Util.makeHexColor(...dn);const Sn=Qt(this,It,Vs).call(this,Bt);if(Bt=$.Util.makeHexColor(...Sn),yt(this,It,Ms).style.color="",Mt==="#000000"&&Bt==="#ffffff"||Mt===Bt)return yt(this,wt);const _n=new Array(256);for(let rr=0;rr<=255;rr++){const br=rr/255;_n[rr]=br<=.03928?br/12.92:((br+.055)/1.055)**2.4}const Cn=_n.join(","),tn=`g_${yt(this,Rt)}_hcm_filter`,Ln=pn(this,Ct,Qt(this,It,to).call(this,tn));Qt(this,It,Bs).call(this,Cn,Cn,Cn,Ln),Qt(this,It,$o).call(this,Ln);const Dn=(rr,br)=>{const Hn=dn[rr]/255,Zn=Sn[rr]/255,mr=new Array(br+1);for(let Rr=0;Rr<=br;Rr++)mr[Rr]=Hn+Rr/br*(Zn-Hn);return mr.join(",")};return Qt(this,It,Bs).call(this,Dn(0,5),Dn(1,5),Dn(2,5),Ln),pn(this,wt,`url(#${tn})`),yt(this,wt)}addHighlightHCMFilter(Mt,Bt,nn,dn){var Zn;const Sn=`${Mt}-${Bt}-${nn}-${dn}`;if(yt(this,_t)===Sn)return yt(this,Nt);if(pn(this,_t,Sn),pn(this,Nt,"none"),(Zn=yt(this,Ct))==null||Zn.remove(),!Mt||!Bt)return yt(this,Nt);const[_n,Cn]=[Mt,Bt].map(Qt(this,It,Vs).bind(this));let tn=Math.round(.2126*_n[0]+.7152*_n[1]+.0722*_n[2]),Ln=Math.round(.2126*Cn[0]+.7152*Cn[1]+.0722*Cn[2]),[Dn,ur]=[nn,dn].map(Qt(this,It,Vs).bind(this));Ln<tn&&([tn,Ln,Dn,ur]=[Ln,tn,ur,Dn]),yt(this,It,Ms).style.color="";const rr=(mr,Rr,wn)=>{const rn=new Array(256),on=(Ln-tn)/wn,zn=mr/255,Gn=(Rr-mr)/(255*wn);let nr=0;for(let Vt=0;Vt<=wn;Vt++){const bn=Math.round(tn+Vt*on),In=zn+Vt*Gn;for(let qn=nr;qn<=bn;qn++)rn[qn]=In;nr=bn+1}for(let Vt=nr;Vt<256;Vt++)rn[Vt]=rn[nr-1];return rn.join(",")},br=`g_${yt(this,Rt)}_hcm_highlight_filter`,Hn=pn(this,Ct,Qt(this,It,to).call(this,br));return Qt(this,It,$o).call(this,Hn),Qt(this,It,Bs).call(this,rr(Dn[0],ur[0],5),rr(Dn[1],ur[1],5),rr(Dn[2],ur[2],5),Hn),pn(this,Nt,`url(#${br})`),yt(this,Nt)}destroy(Mt=!1){Mt&&(yt(this,wt)||yt(this,Nt))||(yt(this,Ht)&&(yt(this,Ht).parentNode.parentNode.remove(),pn(this,Ht,null)),yt(this,zt)&&(yt(this,zt).clear(),pn(this,zt,null)),pn(this,Lt,0))}}zt=new WeakMap,Ht=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Zt=new WeakMap,Ot=new WeakMap,wt=new WeakMap,Ct=new WeakMap,_t=new WeakMap,Nt=new WeakMap,Lt=new WeakMap,It=new WeakSet,Ps=function(){return yt(this,zt)||pn(this,zt,new Map)},Ms=function(){if(!yt(this,Ht)){const Mt=yt(this,jt).createElement("div"),{style:Bt}=Mt;Bt.visibility="hidden",Bt.contain="strict",Bt.width=Bt.height=0,Bt.position="absolute",Bt.top=Bt.left=0,Bt.zIndex=-1;const nn=yt(this,jt).createElementNS(_e,"svg");nn.setAttribute("width",0),nn.setAttribute("height",0),pn(this,Ht,yt(this,jt).createElementNS(_e,"defs")),Mt.append(nn),nn.append(yt(this,Ht)),yt(this,jt).body.append(Mt)}return yt(this,Ht)},$o=function(Mt){const Bt=yt(this,jt).createElementNS(_e,"feColorMatrix");Bt.setAttribute("type","matrix"),Bt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Mt.append(Bt)},to=function(Mt){const Bt=yt(this,jt).createElementNS(_e,"filter");return Bt.setAttribute("color-interpolation-filters","sRGB"),Bt.setAttribute("id",Mt),yt(this,It,Ms).append(Bt),Bt},no=function(Mt,Bt,nn){const dn=yt(this,jt).createElementNS(_e,Bt);dn.setAttribute("type","discrete"),dn.setAttribute("tableValues",nn),Mt.append(dn)},Bs=function(Mt,Bt,nn,dn){const Sn=yt(this,jt).createElementNS(_e,"feComponentTransfer");dn.append(Sn),Qt(this,It,no).call(this,Sn,"feFuncR",Mt),Qt(this,It,no).call(this,Sn,"feFuncG",Bt),Qt(this,It,no).call(this,Sn,"feFuncB",nn)},Vs=function(Mt){return yt(this,It,Ms).style.color=Mt,bt(getComputedStyle(yt(this,It,Ms)).getPropertyValue("color"))},g.DOMFilterFactory=tt;class nt extends j.BaseCanvasFactory{constructor({ownerDocument:un=globalThis.document}={}){super(),this._document=un}_createCanvas(un,Mt){const Bt=this._document.createElement("canvas");return Bt.width=un,Bt.height=Mt,Bt}}g.DOMCanvasFactory=nt;async function rt(ln,un=!1){if(mt(ln,document.baseURI)){const Mt=await fetch(ln);if(!Mt.ok)throw new Error(Mt.statusText);return un?new Uint8Array(await Mt.arrayBuffer()):(0,$.stringToBytes)(await Mt.text())}return new Promise((Mt,Bt)=>{const nn=new XMLHttpRequest;nn.open("GET",ln,!0),un&&(nn.responseType="arraybuffer"),nn.onreadystatechange=()=>{if(nn.readyState===XMLHttpRequest.DONE){if(nn.status===200||nn.status===0){let dn;if(un&&nn.response?dn=new Uint8Array(nn.response):!un&&nn.responseText&&(dn=(0,$.stringToBytes)(nn.responseText)),dn){Mt(dn);return}}Bt(new Error(nn.statusText))}},nn.send(null)})}class it extends j.BaseCMapReaderFactory{_fetchData(un,Mt){return rt(un,this.isCompressed).then(Bt=>({cMapData:Bt,compressionType:Mt}))}}g.DOMCMapReaderFactory=it;class st extends j.BaseStandardFontDataFactory{_fetchData(un){return rt(un,!0)}}g.DOMStandardFontDataFactory=st;class ot extends j.BaseSVGFactory{_createSVG(un){return document.createElementNS(_e,un)}}g.DOMSVGFactory=ot;class lt{constructor({viewBox:un,scale:Mt,rotation:Bt,offsetX:nn=0,offsetY:dn=0,dontFlip:Sn=!1}){this.viewBox=un,this.scale=Mt,this.rotation=Bt,this.offsetX=nn,this.offsetY=dn;const _n=(un[2]+un[0])/2,Cn=(un[3]+un[1])/2;let tn,Ln,Dn,ur;switch(Bt%=360,Bt<0&&(Bt+=360),Bt){case 180:tn=-1,Ln=0,Dn=0,ur=1;break;case 90:tn=0,Ln=1,Dn=1,ur=0;break;case 270:tn=0,Ln=-1,Dn=-1,ur=0;break;case 0:tn=1,Ln=0,Dn=0,ur=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Sn&&(Dn=-Dn,ur=-ur);let rr,br,Hn,Zn;tn===0?(rr=Math.abs(Cn-un[1])*Mt+nn,br=Math.abs(_n-un[0])*Mt+dn,Hn=(un[3]-un[1])*Mt,Zn=(un[2]-un[0])*Mt):(rr=Math.abs(_n-un[0])*Mt+nn,br=Math.abs(Cn-un[1])*Mt+dn,Hn=(un[2]-un[0])*Mt,Zn=(un[3]-un[1])*Mt),this.transform=[tn*Mt,Ln*Mt,Dn*Mt,ur*Mt,rr-tn*Mt*_n-Dn*Mt*Cn,br-Ln*Mt*_n-ur*Mt*Cn],this.width=Hn,this.height=Zn}get rawDims(){const{viewBox:un}=this;return(0,$.shadow)(this,"rawDims",{pageWidth:un[2]-un[0],pageHeight:un[3]-un[1],pageX:un[0],pageY:un[1]})}clone({scale:un=this.scale,rotation:Mt=this.rotation,offsetX:Bt=this.offsetX,offsetY:nn=this.offsetY,dontFlip:dn=!1}={}){return new lt({viewBox:this.viewBox.slice(),scale:un,rotation:Mt,offsetX:Bt,offsetY:nn,dontFlip:dn})}convertToViewportPoint(un,Mt){return $.Util.applyTransform([un,Mt],this.transform)}convertToViewportRectangle(un){const Mt=$.Util.applyTransform([un[0],un[1]],this.transform),Bt=$.Util.applyTransform([un[2],un[3]],this.transform);return[Mt[0],Mt[1],Bt[0],Bt[1]]}convertToPdfPoint(un,Mt){return $.Util.applyInverseTransform([un,Mt],this.transform)}}g.PageViewport=lt;class at extends $.BaseException{constructor(un,Mt=0){super(un,"RenderingCancelledException"),this.extraDelay=Mt}}g.RenderingCancelledException=at;function ut(ln){const un=ln.length;let Mt=0;for(;Mt<un&&ln[Mt].trim()==="";)Mt++;return ln.substring(Mt,Mt+5).toLowerCase()==="data:"}function dt(ln){return typeof ln=="string"&&/\.pdf$/i.test(ln)}function ct(ln,un=!1){return un||([ln]=ln.split(/[#?]/,1)),ln.substring(ln.lastIndexOf("/")+1)}function ht(ln,un="document.pdf"){if(typeof ln!="string")return un;if(ut(ln))return(0,$.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),un;const Mt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Bt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,nn=Mt.exec(ln);let dn=Bt.exec(nn[1])||Bt.exec(nn[2])||Bt.exec(nn[3]);if(dn&&(dn=dn[0],dn.includes("%")))try{dn=Bt.exec(decodeURIComponent(dn))[0]}catch{}return dn||un}class pt{constructor(){$r(this,"started",Object.create(null));$r(this,"times",[])}time(un){un in this.started&&(0,$.warn)(`Timer is already running for ${un}`),this.started[un]=Date.now()}timeEnd(un){un in this.started||(0,$.warn)(`Timer has not been started for ${un}`),this.times.push({name:un,start:this.started[un],end:Date.now()}),delete this.started[un]}toString(){const un=[];let Mt=0;for(const{name:Bt}of this.times)Mt=Math.max(Bt.length,Mt);for(const{name:Bt,start:nn,end:dn}of this.times)un.push(`${Bt.padEnd(Mt)} ${dn-nn}ms
`);return un.join("")}}g.StatTimer=pt;function mt(ln,un){try{const{protocol:Mt}=un?new URL(ln,un):new URL(ln);return Mt==="http:"||Mt==="https:"}catch{return!1}}function ft(ln){ln.preventDefault()}function gt(ln,un=!1){return new Promise((Mt,Bt)=>{const nn=document.createElement("script");nn.src=ln,nn.onload=function(dn){un&&nn.remove(),Mt(dn)},nn.onerror=function(){Bt(new Error(`Cannot load script at: ${nn.src}`))},(document.head||document.documentElement).append(nn)})}function xt(ln){console.log("Deprecated API usage: "+ln)}let vt;class St{static toDateObject(un){if(!un||typeof un!="string")return null;vt||(vt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Mt=vt.exec(un);if(!Mt)return null;const Bt=parseInt(Mt[1],10);let nn=parseInt(Mt[2],10);nn=nn>=1&&nn<=12?nn-1:0;let dn=parseInt(Mt[3],10);dn=dn>=1&&dn<=31?dn:1;let Sn=parseInt(Mt[4],10);Sn=Sn>=0&&Sn<=23?Sn:0;let _n=parseInt(Mt[5],10);_n=_n>=0&&_n<=59?_n:0;let Cn=parseInt(Mt[6],10);Cn=Cn>=0&&Cn<=59?Cn:0;const tn=Mt[7]||"Z";let Ln=parseInt(Mt[8],10);Ln=Ln>=0&&Ln<=23?Ln:0;let Dn=parseInt(Mt[9],10)||0;return Dn=Dn>=0&&Dn<=59?Dn:0,tn==="-"?(Sn+=Ln,_n+=Dn):tn==="+"&&(Sn-=Ln,_n-=Dn),new Date(Date.UTC(Bt,nn,dn,Sn,_n,Cn))}}g.PDFDateString=St;function Tt(ln,{scale:un=1,rotation:Mt=0}){const{width:Bt,height:nn}=ln.attributes.style,dn=[0,0,parseInt(Bt),parseInt(nn)];return new lt({viewBox:dn,scale:un,rotation:Mt})}function bt(ln){if(ln.startsWith("#")){const un=parseInt(ln.slice(1),16);return[(un&16711680)>>16,(un&65280)>>8,un&255]}return ln.startsWith("rgb(")?ln.slice(4,-1).split(",").map(un=>parseInt(un)):ln.startsWith("rgba(")?ln.slice(5,-1).split(",").map(un=>parseInt(un)).slice(0,3):((0,$.warn)(`Not a valid color format: "${ln}"`),[0,0,0])}function At(ln){const un=document.createElement("span");un.style.visibility="hidden",document.body.append(un);for(const Mt of ln.keys()){un.style.color=Mt;const Bt=window.getComputedStyle(un).color;ln.set(Mt,bt(Bt))}un.remove()}function Pt(ln){const{a:un,b:Mt,c:Bt,d:nn,e:dn,f:Sn}=ln.getTransform();return[un,Mt,Bt,nn,dn,Sn]}function en(ln){const{a:un,b:Mt,c:Bt,d:nn,e:dn,f:Sn}=ln.getTransform().invertSelf();return[un,Mt,Bt,nn,dn,Sn]}function Wt(ln,un,Mt=!1,Bt=!0){if(un instanceof lt){const{pageWidth:nn,pageHeight:dn}=un.rawDims,{style:Sn}=ln,_n=$.FeatureTest.isCSSRoundSupported,Cn=`var(--scale-factor) * ${nn}px`,tn=`var(--scale-factor) * ${dn}px`,Ln=_n?`round(${Cn}, 1px)`:`calc(${Cn})`,Dn=_n?`round(${tn}, 1px)`:`calc(${tn})`;!Mt||un.rotation%180===0?(Sn.width=Ln,Sn.height=Dn):(Sn.width=Dn,Sn.height=Ln)}Bt&&ln.setAttribute("data-main-rotation",un.rotation)}},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BaseStandardFontDataFactory=g.BaseSVGFactory=g.BaseFilterFactory=g.BaseCanvasFactory=g.BaseCMapReaderFactory=void 0;var j=_(1);class ${constructor(){this.constructor===$&&(0,j.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(it){return"none"}addHCMFilter(it,st){return"none"}addHighlightHCMFilter(it,st,ot,lt){return"none"}destroy(it=!1){}}g.BaseFilterFactory=$;class _e{constructor(){this.constructor===_e&&(0,j.unreachable)("Cannot initialize BaseCanvasFactory.")}create(it,st){if(it<=0||st<=0)throw new Error("Invalid canvas size");const ot=this._createCanvas(it,st);return{canvas:ot,context:ot.getContext("2d")}}reset(it,st,ot){if(!it.canvas)throw new Error("Canvas is not specified");if(st<=0||ot<=0)throw new Error("Invalid canvas size");it.canvas.width=st,it.canvas.height=ot}destroy(it){if(!it.canvas)throw new Error("Canvas is not specified");it.canvas.width=0,it.canvas.height=0,it.canvas=null,it.context=null}_createCanvas(it,st){(0,j.unreachable)("Abstract method `_createCanvas` called.")}}g.BaseCanvasFactory=_e;class et{constructor({baseUrl:it=null,isCompressed:st=!0}){this.constructor===et&&(0,j.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=it,this.isCompressed=st}async fetch({name:it}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!it)throw new Error("CMap name must be specified.");const st=this.baseUrl+it+(this.isCompressed?".bcmap":""),ot=this.isCompressed?j.CMapCompressionType.BINARY:j.CMapCompressionType.NONE;return this._fetchData(st,ot).catch(lt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${st}`)})}_fetchData(it,st){(0,j.unreachable)("Abstract method `_fetchData` called.")}}g.BaseCMapReaderFactory=et;class tt{constructor({baseUrl:it=null}){this.constructor===tt&&(0,j.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=it}async fetch({filename:it}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!it)throw new Error("Font filename must be specified.");const st=`${this.baseUrl}${it}`;return this._fetchData(st).catch(ot=>{throw new Error(`Unable to load font data at: ${st}`)})}_fetchData(it){(0,j.unreachable)("Abstract method `_fetchData` called.")}}g.BaseStandardFontDataFactory=tt;class nt{constructor(){this.constructor===nt&&(0,j.unreachable)("Cannot initialize BaseSVGFactory.")}create(it,st,ot=!1){if(it<=0||st<=0)throw new Error("Invalid SVG dimensions");const lt=this._createSVG("svg:svg");return lt.setAttribute("version","1.1"),ot||(lt.setAttribute("width",`${it}px`),lt.setAttribute("height",`${st}px`)),lt.setAttribute("preserveAspectRatio","none"),lt.setAttribute("viewBox",`0 0 ${it} ${st}`),lt}createElement(it){if(typeof it!="string")throw new Error("Invalid SVG element type");return this._createSVG(it)}_createSVG(it){(0,j.unreachable)("Abstract method `_createSVG` called.")}}g.BaseSVGFactory=nt},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.MurmurHash3_64=void 0;var j=_(1);const $=3285377520,_e=4294901760,et=65535;class tt{constructor(rt){this.h1=rt?rt&4294967295:$,this.h2=rt?rt&4294967295:$}update(rt){let it,st;if(typeof rt=="string"){it=new Uint8Array(rt.length*2),st=0;for(let xt=0,vt=rt.length;xt<vt;xt++){const St=rt.charCodeAt(xt);St<=255?it[st++]=St:(it[st++]=St>>>8,it[st++]=St&255)}}else if((0,j.isArrayBuffer)(rt))it=rt.slice(),st=it.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const ot=st>>2,lt=st-ot*4,at=new Uint32Array(it.buffer,0,ot);let ut=0,dt=0,ct=this.h1,ht=this.h2;const pt=3432918353,mt=461845907,ft=pt&et,gt=mt&et;for(let xt=0;xt<ot;xt++)xt&1?(ut=at[xt],ut=ut*pt&_e|ut*ft&et,ut=ut<<15|ut>>>17,ut=ut*mt&_e|ut*gt&et,ct^=ut,ct=ct<<13|ct>>>19,ct=ct*5+3864292196):(dt=at[xt],dt=dt*pt&_e|dt*ft&et,dt=dt<<15|dt>>>17,dt=dt*mt&_e|dt*gt&et,ht^=dt,ht=ht<<13|ht>>>19,ht=ht*5+3864292196);switch(ut=0,lt){case 3:ut^=it[ot*4+2]<<16;case 2:ut^=it[ot*4+1]<<8;case 1:ut^=it[ot*4],ut=ut*pt&_e|ut*ft&et,ut=ut<<15|ut>>>17,ut=ut*mt&_e|ut*gt&et,ot&1?ct^=ut:ht^=ut}this.h1=ct,this.h2=ht}hexdigest(){let rt=this.h1,it=this.h2;return rt^=it>>>1,rt=rt*3981806797&_e|rt*36045&et,it=it*4283543511&_e|((it<<16|rt>>>16)*2950163797&_e)>>>16,rt^=it>>>1,rt=rt*444984403&_e|rt*60499&et,it=it*3301882366&_e|((it<<16|rt>>>16)*3120437893&_e)>>>16,rt^=it>>>1,(rt>>>0).toString(16).padStart(8,"0")+(it>>>0).toString(16).padStart(8,"0")}}g.MurmurHash3_64=tt},(b,g,_)=>{var et;Object.defineProperty(g,"__esModule",{value:!0}),g.FontLoader=g.FontFaceObject=void 0;var j=_(1);class ${constructor({ownerDocument:nt=globalThis.document,styleElement:rt=null}){fn(this,et,new Set);this._document=nt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(nt){this.nativeFontFaces.add(nt),this._document.fonts.add(nt)}removeNativeFontFace(nt){this.nativeFontFaces.delete(nt),this._document.fonts.delete(nt)}insertRule(nt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const rt=this.styleElement.sheet;rt.insertRule(nt,rt.cssRules.length)}clear(){for(const nt of this.nativeFontFaces)this._document.fonts.delete(nt);this.nativeFontFaces.clear(),yt(this,et).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(nt){if(!(!nt||yt(this,et).has(nt.loadedName))){if((0,j.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:rt,src:it,style:st}=nt,ot=new FontFace(rt,it,st);this.addNativeFontFace(ot);try{await ot.load(),yt(this,et).add(rt)}catch{(0,j.warn)(`Cannot load system font: ${nt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ot)}return}(0,j.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(nt){if(nt.attached||nt.missingFile&&!nt.systemFontInfo)return;if(nt.attached=!0,nt.systemFontInfo){await this.loadSystemFont(nt.systemFontInfo);return}if(this.isFontLoadingAPISupported){const it=nt.createNativeFontFace();if(it){this.addNativeFontFace(it);try{await it.loaded}catch(st){throw(0,j.warn)(`Failed to load font '${it.family}': '${st}'.`),nt.disableFontFace=!0,st}}return}const rt=nt.createFontFaceRule();if(rt){if(this.insertRule(rt),this.isSyncFontLoadingSupported)return;await new Promise(it=>{const st=this._queueLoadingCallback(it);this._prepareFontLoadEvent(nt,st)})}}get isFontLoadingAPISupported(){var rt;const nt=!!((rt=this._document)!=null&&rt.fonts);return(0,j.shadow)(this,"isFontLoadingAPISupported",nt)}get isSyncFontLoadingSupported(){let nt=!1;return(j.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(nt=!0),(0,j.shadow)(this,"isSyncFontLoadingSupported",nt)}_queueLoadingCallback(nt){function rt(){for((0,j.assert)(!st.done,"completeRequest() cannot be called twice."),st.done=!0;it.length>0&&it[0].done;){const ot=it.shift();setTimeout(ot.callback,0)}}const{loadingRequests:it}=this,st={done:!1,complete:rt,callback:nt};return it.push(st),st}get _loadTestFont(){const nt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,j.shadow)(this,"_loadTestFont",nt)}_prepareFontLoadEvent(nt,rt){function it(bt,At){return bt.charCodeAt(At)<<24|bt.charCodeAt(At+1)<<16|bt.charCodeAt(At+2)<<8|bt.charCodeAt(At+3)&255}function st(bt,At,Pt,en){const Wt=bt.substring(0,At),Jt=bt.substring(At+Pt);return Wt+en+Jt}let ot,lt;const at=this._document.createElement("canvas");at.width=1,at.height=1;const ut=at.getContext("2d");let dt=0;function ct(bt,At){if(++dt>30){(0,j.warn)("Load test font never loaded."),At();return}if(ut.font="30px "+bt,ut.fillText(".",0,20),ut.getImageData(0,0,1,1).data[3]>0){At();return}setTimeout(ct.bind(null,bt,At))}const ht=`lt${Date.now()}${this.loadTestFontId++}`;let pt=this._loadTestFont;pt=st(pt,976,ht.length,ht);const ft=16,gt=1482184792;let xt=it(pt,ft);for(ot=0,lt=ht.length-3;ot<lt;ot+=4)xt=xt-gt+it(ht,ot)|0;ot<ht.length&&(xt=xt-gt+it(ht+"XXX",ot)|0),pt=st(pt,ft,4,(0,j.string32)(xt));const vt=`url(data:font/opentype;base64,${btoa(pt)});`,St=`@font-face {font-family:"${ht}";src:${vt}}`;this.insertRule(St);const Tt=this._document.createElement("div");Tt.style.visibility="hidden",Tt.style.width=Tt.style.height="10px",Tt.style.position="absolute",Tt.style.top=Tt.style.left="0px";for(const bt of[nt.loadedName,ht]){const At=this._document.createElement("span");At.textContent="Hi",At.style.fontFamily=bt,Tt.append(At)}this._document.body.append(Tt),ct(ht,()=>{Tt.remove(),rt.complete()})}}et=new WeakMap,g.FontLoader=$;class _e{constructor(nt,{isEvalSupported:rt=!0,disableFontFace:it=!1,ignoreErrors:st=!1,inspectFont:ot=null}){this.compiledGlyphs=Object.create(null);for(const lt in nt)this[lt]=nt[lt];this.isEvalSupported=rt!==!1,this.disableFontFace=it===!0,this.ignoreErrors=st===!0,this._inspectFont=ot}createNativeFontFace(){var rt;if(!this.data||this.disableFontFace)return null;let nt;if(!this.cssFontInfo)nt=new FontFace(this.loadedName,this.data,{});else{const it={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(it.style=`oblique ${this.cssFontInfo.italicAngle}deg`),nt=new FontFace(this.cssFontInfo.fontFamily,this.data,it)}return(rt=this._inspectFont)==null||rt.call(this,this),nt}createFontFaceRule(){var st;if(!this.data||this.disableFontFace)return null;const nt=(0,j.bytesToString)(this.data),rt=`url(data:${this.mimetype};base64,${btoa(nt)});`;let it;if(!this.cssFontInfo)it=`@font-face {font-family:"${this.loadedName}";src:${rt}}`;else{let ot=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ot+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),it=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ot}src:${rt}}`}return(st=this._inspectFont)==null||st.call(this,this,rt),it}getPathGenerator(nt,rt){if(this.compiledGlyphs[rt]!==void 0)return this.compiledGlyphs[rt];let it;try{it=nt.get(this.loadedName+"_path_"+rt)}catch(st){if(!this.ignoreErrors)throw st;return(0,j.warn)(`getPathGenerator - ignoring character: "${st}".`),this.compiledGlyphs[rt]=function(ot,lt){}}if(this.isEvalSupported&&j.FeatureTest.isEvalSupported){const st=[];for(const ot of it){const lt=ot.args!==void 0?ot.args.join(","):"";st.push("c.",ot.cmd,"(",lt,`);
`)}return this.compiledGlyphs[rt]=new Function("c","size",st.join(""))}return this.compiledGlyphs[rt]=function(st,ot){for(const lt of it)lt.cmd==="scale"&&(lt.args=[ot,-ot]),st[lt.cmd].apply(st,lt.args)}}}g.FontFaceObject=_e},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NodeStandardFontDataFactory=g.NodeFilterFactory=g.NodeCanvasFactory=g.NodeCMapReaderFactory=void 0;var j=_(7);_(1);const $=function(rt){return new Promise((it,st)=>{require$$5.readFile(rt,(lt,at)=>{if(lt||!at){st(new Error(lt));return}it(new Uint8Array(at))})})};class _e extends j.BaseFilterFactory{}g.NodeFilterFactory=_e;class et extends j.BaseCanvasFactory{_createCanvas(it,st){return require$$5.createCanvas(it,st)}}g.NodeCanvasFactory=et;class tt extends j.BaseCMapReaderFactory{_fetchData(it,st){return $(it).then(ot=>({cMapData:ot,compressionType:st}))}}g.NodeCMapReaderFactory=tt;class nt extends j.BaseStandardFontDataFactory{_fetchData(it){return $(it)}}g.NodeStandardFontDataFactory=nt},(b,g,_)=>{var Ht,zo,Ho;Object.defineProperty(g,"__esModule",{value:!0}),g.CanvasGraphics=void 0;var j=_(1),$=_(6),_e=_(12),et=_(13);const tt=16,nt=100,rt=4096,it=15,st=10,ot=1e3,lt=16;function at(Ot,wt){if(Ot._removeMirroring)throw new Error("Context is already forwarding operations.");Ot.__originalSave=Ot.save,Ot.__originalRestore=Ot.restore,Ot.__originalRotate=Ot.rotate,Ot.__originalScale=Ot.scale,Ot.__originalTranslate=Ot.translate,Ot.__originalTransform=Ot.transform,Ot.__originalSetTransform=Ot.setTransform,Ot.__originalResetTransform=Ot.resetTransform,Ot.__originalClip=Ot.clip,Ot.__originalMoveTo=Ot.moveTo,Ot.__originalLineTo=Ot.lineTo,Ot.__originalBezierCurveTo=Ot.bezierCurveTo,Ot.__originalRect=Ot.rect,Ot.__originalClosePath=Ot.closePath,Ot.__originalBeginPath=Ot.beginPath,Ot._removeMirroring=()=>{Ot.save=Ot.__originalSave,Ot.restore=Ot.__originalRestore,Ot.rotate=Ot.__originalRotate,Ot.scale=Ot.__originalScale,Ot.translate=Ot.__originalTranslate,Ot.transform=Ot.__originalTransform,Ot.setTransform=Ot.__originalSetTransform,Ot.resetTransform=Ot.__originalResetTransform,Ot.clip=Ot.__originalClip,Ot.moveTo=Ot.__originalMoveTo,Ot.lineTo=Ot.__originalLineTo,Ot.bezierCurveTo=Ot.__originalBezierCurveTo,Ot.rect=Ot.__originalRect,Ot.closePath=Ot.__originalClosePath,Ot.beginPath=Ot.__originalBeginPath,delete Ot._removeMirroring},Ot.save=function(){wt.save(),this.__originalSave()},Ot.restore=function(){wt.restore(),this.__originalRestore()},Ot.translate=function(_t,Nt){wt.translate(_t,Nt),this.__originalTranslate(_t,Nt)},Ot.scale=function(_t,Nt){wt.scale(_t,Nt),this.__originalScale(_t,Nt)},Ot.transform=function(_t,Nt,Lt,It,Yt,mn){wt.transform(_t,Nt,Lt,It,Yt,mn),this.__originalTransform(_t,Nt,Lt,It,Yt,mn)},Ot.setTransform=function(_t,Nt,Lt,It,Yt,mn){wt.setTransform(_t,Nt,Lt,It,Yt,mn),this.__originalSetTransform(_t,Nt,Lt,It,Yt,mn)},Ot.resetTransform=function(){wt.resetTransform(),this.__originalResetTransform()},Ot.rotate=function(_t){wt.rotate(_t),this.__originalRotate(_t)},Ot.clip=function(_t){wt.clip(_t),this.__originalClip(_t)},Ot.moveTo=function(Ct,_t){wt.moveTo(Ct,_t),this.__originalMoveTo(Ct,_t)},Ot.lineTo=function(Ct,_t){wt.lineTo(Ct,_t),this.__originalLineTo(Ct,_t)},Ot.bezierCurveTo=function(Ct,_t,Nt,Lt,It,Yt){wt.bezierCurveTo(Ct,_t,Nt,Lt,It,Yt),this.__originalBezierCurveTo(Ct,_t,Nt,Lt,It,Yt)},Ot.rect=function(Ct,_t,Nt,Lt){wt.rect(Ct,_t,Nt,Lt),this.__originalRect(Ct,_t,Nt,Lt)},Ot.closePath=function(){wt.closePath(),this.__originalClosePath()},Ot.beginPath=function(){wt.beginPath(),this.__originalBeginPath()}}class ut{constructor(wt){this.canvasFactory=wt,this.cache=Object.create(null)}getCanvas(wt,Ct,_t){let Nt;return this.cache[wt]!==void 0?(Nt=this.cache[wt],this.canvasFactory.reset(Nt,Ct,_t)):(Nt=this.canvasFactory.create(Ct,_t),this.cache[wt]=Nt),Nt}delete(wt){delete this.cache[wt]}clear(){for(const wt in this.cache){const Ct=this.cache[wt];this.canvasFactory.destroy(Ct),delete this.cache[wt]}}}function dt(Ot,wt,Ct,_t,Nt,Lt,It,Yt,mn,vn){const[xn,En,An,kn,ln,un]=(0,$.getCurrentTransform)(Ot);if(En===0&&An===0){const nn=It*xn+ln,dn=Math.round(nn),Sn=Yt*kn+un,_n=Math.round(Sn),Cn=(It+mn)*xn+ln,tn=Math.abs(Math.round(Cn)-dn)||1,Ln=(Yt+vn)*kn+un,Dn=Math.abs(Math.round(Ln)-_n)||1;return Ot.setTransform(Math.sign(xn),0,0,Math.sign(kn),dn,_n),Ot.drawImage(wt,Ct,_t,Nt,Lt,0,0,tn,Dn),Ot.setTransform(xn,En,An,kn,ln,un),[tn,Dn]}if(xn===0&&kn===0){const nn=Yt*An+ln,dn=Math.round(nn),Sn=It*En+un,_n=Math.round(Sn),Cn=(Yt+vn)*An+ln,tn=Math.abs(Math.round(Cn)-dn)||1,Ln=(It+mn)*En+un,Dn=Math.abs(Math.round(Ln)-_n)||1;return Ot.setTransform(0,Math.sign(En),Math.sign(An),0,dn,_n),Ot.drawImage(wt,Ct,_t,Nt,Lt,0,0,Dn,tn),Ot.setTransform(xn,En,An,kn,ln,un),[Dn,tn]}Ot.drawImage(wt,Ct,_t,Nt,Lt,It,Yt,mn,vn);const Mt=Math.hypot(xn,En),Bt=Math.hypot(An,kn);return[Mt*mn,Bt*vn]}function ct(Ot){const{width:wt,height:Ct}=Ot;if(wt>ot||Ct>ot)return null;const _t=1e3,Nt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Lt=wt+1;let It=new Uint8Array(Lt*(Ct+1)),Yt,mn,vn;const xn=wt+7&-8;let En=new Uint8Array(xn*Ct),An=0;for(const Bt of Ot.data){let nn=128;for(;nn>0;)En[An++]=Bt&nn?0:255,nn>>=1}let kn=0;for(An=0,En[An]!==0&&(It[0]=1,++kn),mn=1;mn<wt;mn++)En[An]!==En[An+1]&&(It[mn]=En[An]?2:1,++kn),An++;for(En[An]!==0&&(It[mn]=2,++kn),Yt=1;Yt<Ct;Yt++){An=Yt*xn,vn=Yt*Lt,En[An-xn]!==En[An]&&(It[vn]=En[An]?1:8,++kn);let Bt=(En[An]?4:0)+(En[An-xn]?8:0);for(mn=1;mn<wt;mn++)Bt=(Bt>>2)+(En[An+1]?4:0)+(En[An-xn+1]?8:0),Nt[Bt]&&(It[vn+mn]=Nt[Bt],++kn),An++;if(En[An-xn]!==En[An]&&(It[vn+mn]=En[An]?2:4,++kn),kn>_t)return null}for(An=xn*(Ct-1),vn=Yt*Lt,En[An]!==0&&(It[vn]=8,++kn),mn=1;mn<wt;mn++)En[An]!==En[An+1]&&(It[vn+mn]=En[An]?4:8,++kn),An++;if(En[An]!==0&&(It[vn+mn]=4,++kn),kn>_t)return null;const ln=new Int32Array([0,Lt,-1,0,-Lt,0,0,0,1]),un=new Path2D;for(Yt=0;kn&&Yt<=Ct;Yt++){let Bt=Yt*Lt;const nn=Bt+wt;for(;Bt<nn&&!It[Bt];)Bt++;if(Bt===nn)continue;un.moveTo(Bt%Lt,Yt);const dn=Bt;let Sn=It[Bt];do{const _n=ln[Sn];do Bt+=_n;while(!It[Bt]);const Cn=It[Bt];Cn!==5&&Cn!==10?(Sn=Cn,It[Bt]=0):(Sn=Cn&51*Sn>>4,It[Bt]&=Sn>>2|Sn<<2),un.lineTo(Bt%Lt,Bt/Lt|0),It[Bt]||--kn}while(dn!==Bt);--Yt}return En=null,It=null,function(Bt){Bt.save(),Bt.scale(1/wt,-1/Ct),Bt.translate(0,-Ct),Bt.fill(un),Bt.beginPath(),Bt.restore()}}class ht{constructor(wt,Ct){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=j.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=j.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=j.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,wt,Ct])}clone(){const wt=Object.create(this);return wt.clipBox=this.clipBox.slice(),wt}setCurrentPoint(wt,Ct){this.x=wt,this.y=Ct}updatePathMinMax(wt,Ct,_t){[Ct,_t]=j.Util.applyTransform([Ct,_t],wt),this.minX=Math.min(this.minX,Ct),this.minY=Math.min(this.minY,_t),this.maxX=Math.max(this.maxX,Ct),this.maxY=Math.max(this.maxY,_t)}updateRectMinMax(wt,Ct){const _t=j.Util.applyTransform(Ct,wt),Nt=j.Util.applyTransform(Ct.slice(2),wt);this.minX=Math.min(this.minX,_t[0],Nt[0]),this.minY=Math.min(this.minY,_t[1],Nt[1]),this.maxX=Math.max(this.maxX,_t[0],Nt[0]),this.maxY=Math.max(this.maxY,_t[1],Nt[1])}updateScalingPathMinMax(wt,Ct){j.Util.scaleMinMax(wt,Ct),this.minX=Math.min(this.minX,Ct[0]),this.maxX=Math.max(this.maxX,Ct[1]),this.minY=Math.min(this.minY,Ct[2]),this.maxY=Math.max(this.maxY,Ct[3])}updateCurvePathMinMax(wt,Ct,_t,Nt,Lt,It,Yt,mn,vn,xn){const En=j.Util.bezierBoundingBox(Ct,_t,Nt,Lt,It,Yt,mn,vn);if(xn){xn[0]=Math.min(xn[0],En[0],En[2]),xn[1]=Math.max(xn[1],En[0],En[2]),xn[2]=Math.min(xn[2],En[1],En[3]),xn[3]=Math.max(xn[3],En[1],En[3]);return}this.updateRectMinMax(wt,En)}getPathBoundingBox(wt=_e.PathType.FILL,Ct=null){const _t=[this.minX,this.minY,this.maxX,this.maxY];if(wt===_e.PathType.STROKE){Ct||(0,j.unreachable)("Stroke bounding box must include transform.");const Nt=j.Util.singularValueDecompose2dScale(Ct),Lt=Nt[0]*this.lineWidth/2,It=Nt[1]*this.lineWidth/2;_t[0]-=Lt,_t[1]-=It,_t[2]+=Lt,_t[3]+=It}return _t}updateClipFromPath(){const wt=j.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(wt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(wt){this.clipBox=wt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(wt=_e.PathType.FILL,Ct=null){return j.Util.intersect(this.clipBox,this.getPathBoundingBox(wt,Ct))}}function pt(Ot,wt){if(typeof ImageData<"u"&&wt instanceof ImageData){Ot.putImageData(wt,0,0);return}const Ct=wt.height,_t=wt.width,Nt=Ct%lt,Lt=(Ct-Nt)/lt,It=Nt===0?Lt:Lt+1,Yt=Ot.createImageData(_t,lt);let mn=0,vn;const xn=wt.data,En=Yt.data;let An,kn,ln,un;if(wt.kind===j.ImageKind.GRAYSCALE_1BPP){const Mt=xn.byteLength,Bt=new Uint32Array(En.buffer,0,En.byteLength>>2),nn=Bt.length,dn=_t+7>>3,Sn=4294967295,_n=j.FeatureTest.isLittleEndian?4278190080:255;for(An=0;An<It;An++){for(ln=An<Lt?lt:Nt,vn=0,kn=0;kn<ln;kn++){const Cn=Mt-mn;let tn=0;const Ln=Cn>dn?_t:Cn*8-7,Dn=Ln&-8;let ur=0,rr=0;for(;tn<Dn;tn+=8)rr=xn[mn++],Bt[vn++]=rr&128?Sn:_n,Bt[vn++]=rr&64?Sn:_n,Bt[vn++]=rr&32?Sn:_n,Bt[vn++]=rr&16?Sn:_n,Bt[vn++]=rr&8?Sn:_n,Bt[vn++]=rr&4?Sn:_n,Bt[vn++]=rr&2?Sn:_n,Bt[vn++]=rr&1?Sn:_n;for(;tn<Ln;tn++)ur===0&&(rr=xn[mn++],ur=128),Bt[vn++]=rr&ur?Sn:_n,ur>>=1}for(;vn<nn;)Bt[vn++]=0;Ot.putImageData(Yt,0,An*lt)}}else if(wt.kind===j.ImageKind.RGBA_32BPP){for(kn=0,un=_t*lt*4,An=0;An<Lt;An++)En.set(xn.subarray(mn,mn+un)),mn+=un,Ot.putImageData(Yt,0,kn),kn+=lt;An<It&&(un=_t*Nt*4,En.set(xn.subarray(mn,mn+un)),Ot.putImageData(Yt,0,kn))}else if(wt.kind===j.ImageKind.RGB_24BPP)for(ln=lt,un=_t*ln,An=0;An<It;An++){for(An>=Lt&&(ln=Nt,un=_t*ln),vn=0,kn=un;kn--;)En[vn++]=xn[mn++],En[vn++]=xn[mn++],En[vn++]=xn[mn++],En[vn++]=255;Ot.putImageData(Yt,0,An*lt)}else throw new Error(`bad image kind: ${wt.kind}`)}function mt(Ot,wt){if(wt.bitmap){Ot.drawImage(wt.bitmap,0,0);return}const Ct=wt.height,_t=wt.width,Nt=Ct%lt,Lt=(Ct-Nt)/lt,It=Nt===0?Lt:Lt+1,Yt=Ot.createImageData(_t,lt);let mn=0;const vn=wt.data,xn=Yt.data;for(let En=0;En<It;En++){const An=En<Lt?lt:Nt;({srcPos:mn}=(0,et.convertBlackAndWhiteToRGBA)({src:vn,srcPos:mn,dest:xn,width:_t,height:An,nonBlackColor:0})),Ot.putImageData(Yt,0,En*lt)}}function ft(Ot,wt){const Ct=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const _t of Ct)Ot[_t]!==void 0&&(wt[_t]=Ot[_t]);Ot.setLineDash!==void 0&&(wt.setLineDash(Ot.getLineDash()),wt.lineDashOffset=Ot.lineDashOffset)}function gt(Ot){if(Ot.strokeStyle=Ot.fillStyle="#000000",Ot.fillRule="nonzero",Ot.globalAlpha=1,Ot.lineWidth=1,Ot.lineCap="butt",Ot.lineJoin="miter",Ot.miterLimit=10,Ot.globalCompositeOperation="source-over",Ot.font="10px sans-serif",Ot.setLineDash!==void 0&&(Ot.setLineDash([]),Ot.lineDashOffset=0),!j.isNodeJS){const{filter:wt}=Ot;wt!=="none"&&wt!==""&&(Ot.filter="none")}}function xt(Ot,wt,Ct,_t){const Nt=Ot.length;for(let Lt=3;Lt<Nt;Lt+=4){const It=Ot[Lt];if(It===0)Ot[Lt-3]=wt,Ot[Lt-2]=Ct,Ot[Lt-1]=_t;else if(It<255){const Yt=255-It;Ot[Lt-3]=Ot[Lt-3]*It+wt*Yt>>8,Ot[Lt-2]=Ot[Lt-2]*It+Ct*Yt>>8,Ot[Lt-1]=Ot[Lt-1]*It+_t*Yt>>8}}}function vt(Ot,wt,Ct){const _t=Ot.length,Nt=1/255;for(let Lt=3;Lt<_t;Lt+=4){const It=Ct?Ct[Ot[Lt]]:Ot[Lt];wt[Lt]=wt[Lt]*It*Nt|0}}function St(Ot,wt,Ct){const _t=Ot.length;for(let Nt=3;Nt<_t;Nt+=4){const Lt=Ot[Nt-3]*77+Ot[Nt-2]*152+Ot[Nt-1]*28;wt[Nt]=Ct?wt[Nt]*Ct[Lt>>8]>>8:wt[Nt]*Lt>>16}}function Tt(Ot,wt,Ct,_t,Nt,Lt,It,Yt,mn,vn,xn){const En=!!Lt,An=En?Lt[0]:0,kn=En?Lt[1]:0,ln=En?Lt[2]:0,un=Nt==="Luminosity"?St:vt,Bt=Math.min(_t,Math.ceil(1048576/Ct));for(let nn=0;nn<_t;nn+=Bt){const dn=Math.min(Bt,_t-nn),Sn=Ot.getImageData(Yt-vn,nn+(mn-xn),Ct,dn),_n=wt.getImageData(Yt,nn+mn,Ct,dn);En&&xt(Sn.data,An,kn,ln),un(Sn.data,_n.data,It),wt.putImageData(_n,Yt,nn+mn)}}function bt(Ot,wt,Ct,_t){const Nt=_t[0],Lt=_t[1],It=_t[2]-Nt,Yt=_t[3]-Lt;It===0||Yt===0||(Tt(wt.context,Ct,It,Yt,wt.subtype,wt.backdrop,wt.transferMap,Nt,Lt,wt.offsetX,wt.offsetY),Ot.save(),Ot.globalAlpha=1,Ot.globalCompositeOperation="source-over",Ot.setTransform(1,0,0,1,0,0),Ot.drawImage(Ct.canvas,0,0),Ot.restore())}function At(Ot,wt){const Ct=j.Util.singularValueDecompose2dScale(Ot);Ct[0]=Math.fround(Ct[0]),Ct[1]=Math.fround(Ct[1]);const _t=Math.fround((globalThis.devicePixelRatio||1)*$.PixelsPerInch.PDF_TO_CSS_UNITS);return wt!==void 0?wt:Ct[0]<=_t||Ct[1]<=_t}const Pt=["butt","round","square"],en=["miter","round","bevel"],Wt={},Jt={},Zt=class Zt{constructor(wt,Ct,_t,Nt,Lt,{optionalContentConfig:It,markedContentStack:Yt=null},mn,vn){fn(this,Ht);this.ctx=wt,this.current=new ht(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Ct,this.objs=_t,this.canvasFactory=Nt,this.filterFactory=Lt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Yt||[],this.optionalContentConfig=It,this.cachedCanvases=new ut(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=mn,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=vn,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(wt,Ct=null){return typeof wt=="string"?wt.startsWith("g_")?this.commonObjs.get(wt):this.objs.get(wt):Ct}beginDrawing({transform:wt,viewport:Ct,transparency:_t=!1,background:Nt=null}){const Lt=this.ctx.canvas.width,It=this.ctx.canvas.height,Yt=this.ctx.fillStyle;if(this.ctx.fillStyle=Nt||"#ffffff",this.ctx.fillRect(0,0,Lt,It),this.ctx.fillStyle=Yt,_t){const mn=this.cachedCanvases.getCanvas("transparent",Lt,It);this.compositeCtx=this.ctx,this.transparentCanvas=mn.canvas,this.ctx=mn.context,this.ctx.save(),this.ctx.transform(...(0,$.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),gt(this.ctx),wt&&(this.ctx.transform(...wt),this.outputScaleX=wt[0],this.outputScaleY=wt[0]),this.ctx.transform(...Ct.transform),this.viewportScale=Ct.scale,this.baseTransform=(0,$.getCurrentTransform)(this.ctx)}executeOperatorList(wt,Ct,_t,Nt){const Lt=wt.argsArray,It=wt.fnArray;let Yt=Ct||0;const mn=Lt.length;if(mn===Yt)return Yt;const vn=mn-Yt>st&&typeof _t=="function",xn=vn?Date.now()+it:0;let En=0;const An=this.commonObjs,kn=this.objs;let ln;for(;;){if(Nt!==void 0&&Yt===Nt.nextBreakPoint)return Nt.breakIt(Yt,_t),Yt;if(ln=It[Yt],ln!==j.OPS.dependency)this[ln].apply(this,Lt[Yt]);else for(const un of Lt[Yt]){const Mt=un.startsWith("g_")?An:kn;if(!Mt.has(un))return Mt.get(un,_t),Yt}if(Yt++,Yt===mn)return Yt;if(vn&&++En>st){if(Date.now()>xn)return _t(),Yt;En=0}}}endDrawing(){Qt(this,Ht,zo).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const wt of this._cachedBitmapsMap.values()){for(const Ct of wt.values())typeof HTMLCanvasElement<"u"&&Ct instanceof HTMLCanvasElement&&(Ct.width=Ct.height=0);wt.clear()}this._cachedBitmapsMap.clear(),Qt(this,Ht,Ho).call(this)}_scaleImage(wt,Ct){const _t=wt.width,Nt=wt.height;let Lt=Math.max(Math.hypot(Ct[0],Ct[1]),1),It=Math.max(Math.hypot(Ct[2],Ct[3]),1),Yt=_t,mn=Nt,vn="prescale1",xn,En;for(;Lt>2&&Yt>1||It>2&&mn>1;){let An=Yt,kn=mn;Lt>2&&Yt>1&&(An=Yt>=16384?Math.floor(Yt/2)-1||1:Math.ceil(Yt/2),Lt/=Yt/An),It>2&&mn>1&&(kn=mn>=16384?Math.floor(mn/2)-1||1:Math.ceil(mn)/2,It/=mn/kn),xn=this.cachedCanvases.getCanvas(vn,An,kn),En=xn.context,En.clearRect(0,0,An,kn),En.drawImage(wt,0,0,Yt,mn,0,0,An,kn),wt=xn.canvas,Yt=An,mn=kn,vn=vn==="prescale1"?"prescale2":"prescale1"}return{img:wt,paintWidth:Yt,paintHeight:mn}}_createMaskCanvas(wt){const Ct=this.ctx,{width:_t,height:Nt}=wt,Lt=this.current.fillColor,It=this.current.patternFill,Yt=(0,$.getCurrentTransform)(Ct);let mn,vn,xn,En;if((wt.bitmap||wt.data)&&wt.count>1){const tn=wt.bitmap||wt.data.buffer;vn=JSON.stringify(It?Yt:[Yt.slice(0,4),Lt]),mn=this._cachedBitmapsMap.get(tn),mn||(mn=new Map,this._cachedBitmapsMap.set(tn,mn));const Ln=mn.get(vn);if(Ln&&!It){const Dn=Math.round(Math.min(Yt[0],Yt[2])+Yt[4]),ur=Math.round(Math.min(Yt[1],Yt[3])+Yt[5]);return{canvas:Ln,offsetX:Dn,offsetY:ur}}xn=Ln}xn||(En=this.cachedCanvases.getCanvas("maskCanvas",_t,Nt),mt(En.context,wt));let An=j.Util.transform(Yt,[1/_t,0,0,-1/Nt,0,0]);An=j.Util.transform(An,[1,0,0,1,0,-Nt]);const kn=j.Util.applyTransform([0,0],An),ln=j.Util.applyTransform([_t,Nt],An),un=j.Util.normalizeRect([kn[0],kn[1],ln[0],ln[1]]),Mt=Math.round(un[2]-un[0])||1,Bt=Math.round(un[3]-un[1])||1,nn=this.cachedCanvases.getCanvas("fillCanvas",Mt,Bt),dn=nn.context,Sn=Math.min(kn[0],ln[0]),_n=Math.min(kn[1],ln[1]);dn.translate(-Sn,-_n),dn.transform(...An),xn||(xn=this._scaleImage(En.canvas,(0,$.getCurrentTransformInverse)(dn)),xn=xn.img,mn&&It&&mn.set(vn,xn)),dn.imageSmoothingEnabled=At((0,$.getCurrentTransform)(dn),wt.interpolate),dt(dn,xn,0,0,xn.width,xn.height,0,0,_t,Nt),dn.globalCompositeOperation="source-in";const Cn=j.Util.transform((0,$.getCurrentTransformInverse)(dn),[1,0,0,1,-Sn,-_n]);return dn.fillStyle=It?Lt.getPattern(Ct,this,Cn,_e.PathType.FILL):Lt,dn.fillRect(0,0,_t,Nt),mn&&!It&&(this.cachedCanvases.delete("fillCanvas"),mn.set(vn,nn.canvas)),{canvas:nn.canvas,offsetX:Math.round(Sn),offsetY:Math.round(_n)}}setLineWidth(wt){wt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=wt,this.ctx.lineWidth=wt}setLineCap(wt){this.ctx.lineCap=Pt[wt]}setLineJoin(wt){this.ctx.lineJoin=en[wt]}setMiterLimit(wt){this.ctx.miterLimit=wt}setDash(wt,Ct){const _t=this.ctx;_t.setLineDash!==void 0&&(_t.setLineDash(wt),_t.lineDashOffset=Ct)}setRenderingIntent(wt){}setFlatness(wt){}setGState(wt){for(const[Ct,_t]of wt)switch(Ct){case"LW":this.setLineWidth(_t);break;case"LC":this.setLineCap(_t);break;case"LJ":this.setLineJoin(_t);break;case"ML":this.setMiterLimit(_t);break;case"D":this.setDash(_t[0],_t[1]);break;case"RI":this.setRenderingIntent(_t);break;case"FL":this.setFlatness(_t);break;case"Font":this.setFont(_t[0],_t[1]);break;case"CA":this.current.strokeAlpha=_t;break;case"ca":this.current.fillAlpha=_t,this.ctx.globalAlpha=_t;break;case"BM":this.ctx.globalCompositeOperation=_t;break;case"SMask":this.current.activeSMask=_t?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(_t);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const wt=this.inSMaskMode;this.current.activeSMask&&!wt?this.beginSMaskMode():!this.current.activeSMask&&wt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const wt=this.ctx.canvas.width,Ct=this.ctx.canvas.height,_t="smaskGroupAt"+this.groupLevel,Nt=this.cachedCanvases.getCanvas(_t,wt,Ct);this.suspendedCtx=this.ctx,this.ctx=Nt.context;const Lt=this.ctx;Lt.setTransform(...(0,$.getCurrentTransform)(this.suspendedCtx)),ft(this.suspendedCtx,Lt),at(Lt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ft(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(wt){if(!this.current.activeSMask)return;wt?(wt[0]=Math.floor(wt[0]),wt[1]=Math.floor(wt[1]),wt[2]=Math.ceil(wt[2]),wt[3]=Math.ceil(wt[3])):wt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Ct=this.current.activeSMask,_t=this.suspendedCtx;bt(_t,Ct,this.ctx,wt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ft(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const wt=this.current;this.stateStack.push(wt),this.current=wt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ft(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(wt,Ct,_t,Nt,Lt,It){this.ctx.transform(wt,Ct,_t,Nt,Lt,It),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(wt,Ct,_t){const Nt=this.ctx,Lt=this.current;let It=Lt.x,Yt=Lt.y,mn,vn;const xn=(0,$.getCurrentTransform)(Nt),En=xn[0]===0&&xn[3]===0||xn[1]===0&&xn[2]===0,An=En?_t.slice(0):null;for(let kn=0,ln=0,un=wt.length;kn<un;kn++)switch(wt[kn]|0){case j.OPS.rectangle:It=Ct[ln++],Yt=Ct[ln++];const Mt=Ct[ln++],Bt=Ct[ln++],nn=It+Mt,dn=Yt+Bt;Nt.moveTo(It,Yt),Mt===0||Bt===0?Nt.lineTo(nn,dn):(Nt.lineTo(nn,Yt),Nt.lineTo(nn,dn),Nt.lineTo(It,dn)),En||Lt.updateRectMinMax(xn,[It,Yt,nn,dn]),Nt.closePath();break;case j.OPS.moveTo:It=Ct[ln++],Yt=Ct[ln++],Nt.moveTo(It,Yt),En||Lt.updatePathMinMax(xn,It,Yt);break;case j.OPS.lineTo:It=Ct[ln++],Yt=Ct[ln++],Nt.lineTo(It,Yt),En||Lt.updatePathMinMax(xn,It,Yt);break;case j.OPS.curveTo:mn=It,vn=Yt,It=Ct[ln+4],Yt=Ct[ln+5],Nt.bezierCurveTo(Ct[ln],Ct[ln+1],Ct[ln+2],Ct[ln+3],It,Yt),Lt.updateCurvePathMinMax(xn,mn,vn,Ct[ln],Ct[ln+1],Ct[ln+2],Ct[ln+3],It,Yt,An),ln+=6;break;case j.OPS.curveTo2:mn=It,vn=Yt,Nt.bezierCurveTo(It,Yt,Ct[ln],Ct[ln+1],Ct[ln+2],Ct[ln+3]),Lt.updateCurvePathMinMax(xn,mn,vn,It,Yt,Ct[ln],Ct[ln+1],Ct[ln+2],Ct[ln+3],An),It=Ct[ln+2],Yt=Ct[ln+3],ln+=4;break;case j.OPS.curveTo3:mn=It,vn=Yt,It=Ct[ln+2],Yt=Ct[ln+3],Nt.bezierCurveTo(Ct[ln],Ct[ln+1],It,Yt,It,Yt),Lt.updateCurvePathMinMax(xn,mn,vn,Ct[ln],Ct[ln+1],It,Yt,It,Yt,An),ln+=4;break;case j.OPS.closePath:Nt.closePath();break}En&&Lt.updateScalingPathMinMax(xn,An),Lt.setCurrentPoint(It,Yt)}closePath(){this.ctx.closePath()}stroke(wt=!0){const Ct=this.ctx,_t=this.current.strokeColor;Ct.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof _t=="object"&&(_t!=null&&_t.getPattern)?(Ct.save(),Ct.strokeStyle=_t.getPattern(Ct,this,(0,$.getCurrentTransformInverse)(Ct),_e.PathType.STROKE),this.rescaleAndStroke(!1),Ct.restore()):this.rescaleAndStroke(!0)),wt&&this.consumePath(this.current.getClippedPathBoundingBox()),Ct.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(wt=!0){const Ct=this.ctx,_t=this.current.fillColor,Nt=this.current.patternFill;let Lt=!1;Nt&&(Ct.save(),Ct.fillStyle=_t.getPattern(Ct,this,(0,$.getCurrentTransformInverse)(Ct),_e.PathType.FILL),Lt=!0);const It=this.current.getClippedPathBoundingBox();this.contentVisible&&It!==null&&(this.pendingEOFill?(Ct.fill("evenodd"),this.pendingEOFill=!1):Ct.fill()),Lt&&Ct.restore(),wt&&this.consumePath(It)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Wt}eoClip(){this.pendingClip=Jt}beginText(){this.current.textMatrix=j.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const wt=this.pendingTextPaths,Ct=this.ctx;if(wt===void 0){Ct.beginPath();return}Ct.save(),Ct.beginPath();for(const _t of wt)Ct.setTransform(..._t.transform),Ct.translate(_t.x,_t.y),_t.addToPath(Ct,_t.fontSize);Ct.restore(),Ct.clip(),Ct.beginPath(),delete this.pendingTextPaths}setCharSpacing(wt){this.current.charSpacing=wt}setWordSpacing(wt){this.current.wordSpacing=wt}setHScale(wt){this.current.textHScale=wt/100}setLeading(wt){this.current.leading=-wt}setFont(wt,Ct){var xn;const _t=this.commonObjs.get(wt),Nt=this.current;if(!_t)throw new Error(`Can't find font for ${wt}`);if(Nt.fontMatrix=_t.fontMatrix||j.FONT_IDENTITY_MATRIX,(Nt.fontMatrix[0]===0||Nt.fontMatrix[3]===0)&&(0,j.warn)("Invalid font matrix for font "+wt),Ct<0?(Ct=-Ct,Nt.fontDirection=-1):Nt.fontDirection=1,this.current.font=_t,this.current.fontSize=Ct,_t.isType3Font)return;const Lt=_t.loadedName||"sans-serif",It=((xn=_t.systemFontInfo)==null?void 0:xn.css)||`"${Lt}", ${_t.fallbackName}`;let Yt="normal";_t.black?Yt="900":_t.bold&&(Yt="bold");const mn=_t.italic?"italic":"normal";let vn=Ct;Ct<tt?vn=tt:Ct>nt&&(vn=nt),this.current.fontSizeScale=Ct/vn,this.ctx.font=`${mn} ${Yt} ${vn}px ${It}`}setTextRenderingMode(wt){this.current.textRenderingMode=wt}setTextRise(wt){this.current.textRise=wt}moveText(wt,Ct){this.current.x=this.current.lineX+=wt,this.current.y=this.current.lineY+=Ct}setLeadingMoveText(wt,Ct){this.setLeading(-Ct),this.moveText(wt,Ct)}setTextMatrix(wt,Ct,_t,Nt,Lt,It){this.current.textMatrix=[wt,Ct,_t,Nt,Lt,It],this.current.textMatrixScale=Math.hypot(wt,Ct),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(wt,Ct,_t,Nt){const Lt=this.ctx,It=this.current,Yt=It.font,mn=It.textRenderingMode,vn=It.fontSize/It.fontSizeScale,xn=mn&j.TextRenderingMode.FILL_STROKE_MASK,En=!!(mn&j.TextRenderingMode.ADD_TO_PATH_FLAG),An=It.patternFill&&!Yt.missingFile;let kn;(Yt.disableFontFace||En||An)&&(kn=Yt.getPathGenerator(this.commonObjs,wt)),Yt.disableFontFace||An?(Lt.save(),Lt.translate(Ct,_t),Lt.beginPath(),kn(Lt,vn),Nt&&Lt.setTransform(...Nt),(xn===j.TextRenderingMode.FILL||xn===j.TextRenderingMode.FILL_STROKE)&&Lt.fill(),(xn===j.TextRenderingMode.STROKE||xn===j.TextRenderingMode.FILL_STROKE)&&Lt.stroke(),Lt.restore()):((xn===j.TextRenderingMode.FILL||xn===j.TextRenderingMode.FILL_STROKE)&&Lt.fillText(wt,Ct,_t),(xn===j.TextRenderingMode.STROKE||xn===j.TextRenderingMode.FILL_STROKE)&&Lt.strokeText(wt,Ct,_t)),En&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,$.getCurrentTransform)(Lt),x:Ct,y:_t,fontSize:vn,addToPath:kn})}get isFontSubpixelAAEnabled(){const{context:wt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);wt.scale(1.5,1),wt.fillText("I",0,10);const Ct=wt.getImageData(0,0,10,10).data;let _t=!1;for(let Nt=3;Nt<Ct.length;Nt+=4)if(Ct[Nt]>0&&Ct[Nt]<255){_t=!0;break}return(0,j.shadow)(this,"isFontSubpixelAAEnabled",_t)}showText(wt){const Ct=this.current,_t=Ct.font;if(_t.isType3Font)return this.showType3Text(wt);const Nt=Ct.fontSize;if(Nt===0)return;const Lt=this.ctx,It=Ct.fontSizeScale,Yt=Ct.charSpacing,mn=Ct.wordSpacing,vn=Ct.fontDirection,xn=Ct.textHScale*vn,En=wt.length,An=_t.vertical,kn=An?1:-1,ln=_t.defaultVMetrics,un=Nt*Ct.fontMatrix[0],Mt=Ct.textRenderingMode===j.TextRenderingMode.FILL&&!_t.disableFontFace&&!Ct.patternFill;Lt.save(),Lt.transform(...Ct.textMatrix),Lt.translate(Ct.x,Ct.y+Ct.textRise),vn>0?Lt.scale(xn,-1):Lt.scale(xn,1);let Bt;if(Ct.patternFill){Lt.save();const Cn=Ct.fillColor.getPattern(Lt,this,(0,$.getCurrentTransformInverse)(Lt),_e.PathType.FILL);Bt=(0,$.getCurrentTransform)(Lt),Lt.restore(),Lt.fillStyle=Cn}let nn=Ct.lineWidth;const dn=Ct.textMatrixScale;if(dn===0||nn===0){const Cn=Ct.textRenderingMode&j.TextRenderingMode.FILL_STROKE_MASK;(Cn===j.TextRenderingMode.STROKE||Cn===j.TextRenderingMode.FILL_STROKE)&&(nn=this.getSinglePixelWidth())}else nn/=dn;if(It!==1&&(Lt.scale(It,It),nn/=It),Lt.lineWidth=nn,_t.isInvalidPDFjsFont){const Cn=[];let tn=0;for(const Ln of wt)Cn.push(Ln.unicode),tn+=Ln.width;Lt.fillText(Cn.join(""),0,0),Ct.x+=tn*un*xn,Lt.restore(),this.compose();return}let Sn=0,_n;for(_n=0;_n<En;++_n){const Cn=wt[_n];if(typeof Cn=="number"){Sn+=kn*Cn*Nt/1e3;continue}let tn=!1;const Ln=(Cn.isSpace?mn:0)+Yt,Dn=Cn.fontChar,ur=Cn.accent;let rr,br,Hn=Cn.width;if(An){const mr=Cn.vmetric||ln,Rr=-(Cn.vmetric?mr[1]:Hn*.5)*un,wn=mr[2]*un;Hn=mr?-mr[0]:Hn,rr=Rr/It,br=(Sn+wn)/It}else rr=Sn/It,br=0;if(_t.remeasure&&Hn>0){const mr=Lt.measureText(Dn).width*1e3/Nt*It;if(Hn<mr&&this.isFontSubpixelAAEnabled){const Rr=Hn/mr;tn=!0,Lt.save(),Lt.scale(Rr,1),rr/=Rr}else Hn!==mr&&(rr+=(Hn-mr)/2e3*Nt/It)}if(this.contentVisible&&(Cn.isInFont||_t.missingFile)){if(Mt&&!ur)Lt.fillText(Dn,rr,br);else if(this.paintChar(Dn,rr,br,Bt),ur){const mr=rr+Nt*ur.offset.x/It,Rr=br-Nt*ur.offset.y/It;this.paintChar(ur.fontChar,mr,Rr,Bt)}}const Zn=An?Hn*un-Ln*vn:Hn*un+Ln*vn;Sn+=Zn,tn&&Lt.restore()}An?Ct.y-=Sn:Ct.x+=Sn*xn,Lt.restore(),this.compose()}showType3Text(wt){const Ct=this.ctx,_t=this.current,Nt=_t.font,Lt=_t.fontSize,It=_t.fontDirection,Yt=Nt.vertical?1:-1,mn=_t.charSpacing,vn=_t.wordSpacing,xn=_t.textHScale*It,En=_t.fontMatrix||j.FONT_IDENTITY_MATRIX,An=wt.length,kn=_t.textRenderingMode===j.TextRenderingMode.INVISIBLE;let ln,un,Mt,Bt;if(!(kn||Lt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Ct.save(),Ct.transform(..._t.textMatrix),Ct.translate(_t.x,_t.y),Ct.scale(xn,It),ln=0;ln<An;++ln){if(un=wt[ln],typeof un=="number"){Bt=Yt*un*Lt/1e3,this.ctx.translate(Bt,0),_t.x+=Bt*xn;continue}const nn=(un.isSpace?vn:0)+mn,dn=Nt.charProcOperatorList[un.operatorListId];if(!dn){(0,j.warn)(`Type3 character "${un.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=un,this.save(),Ct.scale(Lt,Lt),Ct.transform(...En),this.executeOperatorList(dn),this.restore()),Mt=j.Util.applyTransform([un.width,0],En)[0]*Lt+nn,Ct.translate(Mt,0),_t.x+=Mt*xn}Ct.restore(),this.processingType3=null}}setCharWidth(wt,Ct){}setCharWidthAndBounds(wt,Ct,_t,Nt,Lt,It){this.ctx.rect(_t,Nt,Lt-_t,It-Nt),this.ctx.clip(),this.endPath()}getColorN_Pattern(wt){let Ct;if(wt[0]==="TilingPattern"){const _t=wt[1],Nt=this.baseTransform||(0,$.getCurrentTransform)(this.ctx),Lt={createCanvasGraphics:It=>new Zt(It,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Ct=new _e.TilingPattern(wt,_t,this.ctx,Lt,Nt)}else Ct=this._getPattern(wt[1],wt[2]);return Ct}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(wt,Ct,_t){const Nt=j.Util.makeHexColor(wt,Ct,_t);this.ctx.strokeStyle=Nt,this.current.strokeColor=Nt}setFillRGBColor(wt,Ct,_t){const Nt=j.Util.makeHexColor(wt,Ct,_t);this.ctx.fillStyle=Nt,this.current.fillColor=Nt,this.current.patternFill=!1}_getPattern(wt,Ct=null){let _t;return this.cachedPatterns.has(wt)?_t=this.cachedPatterns.get(wt):(_t=(0,_e.getShadingPattern)(this.getObject(wt)),this.cachedPatterns.set(wt,_t)),Ct&&(_t.matrix=Ct),_t}shadingFill(wt){if(!this.contentVisible)return;const Ct=this.ctx;this.save();const _t=this._getPattern(wt);Ct.fillStyle=_t.getPattern(Ct,this,(0,$.getCurrentTransformInverse)(Ct),_e.PathType.SHADING);const Nt=(0,$.getCurrentTransformInverse)(Ct);if(Nt){const{width:Lt,height:It}=Ct.canvas,[Yt,mn,vn,xn]=j.Util.getAxialAlignedBoundingBox([0,0,Lt,It],Nt);this.ctx.fillRect(Yt,mn,vn-Yt,xn-mn)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,j.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,j.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(wt,Ct){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(wt)&&wt.length===6&&this.transform(...wt),this.baseTransform=(0,$.getCurrentTransform)(this.ctx),Ct)){const _t=Ct[2]-Ct[0],Nt=Ct[3]-Ct[1];this.ctx.rect(Ct[0],Ct[1],_t,Nt),this.current.updateRectMinMax((0,$.getCurrentTransform)(this.ctx),Ct),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(wt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Ct=this.ctx;wt.isolated||(0,j.info)("TODO: Support non-isolated groups."),wt.knockout&&(0,j.warn)("Knockout groups not supported.");const _t=(0,$.getCurrentTransform)(Ct);if(wt.matrix&&Ct.transform(...wt.matrix),!wt.bbox)throw new Error("Bounding box is required.");let Nt=j.Util.getAxialAlignedBoundingBox(wt.bbox,(0,$.getCurrentTransform)(Ct));const Lt=[0,0,Ct.canvas.width,Ct.canvas.height];Nt=j.Util.intersect(Nt,Lt)||[0,0,0,0];const It=Math.floor(Nt[0]),Yt=Math.floor(Nt[1]);let mn=Math.max(Math.ceil(Nt[2])-It,1),vn=Math.max(Math.ceil(Nt[3])-Yt,1),xn=1,En=1;mn>rt&&(xn=mn/rt,mn=rt),vn>rt&&(En=vn/rt,vn=rt),this.current.startNewPathAndClipBox([0,0,mn,vn]);let An="groupAt"+this.groupLevel;wt.smask&&(An+="_smask_"+this.smaskCounter++%2);const kn=this.cachedCanvases.getCanvas(An,mn,vn),ln=kn.context;ln.scale(1/xn,1/En),ln.translate(-It,-Yt),ln.transform(..._t),wt.smask?this.smaskStack.push({canvas:kn.canvas,context:ln,offsetX:It,offsetY:Yt,scaleX:xn,scaleY:En,subtype:wt.smask.subtype,backdrop:wt.smask.backdrop,transferMap:wt.smask.transferMap||null,startTransformInverse:null}):(Ct.setTransform(1,0,0,1,0,0),Ct.translate(It,Yt),Ct.scale(xn,En),Ct.save()),ft(Ct,ln),this.ctx=ln,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Ct),this.groupLevel++}endGroup(wt){if(!this.contentVisible)return;this.groupLevel--;const Ct=this.ctx,_t=this.groupStack.pop();if(this.ctx=_t,this.ctx.imageSmoothingEnabled=!1,wt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Nt=(0,$.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Nt);const Lt=j.Util.getAxialAlignedBoundingBox([0,0,Ct.canvas.width,Ct.canvas.height],Nt);this.ctx.drawImage(Ct.canvas,0,0),this.ctx.restore(),this.compose(Lt)}}beginAnnotation(wt,Ct,_t,Nt,Lt){if(Qt(this,Ht,zo).call(this),gt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Ct)&&Ct.length===4){const It=Ct[2]-Ct[0],Yt=Ct[3]-Ct[1];if(Lt&&this.annotationCanvasMap){_t=_t.slice(),_t[4]-=Ct[0],_t[5]-=Ct[1],Ct=Ct.slice(),Ct[0]=Ct[1]=0,Ct[2]=It,Ct[3]=Yt;const[mn,vn]=j.Util.singularValueDecompose2dScale((0,$.getCurrentTransform)(this.ctx)),{viewportScale:xn}=this,En=Math.ceil(It*this.outputScaleX*xn),An=Math.ceil(Yt*this.outputScaleY*xn);this.annotationCanvas=this.canvasFactory.create(En,An);const{canvas:kn,context:ln}=this.annotationCanvas;this.annotationCanvasMap.set(wt,kn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ln,this.ctx.save(),this.ctx.setTransform(mn,0,0,-vn,0,Yt*vn),gt(this.ctx)}else gt(this.ctx),this.ctx.rect(Ct[0],Ct[1],It,Yt),this.ctx.clip(),this.endPath()}this.current=new ht(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._t),this.transform(...Nt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Qt(this,Ht,Ho).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(wt){if(!this.contentVisible)return;const Ct=wt.count;wt=this.getObject(wt.data,wt),wt.count=Ct;const _t=this.ctx,Nt=this.processingType3;if(Nt&&(Nt.compiled===void 0&&(Nt.compiled=ct(wt)),Nt.compiled)){Nt.compiled(_t);return}const Lt=this._createMaskCanvas(wt),It=Lt.canvas;_t.save(),_t.setTransform(1,0,0,1,0,0),_t.drawImage(It,Lt.offsetX,Lt.offsetY),_t.restore(),this.compose()}paintImageMaskXObjectRepeat(wt,Ct,_t=0,Nt=0,Lt,It){if(!this.contentVisible)return;wt=this.getObject(wt.data,wt);const Yt=this.ctx;Yt.save();const mn=(0,$.getCurrentTransform)(Yt);Yt.transform(Ct,_t,Nt,Lt,0,0);const vn=this._createMaskCanvas(wt);Yt.setTransform(1,0,0,1,vn.offsetX-mn[4],vn.offsetY-mn[5]);for(let xn=0,En=It.length;xn<En;xn+=2){const An=j.Util.transform(mn,[Ct,_t,Nt,Lt,It[xn],It[xn+1]]),[kn,ln]=j.Util.applyTransform([0,0],An);Yt.drawImage(vn.canvas,kn,ln)}Yt.restore(),this.compose()}paintImageMaskXObjectGroup(wt){if(!this.contentVisible)return;const Ct=this.ctx,_t=this.current.fillColor,Nt=this.current.patternFill;for(const Lt of wt){const{data:It,width:Yt,height:mn,transform:vn}=Lt,xn=this.cachedCanvases.getCanvas("maskCanvas",Yt,mn),En=xn.context;En.save();const An=this.getObject(It,Lt);mt(En,An),En.globalCompositeOperation="source-in",En.fillStyle=Nt?_t.getPattern(En,this,(0,$.getCurrentTransformInverse)(Ct),_e.PathType.FILL):_t,En.fillRect(0,0,Yt,mn),En.restore(),Ct.save(),Ct.transform(...vn),Ct.scale(1,-1),dt(Ct,xn.canvas,0,0,Yt,mn,0,-1,1,1),Ct.restore()}this.compose()}paintImageXObject(wt){if(!this.contentVisible)return;const Ct=this.getObject(wt);if(!Ct){(0,j.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Ct)}paintImageXObjectRepeat(wt,Ct,_t,Nt){if(!this.contentVisible)return;const Lt=this.getObject(wt);if(!Lt){(0,j.warn)("Dependent image isn't ready yet");return}const It=Lt.width,Yt=Lt.height,mn=[];for(let vn=0,xn=Nt.length;vn<xn;vn+=2)mn.push({transform:[Ct,0,0,_t,Nt[vn],Nt[vn+1]],x:0,y:0,w:It,h:Yt});this.paintInlineImageXObjectGroup(Lt,mn)}applyTransferMapsToCanvas(wt){return this.current.transferMaps!=="none"&&(wt.filter=this.current.transferMaps,wt.drawImage(wt.canvas,0,0),wt.filter="none"),wt.canvas}applyTransferMapsToBitmap(wt){if(this.current.transferMaps==="none")return wt.bitmap;const{bitmap:Ct,width:_t,height:Nt}=wt,Lt=this.cachedCanvases.getCanvas("inlineImage",_t,Nt),It=Lt.context;return It.filter=this.current.transferMaps,It.drawImage(Ct,0,0),It.filter="none",Lt.canvas}paintInlineImageXObject(wt){if(!this.contentVisible)return;const Ct=wt.width,_t=wt.height,Nt=this.ctx;if(this.save(),!j.isNodeJS){const{filter:Yt}=Nt;Yt!=="none"&&Yt!==""&&(Nt.filter="none")}Nt.scale(1/Ct,-1/_t);let Lt;if(wt.bitmap)Lt=this.applyTransferMapsToBitmap(wt);else if(typeof HTMLElement=="function"&&wt instanceof HTMLElement||!wt.data)Lt=wt;else{const mn=this.cachedCanvases.getCanvas("inlineImage",Ct,_t).context;pt(mn,wt),Lt=this.applyTransferMapsToCanvas(mn)}const It=this._scaleImage(Lt,(0,$.getCurrentTransformInverse)(Nt));Nt.imageSmoothingEnabled=At((0,$.getCurrentTransform)(Nt),wt.interpolate),dt(Nt,It.img,0,0,It.paintWidth,It.paintHeight,0,-_t,Ct,_t),this.compose(),this.restore()}paintInlineImageXObjectGroup(wt,Ct){if(!this.contentVisible)return;const _t=this.ctx;let Nt;if(wt.bitmap)Nt=wt.bitmap;else{const Lt=wt.width,It=wt.height,mn=this.cachedCanvases.getCanvas("inlineImage",Lt,It).context;pt(mn,wt),Nt=this.applyTransferMapsToCanvas(mn)}for(const Lt of Ct)_t.save(),_t.transform(...Lt.transform),_t.scale(1,-1),dt(_t,Nt,Lt.x,Lt.y,Lt.w,Lt.h,0,-1,1,1),_t.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(wt){}markPointProps(wt,Ct){}beginMarkedContent(wt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(wt,Ct){wt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Ct)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(wt){const Ct=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(wt);const _t=this.ctx;this.pendingClip&&(Ct||(this.pendingClip===Jt?_t.clip("evenodd"):_t.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_t.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const wt=(0,$.getCurrentTransform)(this.ctx);if(wt[1]===0&&wt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(wt[0]),Math.abs(wt[3]));else{const Ct=Math.abs(wt[0]*wt[3]-wt[2]*wt[1]),_t=Math.hypot(wt[0],wt[2]),Nt=Math.hypot(wt[1],wt[3]);this._cachedGetSinglePixelWidth=Math.max(_t,Nt)/Ct}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:wt}=this.current,{a:Ct,b:_t,c:Nt,d:Lt}=this.ctx.getTransform();let It,Yt;if(_t===0&&Nt===0){const mn=Math.abs(Ct),vn=Math.abs(Lt);if(mn===vn)if(wt===0)It=Yt=1/mn;else{const xn=mn*wt;It=Yt=xn<1?1/xn:1}else if(wt===0)It=1/mn,Yt=1/vn;else{const xn=mn*wt,En=vn*wt;It=xn<1?1/xn:1,Yt=En<1?1/En:1}}else{const mn=Math.abs(Ct*Lt-_t*Nt),vn=Math.hypot(Ct,_t),xn=Math.hypot(Nt,Lt);if(wt===0)It=xn/mn,Yt=vn/mn;else{const En=wt*mn;It=xn>En?xn/En:1,Yt=vn>En?vn/En:1}}this._cachedScaleForStroking[0]=It,this._cachedScaleForStroking[1]=Yt}return this._cachedScaleForStroking}rescaleAndStroke(wt){const{ctx:Ct}=this,{lineWidth:_t}=this.current,[Nt,Lt]=this.getScaleForStroking();if(Ct.lineWidth=_t||1,Nt===1&&Lt===1){Ct.stroke();return}const It=Ct.getLineDash();if(wt&&Ct.save(),Ct.scale(Nt,Lt),It.length>0){const Yt=Math.max(Nt,Lt);Ct.setLineDash(It.map(mn=>mn/Yt)),Ct.lineDashOffset/=Yt}Ct.stroke(),wt&&Ct.restore()}isContentVisible(){for(let wt=this.markedContentStack.length-1;wt>=0;wt--)if(!this.markedContentStack[wt].visible)return!1;return!0}};Ht=new WeakSet,zo=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ho=function(){if(this.pageColors){const wt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(wt!=="none"){const Ct=this.ctx.filter;this.ctx.filter=wt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Ct}}};let zt=Zt;g.CanvasGraphics=zt;for(const Ot in j.OPS)zt.prototype[Ot]!==void 0&&(zt.prototype[j.OPS[Ot]]=zt.prototype[Ot])},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TilingPattern=g.PathType=void 0,g.getShadingPattern=lt;var j=_(1),$=_(6);const _e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};g.PathType=_e;function et(ct,ht){if(!ht)return;const pt=ht[2]-ht[0],mt=ht[3]-ht[1],ft=new Path2D;ft.rect(ht[0],ht[1],pt,mt),ct.clip(ft)}class tt{constructor(){this.constructor===tt&&(0,j.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,j.unreachable)("Abstract method `getPattern` called.")}}class nt extends tt{constructor(ht){super(),this._type=ht[1],this._bbox=ht[2],this._colorStops=ht[3],this._p0=ht[4],this._p1=ht[5],this._r0=ht[6],this._r1=ht[7],this.matrix=null}_createGradient(ht){let pt;this._type==="axial"?pt=ht.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(pt=ht.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const mt of this._colorStops)pt.addColorStop(mt[0],mt[1]);return pt}getPattern(ht,pt,mt,ft){let gt;if(ft===_e.STROKE||ft===_e.FILL){const xt=pt.current.getClippedPathBoundingBox(ft,(0,$.getCurrentTransform)(ht))||[0,0,0,0],vt=Math.ceil(xt[2]-xt[0])||1,St=Math.ceil(xt[3]-xt[1])||1,Tt=pt.cachedCanvases.getCanvas("pattern",vt,St,!0),bt=Tt.context;bt.clearRect(0,0,bt.canvas.width,bt.canvas.height),bt.beginPath(),bt.rect(0,0,bt.canvas.width,bt.canvas.height),bt.translate(-xt[0],-xt[1]),mt=j.Util.transform(mt,[1,0,0,1,xt[0],xt[1]]),bt.transform(...pt.baseTransform),this.matrix&&bt.transform(...this.matrix),et(bt,this._bbox),bt.fillStyle=this._createGradient(bt),bt.fill(),gt=ht.createPattern(Tt.canvas,"no-repeat");const At=new DOMMatrix(mt);gt.setTransform(At)}else et(ht,this._bbox),gt=this._createGradient(ht);return gt}}function rt(ct,ht,pt,mt,ft,gt,xt,vt){const St=ht.coords,Tt=ht.colors,bt=ct.data,At=ct.width*4;let Pt;St[pt+1]>St[mt+1]&&(Pt=pt,pt=mt,mt=Pt,Pt=gt,gt=xt,xt=Pt),St[mt+1]>St[ft+1]&&(Pt=mt,mt=ft,ft=Pt,Pt=xt,xt=vt,vt=Pt),St[pt+1]>St[mt+1]&&(Pt=pt,pt=mt,mt=Pt,Pt=gt,gt=xt,xt=Pt);const en=(St[pt]+ht.offsetX)*ht.scaleX,Wt=(St[pt+1]+ht.offsetY)*ht.scaleY,Jt=(St[mt]+ht.offsetX)*ht.scaleX,zt=(St[mt+1]+ht.offsetY)*ht.scaleY,Ht=(St[ft]+ht.offsetX)*ht.scaleX,Rt=(St[ft+1]+ht.offsetY)*ht.scaleY;if(Wt>=Rt)return;const jt=Tt[gt],Zt=Tt[gt+1],Ot=Tt[gt+2],wt=Tt[xt],Ct=Tt[xt+1],_t=Tt[xt+2],Nt=Tt[vt],Lt=Tt[vt+1],It=Tt[vt+2],Yt=Math.round(Wt),mn=Math.round(Rt);let vn,xn,En,An,kn,ln,un,Mt;for(let Bt=Yt;Bt<=mn;Bt++){if(Bt<zt){const Cn=Bt<Wt?0:(Wt-Bt)/(Wt-zt);vn=en-(en-Jt)*Cn,xn=jt-(jt-wt)*Cn,En=Zt-(Zt-Ct)*Cn,An=Ot-(Ot-_t)*Cn}else{let Cn;Bt>Rt?Cn=1:zt===Rt?Cn=0:Cn=(zt-Bt)/(zt-Rt),vn=Jt-(Jt-Ht)*Cn,xn=wt-(wt-Nt)*Cn,En=Ct-(Ct-Lt)*Cn,An=_t-(_t-It)*Cn}let nn;Bt<Wt?nn=0:Bt>Rt?nn=1:nn=(Wt-Bt)/(Wt-Rt),kn=en-(en-Ht)*nn,ln=jt-(jt-Nt)*nn,un=Zt-(Zt-Lt)*nn,Mt=Ot-(Ot-It)*nn;const dn=Math.round(Math.min(vn,kn)),Sn=Math.round(Math.max(vn,kn));let _n=At*Bt+dn*4;for(let Cn=dn;Cn<=Sn;Cn++)nn=(vn-Cn)/(vn-kn),nn<0?nn=0:nn>1&&(nn=1),bt[_n++]=xn-(xn-ln)*nn|0,bt[_n++]=En-(En-un)*nn|0,bt[_n++]=An-(An-Mt)*nn|0,bt[_n++]=255}}function it(ct,ht,pt){const mt=ht.coords,ft=ht.colors;let gt,xt;switch(ht.type){case"lattice":const vt=ht.verticesPerRow,St=Math.floor(mt.length/vt)-1,Tt=vt-1;for(gt=0;gt<St;gt++){let bt=gt*vt;for(let At=0;At<Tt;At++,bt++)rt(ct,pt,mt[bt],mt[bt+1],mt[bt+vt],ft[bt],ft[bt+1],ft[bt+vt]),rt(ct,pt,mt[bt+vt+1],mt[bt+1],mt[bt+vt],ft[bt+vt+1],ft[bt+1],ft[bt+vt])}break;case"triangles":for(gt=0,xt=mt.length;gt<xt;gt+=3)rt(ct,pt,mt[gt],mt[gt+1],mt[gt+2],ft[gt],ft[gt+1],ft[gt+2]);break;default:throw new Error("illegal figure")}}class st extends tt{constructor(ht){super(),this._coords=ht[2],this._colors=ht[3],this._figures=ht[4],this._bounds=ht[5],this._bbox=ht[7],this._background=ht[8],this.matrix=null}_createMeshCanvas(ht,pt,mt){const vt=Math.floor(this._bounds[0]),St=Math.floor(this._bounds[1]),Tt=Math.ceil(this._bounds[2])-vt,bt=Math.ceil(this._bounds[3])-St,At=Math.min(Math.ceil(Math.abs(Tt*ht[0]*1.1)),3e3),Pt=Math.min(Math.ceil(Math.abs(bt*ht[1]*1.1)),3e3),en=Tt/At,Wt=bt/Pt,Jt={coords:this._coords,colors:this._colors,offsetX:-vt,offsetY:-St,scaleX:1/en,scaleY:1/Wt},zt=At+2*2,Ht=Pt+2*2,Rt=mt.getCanvas("mesh",zt,Ht,!1),jt=Rt.context,Zt=jt.createImageData(At,Pt);if(pt){const wt=Zt.data;for(let Ct=0,_t=wt.length;Ct<_t;Ct+=4)wt[Ct]=pt[0],wt[Ct+1]=pt[1],wt[Ct+2]=pt[2],wt[Ct+3]=255}for(const wt of this._figures)it(Zt,wt,Jt);return jt.putImageData(Zt,2,2),{canvas:Rt.canvas,offsetX:vt-2*en,offsetY:St-2*Wt,scaleX:en,scaleY:Wt}}getPattern(ht,pt,mt,ft){et(ht,this._bbox);let gt;if(ft===_e.SHADING)gt=j.Util.singularValueDecompose2dScale((0,$.getCurrentTransform)(ht));else if(gt=j.Util.singularValueDecompose2dScale(pt.baseTransform),this.matrix){const vt=j.Util.singularValueDecompose2dScale(this.matrix);gt=[gt[0]*vt[0],gt[1]*vt[1]]}const xt=this._createMeshCanvas(gt,ft===_e.SHADING?null:this._background,pt.cachedCanvases);return ft!==_e.SHADING&&(ht.setTransform(...pt.baseTransform),this.matrix&&ht.transform(...this.matrix)),ht.translate(xt.offsetX,xt.offsetY),ht.scale(xt.scaleX,xt.scaleY),ht.createPattern(xt.canvas,"no-repeat")}}class ot extends tt{getPattern(){return"hotpink"}}function lt(ct){switch(ct[0]){case"RadialAxial":return new nt(ct);case"Mesh":return new st(ct);case"Dummy":return new ot}throw new Error(`Unknown IR type: ${ct[0]}`)}const at={COLORED:1,UNCOLORED:2},dt=class dt{constructor(ht,pt,mt,ft,gt){this.operatorList=ht[2],this.matrix=ht[3]||[1,0,0,1,0,0],this.bbox=ht[4],this.xstep=ht[5],this.ystep=ht[6],this.paintType=ht[7],this.tilingType=ht[8],this.color=pt,this.ctx=mt,this.canvasGraphicsFactory=ft,this.baseTransform=gt}createPatternCanvas(ht){const pt=this.operatorList,mt=this.bbox,ft=this.xstep,gt=this.ystep,xt=this.paintType,vt=this.tilingType,St=this.color,Tt=this.canvasGraphicsFactory;(0,j.info)("TilingType: "+vt);const bt=mt[0],At=mt[1],Pt=mt[2],en=mt[3],Wt=j.Util.singularValueDecompose2dScale(this.matrix),Jt=j.Util.singularValueDecompose2dScale(this.baseTransform),zt=[Wt[0]*Jt[0],Wt[1]*Jt[1]],Ht=this.getSizeAndScale(ft,this.ctx.canvas.width,zt[0]),Rt=this.getSizeAndScale(gt,this.ctx.canvas.height,zt[1]),jt=ht.cachedCanvases.getCanvas("pattern",Ht.size,Rt.size,!0),Zt=jt.context,Ot=Tt.createCanvasGraphics(Zt);Ot.groupLevel=ht.groupLevel,this.setFillAndStrokeStyleToContext(Ot,xt,St);let wt=bt,Ct=At,_t=Pt,Nt=en;return bt<0&&(wt=0,_t+=Math.abs(bt)),At<0&&(Ct=0,Nt+=Math.abs(At)),Zt.translate(-(Ht.scale*wt),-(Rt.scale*Ct)),Ot.transform(Ht.scale,0,0,Rt.scale,0,0),Zt.save(),this.clipBbox(Ot,wt,Ct,_t,Nt),Ot.baseTransform=(0,$.getCurrentTransform)(Ot.ctx),Ot.executeOperatorList(pt),Ot.endDrawing(),{canvas:jt.canvas,scaleX:Ht.scale,scaleY:Rt.scale,offsetX:wt,offsetY:Ct}}getSizeAndScale(ht,pt,mt){ht=Math.abs(ht);const ft=Math.max(dt.MAX_PATTERN_SIZE,pt);let gt=Math.ceil(ht*mt);return gt>=ft?gt=ft:mt=gt/ht,{scale:mt,size:gt}}clipBbox(ht,pt,mt,ft,gt){const xt=ft-pt,vt=gt-mt;ht.ctx.rect(pt,mt,xt,vt),ht.current.updateRectMinMax((0,$.getCurrentTransform)(ht.ctx),[pt,mt,ft,gt]),ht.clip(),ht.endPath()}setFillAndStrokeStyleToContext(ht,pt,mt){const ft=ht.ctx,gt=ht.current;switch(pt){case at.COLORED:const xt=this.ctx;ft.fillStyle=xt.fillStyle,ft.strokeStyle=xt.strokeStyle,gt.fillColor=xt.fillStyle,gt.strokeColor=xt.strokeStyle;break;case at.UNCOLORED:const vt=j.Util.makeHexColor(mt[0],mt[1],mt[2]);ft.fillStyle=vt,ft.strokeStyle=vt,gt.fillColor=vt,gt.strokeColor=vt;break;default:throw new j.FormatError(`Unsupported paint type: ${pt}`)}}getPattern(ht,pt,mt,ft){let gt=mt;ft!==_e.SHADING&&(gt=j.Util.transform(gt,pt.baseTransform),this.matrix&&(gt=j.Util.transform(gt,this.matrix)));const xt=this.createPatternCanvas(pt);let vt=new DOMMatrix(gt);vt=vt.translate(xt.offsetX,xt.offsetY),vt=vt.scale(1/xt.scaleX,1/xt.scaleY);const St=ht.createPattern(xt.canvas,"repeat");return St.setTransform(vt),St}};$r(dt,"MAX_PATTERN_SIZE",3e3);let ut=dt;g.TilingPattern=ut},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.convertBlackAndWhiteToRGBA=_e,g.convertToRGBA=$,g.grayToRGBA=tt;var j=_(1);function $(nt){switch(nt.kind){case j.ImageKind.GRAYSCALE_1BPP:return _e(nt);case j.ImageKind.RGB_24BPP:return et(nt)}return null}function _e({src:nt,srcPos:rt=0,dest:it,width:st,height:ot,nonBlackColor:lt=4294967295,inverseDecode:at=!1}){const ut=j.FeatureTest.isLittleEndian?4278190080:255,[dt,ct]=at?[lt,ut]:[ut,lt],ht=st>>3,pt=st&7,mt=nt.length;it=new Uint32Array(it.buffer);let ft=0;for(let gt=0;gt<ot;gt++){for(const vt=rt+ht;rt<vt;rt++){const St=rt<mt?nt[rt]:255;it[ft++]=St&128?ct:dt,it[ft++]=St&64?ct:dt,it[ft++]=St&32?ct:dt,it[ft++]=St&16?ct:dt,it[ft++]=St&8?ct:dt,it[ft++]=St&4?ct:dt,it[ft++]=St&2?ct:dt,it[ft++]=St&1?ct:dt}if(pt===0)continue;const xt=rt<mt?nt[rt++]:255;for(let vt=0;vt<pt;vt++)it[ft++]=xt&1<<7-vt?ct:dt}return{srcPos:rt,destPos:ft}}function et({src:nt,srcPos:rt=0,dest:it,destPos:st=0,width:ot,height:lt}){let at=0;const ut=nt.length>>2,dt=new Uint32Array(nt.buffer,rt,ut);if(j.FeatureTest.isLittleEndian){for(;at<ut-2;at+=3,st+=4){const ct=dt[at],ht=dt[at+1],pt=dt[at+2];it[st]=ct|4278190080,it[st+1]=ct>>>24|ht<<8|4278190080,it[st+2]=ht>>>16|pt<<16|4278190080,it[st+3]=pt>>>8|4278190080}for(let ct=at*4,ht=nt.length;ct<ht;ct+=3)it[st++]=nt[ct]|nt[ct+1]<<8|nt[ct+2]<<16|4278190080}else{for(;at<ut-2;at+=3,st+=4){const ct=dt[at],ht=dt[at+1],pt=dt[at+2];it[st]=ct|255,it[st+1]=ct<<24|ht>>>8|255,it[st+2]=ht<<16|pt>>>16|255,it[st+3]=pt<<8|255}for(let ct=at*4,ht=nt.length;ct<ht;ct+=3)it[st++]=nt[ct]<<24|nt[ct+1]<<16|nt[ct+2]<<8|255}return{srcPos:rt,destPos:st}}function tt(nt,rt){if(j.FeatureTest.isLittleEndian)for(let it=0,st=nt.length;it<st;it++)rt[it]=nt[it]*65793|4278190080;else for(let it=0,st=nt.length;it<st;it++)rt[it]=nt[it]*16843008|255}},(b,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GlobalWorkerOptions=void 0;const _=Object.create(null);g.GlobalWorkerOptions=_,_.workerPort=null,_.workerSrc=""},(b,g,_)=>{var nt,_c,eu,ro;Object.defineProperty(g,"__esModule",{value:!0}),g.MessageHandler=void 0;var j=_(1);const $={UNKNOWN:0,DATA:1,ERROR:2},_e={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function et(ot){switch(ot instanceof Error||typeof ot=="object"&&ot!==null||(0,j.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ot.name){case"AbortException":return new j.AbortException(ot.message);case"MissingPDFException":return new j.MissingPDFException(ot.message);case"PasswordException":return new j.PasswordException(ot.message,ot.code);case"UnexpectedResponseException":return new j.UnexpectedResponseException(ot.message,ot.status);case"UnknownErrorException":return new j.UnknownErrorException(ot.message,ot.details);default:return new j.UnknownErrorException(ot.message,ot.toString())}}class tt{constructor(lt,at,ut){fn(this,nt);this.sourceName=lt,this.targetName=at,this.comObj=ut,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=dt=>{const ct=dt.data;if(ct.targetName!==this.sourceName)return;if(ct.stream){Qt(this,nt,eu).call(this,ct);return}if(ct.callback){const pt=ct.callbackId,mt=this.callbackCapabilities[pt];if(!mt)throw new Error(`Cannot resolve callback ${pt}`);if(delete this.callbackCapabilities[pt],ct.callback===$.DATA)mt.resolve(ct.data);else if(ct.callback===$.ERROR)mt.reject(et(ct.reason));else throw new Error("Unexpected callback case");return}const ht=this.actionHandler[ct.action];if(!ht)throw new Error(`Unknown action from worker: ${ct.action}`);if(ct.callbackId){const pt=this.sourceName,mt=ct.sourceName;new Promise(function(ft){ft(ht(ct.data))}).then(function(ft){ut.postMessage({sourceName:pt,targetName:mt,callback:$.DATA,callbackId:ct.callbackId,data:ft})},function(ft){ut.postMessage({sourceName:pt,targetName:mt,callback:$.ERROR,callbackId:ct.callbackId,reason:et(ft)})});return}if(ct.streamId){Qt(this,nt,_c).call(this,ct);return}ht(ct.data)},ut.addEventListener("message",this._onComObjOnMessage)}on(lt,at){const ut=this.actionHandler;if(ut[lt])throw new Error(`There is already an actionName called "${lt}"`);ut[lt]=at}send(lt,at,ut){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:lt,data:at},ut)}sendWithPromise(lt,at,ut){const dt=this.callbackId++,ct=new j.PromiseCapability;this.callbackCapabilities[dt]=ct;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:lt,callbackId:dt,data:at},ut)}catch(ht){ct.reject(ht)}return ct.promise}sendWithStream(lt,at,ut,dt){const ct=this.streamId++,ht=this.sourceName,pt=this.targetName,mt=this.comObj;return new ReadableStream({start:ft=>{const gt=new j.PromiseCapability;return this.streamControllers[ct]={controller:ft,startCall:gt,pullCall:null,cancelCall:null,isClosed:!1},mt.postMessage({sourceName:ht,targetName:pt,action:lt,streamId:ct,data:at,desiredSize:ft.desiredSize},dt),gt.promise},pull:ft=>{const gt=new j.PromiseCapability;return this.streamControllers[ct].pullCall=gt,mt.postMessage({sourceName:ht,targetName:pt,stream:_e.PULL,streamId:ct,desiredSize:ft.desiredSize}),gt.promise},cancel:ft=>{(0,j.assert)(ft instanceof Error,"cancel must have a valid reason");const gt=new j.PromiseCapability;return this.streamControllers[ct].cancelCall=gt,this.streamControllers[ct].isClosed=!0,mt.postMessage({sourceName:ht,targetName:pt,stream:_e.CANCEL,streamId:ct,reason:et(ft)}),gt.promise}},ut)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}nt=new WeakSet,_c=function(lt){const at=lt.streamId,ut=this.sourceName,dt=lt.sourceName,ct=this.comObj,ht=this,pt=this.actionHandler[lt.action],mt={enqueue(ft,gt=1,xt){if(this.isCancelled)return;const vt=this.desiredSize;this.desiredSize-=gt,vt>0&&this.desiredSize<=0&&(this.sinkCapability=new j.PromiseCapability,this.ready=this.sinkCapability.promise),ct.postMessage({sourceName:ut,targetName:dt,stream:_e.ENQUEUE,streamId:at,chunk:ft},xt)},close(){this.isCancelled||(this.isCancelled=!0,ct.postMessage({sourceName:ut,targetName:dt,stream:_e.CLOSE,streamId:at}),delete ht.streamSinks[at])},error(ft){(0,j.assert)(ft instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ct.postMessage({sourceName:ut,targetName:dt,stream:_e.ERROR,streamId:at,reason:et(ft)}))},sinkCapability:new j.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:lt.desiredSize,ready:null};mt.sinkCapability.resolve(),mt.ready=mt.sinkCapability.promise,this.streamSinks[at]=mt,new Promise(function(ft){ft(pt(lt.data,mt))}).then(function(){ct.postMessage({sourceName:ut,targetName:dt,stream:_e.START_COMPLETE,streamId:at,success:!0})},function(ft){ct.postMessage({sourceName:ut,targetName:dt,stream:_e.START_COMPLETE,streamId:at,reason:et(ft)})})},eu=function(lt){const at=lt.streamId,ut=this.sourceName,dt=lt.sourceName,ct=this.comObj,ht=this.streamControllers[at],pt=this.streamSinks[at];switch(lt.stream){case _e.START_COMPLETE:lt.success?ht.startCall.resolve():ht.startCall.reject(et(lt.reason));break;case _e.PULL_COMPLETE:lt.success?ht.pullCall.resolve():ht.pullCall.reject(et(lt.reason));break;case _e.PULL:if(!pt){ct.postMessage({sourceName:ut,targetName:dt,stream:_e.PULL_COMPLETE,streamId:at,success:!0});break}pt.desiredSize<=0&&lt.desiredSize>0&&pt.sinkCapability.resolve(),pt.desiredSize=lt.desiredSize,new Promise(function(mt){var ft;mt((ft=pt.onPull)==null?void 0:ft.call(pt))}).then(function(){ct.postMessage({sourceName:ut,targetName:dt,stream:_e.PULL_COMPLETE,streamId:at,success:!0})},function(mt){ct.postMessage({sourceName:ut,targetName:dt,stream:_e.PULL_COMPLETE,streamId:at,reason:et(mt)})});break;case _e.ENQUEUE:if((0,j.assert)(ht,"enqueue should have stream controller"),ht.isClosed)break;ht.controller.enqueue(lt.chunk);break;case _e.CLOSE:if((0,j.assert)(ht,"close should have stream controller"),ht.isClosed)break;ht.isClosed=!0,ht.controller.close(),Qt(this,nt,ro).call(this,ht,at);break;case _e.ERROR:(0,j.assert)(ht,"error should have stream controller"),ht.controller.error(et(lt.reason)),Qt(this,nt,ro).call(this,ht,at);break;case _e.CANCEL_COMPLETE:lt.success?ht.cancelCall.resolve():ht.cancelCall.reject(et(lt.reason)),Qt(this,nt,ro).call(this,ht,at);break;case _e.CANCEL:if(!pt)break;new Promise(function(mt){var ft;mt((ft=pt.onCancel)==null?void 0:ft.call(pt,et(lt.reason)))}).then(function(){ct.postMessage({sourceName:ut,targetName:dt,stream:_e.CANCEL_COMPLETE,streamId:at,success:!0})},function(mt){ct.postMessage({sourceName:ut,targetName:dt,stream:_e.CANCEL_COMPLETE,streamId:at,reason:et(mt)})}),pt.sinkCapability.reject(et(lt.reason)),pt.isCancelled=!0,delete this.streamSinks[at];break;default:throw new Error("Unexpected stream case")}},ro=async function(lt,at){var ut,dt,ct;await Promise.allSettled([(ut=lt.startCall)==null?void 0:ut.promise,(dt=lt.pullCall)==null?void 0:dt.promise,(ct=lt.cancelCall)==null?void 0:ct.promise]),delete this.streamControllers[at]},g.MessageHandler=tt},(b,g,_)=>{var _e,et;Object.defineProperty(g,"__esModule",{value:!0}),g.Metadata=void 0;var j=_(1);class ${constructor({parsedData:nt,rawData:rt}){fn(this,_e);fn(this,et);pn(this,_e,nt),pn(this,et,rt)}getRaw(){return yt(this,et)}get(nt){return yt(this,_e).get(nt)??null}getAll(){return(0,j.objectFromMap)(yt(this,_e))}has(nt){return yt(this,_e).has(nt)}}_e=new WeakMap,et=new WeakMap,g.Metadata=$},(b,g,_)=>{var nt,rt,it,st,ot,lt,Uo;Object.defineProperty(g,"__esModule",{value:!0}),g.OptionalContentConfig=void 0;var j=_(1),$=_(8);const _e=Symbol("INTERNAL");class et{constructor(dt,ct){fn(this,nt,!0);this.name=dt,this.intent=ct}get visible(){return yt(this,nt)}_setVisible(dt,ct){dt!==_e&&(0,j.unreachable)("Internal method `_setVisible` called."),pn(this,nt,ct)}}nt=new WeakMap;class tt{constructor(dt){fn(this,lt);fn(this,rt,null);fn(this,it,new Map);fn(this,st,null);fn(this,ot,null);if(this.name=null,this.creator=null,dt!==null){this.name=dt.name,this.creator=dt.creator,pn(this,ot,dt.order);for(const ct of dt.groups)yt(this,it).set(ct.id,new et(ct.name,ct.intent));if(dt.baseState==="OFF")for(const ct of yt(this,it).values())ct._setVisible(_e,!1);for(const ct of dt.on)yt(this,it).get(ct)._setVisible(_e,!0);for(const ct of dt.off)yt(this,it).get(ct)._setVisible(_e,!1);pn(this,st,this.getHash())}}isVisible(dt){if(yt(this,it).size===0)return!0;if(!dt)return(0,j.warn)("Optional content group not defined."),!0;if(dt.type==="OCG")return yt(this,it).has(dt.id)?yt(this,it).get(dt.id).visible:((0,j.warn)(`Optional content group not found: ${dt.id}`),!0);if(dt.type==="OCMD"){if(dt.expression)return Qt(this,lt,Uo).call(this,dt.expression);if(!dt.policy||dt.policy==="AnyOn"){for(const ct of dt.ids){if(!yt(this,it).has(ct))return(0,j.warn)(`Optional content group not found: ${ct}`),!0;if(yt(this,it).get(ct).visible)return!0}return!1}else if(dt.policy==="AllOn"){for(const ct of dt.ids){if(!yt(this,it).has(ct))return(0,j.warn)(`Optional content group not found: ${ct}`),!0;if(!yt(this,it).get(ct).visible)return!1}return!0}else if(dt.policy==="AnyOff"){for(const ct of dt.ids){if(!yt(this,it).has(ct))return(0,j.warn)(`Optional content group not found: ${ct}`),!0;if(!yt(this,it).get(ct).visible)return!0}return!1}else if(dt.policy==="AllOff"){for(const ct of dt.ids){if(!yt(this,it).has(ct))return(0,j.warn)(`Optional content group not found: ${ct}`),!0;if(yt(this,it).get(ct).visible)return!1}return!0}return(0,j.warn)(`Unknown optional content policy ${dt.policy}.`),!0}return(0,j.warn)(`Unknown group type ${dt.type}.`),!0}setVisibility(dt,ct=!0){if(!yt(this,it).has(dt)){(0,j.warn)(`Optional content group not found: ${dt}`);return}yt(this,it).get(dt)._setVisible(_e,!!ct),pn(this,rt,null)}get hasInitialVisibility(){return yt(this,st)===null||this.getHash()===yt(this,st)}getOrder(){return yt(this,it).size?yt(this,ot)?yt(this,ot).slice():[...yt(this,it).keys()]:null}getGroups(){return yt(this,it).size>0?(0,j.objectFromMap)(yt(this,it)):null}getGroup(dt){return yt(this,it).get(dt)||null}getHash(){if(yt(this,rt)!==null)return yt(this,rt);const dt=new $.MurmurHash3_64;for(const[ct,ht]of yt(this,it))dt.update(`${ct}:${ht.visible}`);return pn(this,rt,dt.hexdigest())}}rt=new WeakMap,it=new WeakMap,st=new WeakMap,ot=new WeakMap,lt=new WeakSet,Uo=function(dt){const ct=dt.length;if(ct<2)return!0;const ht=dt[0];for(let pt=1;pt<ct;pt++){const mt=dt[pt];let ft;if(Array.isArray(mt))ft=Qt(this,lt,Uo).call(this,mt);else if(yt(this,it).has(mt))ft=yt(this,it).get(mt).visible;else return(0,j.warn)(`Optional content group not found: ${mt}`),!0;switch(ht){case"And":if(!ft)return!1;break;case"Or":if(ft)return!0;break;case"Not":return!ft;default:return!0}}return ht==="And"},g.OptionalContentConfig=tt},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFDataTransportStream=void 0;var j=_(1),$=_(6);class _e{constructor({length:rt,initialData:it,progressiveDone:st=!1,contentDispositionFilename:ot=null,disableRange:lt=!1,disableStream:at=!1},ut){if((0,j.assert)(ut,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=st,this._contentDispositionFilename=ot,(it==null?void 0:it.length)>0){const dt=it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength?it.buffer:new Uint8Array(it).buffer;this._queuedChunks.push(dt)}this._pdfDataRangeTransport=ut,this._isStreamingSupported=!at,this._isRangeSupported=!lt,this._contentLength=rt,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((dt,ct)=>{this._onReceiveData({begin:dt,chunk:ct})}),this._pdfDataRangeTransport.addProgressListener((dt,ct)=>{this._onProgress({loaded:dt,total:ct})}),this._pdfDataRangeTransport.addProgressiveReadListener(dt=>{this._onReceiveData({chunk:dt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:rt,chunk:it}){const st=it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength?it.buffer:new Uint8Array(it).buffer;if(rt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(st):this._queuedChunks.push(st);else{const ot=this._rangeReaders.some(function(lt){return lt._begin!==rt?!1:(lt._enqueue(st),!0)});(0,j.assert)(ot,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var rt;return((rt=this._fullRequestReader)==null?void 0:rt._loaded)??0}_onProgress(rt){var it,st,ot,lt;rt.total===void 0?(st=(it=this._rangeReaders[0])==null?void 0:it.onProgress)==null||st.call(it,{loaded:rt.loaded}):(lt=(ot=this._fullRequestReader)==null?void 0:ot.onProgress)==null||lt.call(ot,{loaded:rt.loaded,total:rt.total})}_onProgressiveDone(){var rt;(rt=this._fullRequestReader)==null||rt.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(rt){const it=this._rangeReaders.indexOf(rt);it>=0&&this._rangeReaders.splice(it,1)}getFullReader(){(0,j.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const rt=this._queuedChunks;return this._queuedChunks=null,new et(this,rt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(rt,it){if(it<=this._progressiveDataLength)return null;const st=new tt(this,rt,it);return this._pdfDataRangeTransport.requestDataRange(rt,it),this._rangeReaders.push(st),st}cancelAllRequests(rt){var it;(it=this._fullRequestReader)==null||it.cancel(rt);for(const st of this._rangeReaders.slice(0))st.cancel(rt);this._pdfDataRangeTransport.abort()}}g.PDFDataTransportStream=_e;class et{constructor(rt,it,st=!1,ot=null){this._stream=rt,this._done=st||!1,this._filename=(0,$.isPdfFile)(ot)?ot:null,this._queuedChunks=it||[],this._loaded=0;for(const lt of this._queuedChunks)this._loaded+=lt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),rt._fullRequestReader=this,this.onProgress=null}_enqueue(rt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:rt,done:!1}):this._queuedChunks.push(rt),this._loaded+=rt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const rt=new j.PromiseCapability;return this._requests.push(rt),rt.promise}cancel(rt){this._done=!0;for(const it of this._requests)it.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tt{constructor(rt,it,st){this._stream=rt,this._begin=it,this._end=st,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(rt){if(!this._done){if(this._requests.length===0)this._queuedChunk=rt;else{this._requests.shift().resolve({value:rt,done:!1});for(const st of this._requests)st.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const it=this._queuedChunk;return this._queuedChunk=null,{value:it,done:!1}}if(this._done)return{value:void 0,done:!0};const rt=new j.PromiseCapability;return this._requests.push(rt),rt.promise}cancel(rt){this._done=!0;for(const it of this._requests)it.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFFetchStream=void 0;var j=_(1),$=_(20);function _e(st,ot,lt){return{method:"GET",headers:st,signal:lt.signal,mode:"cors",credentials:ot?"include":"same-origin",redirect:"follow"}}function et(st){const ot=new Headers;for(const lt in st){const at=st[lt];at!==void 0&&ot.append(lt,at)}return ot}function tt(st){return st instanceof Uint8Array?st.buffer:st instanceof ArrayBuffer?st:((0,j.warn)(`getArrayBuffer - unexpected data format: ${st}`),new Uint8Array(st).buffer)}class nt{constructor(ot){this.source=ot,this.isHttp=/^https?:/i.test(ot.url),this.httpHeaders=this.isHttp&&ot.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ot;return((ot=this._fullRequestReader)==null?void 0:ot._loaded)??0}getFullReader(){return(0,j.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new rt(this),this._fullRequestReader}getRangeReader(ot,lt){if(lt<=this._progressiveDataLength)return null;const at=new it(this,ot,lt);return this._rangeRequestReaders.push(at),at}cancelAllRequests(ot){var lt;(lt=this._fullRequestReader)==null||lt.cancel(ot);for(const at of this._rangeRequestReaders.slice(0))at.cancel(ot)}}g.PDFFetchStream=nt;class rt{constructor(ot){this._stream=ot,this._reader=null,this._loaded=0,this._filename=null;const lt=ot.source;this._withCredentials=lt.withCredentials||!1,this._contentLength=lt.length,this._headersCapability=new j.PromiseCapability,this._disableRange=lt.disableRange||!1,this._rangeChunkSize=lt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!lt.disableStream,this._isRangeSupported=!lt.disableRange,this._headers=et(this._stream.httpHeaders);const at=lt.url;fetch(at,_e(this._headers,this._withCredentials,this._abortController)).then(ut=>{if(!(0,$.validateResponseStatus)(ut.status))throw(0,$.createResponseStatusError)(ut.status,at);this._reader=ut.body.getReader(),this._headersCapability.resolve();const dt=pt=>ut.headers.get(pt),{allowRangeRequests:ct,suggestedLength:ht}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:dt,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ct,this._contentLength=ht||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new j.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var at;await this._headersCapability.promise;const{value:ot,done:lt}=await this._reader.read();return lt?{value:ot,done:lt}:(this._loaded+=ot.byteLength,(at=this.onProgress)==null||at.call(this,{loaded:this._loaded,total:this._contentLength}),{value:tt(ot),done:!1})}cancel(ot){var lt;(lt=this._reader)==null||lt.cancel(ot),this._abortController.abort()}}class it{constructor(ot,lt,at){this._stream=ot,this._reader=null,this._loaded=0;const ut=ot.source;this._withCredentials=ut.withCredentials||!1,this._readCapability=new j.PromiseCapability,this._isStreamingSupported=!ut.disableStream,this._abortController=new AbortController,this._headers=et(this._stream.httpHeaders),this._headers.append("Range",`bytes=${lt}-${at-1}`);const dt=ut.url;fetch(dt,_e(this._headers,this._withCredentials,this._abortController)).then(ct=>{if(!(0,$.validateResponseStatus)(ct.status))throw(0,$.createResponseStatusError)(ct.status,dt);this._readCapability.resolve(),this._reader=ct.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var at;await this._readCapability.promise;const{value:ot,done:lt}=await this._reader.read();return lt?{value:ot,done:lt}:(this._loaded+=ot.byteLength,(at=this.onProgress)==null||at.call(this,{loaded:this._loaded}),{value:tt(ot),done:!1})}cancel(ot){var lt;(lt=this._reader)==null||lt.cancel(ot),this._abortController.abort()}}},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.createResponseStatusError=nt,g.extractFilenameFromHeader=tt,g.validateRangeRequestCapabilities=et,g.validateResponseStatus=rt;var j=_(1),$=_(21),_e=_(6);function et({getResponseHeader:it,isHttp:st,rangeChunkSize:ot,disableRange:lt}){const at={allowRangeRequests:!1,suggestedLength:void 0},ut=parseInt(it("Content-Length"),10);return!Number.isInteger(ut)||(at.suggestedLength=ut,ut<=2*ot)||lt||!st||it("Accept-Ranges")!=="bytes"||(it("Content-Encoding")||"identity")!=="identity"||(at.allowRangeRequests=!0),at}function tt(it){const st=it("Content-Disposition");if(st){let ot=(0,$.getFilenameFromContentDispositionHeader)(st);if(ot.includes("%"))try{ot=decodeURIComponent(ot)}catch{}if((0,_e.isPdfFile)(ot))return ot}return null}function nt(it,st){return it===404||it===0&&st.startsWith("file:")?new j.MissingPDFException('Missing PDF "'+st+'".'):new j.UnexpectedResponseException(`Unexpected server response (${it}) while retrieving PDF "${st}".`,it)}function rt(it){return it===200||it===206}},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.getFilenameFromContentDispositionHeader=$;var j=_(1);function $(_e){let et=!0,tt=nt("filename\\*","i").exec(_e);if(tt){tt=tt[1];let ut=ot(tt);return ut=unescape(ut),ut=lt(ut),ut=at(ut),it(ut)}if(tt=st(_e),tt){const ut=at(tt);return it(ut)}if(tt=nt("filename","i").exec(_e),tt){tt=tt[1];let ut=ot(tt);return ut=at(ut),it(ut)}function nt(ut,dt){return new RegExp("(?:^|;)\\s*"+ut+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',dt)}function rt(ut,dt){if(ut){if(!/^[\x00-\xFF]+$/.test(dt))return dt;try{const ct=new TextDecoder(ut,{fatal:!0}),ht=(0,j.stringToBytes)(dt);dt=ct.decode(ht),et=!1}catch{}}return dt}function it(ut){return et&&/[\x80-\xff]/.test(ut)&&(ut=rt("utf-8",ut),et&&(ut=rt("iso-8859-1",ut))),ut}function st(ut){const dt=[];let ct;const ht=nt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(ct=ht.exec(ut))!==null;){let[,mt,ft,gt]=ct;if(mt=parseInt(mt,10),mt in dt){if(mt===0)break;continue}dt[mt]=[ft,gt]}const pt=[];for(let mt=0;mt<dt.length&&mt in dt;++mt){let[ft,gt]=dt[mt];gt=ot(gt),ft&&(gt=unescape(gt),mt===0&&(gt=lt(gt))),pt.push(gt)}return pt.join("")}function ot(ut){if(ut.startsWith('"')){const dt=ut.slice(1).split('\\"');for(let ct=0;ct<dt.length;++ct){const ht=dt[ct].indexOf('"');ht!==-1&&(dt[ct]=dt[ct].slice(0,ht),dt.length=ct+1),dt[ct]=dt[ct].replaceAll(/\\(.)/g,"$1")}ut=dt.join('"')}return ut}function lt(ut){const dt=ut.indexOf("'");if(dt===-1)return ut;const ct=ut.slice(0,dt),pt=ut.slice(dt+1).replace(/^[^']*'/,"");return rt(ct,pt)}function at(ut){return!ut.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ut)?ut:ut.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(dt,ct,ht,pt){if(ht==="q"||ht==="Q")return pt=pt.replaceAll("_"," "),pt=pt.replaceAll(/=([0-9a-fA-F]{2})/g,function(mt,ft){return String.fromCharCode(parseInt(ft,16))}),rt(ct,pt);try{pt=atob(pt)}catch{}return rt(ct,pt)})}return""}},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFNetworkStream=void 0;var j=_(1),$=_(20);const _e=200,et=206;function tt(ot){const lt=ot.response;return typeof lt!="string"?lt:(0,j.stringToBytes)(lt).buffer}class nt{constructor(lt,at={}){this.url=lt,this.isHttp=/^https?:/i.test(lt),this.httpHeaders=this.isHttp&&at.httpHeaders||Object.create(null),this.withCredentials=at.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(lt,at,ut){const dt={begin:lt,end:at};for(const ct in ut)dt[ct]=ut[ct];return this.request(dt)}requestFull(lt){return this.request(lt)}request(lt){const at=new XMLHttpRequest,ut=this.currXhrId++,dt=this.pendingRequests[ut]={xhr:at};at.open("GET",this.url),at.withCredentials=this.withCredentials;for(const ct in this.httpHeaders){const ht=this.httpHeaders[ct];ht!==void 0&&at.setRequestHeader(ct,ht)}return this.isHttp&&"begin"in lt&&"end"in lt?(at.setRequestHeader("Range",`bytes=${lt.begin}-${lt.end-1}`),dt.expectedStatus=et):dt.expectedStatus=_e,at.responseType="arraybuffer",lt.onError&&(at.onerror=function(ct){lt.onError(at.status)}),at.onreadystatechange=this.onStateChange.bind(this,ut),at.onprogress=this.onProgress.bind(this,ut),dt.onHeadersReceived=lt.onHeadersReceived,dt.onDone=lt.onDone,dt.onError=lt.onError,dt.onProgress=lt.onProgress,at.send(null),ut}onProgress(lt,at){var dt;const ut=this.pendingRequests[lt];ut&&((dt=ut.onProgress)==null||dt.call(ut,at))}onStateChange(lt,at){var mt,ft,gt;const ut=this.pendingRequests[lt];if(!ut)return;const dt=ut.xhr;if(dt.readyState>=2&&ut.onHeadersReceived&&(ut.onHeadersReceived(),delete ut.onHeadersReceived),dt.readyState!==4||!(lt in this.pendingRequests))return;if(delete this.pendingRequests[lt],dt.status===0&&this.isHttp){(mt=ut.onError)==null||mt.call(ut,dt.status);return}const ct=dt.status||_e;if(!(ct===_e&&ut.expectedStatus===et)&&ct!==ut.expectedStatus){(ft=ut.onError)==null||ft.call(ut,dt.status);return}const pt=tt(dt);if(ct===et){const xt=dt.getResponseHeader("Content-Range"),vt=/bytes (\d+)-(\d+)\/(\d+)/.exec(xt);ut.onDone({begin:parseInt(vt[1],10),chunk:pt})}else pt?ut.onDone({begin:0,chunk:pt}):(gt=ut.onError)==null||gt.call(ut,dt.status)}getRequestXhr(lt){return this.pendingRequests[lt].xhr}isPendingRequest(lt){return lt in this.pendingRequests}abortRequest(lt){const at=this.pendingRequests[lt].xhr;delete this.pendingRequests[lt],at.abort()}}class rt{constructor(lt){this._source=lt,this._manager=new nt(lt.url,{httpHeaders:lt.httpHeaders,withCredentials:lt.withCredentials}),this._rangeChunkSize=lt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(lt){const at=this._rangeRequestReaders.indexOf(lt);at>=0&&this._rangeRequestReaders.splice(at,1)}getFullReader(){return(0,j.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new it(this._manager,this._source),this._fullRequestReader}getRangeReader(lt,at){const ut=new st(this._manager,lt,at);return ut.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ut),ut}cancelAllRequests(lt){var at;(at=this._fullRequestReader)==null||at.cancel(lt);for(const ut of this._rangeRequestReaders.slice(0))ut.cancel(lt)}}g.PDFNetworkStream=rt;class it{constructor(lt,at){this._manager=lt;const ut={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=at.url,this._fullRequestId=lt.requestFull(ut),this._headersReceivedCapability=new j.PromiseCapability,this._disableRange=at.disableRange||!1,this._contentLength=at.length,this._rangeChunkSize=at.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const lt=this._fullRequestId,at=this._manager.getRequestXhr(lt),ut=ht=>at.getResponseHeader(ht),{allowRangeRequests:dt,suggestedLength:ct}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:ut,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});dt&&(this._isRangeSupported=!0),this._contentLength=ct||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(ut),this._isRangeSupported&&this._manager.abortRequest(lt),this._headersReceivedCapability.resolve()}_onDone(lt){if(lt&&(this._requests.length>0?this._requests.shift().resolve({value:lt.chunk,done:!1}):this._cachedChunks.push(lt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(lt){this._storedError=(0,$.createResponseStatusError)(lt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const at of this._requests)at.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(lt){var at;(at=this.onProgress)==null||at.call(this,{loaded:lt.loaded,total:lt.lengthComputable?lt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const lt=new j.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0,this._headersReceivedCapability.reject(lt);for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class st{constructor(lt,at,ut){this._manager=lt;const dt={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=lt.url,this._requestId=lt.requestRange(at,ut,dt),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var lt;(lt=this.onClosed)==null||lt.call(this,this)}_onDone(lt){const at=lt.chunk;this._requests.length>0?this._requests.shift().resolve({value:at,done:!1}):this._queuedChunk=at,this._done=!0;for(const ut of this._requests)ut.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(lt){this._storedError=(0,$.createResponseStatusError)(lt,this._url);for(const at of this._requests)at.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(lt){var at;this.isStreamingSupported||(at=this.onProgress)==null||at.call(this,{loaded:lt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const at=this._queuedChunk;return this._queuedChunk=null,{value:at,done:!1}}if(this._done)return{value:void 0,done:!0};const lt=new j.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0;for(const at of this._requests)at.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFNodeStream=void 0;var j=_(1),$=_(20);const _e=/^file:\/\/\/[a-zA-Z]:\//;function et(ut){const dt=require$$5,ct=dt.parse(ut);return ct.protocol==="file:"||ct.host?ct:/^[a-z]:[/\\]/i.test(ut)?dt.parse(`file:///${ut}`):(ct.host||(ct.protocol="file:"),ct)}class tt{constructor(dt){this.source=dt,this.url=et(dt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&dt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return(0,j.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new lt(this):new st(this),this._fullRequestReader}getRangeReader(dt,ct){if(ct<=this._progressiveDataLength)return null;const ht=this.isFsUrl?new at(this,dt,ct):new ot(this,dt,ct);return this._rangeRequestReaders.push(ht),ht}cancelAllRequests(dt){var ct;(ct=this._fullRequestReader)==null||ct.cancel(dt);for(const ht of this._rangeRequestReaders.slice(0))ht.cancel(dt)}}g.PDFNodeStream=tt;class nt{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null;const ct=dt.source;this._contentLength=ct.length,this._loaded=0,this._filename=null,this._disableRange=ct.disableRange||!1,this._rangeChunkSize=ct.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!ct.disableStream,this._isRangeSupported=!ct.disableRange,this._readableStream=null,this._readCapability=new j.PromiseCapability,this._headersCapability=new j.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ht;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new j.PromiseCapability,this.read()):(this._loaded+=dt.length,(ht=this.onProgress)==null||ht.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",ct=>{this._error(ct)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new j.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class rt{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new j.PromiseCapability;const ct=dt.source;this._isStreamingSupported=!ct.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ht;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=new j.PromiseCapability,this.read()):(this._loaded+=dt.length,(ht=this.onProgress)==null||ht.call(this,{loaded:this._loaded}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",ct=>{this._error(ct)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function it(ut,dt){return{protocol:ut.protocol,auth:ut.auth,host:ut.hostname,port:ut.port,path:ut.path,method:"GET",headers:dt}}class st extends nt{constructor(dt){super(dt);const ct=ht=>{if(ht.statusCode===404){const gt=new j.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=gt,this._headersCapability.reject(gt);return}this._headersCapability.resolve(),this._setReadableStream(ht);const pt=gt=>this._readableStream.headers[gt.toLowerCase()],{allowRangeRequests:mt,suggestedLength:ft}=(0,$.validateRangeRequestCapabilities)({getResponseHeader:pt,isHttp:dt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=mt,this._contentLength=ft||this._contentLength,this._filename=(0,$.extractFilenameFromHeader)(pt)};if(this._request=null,this._url.protocol==="http:"){const ht=require$$5;this._request=ht.request(it(this._url,dt.httpHeaders),ct)}else{const ht=require$$5;this._request=ht.request(it(this._url,dt.httpHeaders),ct)}this._request.on("error",ht=>{this._storedError=ht,this._headersCapability.reject(ht)}),this._request.end()}}class ot extends rt{constructor(dt,ct,ht){super(dt),this._httpHeaders={};for(const mt in dt.httpHeaders){const ft=dt.httpHeaders[mt];ft!==void 0&&(this._httpHeaders[mt]=ft)}this._httpHeaders.Range=`bytes=${ct}-${ht-1}`;const pt=mt=>{if(mt.statusCode===404){const ft=new j.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ft;return}this._setReadableStream(mt)};if(this._request=null,this._url.protocol==="http:"){const mt=require$$5;this._request=mt.request(it(this._url,this._httpHeaders),pt)}else{const mt=require$$5;this._request=mt.request(it(this._url,this._httpHeaders),pt)}this._request.on("error",mt=>{this._storedError=mt}),this._request.end()}}class lt extends nt{constructor(dt){super(dt);let ct=decodeURIComponent(this._url.path);_e.test(this._url.href)&&(ct=ct.replace(/^\//,""));const ht=require$$5;ht.lstat(ct,(pt,mt)=>{if(pt){pt.code==="ENOENT"&&(pt=new j.MissingPDFException(`Missing PDF "${ct}".`)),this._storedError=pt,this._headersCapability.reject(pt);return}this._contentLength=mt.size,this._setReadableStream(ht.createReadStream(ct)),this._headersCapability.resolve()})}}class at extends rt{constructor(dt,ct,ht){super(dt);let pt=decodeURIComponent(this._url.path);_e.test(this._url.href)&&(pt=pt.replace(/^\//,""));const mt=require$$5;this._setReadableStream(mt.createReadStream(pt,{start:ct,end:ht-1}))}}},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SVGGraphics=void 0;var j=_(6),$=_(1);const _e={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},et="http://www.w3.org/XML/1998/namespace",tt="http://www.w3.org/1999/xlink",nt=["butt","round","square"],rt=["miter","round","bevel"],it=function(mt,ft="",gt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!gt)return URL.createObjectURL(new Blob([mt],{type:ft}));const xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let vt=`data:${ft};base64,`;for(let St=0,Tt=mt.length;St<Tt;St+=3){const bt=mt[St]&255,At=mt[St+1]&255,Pt=mt[St+2]&255,en=bt>>2,Wt=(bt&3)<<4|At>>4,Jt=St+1<Tt?(At&15)<<2|Pt>>6:64,zt=St+2<Tt?Pt&63:64;vt+=xt[en]+xt[Wt]+xt[Jt]+xt[zt]}return vt},st=function(){const mt=new Uint8Array([137,80,78,71,13,10,26,10]),ft=12,gt=new Int32Array(256);for(let Pt=0;Pt<256;Pt++){let en=Pt;for(let Wt=0;Wt<8;Wt++)en=en&1?3988292384^en>>1&2147483647:en>>1&2147483647;gt[Pt]=en}function xt(Pt,en,Wt){let Jt=-1;for(let zt=en;zt<Wt;zt++){const Ht=(Jt^Pt[zt])&255,Rt=gt[Ht];Jt=Jt>>>8^Rt}return Jt^-1}function vt(Pt,en,Wt,Jt){let zt=Jt;const Ht=en.length;Wt[zt]=Ht>>24&255,Wt[zt+1]=Ht>>16&255,Wt[zt+2]=Ht>>8&255,Wt[zt+3]=Ht&255,zt+=4,Wt[zt]=Pt.charCodeAt(0)&255,Wt[zt+1]=Pt.charCodeAt(1)&255,Wt[zt+2]=Pt.charCodeAt(2)&255,Wt[zt+3]=Pt.charCodeAt(3)&255,zt+=4,Wt.set(en,zt),zt+=en.length;const Rt=xt(Wt,Jt+4,zt);Wt[zt]=Rt>>24&255,Wt[zt+1]=Rt>>16&255,Wt[zt+2]=Rt>>8&255,Wt[zt+3]=Rt&255}function St(Pt,en,Wt){let Jt=1,zt=0;for(let Ht=en;Ht<Wt;++Ht)Jt=(Jt+(Pt[Ht]&255))%65521,zt=(zt+Jt)%65521;return zt<<16|Jt}function Tt(Pt){if(!$.isNodeJS)return bt(Pt);try{const en=parseInt(process.versions.node)>=8?Pt:Buffer.from(Pt),Wt=require$$5.deflateSync(en,{level:9});return Wt instanceof Uint8Array?Wt:new Uint8Array(Wt)}catch(en){(0,$.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+en)}return bt(Pt)}function bt(Pt){let en=Pt.length;const Wt=65535,Jt=Math.ceil(en/Wt),zt=new Uint8Array(2+en+Jt*5+4);let Ht=0;zt[Ht++]=120,zt[Ht++]=156;let Rt=0;for(;en>Wt;)zt[Ht++]=0,zt[Ht++]=255,zt[Ht++]=255,zt[Ht++]=0,zt[Ht++]=0,zt.set(Pt.subarray(Rt,Rt+Wt),Ht),Ht+=Wt,Rt+=Wt,en-=Wt;zt[Ht++]=1,zt[Ht++]=en&255,zt[Ht++]=en>>8&255,zt[Ht++]=~en&65535&255,zt[Ht++]=(~en&65535)>>8&255,zt.set(Pt.subarray(Rt),Ht),Ht+=Pt.length-Rt;const jt=St(Pt,0,Pt.length);return zt[Ht++]=jt>>24&255,zt[Ht++]=jt>>16&255,zt[Ht++]=jt>>8&255,zt[Ht++]=jt&255,zt}function At(Pt,en,Wt,Jt){const zt=Pt.width,Ht=Pt.height;let Rt,jt,Zt;const Ot=Pt.data;switch(en){case $.ImageKind.GRAYSCALE_1BPP:jt=0,Rt=1,Zt=zt+7>>3;break;case $.ImageKind.RGB_24BPP:jt=2,Rt=8,Zt=zt*3;break;case $.ImageKind.RGBA_32BPP:jt=6,Rt=8,Zt=zt*4;break;default:throw new Error("invalid format")}const wt=new Uint8Array((1+Zt)*Ht);let Ct=0,_t=0;for(let vn=0;vn<Ht;++vn)wt[Ct++]=0,wt.set(Ot.subarray(_t,_t+Zt),Ct),_t+=Zt,Ct+=Zt;if(en===$.ImageKind.GRAYSCALE_1BPP&&Jt){Ct=0;for(let vn=0;vn<Ht;vn++){Ct++;for(let xn=0;xn<Zt;xn++)wt[Ct++]^=255}}const Nt=new Uint8Array([zt>>24&255,zt>>16&255,zt>>8&255,zt&255,Ht>>24&255,Ht>>16&255,Ht>>8&255,Ht&255,Rt,jt,0,0,0]),Lt=Tt(wt),It=mt.length+ft*3+Nt.length+Lt.length,Yt=new Uint8Array(It);let mn=0;return Yt.set(mt,mn),mn+=mt.length,vt("IHDR",Nt,Yt,mn),mn+=ft+Nt.length,vt("IDATA",Lt,Yt,mn),mn+=ft+Lt.length,vt("IEND",new Uint8Array(0),Yt,mn),it(Yt,"image/png",Wt)}return function(en,Wt,Jt){const zt=en.kind===void 0?$.ImageKind.GRAYSCALE_1BPP:en.kind;return At(en,zt,Wt,Jt)}}();class ot{constructor(){this.fontSizeScale=1,this.fontWeight=_e.fontWeight,this.fontSize=0,this.textMatrix=$.IDENTITY_MATRIX,this.fontMatrix=$.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=$.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=_e.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(ft,gt){this.x=ft,this.y=gt}}function lt(mt){let ft=[];const gt=[];for(const xt of mt){if(xt.fn==="save"){ft.push({fnId:92,fn:"group",items:[]}),gt.push(ft),ft=ft.at(-1).items;continue}xt.fn==="restore"?ft=gt.pop():ft.push(xt)}return ft}function at(mt){if(Number.isInteger(mt))return mt.toString();const ft=mt.toFixed(10);let gt=ft.length-1;if(ft[gt]!=="0")return ft;do gt--;while(ft[gt]==="0");return ft.substring(0,ft[gt]==="."?gt:gt+1)}function ut(mt){if(mt[4]===0&&mt[5]===0){if(mt[1]===0&&mt[2]===0)return mt[0]===1&&mt[3]===1?"":`scale(${at(mt[0])} ${at(mt[3])})`;if(mt[0]===mt[3]&&mt[1]===-mt[2]){const ft=Math.acos(mt[0])*180/Math.PI;return`rotate(${at(ft)})`}}else if(mt[0]===1&&mt[1]===0&&mt[2]===0&&mt[3]===1)return`translate(${at(mt[4])} ${at(mt[5])})`;return`matrix(${at(mt[0])} ${at(mt[1])} ${at(mt[2])} ${at(mt[3])} ${at(mt[4])} ${at(mt[5])})`}let dt=0,ct=0,ht=0;class pt{constructor(ft,gt,xt=!1){(0,j.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new j.DOMSVGFactory,this.current=new ot,this.transformMatrix=$.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=ft,this.objs=gt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!xt,this._operatorIdMapping=[];for(const vt in $.OPS)this._operatorIdMapping[$.OPS[vt]]=vt}getObject(ft,gt=null){return typeof ft=="string"?ft.startsWith("g_")?this.commonObjs.get(ft):this.objs.get(ft):gt}save(){this.transformStack.push(this.transformMatrix);const ft=this.current;this.extraStack.push(ft),this.current=ft.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(ft){this.save(),this.executeOpTree(ft),this.restore()}loadDependencies(ft){const gt=ft.fnArray,xt=ft.argsArray;for(let vt=0,St=gt.length;vt<St;vt++)if(gt[vt]===$.OPS.dependency)for(const Tt of xt[vt]){const bt=Tt.startsWith("g_")?this.commonObjs:this.objs,At=new Promise(Pt=>{bt.get(Tt,Pt)});this.current.dependencies.push(At)}return Promise.all(this.current.dependencies)}transform(ft,gt,xt,vt,St,Tt){const bt=[ft,gt,xt,vt,St,Tt];this.transformMatrix=$.Util.transform(this.transformMatrix,bt),this.tgrp=null}getSVG(ft,gt){this.viewport=gt;const xt=this._initialize(gt);return this.loadDependencies(ft).then(()=>(this.transformMatrix=$.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(ft)),xt))}convertOpList(ft){const gt=this._operatorIdMapping,xt=ft.argsArray,vt=ft.fnArray,St=[];for(let Tt=0,bt=vt.length;Tt<bt;Tt++){const At=vt[Tt];St.push({fnId:At,fn:gt[At],args:xt[Tt]})}return lt(St)}executeOpTree(ft){for(const gt of ft){const xt=gt.fn,vt=gt.fnId,St=gt.args;switch(vt|0){case $.OPS.beginText:this.beginText();break;case $.OPS.dependency:break;case $.OPS.setLeading:this.setLeading(St);break;case $.OPS.setLeadingMoveText:this.setLeadingMoveText(St[0],St[1]);break;case $.OPS.setFont:this.setFont(St);break;case $.OPS.showText:this.showText(St[0]);break;case $.OPS.showSpacedText:this.showText(St[0]);break;case $.OPS.endText:this.endText();break;case $.OPS.moveText:this.moveText(St[0],St[1]);break;case $.OPS.setCharSpacing:this.setCharSpacing(St[0]);break;case $.OPS.setWordSpacing:this.setWordSpacing(St[0]);break;case $.OPS.setHScale:this.setHScale(St[0]);break;case $.OPS.setTextMatrix:this.setTextMatrix(St[0],St[1],St[2],St[3],St[4],St[5]);break;case $.OPS.setTextRise:this.setTextRise(St[0]);break;case $.OPS.setTextRenderingMode:this.setTextRenderingMode(St[0]);break;case $.OPS.setLineWidth:this.setLineWidth(St[0]);break;case $.OPS.setLineJoin:this.setLineJoin(St[0]);break;case $.OPS.setLineCap:this.setLineCap(St[0]);break;case $.OPS.setMiterLimit:this.setMiterLimit(St[0]);break;case $.OPS.setFillRGBColor:this.setFillRGBColor(St[0],St[1],St[2]);break;case $.OPS.setStrokeRGBColor:this.setStrokeRGBColor(St[0],St[1],St[2]);break;case $.OPS.setStrokeColorN:this.setStrokeColorN(St);break;case $.OPS.setFillColorN:this.setFillColorN(St);break;case $.OPS.shadingFill:this.shadingFill(St[0]);break;case $.OPS.setDash:this.setDash(St[0],St[1]);break;case $.OPS.setRenderingIntent:this.setRenderingIntent(St[0]);break;case $.OPS.setFlatness:this.setFlatness(St[0]);break;case $.OPS.setGState:this.setGState(St[0]);break;case $.OPS.fill:this.fill();break;case $.OPS.eoFill:this.eoFill();break;case $.OPS.stroke:this.stroke();break;case $.OPS.fillStroke:this.fillStroke();break;case $.OPS.eoFillStroke:this.eoFillStroke();break;case $.OPS.clip:this.clip("nonzero");break;case $.OPS.eoClip:this.clip("evenodd");break;case $.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case $.OPS.paintImageXObject:this.paintImageXObject(St[0]);break;case $.OPS.paintInlineImageXObject:this.paintInlineImageXObject(St[0]);break;case $.OPS.paintImageMaskXObject:this.paintImageMaskXObject(St[0]);break;case $.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(St[0],St[1]);break;case $.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case $.OPS.closePath:this.closePath();break;case $.OPS.closeStroke:this.closeStroke();break;case $.OPS.closeFillStroke:this.closeFillStroke();break;case $.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case $.OPS.nextLine:this.nextLine();break;case $.OPS.transform:this.transform(St[0],St[1],St[2],St[3],St[4],St[5]);break;case $.OPS.constructPath:this.constructPath(St[0],St[1]);break;case $.OPS.endPath:this.endPath();break;case 92:this.group(gt.items);break;default:(0,$.warn)(`Unimplemented operator ${xt}`);break}}}setWordSpacing(ft){this.current.wordSpacing=ft}setCharSpacing(ft){this.current.charSpacing=ft}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(ft,gt,xt,vt,St,Tt){const bt=this.current;bt.textMatrix=bt.lineMatrix=[ft,gt,xt,vt,St,Tt],bt.textMatrixScale=Math.hypot(ft,gt),bt.x=bt.lineX=0,bt.y=bt.lineY=0,bt.xcoords=[],bt.ycoords=[],bt.tspan=this.svgFactory.createElement("svg:tspan"),bt.tspan.setAttributeNS(null,"font-family",bt.fontFamily),bt.tspan.setAttributeNS(null,"font-size",`${at(bt.fontSize)}px`),bt.tspan.setAttributeNS(null,"y",at(-bt.y)),bt.txtElement=this.svgFactory.createElement("svg:text"),bt.txtElement.append(bt.tspan)}beginText(){const ft=this.current;ft.x=ft.lineX=0,ft.y=ft.lineY=0,ft.textMatrix=$.IDENTITY_MATRIX,ft.lineMatrix=$.IDENTITY_MATRIX,ft.textMatrixScale=1,ft.tspan=this.svgFactory.createElement("svg:tspan"),ft.txtElement=this.svgFactory.createElement("svg:text"),ft.txtgrp=this.svgFactory.createElement("svg:g"),ft.xcoords=[],ft.ycoords=[]}moveText(ft,gt){const xt=this.current;xt.x=xt.lineX+=ft,xt.y=xt.lineY+=gt,xt.xcoords=[],xt.ycoords=[],xt.tspan=this.svgFactory.createElement("svg:tspan"),xt.tspan.setAttributeNS(null,"font-family",xt.fontFamily),xt.tspan.setAttributeNS(null,"font-size",`${at(xt.fontSize)}px`),xt.tspan.setAttributeNS(null,"y",at(-xt.y))}showText(ft){const gt=this.current,xt=gt.font,vt=gt.fontSize;if(vt===0)return;const St=gt.fontSizeScale,Tt=gt.charSpacing,bt=gt.wordSpacing,At=gt.fontDirection,Pt=gt.textHScale*At,en=xt.vertical,Wt=en?1:-1,Jt=xt.defaultVMetrics,zt=vt*gt.fontMatrix[0];let Ht=0;for(const Zt of ft){if(Zt===null){Ht+=At*bt;continue}else if(typeof Zt=="number"){Ht+=Wt*Zt*vt/1e3;continue}const Ot=(Zt.isSpace?bt:0)+Tt,wt=Zt.fontChar;let Ct,_t,Nt=Zt.width;if(en){let It;const Yt=Zt.vmetric||Jt;It=Zt.vmetric?Yt[1]:Nt*.5,It=-It*zt;const mn=Yt[2]*zt;Nt=Yt?-Yt[0]:Nt,Ct=It/St,_t=(Ht+mn)/St}else Ct=Ht/St,_t=0;(Zt.isInFont||xt.missingFile)&&(gt.xcoords.push(gt.x+Ct),en&&gt.ycoords.push(-gt.y+_t),gt.tspan.textContent+=wt);const Lt=en?Nt*zt-Ot*At:Nt*zt+Ot*At;Ht+=Lt}gt.tspan.setAttributeNS(null,"x",gt.xcoords.map(at).join(" ")),en?gt.tspan.setAttributeNS(null,"y",gt.ycoords.map(at).join(" ")):gt.tspan.setAttributeNS(null,"y",at(-gt.y)),en?gt.y-=Ht:gt.x+=Ht*Pt,gt.tspan.setAttributeNS(null,"font-family",gt.fontFamily),gt.tspan.setAttributeNS(null,"font-size",`${at(gt.fontSize)}px`),gt.fontStyle!==_e.fontStyle&&gt.tspan.setAttributeNS(null,"font-style",gt.fontStyle),gt.fontWeight!==_e.fontWeight&&gt.tspan.setAttributeNS(null,"font-weight",gt.fontWeight);const Rt=gt.textRenderingMode&$.TextRenderingMode.FILL_STROKE_MASK;if(Rt===$.TextRenderingMode.FILL||Rt===$.TextRenderingMode.FILL_STROKE?(gt.fillColor!==_e.fillColor&&gt.tspan.setAttributeNS(null,"fill",gt.fillColor),gt.fillAlpha<1&&gt.tspan.setAttributeNS(null,"fill-opacity",gt.fillAlpha)):gt.textRenderingMode===$.TextRenderingMode.ADD_TO_PATH?gt.tspan.setAttributeNS(null,"fill","transparent"):gt.tspan.setAttributeNS(null,"fill","none"),Rt===$.TextRenderingMode.STROKE||Rt===$.TextRenderingMode.FILL_STROKE){const Zt=1/(gt.textMatrixScale||1);this._setStrokeAttributes(gt.tspan,Zt)}let jt=gt.textMatrix;gt.textRise!==0&&(jt=jt.slice(),jt[5]+=gt.textRise),gt.txtElement.setAttributeNS(null,"transform",`${ut(jt)} scale(${at(Pt)}, -1)`),gt.txtElement.setAttributeNS(et,"xml:space","preserve"),gt.txtElement.append(gt.tspan),gt.txtgrp.append(gt.txtElement),this._ensureTransformGroup().append(gt.txtElement)}setLeadingMoveText(ft,gt){this.setLeading(-gt),this.moveText(ft,gt)}addFontStyle(ft){if(!ft.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const gt=it(ft.data,ft.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${ft.loadedName}"; src: url(${gt}); }
`}setFont(ft){const gt=this.current,xt=this.commonObjs.get(ft[0]);let vt=ft[1];gt.font=xt,this.embedFonts&&!xt.missingFile&&!this.embeddedFonts[xt.loadedName]&&(this.addFontStyle(xt),this.embeddedFonts[xt.loadedName]=xt),gt.fontMatrix=xt.fontMatrix||$.FONT_IDENTITY_MATRIX;let St="normal";xt.black?St="900":xt.bold&&(St="bold");const Tt=xt.italic?"italic":"normal";vt<0?(vt=-vt,gt.fontDirection=-1):gt.fontDirection=1,gt.fontSize=vt,gt.fontFamily=xt.loadedName,gt.fontWeight=St,gt.fontStyle=Tt,gt.tspan=this.svgFactory.createElement("svg:tspan"),gt.tspan.setAttributeNS(null,"y",at(-gt.y)),gt.xcoords=[],gt.ycoords=[]}endText(){var gt;const ft=this.current;ft.textRenderingMode&$.TextRenderingMode.ADD_TO_PATH_FLAG&&((gt=ft.txtElement)!=null&&gt.hasChildNodes())&&(ft.element=ft.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(ft){ft>0&&(this.current.lineWidth=ft)}setLineCap(ft){this.current.lineCap=nt[ft]}setLineJoin(ft){this.current.lineJoin=rt[ft]}setMiterLimit(ft){this.current.miterLimit=ft}setStrokeAlpha(ft){this.current.strokeAlpha=ft}setStrokeRGBColor(ft,gt,xt){this.current.strokeColor=$.Util.makeHexColor(ft,gt,xt)}setFillAlpha(ft){this.current.fillAlpha=ft}setFillRGBColor(ft,gt,xt){this.current.fillColor=$.Util.makeHexColor(ft,gt,xt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(ft){this.current.strokeColor=this._makeColorN_Pattern(ft)}setFillColorN(ft){this.current.fillColor=this._makeColorN_Pattern(ft)}shadingFill(ft){const{width:gt,height:xt}=this.viewport,vt=$.Util.inverseTransform(this.transformMatrix),[St,Tt,bt,At]=$.Util.getAxialAlignedBoundingBox([0,0,gt,xt],vt),Pt=this.svgFactory.createElement("svg:rect");Pt.setAttributeNS(null,"x",St),Pt.setAttributeNS(null,"y",Tt),Pt.setAttributeNS(null,"width",bt-St),Pt.setAttributeNS(null,"height",At-Tt),Pt.setAttributeNS(null,"fill",this._makeShadingPattern(ft)),this.current.fillAlpha<1&&Pt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Pt)}_makeColorN_Pattern(ft){return ft[0]==="TilingPattern"?this._makeTilingPattern(ft):this._makeShadingPattern(ft)}_makeTilingPattern(ft){const gt=ft[1],xt=ft[2],vt=ft[3]||$.IDENTITY_MATRIX,[St,Tt,bt,At]=ft[4],Pt=ft[5],en=ft[6],Wt=ft[7],Jt=`shading${ht++}`,[zt,Ht,Rt,jt]=$.Util.normalizeRect([...$.Util.applyTransform([St,Tt],vt),...$.Util.applyTransform([bt,At],vt)]),[Zt,Ot]=$.Util.singularValueDecompose2dScale(vt),wt=Pt*Zt,Ct=en*Ot,_t=this.svgFactory.createElement("svg:pattern");_t.setAttributeNS(null,"id",Jt),_t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_t.setAttributeNS(null,"width",wt),_t.setAttributeNS(null,"height",Ct),_t.setAttributeNS(null,"x",`${zt}`),_t.setAttributeNS(null,"y",`${Ht}`);const Nt=this.svg,Lt=this.transformMatrix,It=this.current.fillColor,Yt=this.current.strokeColor,mn=this.svgFactory.create(Rt-zt,jt-Ht);if(this.svg=mn,this.transformMatrix=vt,Wt===2){const vn=$.Util.makeHexColor(...gt);this.current.fillColor=vn,this.current.strokeColor=vn}return this.executeOpTree(this.convertOpList(xt)),this.svg=Nt,this.transformMatrix=Lt,this.current.fillColor=It,this.current.strokeColor=Yt,_t.append(mn.childNodes[0]),this.defs.append(_t),`url(#${Jt})`}_makeShadingPattern(ft){switch(typeof ft=="string"&&(ft=this.objs.get(ft)),ft[0]){case"RadialAxial":const gt=`shading${ht++}`,xt=ft[3];let vt;switch(ft[1]){case"axial":const St=ft[4],Tt=ft[5];vt=this.svgFactory.createElement("svg:linearGradient"),vt.setAttributeNS(null,"id",gt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"x1",St[0]),vt.setAttributeNS(null,"y1",St[1]),vt.setAttributeNS(null,"x2",Tt[0]),vt.setAttributeNS(null,"y2",Tt[1]);break;case"radial":const bt=ft[4],At=ft[5],Pt=ft[6],en=ft[7];vt=this.svgFactory.createElement("svg:radialGradient"),vt.setAttributeNS(null,"id",gt),vt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),vt.setAttributeNS(null,"cx",At[0]),vt.setAttributeNS(null,"cy",At[1]),vt.setAttributeNS(null,"r",en),vt.setAttributeNS(null,"fx",bt[0]),vt.setAttributeNS(null,"fy",bt[1]),vt.setAttributeNS(null,"fr",Pt);break;default:throw new Error(`Unknown RadialAxial type: ${ft[1]}`)}for(const St of xt){const Tt=this.svgFactory.createElement("svg:stop");Tt.setAttributeNS(null,"offset",St[0]),Tt.setAttributeNS(null,"stop-color",St[1]),vt.append(Tt)}return this.defs.append(vt),`url(#${gt})`;case"Mesh":return(0,$.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${ft[0]}`)}}setDash(ft,gt){this.current.dashArray=ft,this.current.dashPhase=gt}constructPath(ft,gt){const xt=this.current;let vt=xt.x,St=xt.y,Tt=[],bt=0;for(const At of ft)switch(At|0){case $.OPS.rectangle:vt=gt[bt++],St=gt[bt++];const Pt=gt[bt++],en=gt[bt++],Wt=vt+Pt,Jt=St+en;Tt.push("M",at(vt),at(St),"L",at(Wt),at(St),"L",at(Wt),at(Jt),"L",at(vt),at(Jt),"Z");break;case $.OPS.moveTo:vt=gt[bt++],St=gt[bt++],Tt.push("M",at(vt),at(St));break;case $.OPS.lineTo:vt=gt[bt++],St=gt[bt++],Tt.push("L",at(vt),at(St));break;case $.OPS.curveTo:vt=gt[bt+4],St=gt[bt+5],Tt.push("C",at(gt[bt]),at(gt[bt+1]),at(gt[bt+2]),at(gt[bt+3]),at(vt),at(St)),bt+=6;break;case $.OPS.curveTo2:Tt.push("C",at(vt),at(St),at(gt[bt]),at(gt[bt+1]),at(gt[bt+2]),at(gt[bt+3])),vt=gt[bt+2],St=gt[bt+3],bt+=4;break;case $.OPS.curveTo3:vt=gt[bt+2],St=gt[bt+3],Tt.push("C",at(gt[bt]),at(gt[bt+1]),at(vt),at(St),at(vt),at(St)),bt+=4;break;case $.OPS.closePath:Tt.push("Z");break}Tt=Tt.join(" "),xt.path&&ft.length>0&&ft[0]!==$.OPS.rectangle&&ft[0]!==$.OPS.moveTo?Tt=xt.path.getAttributeNS(null,"d")+Tt:(xt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(xt.path)),xt.path.setAttributeNS(null,"d",Tt),xt.path.setAttributeNS(null,"fill","none"),xt.element=xt.path,xt.setCurrentPoint(vt,St)}endPath(){const ft=this.current;if(ft.path=null,!this.pendingClip)return;if(!ft.element){this.pendingClip=null;return}const gt=`clippath${dt++}`,xt=this.svgFactory.createElement("svg:clipPath");xt.setAttributeNS(null,"id",gt),xt.setAttributeNS(null,"transform",ut(this.transformMatrix));const vt=ft.element.cloneNode(!0);if(this.pendingClip==="evenodd"?vt.setAttributeNS(null,"clip-rule","evenodd"):vt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,xt.append(vt),this.defs.append(xt),ft.activeClipUrl){ft.clipGroup=null;for(const St of this.extraStack)St.clipGroup=null;xt.setAttributeNS(null,"clip-path",ft.activeClipUrl)}ft.activeClipUrl=`url(#${gt})`,this.tgrp=null}clip(ft){this.pendingClip=ft}closePath(){const ft=this.current;if(ft.path){const gt=`${ft.path.getAttributeNS(null,"d")}Z`;ft.path.setAttributeNS(null,"d",gt)}}setLeading(ft){this.current.leading=-ft}setTextRise(ft){this.current.textRise=ft}setTextRenderingMode(ft){this.current.textRenderingMode=ft}setHScale(ft){this.current.textHScale=ft/100}setRenderingIntent(ft){}setFlatness(ft){}setGState(ft){for(const[gt,xt]of ft)switch(gt){case"LW":this.setLineWidth(xt);break;case"LC":this.setLineCap(xt);break;case"LJ":this.setLineJoin(xt);break;case"ML":this.setMiterLimit(xt);break;case"D":this.setDash(xt[0],xt[1]);break;case"RI":this.setRenderingIntent(xt);break;case"FL":this.setFlatness(xt);break;case"Font":this.setFont(xt);break;case"CA":this.setStrokeAlpha(xt);break;case"ca":this.setFillAlpha(xt);break;default:(0,$.warn)(`Unimplemented graphic state operator ${gt}`);break}}fill(){const ft=this.current;ft.element&&(ft.element.setAttributeNS(null,"fill",ft.fillColor),ft.element.setAttributeNS(null,"fill-opacity",ft.fillAlpha),this.endPath())}stroke(){const ft=this.current;ft.element&&(this._setStrokeAttributes(ft.element),ft.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(ft,gt=1){const xt=this.current;let vt=xt.dashArray;gt!==1&&vt.length>0&&(vt=vt.map(function(St){return gt*St})),ft.setAttributeNS(null,"stroke",xt.strokeColor),ft.setAttributeNS(null,"stroke-opacity",xt.strokeAlpha),ft.setAttributeNS(null,"stroke-miterlimit",at(xt.miterLimit)),ft.setAttributeNS(null,"stroke-linecap",xt.lineCap),ft.setAttributeNS(null,"stroke-linejoin",xt.lineJoin),ft.setAttributeNS(null,"stroke-width",at(gt*xt.lineWidth)+"px"),ft.setAttributeNS(null,"stroke-dasharray",vt.map(at).join(" ")),ft.setAttributeNS(null,"stroke-dashoffset",at(gt*xt.dashPhase)+"px")}eoFill(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x","0"),ft.setAttributeNS(null,"y","0"),ft.setAttributeNS(null,"width","1px"),ft.setAttributeNS(null,"height","1px"),ft.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(ft)}paintImageXObject(ft){const gt=this.getObject(ft);if(!gt){(0,$.warn)(`Dependent image with object ID ${ft} is not ready yet`);return}this.paintInlineImageXObject(gt)}paintInlineImageXObject(ft,gt){const xt=ft.width,vt=ft.height,St=st(ft,this.forceDataSchema,!!gt),Tt=this.svgFactory.createElement("svg:rect");Tt.setAttributeNS(null,"x","0"),Tt.setAttributeNS(null,"y","0"),Tt.setAttributeNS(null,"width",at(xt)),Tt.setAttributeNS(null,"height",at(vt)),this.current.element=Tt,this.clip("nonzero");const bt=this.svgFactory.createElement("svg:image");bt.setAttributeNS(tt,"xlink:href",St),bt.setAttributeNS(null,"x","0"),bt.setAttributeNS(null,"y",at(-vt)),bt.setAttributeNS(null,"width",at(xt)+"px"),bt.setAttributeNS(null,"height",at(vt)+"px"),bt.setAttributeNS(null,"transform",`scale(${at(1/xt)} ${at(-1/vt)})`),gt?gt.append(bt):this._ensureTransformGroup().append(bt)}paintImageMaskXObject(ft){const gt=this.getObject(ft.data,ft);if(gt.bitmap){(0,$.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const xt=this.current,vt=gt.width,St=gt.height,Tt=xt.fillColor;xt.maskId=`mask${ct++}`;const bt=this.svgFactory.createElement("svg:mask");bt.setAttributeNS(null,"id",xt.maskId);const At=this.svgFactory.createElement("svg:rect");At.setAttributeNS(null,"x","0"),At.setAttributeNS(null,"y","0"),At.setAttributeNS(null,"width",at(vt)),At.setAttributeNS(null,"height",at(St)),At.setAttributeNS(null,"fill",Tt),At.setAttributeNS(null,"mask",`url(#${xt.maskId})`),this.defs.append(bt),this._ensureTransformGroup().append(At),this.paintInlineImageXObject(gt,bt)}paintFormXObjectBegin(ft,gt){if(Array.isArray(ft)&&ft.length===6&&this.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]),gt){const xt=gt[2]-gt[0],vt=gt[3]-gt[1],St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x",gt[0]),St.setAttributeNS(null,"y",gt[1]),St.setAttributeNS(null,"width",at(xt)),St.setAttributeNS(null,"height",at(vt)),this.current.element=St,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(ft){const gt=this.svgFactory.create(ft.width,ft.height),xt=this.svgFactory.createElement("svg:defs");gt.append(xt),this.defs=xt;const vt=this.svgFactory.createElement("svg:g");return vt.setAttributeNS(null,"transform",ut(ft.transform)),gt.append(vt),this.svg=vt,gt}_ensureClipGroup(){if(!this.current.clipGroup){const ft=this.svgFactory.createElement("svg:g");ft.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(ft),this.current.clipGroup=ft}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ut(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}g.SVGGraphics=pt},(b,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaText=void 0;class _{static textContent($){const _e=[],et={items:_e,styles:Object.create(null)};function tt(nt){var st;if(!nt)return;let rt=null;const it=nt.name;if(it==="#text")rt=nt.value;else if(_.shouldBuildText(it))(st=nt==null?void 0:nt.attributes)!=null&&st.textContent?rt=nt.attributes.textContent:nt.value&&(rt=nt.value);else return;if(rt!==null&&_e.push({str:rt}),!!nt.children)for(const ot of nt.children)tt(ot)}return tt($),et}static shouldBuildText($){return!($==="textarea"||$==="input"||$==="option"||$==="select")}}g.XfaText=_},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextLayerRenderTask=void 0,g.renderTextLayer=ut,g.updateTextLayer=dt;var j=_(1),$=_(6);const _e=1e5,et=30,tt=.8,nt=new Map;function rt(ct,ht){let pt;if(ht&&j.FeatureTest.isOffscreenCanvasSupported)pt=new OffscreenCanvas(ct,ct).getContext("2d",{alpha:!1});else{const mt=document.createElement("canvas");mt.width=mt.height=ct,pt=mt.getContext("2d",{alpha:!1})}return pt}function it(ct,ht){const pt=nt.get(ct);if(pt)return pt;const mt=rt(et,ht);mt.font=`${et}px ${ct}`;const ft=mt.measureText("");let gt=ft.fontBoundingBoxAscent,xt=Math.abs(ft.fontBoundingBoxDescent);if(gt){const St=gt/(gt+xt);return nt.set(ct,St),mt.canvas.width=mt.canvas.height=0,St}mt.strokeStyle="red",mt.clearRect(0,0,et,et),mt.strokeText("g",0,0);let vt=mt.getImageData(0,0,et,et).data;xt=0;for(let St=vt.length-1-3;St>=0;St-=4)if(vt[St]>0){xt=Math.ceil(St/4/et);break}mt.clearRect(0,0,et,et),mt.strokeText("A",0,et),vt=mt.getImageData(0,0,et,et).data,gt=0;for(let St=0,Tt=vt.length;St<Tt;St+=4)if(vt[St]>0){gt=et-Math.floor(St/4/et);break}if(mt.canvas.width=mt.canvas.height=0,gt){const St=gt/(gt+xt);return nt.set(ct,St),St}return nt.set(ct,tt),tt}function st(ct,ht,pt){const mt=document.createElement("span"),ft={angle:0,canvasWidth:0,hasText:ht.str!=="",hasEOL:ht.hasEOL,fontSize:0};ct._textDivs.push(mt);const gt=j.Util.transform(ct._transform,ht.transform);let xt=Math.atan2(gt[1],gt[0]);const vt=pt[ht.fontName];vt.vertical&&(xt+=Math.PI/2);const St=Math.hypot(gt[2],gt[3]),Tt=St*it(vt.fontFamily,ct._isOffscreenCanvasSupported);let bt,At;xt===0?(bt=gt[4],At=gt[5]-Tt):(bt=gt[4]+Tt*Math.sin(xt),At=gt[5]-Tt*Math.cos(xt));const Pt="calc(var(--scale-factor)*",en=mt.style;ct._container===ct._rootContainer?(en.left=`${(100*bt/ct._pageWidth).toFixed(2)}%`,en.top=`${(100*At/ct._pageHeight).toFixed(2)}%`):(en.left=`${Pt}${bt.toFixed(2)}px)`,en.top=`${Pt}${At.toFixed(2)}px)`),en.fontSize=`${Pt}${St.toFixed(2)}px)`,en.fontFamily=vt.fontFamily,ft.fontSize=St,mt.setAttribute("role","presentation"),mt.textContent=ht.str,mt.dir=ht.dir,ct._fontInspectorEnabled&&(mt.dataset.fontName=ht.fontName),xt!==0&&(ft.angle=xt*(180/Math.PI));let Wt=!1;if(ht.str.length>1)Wt=!0;else if(ht.str!==" "&&ht.transform[0]!==ht.transform[3]){const Jt=Math.abs(ht.transform[0]),zt=Math.abs(ht.transform[3]);Jt!==zt&&Math.max(Jt,zt)/Math.min(Jt,zt)>1.5&&(Wt=!0)}Wt&&(ft.canvasWidth=vt.vertical?ht.height:ht.width),ct._textDivProperties.set(mt,ft),ct._isReadableStream&&ct._layoutText(mt)}function ot(ct){const{div:ht,scale:pt,properties:mt,ctx:ft,prevFontSize:gt,prevFontFamily:xt}=ct,{style:vt}=ht;let St="";if(mt.canvasWidth!==0&&mt.hasText){const{fontFamily:Tt}=vt,{canvasWidth:bt,fontSize:At}=mt;(gt!==At||xt!==Tt)&&(ft.font=`${At*pt}px ${Tt}`,ct.prevFontSize=At,ct.prevFontFamily=Tt);const{width:Pt}=ft.measureText(ht.textContent);Pt>0&&(St=`scaleX(${bt*pt/Pt})`)}mt.angle!==0&&(St=`rotate(${mt.angle}deg) ${St}`),St.length>0&&(vt.transform=St)}function lt(ct){if(ct._canceled)return;const ht=ct._textDivs,pt=ct._capability;if(ht.length>_e){pt.resolve();return}if(!ct._isReadableStream)for(const ft of ht)ct._layoutText(ft);pt.resolve()}class at{constructor({textContentSource:ht,container:pt,viewport:mt,textDivs:ft,textDivProperties:gt,textContentItemsStr:xt,isOffscreenCanvasSupported:vt}){var Pt;this._textContentSource=ht,this._isReadableStream=ht instanceof ReadableStream,this._container=this._rootContainer=pt,this._textDivs=ft||[],this._textContentItemsStr=xt||[],this._isOffscreenCanvasSupported=vt,this._fontInspectorEnabled=!!((Pt=globalThis.FontInspector)!=null&&Pt.enabled),this._reader=null,this._textDivProperties=gt||new WeakMap,this._canceled=!1,this._capability=new j.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:mt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:rt(0,vt)};const{pageWidth:St,pageHeight:Tt,pageX:bt,pageY:At}=mt.rawDims;this._transform=[1,0,0,-1,-bt,At+Tt],this._pageWidth=St,this._pageHeight=Tt,(0,$.setLayerDimensions)(pt,mt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new j.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new j.AbortException("TextLayer task cancelled."))}_processItems(ht,pt){for(const mt of ht){if(mt.str===void 0){if(mt.type==="beginMarkedContentProps"||mt.type==="beginMarkedContent"){const ft=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),mt.id!==null&&this._container.setAttribute("id",`${mt.id}`),ft.append(this._container)}else mt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(mt.str),st(this,mt,pt)}}_layoutText(ht){const pt=this._layoutTextParams.properties=this._textDivProperties.get(ht);if(this._layoutTextParams.div=ht,ot(this._layoutTextParams),pt.hasText&&this._container.append(ht),pt.hasEOL){const mt=document.createElement("br");mt.setAttribute("role","presentation"),this._container.append(mt)}}_render(){const ht=new j.PromiseCapability;let pt=Object.create(null);if(this._isReadableStream){const mt=()=>{this._reader.read().then(({value:ft,done:gt})=>{if(gt){ht.resolve();return}Object.assign(pt,ft.styles),this._processItems(ft.items,pt),mt()},ht.reject)};this._reader=this._textContentSource.getReader(),mt()}else if(this._textContentSource){const{items:mt,styles:ft}=this._textContentSource;this._processItems(mt,ft),ht.resolve()}else throw new Error('No "textContentSource" parameter specified.');ht.promise.then(()=>{pt=null,lt(this)},this._capability.reject)}}g.TextLayerRenderTask=at;function ut(ct){!ct.textContentSource&&(ct.textContent||ct.textContentStream)&&((0,$.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),ct.textContentSource=ct.textContent||ct.textContentStream);const{container:ht,viewport:pt}=ct,mt=getComputedStyle(ht),ft=mt.getPropertyValue("visibility"),gt=parseFloat(mt.getPropertyValue("--scale-factor"));ft==="visible"&&(!gt||Math.abs(gt-pt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const xt=new at(ct);return xt._render(),xt}function dt({container:ct,viewport:ht,textDivs:pt,textDivProperties:mt,isOffscreenCanvasSupported:ft,mustRotate:gt=!0,mustRescale:xt=!0}){if(gt&&(0,$.setLayerDimensions)(ct,{rotation:ht.rotation}),xt){const vt=rt(0,ft),Tt={prevFontSize:null,prevFontFamily:null,div:null,scale:ht.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:vt};for(const bt of pt)Tt.properties=mt.get(bt),Tt.div=bt,ot(Tt)}}},(b,g,_)=>{var it,st,ot,lt,at,ut,dt,ct,ht,pt,mt,Wo,io,Go,qo;Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationEditorLayer=void 0;var j=_(1),$=_(4),_e=_(28),et=_(33),tt=_(6),nt=_(34);const St=class St{constructor({uiManager:bt,pageIndex:At,div:Pt,accessibilityManager:en,annotationLayer:Wt,viewport:Jt,l10n:zt}){fn(this,mt);fn(this,it);fn(this,st,!1);fn(this,ot,null);fn(this,lt,this.pointerup.bind(this));fn(this,at,this.pointerdown.bind(this));fn(this,ut,new Map);fn(this,dt,!1);fn(this,ct,!1);fn(this,ht,!1);fn(this,pt);const Ht=[_e.FreeTextEditor,et.InkEditor,nt.StampEditor];if(!St._initialized){St._initialized=!0;for(const Rt of Ht)Rt.initialize(zt)}bt.registerEditorTypes(Ht),pn(this,pt,bt),this.pageIndex=At,this.div=Pt,pn(this,it,en),pn(this,ot,Wt),this.viewport=Jt,yt(this,pt).addLayer(this)}get isEmpty(){return yt(this,ut).size===0}updateToolbar(bt){yt(this,pt).updateToolbar(bt)}updateMode(bt=yt(this,pt).getMode()){Qt(this,mt,qo).call(this),bt===j.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),bt!==j.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",bt===j.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",bt===j.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",bt===j.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(bt){if(!bt&&yt(this,pt).getMode()!==j.AnnotationEditorType.INK)return;if(!bt){for(const Pt of yt(this,ut).values())if(Pt.isEmpty()){Pt.setInBackground();return}}Qt(this,mt,io).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(bt){yt(this,pt).setEditingState(bt)}addCommands(bt){yt(this,pt).addCommands(bt)}enable(){this.div.style.pointerEvents="auto";const bt=new Set;for(const Pt of yt(this,ut).values())Pt.enableEditing(),Pt.annotationElementId&&bt.add(Pt.annotationElementId);if(!yt(this,ot))return;const At=yt(this,ot).getEditableAnnotations();for(const Pt of At){if(Pt.hide(),yt(this,pt).isDeletedAnnotationElement(Pt.data.id)||bt.has(Pt.data.id))continue;const en=this.deserialize(Pt);en&&(this.addOrRebuild(en),en.enableEditing())}}disable(){var At;pn(this,ht,!0),this.div.style.pointerEvents="none";const bt=new Set;for(const Pt of yt(this,ut).values()){if(Pt.disableEditing(),!Pt.annotationElementId||Pt.serialize()!==null){bt.add(Pt.annotationElementId);continue}(At=this.getEditableAnnotation(Pt.annotationElementId))==null||At.show(),Pt.remove()}if(yt(this,ot)){const Pt=yt(this,ot).getEditableAnnotations();for(const en of Pt){const{id:Wt}=en.data;bt.has(Wt)||yt(this,pt).isDeletedAnnotationElement(Wt)||en.show()}}Qt(this,mt,qo).call(this),this.isEmpty&&(this.div.hidden=!0),pn(this,ht,!1)}getEditableAnnotation(bt){var At;return((At=yt(this,ot))==null?void 0:At.getEditableAnnotation(bt))||null}setActiveEditor(bt){yt(this,pt).getActive()!==bt&&yt(this,pt).setActiveEditor(bt)}enableClick(){this.div.addEventListener("pointerdown",yt(this,at)),this.div.addEventListener("pointerup",yt(this,lt))}disableClick(){this.div.removeEventListener("pointerdown",yt(this,at)),this.div.removeEventListener("pointerup",yt(this,lt))}attach(bt){yt(this,ut).set(bt.id,bt);const{annotationElementId:At}=bt;At&&yt(this,pt).isDeletedAnnotationElement(At)&&yt(this,pt).removeDeletedAnnotationElement(bt)}detach(bt){var At;yt(this,ut).delete(bt.id),(At=yt(this,it))==null||At.removePointerInTextLayer(bt.contentDiv),!yt(this,ht)&&bt.annotationElementId&&yt(this,pt).addDeletedAnnotationElement(bt)}remove(bt){this.detach(bt),yt(this,pt).removeEditor(bt),bt.div.contains(document.activeElement)&&setTimeout(()=>{yt(this,pt).focusMainContainer()},0),bt.div.remove(),bt.isAttachedToDOM=!1,yt(this,ct)||this.addInkEditorIfNeeded(!1)}changeParent(bt){var At;bt.parent!==this&&(bt.annotationElementId&&(yt(this,pt).addDeletedAnnotationElement(bt.annotationElementId),$.AnnotationEditor.deleteAnnotationElement(bt),bt.annotationElementId=null),this.attach(bt),(At=bt.parent)==null||At.detach(bt),bt.setParent(this),bt.div&&bt.isAttachedToDOM&&(bt.div.remove(),this.div.append(bt.div)))}add(bt){if(this.changeParent(bt),yt(this,pt).addEditor(bt),this.attach(bt),!bt.isAttachedToDOM){const At=bt.render();this.div.append(At),bt.isAttachedToDOM=!0}bt.fixAndSetPosition(),bt.onceAdded(),yt(this,pt).addToAnnotationStorage(bt)}moveEditorInDOM(bt){var Pt;if(!bt.isAttachedToDOM)return;const{activeElement:At}=document;bt.div.contains(At)&&(bt._focusEventsAllowed=!1,setTimeout(()=>{bt.div.contains(document.activeElement)?bt._focusEventsAllowed=!0:(bt.div.addEventListener("focusin",()=>{bt._focusEventsAllowed=!0},{once:!0}),At.focus())},0)),bt._structTreeParentId=(Pt=yt(this,it))==null?void 0:Pt.moveElementInDOM(this.div,bt.div,bt.contentDiv,!0)}addOrRebuild(bt){bt.needsToBeRebuilt()?bt.rebuild():this.add(bt)}addUndoableEditor(bt){const At=()=>bt._uiManager.rebuild(bt),Pt=()=>{bt.remove()};this.addCommands({cmd:At,undo:Pt,mustExec:!1})}getNextId(){return yt(this,pt).getId()}pasteEditor(bt,At){yt(this,pt).updateToolbar(bt),yt(this,pt).updateMode(bt);const{offsetX:Pt,offsetY:en}=Qt(this,mt,Go).call(this),Wt=this.getNextId(),Jt=Qt(this,mt,Wo).call(this,{parent:this,id:Wt,x:Pt,y:en,uiManager:yt(this,pt),isCentered:!0,...At});Jt&&this.add(Jt)}deserialize(bt){switch(bt.annotationType??bt.annotationEditorType){case j.AnnotationEditorType.FREETEXT:return _e.FreeTextEditor.deserialize(bt,this,yt(this,pt));case j.AnnotationEditorType.INK:return et.InkEditor.deserialize(bt,this,yt(this,pt));case j.AnnotationEditorType.STAMP:return nt.StampEditor.deserialize(bt,this,yt(this,pt))}return null}addNewEditor(){Qt(this,mt,io).call(this,Qt(this,mt,Go).call(this),!0)}setSelected(bt){yt(this,pt).setSelected(bt)}toggleSelected(bt){yt(this,pt).toggleSelected(bt)}isSelected(bt){return yt(this,pt).isSelected(bt)}unselect(bt){yt(this,pt).unselect(bt)}pointerup(bt){const{isMac:At}=j.FeatureTest.platform;if(!(bt.button!==0||bt.ctrlKey&&At)&&bt.target===this.div&&yt(this,dt)){if(pn(this,dt,!1),!yt(this,st)){pn(this,st,!0);return}if(yt(this,pt).getMode()===j.AnnotationEditorType.STAMP){yt(this,pt).unselectAll();return}Qt(this,mt,io).call(this,bt,!1)}}pointerdown(bt){if(yt(this,dt)){pn(this,dt,!1);return}const{isMac:At}=j.FeatureTest.platform;if(bt.button!==0||bt.ctrlKey&&At||bt.target!==this.div)return;pn(this,dt,!0);const Pt=yt(this,pt).getActive();pn(this,st,!Pt||Pt.isEmpty())}findNewParent(bt,At,Pt){const en=yt(this,pt).findParent(At,Pt);return en===null||en===this?!1:(en.changeParent(bt),!0)}destroy(){var bt,At;((bt=yt(this,pt).getActive())==null?void 0:bt.parent)===this&&(yt(this,pt).commitOrRemove(),yt(this,pt).setActiveEditor(null));for(const Pt of yt(this,ut).values())(At=yt(this,it))==null||At.removePointerInTextLayer(Pt.contentDiv),Pt.setParent(null),Pt.isAttachedToDOM=!1,Pt.div.remove();this.div=null,yt(this,ut).clear(),yt(this,pt).removeLayer(this)}render({viewport:bt}){this.viewport=bt,(0,tt.setLayerDimensions)(this.div,bt);for(const At of yt(this,pt).getEditors(this.pageIndex))this.add(At);this.updateMode()}update({viewport:bt}){yt(this,pt).commitOrRemove(),this.viewport=bt,(0,tt.setLayerDimensions)(this.div,{rotation:bt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:bt,pageHeight:At}=this.viewport.rawDims;return[bt,At]}};it=new WeakMap,st=new WeakMap,ot=new WeakMap,lt=new WeakMap,at=new WeakMap,ut=new WeakMap,dt=new WeakMap,ct=new WeakMap,ht=new WeakMap,pt=new WeakMap,mt=new WeakSet,Wo=function(bt){switch(yt(this,pt).getMode()){case j.AnnotationEditorType.FREETEXT:return new _e.FreeTextEditor(bt);case j.AnnotationEditorType.INK:return new et.InkEditor(bt);case j.AnnotationEditorType.STAMP:return new nt.StampEditor(bt)}return null},io=function(bt,At){const Pt=this.getNextId(),en=Qt(this,mt,Wo).call(this,{parent:this,id:Pt,x:bt.offsetX,y:bt.offsetY,uiManager:yt(this,pt),isCentered:At});return en&&this.add(en),en},Go=function(){const{x:bt,y:At,width:Pt,height:en}=this.div.getBoundingClientRect(),Wt=Math.max(0,bt),Jt=Math.max(0,At),zt=Math.min(window.innerWidth,bt+Pt),Ht=Math.min(window.innerHeight,At+en),Rt=(Wt+zt)/2-bt,jt=(Jt+Ht)/2-At,[Zt,Ot]=this.viewport.rotation%180===0?[Rt,jt]:[jt,Rt];return{offsetX:Zt,offsetY:Ot}},qo=function(){pn(this,ct,!0);for(const bt of yt(this,ut).values())bt.isEmpty()&&bt.remove();pn(this,ct,!1)},$r(St,"_initialized",!1);let rt=St;g.AnnotationEditorLayer=rt},(b,g,_)=>{var nt,rt,it,st,ot,lt,at,ut,dt,ct,tu,nu,ru,$s,Ko,iu,Xo;Object.defineProperty(g,"__esModule",{value:!0}),g.FreeTextEditor=void 0;var j=_(1),$=_(5),_e=_(4),et=_(29);const St=class St extends _e.AnnotationEditor{constructor(At){super({...At,name:"freeTextEditor"});fn(this,ct);fn(this,nt,this.editorDivBlur.bind(this));fn(this,rt,this.editorDivFocus.bind(this));fn(this,it,this.editorDivInput.bind(this));fn(this,st,this.editorDivKeydown.bind(this));fn(this,ot);fn(this,lt,"");fn(this,at,`${this.id}-editor`);fn(this,ut);fn(this,dt,null);pn(this,ot,At.color||St._defaultColor||_e.AnnotationEditor._defaultLineColor),pn(this,ut,At.fontSize||St._defaultFontSize)}static get _keyboardManager(){const At=St.prototype,Pt=Jt=>Jt.isEmpty(),en=$.AnnotationEditorUIManager.TRANSLATE_SMALL,Wt=$.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,j.shadow)(this,"_keyboardManager",new $.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],At.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],At.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],At._translateEmpty,{args:[-en,0],checker:Pt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],At._translateEmpty,{args:[-Wt,0],checker:Pt}],[["ArrowRight","mac+ArrowRight"],At._translateEmpty,{args:[en,0],checker:Pt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],At._translateEmpty,{args:[Wt,0],checker:Pt}],[["ArrowUp","mac+ArrowUp"],At._translateEmpty,{args:[0,-en],checker:Pt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],At._translateEmpty,{args:[0,-Wt],checker:Pt}],[["ArrowDown","mac+ArrowDown"],At._translateEmpty,{args:[0,en],checker:Pt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],At._translateEmpty,{args:[0,Wt],checker:Pt}]]))}static initialize(At){_e.AnnotationEditor.initialize(At,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Pt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Pt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(At,Pt){switch(At){case j.AnnotationEditorParamsType.FREETEXT_SIZE:St._defaultFontSize=Pt;break;case j.AnnotationEditorParamsType.FREETEXT_COLOR:St._defaultColor=Pt;break}}updateParams(At,Pt){switch(At){case j.AnnotationEditorParamsType.FREETEXT_SIZE:Qt(this,ct,tu).call(this,Pt);break;case j.AnnotationEditorParamsType.FREETEXT_COLOR:Qt(this,ct,nu).call(this,Pt);break}}static get defaultPropertiesToUpdate(){return[[j.AnnotationEditorParamsType.FREETEXT_SIZE,St._defaultFontSize],[j.AnnotationEditorParamsType.FREETEXT_COLOR,St._defaultColor||_e.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[j.AnnotationEditorParamsType.FREETEXT_SIZE,yt(this,ut)],[j.AnnotationEditorParamsType.FREETEXT_COLOR,yt(this,ot)]]}_translateEmpty(At,Pt){this._uiManager.translateSelectedEditors(At,Pt,!0)}getInitialTranslation(){const At=this.parentScale;return[-St._internalPadding*At,-(St._internalPadding+yt(this,ut))*At]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(j.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",yt(this,st)),this.editorDiv.addEventListener("focus",yt(this,rt)),this.editorDiv.addEventListener("blur",yt(this,nt)),this.editorDiv.addEventListener("input",yt(this,it)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",yt(this,at)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",yt(this,st)),this.editorDiv.removeEventListener("focus",yt(this,rt)),this.editorDiv.removeEventListener("blur",yt(this,nt)),this.editorDiv.removeEventListener("input",yt(this,it)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(At){this._focusEventsAllowed&&(super.focusin(At),At.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var At;if(this.width){Qt(this,ct,Xo).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(At=this._initialOptions)!=null&&At.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const At=yt(this,lt),Pt=pn(this,lt,Qt(this,ct,ru).call(this).trimEnd());if(At===Pt)return;const en=Wt=>{if(pn(this,lt,Wt),!Wt){this.remove();return}Qt(this,ct,Ko).call(this),this._uiManager.rebuild(this),Qt(this,ct,$s).call(this)};this.addCommands({cmd:()=>{en(Pt)},undo:()=>{en(At)},mustExec:!1}),Qt(this,ct,$s).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(At){this.enterInEditMode()}keydown(At){At.target===this.div&&At.key==="Enter"&&(this.enterInEditMode(),At.preventDefault())}editorDivKeydown(At){St._keyboardManager.exec(this,At)}editorDivFocus(At){this.isEditing=!0}editorDivBlur(At){this.isEditing=!1}editorDivInput(At){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let At,Pt;this.width&&(At=this.x,Pt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",yt(this,at)),this.enableEditing(),_e.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Wt=>{var Jt;return(Jt=this.editorDiv)==null?void 0:Jt.setAttribute("aria-label",Wt)}),_e.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Wt=>{var Jt;return(Jt=this.editorDiv)==null?void 0:Jt.setAttribute("default-content",Wt)}),this.editorDiv.contentEditable=!0;const{style:en}=this.editorDiv;if(en.fontSize=`calc(${yt(this,ut)}px * var(--scale-factor))`,en.color=yt(this,ot),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,$.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Wt,Jt]=this.parentDimensions;if(this.annotationElementId){const{position:zt}=yt(this,dt);let[Ht,Rt]=this.getInitialTranslation();[Ht,Rt]=this.pageTranslationToScreen(Ht,Rt);const[jt,Zt]=this.pageDimensions,[Ot,wt]=this.pageTranslation;let Ct,_t;switch(this.rotation){case 0:Ct=At+(zt[0]-Ot)/jt,_t=Pt+this.height-(zt[1]-wt)/Zt;break;case 90:Ct=At+(zt[0]-Ot)/jt,_t=Pt-(zt[1]-wt)/Zt,[Ht,Rt]=[Rt,-Ht];break;case 180:Ct=At-this.width+(zt[0]-Ot)/jt,_t=Pt-(zt[1]-wt)/Zt,[Ht,Rt]=[-Ht,-Rt];break;case 270:Ct=At+(zt[0]-Ot-this.height*Zt)/jt,_t=Pt+(zt[1]-wt-this.width*jt)/Zt,[Ht,Rt]=[-Rt,Ht];break}this.setAt(Ct*Wt,_t*Jt,Ht,Rt)}else this.setAt(At*Wt,Pt*Jt,this.width*Wt,this.height*Jt);Qt(this,ct,Ko).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(At,Pt,en){let Wt=null;if(At instanceof et.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:zt,fontColor:Ht},rect:Rt,rotation:jt,id:Zt},textContent:Ot,textPosition:wt,parent:{page:{pageNumber:Ct}}}=At;if(!Ot||Ot.length===0)return null;Wt=At={annotationType:j.AnnotationEditorType.FREETEXT,color:Array.from(Ht),fontSize:zt,value:Ot.join(`
`),position:wt,pageIndex:Ct-1,rect:Rt,rotation:jt,id:Zt,deleted:!1}}const Jt=super.deserialize(At,Pt,en);return pn(Jt,ut,At.fontSize),pn(Jt,ot,j.Util.makeHexColor(...At.color)),pn(Jt,lt,At.value),Jt.annotationElementId=At.id||null,pn(Jt,dt,Wt),Jt}serialize(At=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Pt=St._internalPadding*this.parentScale,en=this.getRect(Pt,Pt),Wt=_e.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:yt(this,ot)),Jt={annotationType:j.AnnotationEditorType.FREETEXT,color:Wt,fontSize:yt(this,ut),value:yt(this,lt),pageIndex:this.pageIndex,rect:en,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return At?Jt:this.annotationElementId&&!Qt(this,ct,iu).call(this,Jt)?null:(Jt.id=this.annotationElementId,Jt)}};nt=new WeakMap,rt=new WeakMap,it=new WeakMap,st=new WeakMap,ot=new WeakMap,lt=new WeakMap,at=new WeakMap,ut=new WeakMap,dt=new WeakMap,ct=new WeakSet,tu=function(At){const Pt=Wt=>{this.editorDiv.style.fontSize=`calc(${Wt}px * var(--scale-factor))`,this.translate(0,-(Wt-yt(this,ut))*this.parentScale),pn(this,ut,Wt),Qt(this,ct,$s).call(this)},en=yt(this,ut);this.addCommands({cmd:()=>{Pt(At)},undo:()=>{Pt(en)},mustExec:!0,type:j.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},nu=function(At){const Pt=yt(this,ot);this.addCommands({cmd:()=>{pn(this,ot,this.editorDiv.style.color=At)},undo:()=>{pn(this,ot,this.editorDiv.style.color=Pt)},mustExec:!0,type:j.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ru=function(){const At=this.editorDiv.getElementsByTagName("div");if(At.length===0)return this.editorDiv.innerText;const Pt=[];for(const en of At)Pt.push(en.innerText.replace(/\r\n?|\n/,""));return Pt.join(`
`)},$s=function(){const[At,Pt]=this.parentDimensions;let en;if(this.isAttachedToDOM)en=this.div.getBoundingClientRect();else{const{currentLayer:Wt,div:Jt}=this,zt=Jt.style.display;Jt.style.display="hidden",Wt.div.append(this.div),en=Jt.getBoundingClientRect(),Jt.remove(),Jt.style.display=zt}this.rotation%180===this.parentRotation%180?(this.width=en.width/At,this.height=en.height/Pt):(this.width=en.height/At,this.height=en.width/Pt),this.fixAndSetPosition()},Ko=function(){if(this.editorDiv.replaceChildren(),!!yt(this,lt))for(const At of yt(this,lt).split(`
`)){const Pt=document.createElement("div");Pt.append(At?document.createTextNode(At):document.createElement("br")),this.editorDiv.append(Pt)}},iu=function(At){const{value:Pt,fontSize:en,color:Wt,rect:Jt,pageIndex:zt}=yt(this,dt);return At.value!==Pt||At.fontSize!==en||At.rect.some((Ht,Rt)=>Math.abs(Ht-Jt[Rt])>=1)||At.color.some((Ht,Rt)=>Ht!==Wt[Rt])||At.pageIndex!==zt},Xo=function(At=!1){if(!this.annotationElementId)return;if(Qt(this,ct,$s).call(this),!At&&(this.width===0||this.height===0)){setTimeout(()=>Qt(this,ct,Xo).call(this,!0),0);return}const Pt=St._internalPadding*this.parentScale;yt(this,dt).rect=this.getRect(Pt,Pt)},$r(St,"_freeTextDefaultContent",""),$r(St,"_internalPadding",0),$r(St,"_defaultColor",null),$r(St,"_defaultFontSize",10),$r(St,"_type","freetext");let tt=St;g.FreeTextEditor=tt},(b,g,_)=>{var _t,Lt,Ts,su,mn,vn,xn,En,An,kn,ln,un,Mt,Bt,nn,dn,Sn,_n,Cn,tn,Ln,Dn,ou,so,Yo,Jo,Zn,mr,Rr,wn,rn,on,zn,Zo,nr,Vt,bn,In,au,Qo;Object.defineProperty(g,"__esModule",{value:!0}),g.StampAnnotationElement=g.InkAnnotationElement=g.FreeTextAnnotationElement=g.AnnotationLayer=void 0;var j=_(1),$=_(6),_e=_(3),et=_(30),tt=_(31),nt=_(32);const rt=1e3,it=9,st=new WeakSet;function ot($n){return{width:$n[2]-$n[0],height:$n[3]-$n[1]}}class lt{static create(Ft){switch(Ft.data.annotationType){case j.AnnotationType.LINK:return new ut(Ft);case j.AnnotationType.TEXT:return new dt(Ft);case j.AnnotationType.WIDGET:switch(Ft.data.fieldType){case"Tx":return new ht(Ft);case"Btn":return Ft.data.radioButton?new ft(Ft):Ft.data.checkBox?new mt(Ft):new gt(Ft);case"Ch":return new xt(Ft);case"Sig":return new pt(Ft)}return new ct(Ft);case j.AnnotationType.POPUP:return new vt(Ft);case j.AnnotationType.FREETEXT:return new Tt(Ft);case j.AnnotationType.LINE:return new bt(Ft);case j.AnnotationType.SQUARE:return new At(Ft);case j.AnnotationType.CIRCLE:return new Pt(Ft);case j.AnnotationType.POLYLINE:return new en(Ft);case j.AnnotationType.CARET:return new Jt(Ft);case j.AnnotationType.INK:return new zt(Ft);case j.AnnotationType.POLYGON:return new Wt(Ft);case j.AnnotationType.HIGHLIGHT:return new Ht(Ft);case j.AnnotationType.UNDERLINE:return new Rt(Ft);case j.AnnotationType.SQUIGGLY:return new jt(Ft);case j.AnnotationType.STRIKEOUT:return new Zt(Ft);case j.AnnotationType.STAMP:return new Ot(Ft);case j.AnnotationType.FILEATTACHMENT:return new wt(Ft);default:return new at(Ft)}}}const Nt=class Nt{constructor(Ft,{isRenderable:Dt=!1,ignoreBorder:Kt=!1,createQuadrilaterals:gn=!1}={}){fn(this,_t,!1);this.isRenderable=Dt,this.data=Ft.data,this.layer=Ft.layer,this.linkService=Ft.linkService,this.downloadManager=Ft.downloadManager,this.imageResourcesPath=Ft.imageResourcesPath,this.renderForms=Ft.renderForms,this.svgFactory=Ft.svgFactory,this.annotationStorage=Ft.annotationStorage,this.enableScripting=Ft.enableScripting,this.hasJSActions=Ft.hasJSActions,this._fieldObjects=Ft.fieldObjects,this.parent=Ft.parent,Dt&&(this.container=this._createContainer(Kt)),gn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Ft,contentsObj:Dt,richText:Kt}){return!!(Ft!=null&&Ft.str||Dt!=null&&Dt.str||Kt!=null&&Kt.str)}get hasPopupData(){return Nt._hasPopupData(this.data)}_createContainer(Ft){const{data:Dt,parent:{page:Kt,viewport:gn}}=this,yn=document.createElement("section");yn.setAttribute("data-annotation-id",Dt.id),this instanceof ct||(yn.tabIndex=rt),yn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&yn.setAttribute("aria-haspopup","dialog"),Dt.noRotate&&yn.classList.add("norotate");const{pageWidth:Tn,pageHeight:On,pageX:Kn,pageY:Un}=gn.rawDims;if(!Dt.rect||this instanceof vt){const{rotation:ar}=Dt;return!Dt.hasOwnCanvas&&ar!==0&&this.setRotation(ar,yn),yn}const{width:Bn,height:fr}=ot(Dt.rect),Wn=j.Util.normalizeRect([Dt.rect[0],Kt.view[3]-Dt.rect[1]+Kt.view[1],Dt.rect[2],Kt.view[3]-Dt.rect[3]+Kt.view[1]]);if(!Ft&&Dt.borderStyle.width>0){yn.style.borderWidth=`${Dt.borderStyle.width}px`;const ar=Dt.borderStyle.horizontalCornerRadius,vr=Dt.borderStyle.verticalCornerRadius;if(ar>0||vr>0){const Fr=`calc(${ar}px * var(--scale-factor)) / calc(${vr}px * var(--scale-factor))`;yn.style.borderRadius=Fr}else if(this instanceof ft){const Fr=`calc(${Bn}px * var(--scale-factor)) / calc(${fr}px * var(--scale-factor))`;yn.style.borderRadius=Fr}switch(Dt.borderStyle.style){case j.AnnotationBorderStyleType.SOLID:yn.style.borderStyle="solid";break;case j.AnnotationBorderStyleType.DASHED:yn.style.borderStyle="dashed";break;case j.AnnotationBorderStyleType.BEVELED:(0,j.warn)("Unimplemented border style: beveled");break;case j.AnnotationBorderStyleType.INSET:(0,j.warn)("Unimplemented border style: inset");break;case j.AnnotationBorderStyleType.UNDERLINE:yn.style.borderBottomStyle="solid";break}const Ar=Dt.borderColor||null;Ar?(pn(this,_t,!0),yn.style.borderColor=j.Util.makeHexColor(Ar[0]|0,Ar[1]|0,Ar[2]|0)):yn.style.borderWidth=0}yn.style.left=`${100*(Wn[0]-Kn)/Tn}%`,yn.style.top=`${100*(Wn[1]-Un)/On}%`;const{rotation:Jn}=Dt;return Dt.hasOwnCanvas||Jn===0?(yn.style.width=`${100*Bn/Tn}%`,yn.style.height=`${100*fr/On}%`):this.setRotation(Jn,yn),yn}setRotation(Ft,Dt=this.container){if(!this.data.rect)return;const{pageWidth:Kt,pageHeight:gn}=this.parent.viewport.rawDims,{width:yn,height:Tn}=ot(this.data.rect);let On,Kn;Ft%180===0?(On=100*yn/Kt,Kn=100*Tn/gn):(On=100*Tn/Kt,Kn=100*yn/gn),Dt.style.width=`${On}%`,Dt.style.height=`${Kn}%`,Dt.setAttribute("data-main-rotation",(360-Ft)%360)}get _commonActions(){const Ft=(Dt,Kt,gn)=>{const yn=gn.detail[Dt],Tn=yn[0],On=yn.slice(1);gn.target.style[Kt]=et.ColorConverters[`${Tn}_HTML`](On),this.annotationStorage.setValue(this.data.id,{[Kt]:et.ColorConverters[`${Tn}_rgb`](On)})};return(0,j.shadow)(this,"_commonActions",{display:Dt=>{const{display:Kt}=Dt.detail,gn=Kt%2===1;this.container.style.visibility=gn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:gn,noPrint:Kt===1||Kt===2})},print:Dt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Dt.detail.print})},hidden:Dt=>{const{hidden:Kt}=Dt.detail;this.container.style.visibility=Kt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Kt,noView:Kt})},focus:Dt=>{setTimeout(()=>Dt.target.focus({preventScroll:!1}),0)},userName:Dt=>{Dt.target.title=Dt.detail.userName},readonly:Dt=>{Dt.target.disabled=Dt.detail.readonly},required:Dt=>{this._setRequired(Dt.target,Dt.detail.required)},bgColor:Dt=>{Ft("bgColor","backgroundColor",Dt)},fillColor:Dt=>{Ft("fillColor","backgroundColor",Dt)},fgColor:Dt=>{Ft("fgColor","color",Dt)},textColor:Dt=>{Ft("textColor","color",Dt)},borderColor:Dt=>{Ft("borderColor","borderColor",Dt)},strokeColor:Dt=>{Ft("strokeColor","borderColor",Dt)},rotation:Dt=>{const Kt=Dt.detail.rotation;this.setRotation(Kt),this.annotationStorage.setValue(this.data.id,{rotation:Kt})}})}_dispatchEventFromSandbox(Ft,Dt){const Kt=this._commonActions;for(const gn of Object.keys(Dt.detail)){const yn=Ft[gn]||Kt[gn];yn==null||yn(Dt)}}_setDefaultPropertiesFromJS(Ft){if(!this.enableScripting)return;const Dt=this.annotationStorage.getRawValue(this.data.id);if(!Dt)return;const Kt=this._commonActions;for(const[gn,yn]of Object.entries(Dt)){const Tn=Kt[gn];if(Tn){const On={detail:{[gn]:yn},target:Ft};Tn(On),delete Dt[gn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Ft}=this.data;if(!Ft)return;const[Dt,Kt,gn,yn]=this.data.rect;if(Ft.length===1){const[,{x:vr,y:Ar},{x:Fr,y:Qr}]=Ft[0];if(gn===vr&&yn===Ar&&Dt===Fr&&Kt===Qr)return}const{style:Tn}=this.container;let On;if(yt(this,_t)){const{borderColor:vr,borderWidth:Ar}=Tn;Tn.borderWidth=0,On=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${vr}" stroke-width="${Ar}">`],this.container.classList.add("hasBorder")}const Kn=gn-Dt,Un=yn-Kt,{svgFactory:Bn}=this,fr=Bn.createElement("svg");fr.classList.add("quadrilateralsContainer"),fr.setAttribute("width",0),fr.setAttribute("height",0);const Wn=Bn.createElement("defs");fr.append(Wn);const Jn=Bn.createElement("clipPath"),ar=`clippath_${this.data.id}`;Jn.setAttribute("id",ar),Jn.setAttribute("clipPathUnits","objectBoundingBox"),Wn.append(Jn);for(const[,{x:vr,y:Ar},{x:Fr,y:Qr}]of Ft){const Gr=Bn.createElement("rect"),us=(Fr-Dt)/Kn,hs=(yn-Ar)/Un,fs=(vr-Fr)/Kn,Us=(Ar-Qr)/Un;Gr.setAttribute("x",us),Gr.setAttribute("y",hs),Gr.setAttribute("width",fs),Gr.setAttribute("height",Us),Jn.append(Gr),On==null||On.push(`<rect vector-effect="non-scaling-stroke" x="${us}" y="${hs}" width="${fs}" height="${Us}"/>`)}yt(this,_t)&&(On.push("</g></svg>')"),Tn.backgroundImage=On.join("")),this.container.append(fr),this.container.style.clipPath=`url(#${ar})`}_createPopup(){const{container:Ft,data:Dt}=this;Ft.setAttribute("aria-haspopup","dialog");const Kt=new vt({data:{color:Dt.color,titleObj:Dt.titleObj,modificationDate:Dt.modificationDate,contentsObj:Dt.contentsObj,richText:Dt.richText,parentRect:Dt.rect,borderStyle:0,id:`popup_${Dt.id}`,rotation:Dt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Kt.render())}render(){(0,j.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Ft,Dt=null){const Kt=[];if(this._fieldObjects){const gn=this._fieldObjects[Ft];if(gn)for(const{page:yn,id:Tn,exportValues:On}of gn){if(yn===-1||Tn===Dt)continue;const Kn=typeof On=="string"?On:null,Un=document.querySelector(`[data-element-id="${Tn}"]`);if(Un&&!st.has(Un)){(0,j.warn)(`_getElementsByName - element not allowed: ${Tn}`);continue}Kt.push({id:Tn,exportValue:Kn,domElement:Un})}return Kt}for(const gn of document.getElementsByName(Ft)){const{exportValue:yn}=gn,Tn=gn.getAttribute("data-element-id");Tn!==Dt&&st.has(gn)&&Kt.push({id:Tn,exportValue:yn,domElement:gn})}return Kt}show(){var Ft;this.container&&(this.container.hidden=!1),(Ft=this.popup)==null||Ft.maybeShow()}hide(){var Ft;this.container&&(this.container.hidden=!0),(Ft=this.popup)==null||Ft.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Ft=this.getElementsToTriggerPopup();if(Array.isArray(Ft))for(const Dt of Ft)Dt.classList.add("highlightArea");else Ft.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Ft,data:{id:Dt}}=this;this.container.addEventListener("dblclick",()=>{var Kt;(Kt=this.linkService.eventBus)==null||Kt.dispatch("switchannotationeditormode",{source:this,mode:Ft,editId:Dt})})}};_t=new WeakMap;let at=Nt;class ut extends at{constructor(Dt,Kt=null){super(Dt,{isRenderable:!0,ignoreBorder:!!(Kt!=null&&Kt.ignoreBorder),createQuadrilaterals:!0});fn(this,Lt);this.isTooltipOnly=Dt.data.isTooltipOnly}render(){const{data:Dt,linkService:Kt}=this,gn=document.createElement("a");gn.setAttribute("data-element-id",Dt.id);let yn=!1;return Dt.url?(Kt.addLinkAttributes(gn,Dt.url,Dt.newWindow),yn=!0):Dt.action?(this._bindNamedAction(gn,Dt.action),yn=!0):Dt.attachment?(this._bindAttachment(gn,Dt.attachment),yn=!0):Dt.setOCGState?(Qt(this,Lt,su).call(this,gn,Dt.setOCGState),yn=!0):Dt.dest?(this._bindLink(gn,Dt.dest),yn=!0):(Dt.actions&&(Dt.actions.Action||Dt.actions["Mouse Up"]||Dt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(gn,Dt),yn=!0),Dt.resetForm?(this._bindResetFormAction(gn,Dt.resetForm),yn=!0):this.isTooltipOnly&&!yn&&(this._bindLink(gn,""),yn=!0)),this.container.classList.add("linkAnnotation"),yn&&this.container.append(gn),this.container}_bindLink(Dt,Kt){Dt.href=this.linkService.getDestinationHash(Kt),Dt.onclick=()=>(Kt&&this.linkService.goToDestination(Kt),!1),(Kt||Kt==="")&&Qt(this,Lt,Ts).call(this)}_bindNamedAction(Dt,Kt){Dt.href=this.linkService.getAnchorUrl(""),Dt.onclick=()=>(this.linkService.executeNamedAction(Kt),!1),Qt(this,Lt,Ts).call(this)}_bindAttachment(Dt,Kt){Dt.href=this.linkService.getAnchorUrl(""),Dt.onclick=()=>{var gn;return(gn=this.downloadManager)==null||gn.openOrDownloadData(this.container,Kt.content,Kt.filename),!1},Qt(this,Lt,Ts).call(this)}_bindJSAction(Dt,Kt){Dt.href=this.linkService.getAnchorUrl("");const gn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const yn of Object.keys(Kt.actions)){const Tn=gn.get(yn);Tn&&(Dt[Tn]=()=>{var On;return(On=this.linkService.eventBus)==null||On.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Kt.id,name:yn}}),!1})}Dt.onclick||(Dt.onclick=()=>!1),Qt(this,Lt,Ts).call(this)}_bindResetFormAction(Dt,Kt){const gn=Dt.onclick;if(gn||(Dt.href=this.linkService.getAnchorUrl("")),Qt(this,Lt,Ts).call(this),!this._fieldObjects){(0,j.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),gn||(Dt.onclick=()=>!1);return}Dt.onclick=()=>{var fr;gn==null||gn();const{fields:yn,refs:Tn,include:On}=Kt,Kn=[];if(yn.length!==0||Tn.length!==0){const Wn=new Set(Tn);for(const Jn of yn){const ar=this._fieldObjects[Jn]||[];for(const{id:vr}of ar)Wn.add(vr)}for(const Jn of Object.values(this._fieldObjects))for(const ar of Jn)Wn.has(ar.id)===On&&Kn.push(ar)}else for(const Wn of Object.values(this._fieldObjects))Kn.push(...Wn);const Un=this.annotationStorage,Bn=[];for(const Wn of Kn){const{id:Jn}=Wn;switch(Bn.push(Jn),Wn.type){case"text":{const vr=Wn.defaultValue||"";Un.setValue(Jn,{value:vr});break}case"checkbox":case"radiobutton":{const vr=Wn.defaultValue===Wn.exportValues;Un.setValue(Jn,{value:vr});break}case"combobox":case"listbox":{const vr=Wn.defaultValue||"";Un.setValue(Jn,{value:vr});break}default:continue}const ar=document.querySelector(`[data-element-id="${Jn}"]`);if(ar){if(!st.has(ar)){(0,j.warn)(`_bindResetFormAction - element not allowed: ${Jn}`);continue}}else continue;ar.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((fr=this.linkService.eventBus)==null||fr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Bn,name:"ResetForm"}})),!1}}}Lt=new WeakSet,Ts=function(){this.container.setAttribute("data-internal-link","")},su=function(Dt,Kt){Dt.href=this.linkService.getAnchorUrl(""),Dt.onclick=()=>(this.linkService.executeSetOCGState(Kt),!1),Qt(this,Lt,Ts).call(this)};class dt extends at{constructor(Ft){super(Ft,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Ft=document.createElement("img");return Ft.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Ft.alt="[{{type}} Annotation]",Ft.dataset.l10nId="text_annotation_type",Ft.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Ft),this.container}}class ct extends at{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Ft){var Dt;this.data.hasOwnCanvas&&(((Dt=Ft.previousSibling)==null?void 0:Dt.nodeName)==="CANVAS"&&(Ft.previousSibling.hidden=!0),Ft.hidden=!1)}_getKeyModifier(Ft){const{isWin:Dt,isMac:Kt}=j.FeatureTest.platform;return Dt&&Ft.ctrlKey||Kt&&Ft.metaKey}_setEventListener(Ft,Dt,Kt,gn,yn){Kt.includes("mouse")?Ft.addEventListener(Kt,Tn=>{var On;(On=this.linkService.eventBus)==null||On.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:gn,value:yn(Tn),shift:Tn.shiftKey,modifier:this._getKeyModifier(Tn)}})}):Ft.addEventListener(Kt,Tn=>{var On;if(Kt==="blur"){if(!Dt.focused||!Tn.relatedTarget)return;Dt.focused=!1}else if(Kt==="focus"){if(Dt.focused)return;Dt.focused=!0}yn&&((On=this.linkService.eventBus)==null||On.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:gn,value:yn(Tn)}}))})}_setEventListeners(Ft,Dt,Kt,gn){var yn,Tn,On;for(const[Kn,Un]of Kt)(Un==="Action"||(yn=this.data.actions)!=null&&yn[Un])&&((Un==="Focus"||Un==="Blur")&&(Dt||(Dt={focused:!1})),this._setEventListener(Ft,Dt,Kn,Un,gn),Un==="Focus"&&!((Tn=this.data.actions)!=null&&Tn.Blur)?this._setEventListener(Ft,Dt,"blur","Blur",null):Un==="Blur"&&!((On=this.data.actions)!=null&&On.Focus)&&this._setEventListener(Ft,Dt,"focus","Focus",null))}_setBackgroundColor(Ft){const Dt=this.data.backgroundColor||null;Ft.style.backgroundColor=Dt===null?"transparent":j.Util.makeHexColor(Dt[0],Dt[1],Dt[2])}_setTextStyle(Ft){const Dt=["left","center","right"],{fontColor:Kt}=this.data.defaultAppearanceData,gn=this.data.defaultAppearanceData.fontSize||it,yn=Ft.style;let Tn;const On=2,Kn=Un=>Math.round(10*Un)/10;if(this.data.multiLine){const Un=Math.abs(this.data.rect[3]-this.data.rect[1]-On),Bn=Math.round(Un/(j.LINE_FACTOR*gn))||1,fr=Un/Bn;Tn=Math.min(gn,Kn(fr/j.LINE_FACTOR))}else{const Un=Math.abs(this.data.rect[3]-this.data.rect[1]-On);Tn=Math.min(gn,Kn(Un/j.LINE_FACTOR))}yn.fontSize=`calc(${Tn}px * var(--scale-factor))`,yn.color=j.Util.makeHexColor(Kt[0],Kt[1],Kt[2]),this.data.textAlignment!==null&&(yn.textAlign=Dt[this.data.textAlignment])}_setRequired(Ft,Dt){Dt?Ft.setAttribute("required",!0):Ft.removeAttribute("required"),Ft.setAttribute("aria-required",Dt)}}class ht extends ct{constructor(Ft){const Dt=Ft.renderForms||!Ft.data.hasAppearance&&!!Ft.data.fieldValue;super(Ft,{isRenderable:Dt})}setPropertyOnSiblings(Ft,Dt,Kt,gn){const yn=this.annotationStorage;for(const Tn of this._getElementsByName(Ft.name,Ft.id))Tn.domElement&&(Tn.domElement[Dt]=Kt),yn.setValue(Tn.id,{[gn]:Kt})}render(){var gn,yn;const Ft=this.annotationStorage,Dt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Kt=null;if(this.renderForms){const Tn=Ft.getValue(Dt,{value:this.data.fieldValue});let On=Tn.value||"";const Kn=Ft.getValue(Dt,{charLimit:this.data.maxLen}).charLimit;Kn&&On.length>Kn&&(On=On.slice(0,Kn));let Un=Tn.formattedValue||((gn=this.data.textContent)==null?void 0:gn.join(`
`))||null;Un&&this.data.comb&&(Un=Un.replaceAll(/\s+/g,""));const Bn={userValue:On,formattedValue:Un,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Kt=document.createElement("textarea"),Kt.textContent=Un??On,this.data.doNotScroll&&(Kt.style.overflowY="hidden")):(Kt=document.createElement("input"),Kt.type="text",Kt.setAttribute("value",Un??On),this.data.doNotScroll&&(Kt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Kt.hidden=!0),st.add(Kt),Kt.setAttribute("data-element-id",Dt),Kt.disabled=this.data.readOnly,Kt.name=this.data.fieldName,Kt.tabIndex=rt,this._setRequired(Kt,this.data.required),Kn&&(Kt.maxLength=Kn),Kt.addEventListener("input",Wn=>{Ft.setValue(Dt,{value:Wn.target.value}),this.setPropertyOnSiblings(Kt,"value",Wn.target.value,"value"),Bn.formattedValue=null}),Kt.addEventListener("resetform",Wn=>{const Jn=this.data.defaultFieldValue??"";Kt.value=Bn.userValue=Jn,Bn.formattedValue=null});let fr=Wn=>{const{formattedValue:Jn}=Bn;Jn!=null&&(Wn.target.value=Jn),Wn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Kt.addEventListener("focus",Jn=>{if(Bn.focused)return;const{target:ar}=Jn;Bn.userValue&&(ar.value=Bn.userValue),Bn.lastCommittedValue=ar.value,Bn.commitKey=1,Bn.focused=!0}),Kt.addEventListener("updatefromsandbox",Jn=>{this.showElementAndHideCanvas(Jn.target);const ar={value(vr){Bn.userValue=vr.detail.value??"",Ft.setValue(Dt,{value:Bn.userValue.toString()}),vr.target.value=Bn.userValue},formattedValue(vr){const{formattedValue:Ar}=vr.detail;Bn.formattedValue=Ar,Ar!=null&&vr.target!==document.activeElement&&(vr.target.value=Ar),Ft.setValue(Dt,{formattedValue:Ar})},selRange(vr){vr.target.setSelectionRange(...vr.detail.selRange)},charLimit:vr=>{var Gr;const{charLimit:Ar}=vr.detail,{target:Fr}=vr;if(Ar===0){Fr.removeAttribute("maxLength");return}Fr.setAttribute("maxLength",Ar);let Qr=Bn.userValue;!Qr||Qr.length<=Ar||(Qr=Qr.slice(0,Ar),Fr.value=Bn.userValue=Qr,Ft.setValue(Dt,{value:Qr}),(Gr=this.linkService.eventBus)==null||Gr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Dt,name:"Keystroke",value:Qr,willCommit:!0,commitKey:1,selStart:Fr.selectionStart,selEnd:Fr.selectionEnd}}))}};this._dispatchEventFromSandbox(ar,Jn)}),Kt.addEventListener("keydown",Jn=>{var Ar;Bn.commitKey=1;let ar=-1;if(Jn.key==="Escape"?ar=0:Jn.key==="Enter"&&!this.data.multiLine?ar=2:Jn.key==="Tab"&&(Bn.commitKey=3),ar===-1)return;const{value:vr}=Jn.target;Bn.lastCommittedValue!==vr&&(Bn.lastCommittedValue=vr,Bn.userValue=vr,(Ar=this.linkService.eventBus)==null||Ar.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Dt,name:"Keystroke",value:vr,willCommit:!0,commitKey:ar,selStart:Jn.target.selectionStart,selEnd:Jn.target.selectionEnd}}))});const Wn=fr;fr=null,Kt.addEventListener("blur",Jn=>{var vr;if(!Bn.focused||!Jn.relatedTarget)return;Bn.focused=!1;const{value:ar}=Jn.target;Bn.userValue=ar,Bn.lastCommittedValue!==ar&&((vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Dt,name:"Keystroke",value:ar,willCommit:!0,commitKey:Bn.commitKey,selStart:Jn.target.selectionStart,selEnd:Jn.target.selectionEnd}})),Wn(Jn)}),(yn=this.data.actions)!=null&&yn.Keystroke&&Kt.addEventListener("beforeinput",Jn=>{var hs;Bn.lastCommittedValue=null;const{data:ar,target:vr}=Jn,{value:Ar,selectionStart:Fr,selectionEnd:Qr}=vr;let Gr=Fr,us=Qr;switch(Jn.inputType){case"deleteWordBackward":{const fs=Ar.substring(0,Fr).match(/\w*[^\w]*$/);fs&&(Gr-=fs[0].length);break}case"deleteWordForward":{const fs=Ar.substring(Fr).match(/^[^\w]*\w*/);fs&&(us+=fs[0].length);break}case"deleteContentBackward":Fr===Qr&&(Gr-=1);break;case"deleteContentForward":Fr===Qr&&(us+=1);break}Jn.preventDefault(),(hs=this.linkService.eventBus)==null||hs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Dt,name:"Keystroke",value:Ar,change:ar||"",willCommit:!1,selStart:Gr,selEnd:us}})}),this._setEventListeners(Kt,Bn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Jn=>Jn.target.value)}if(fr&&Kt.addEventListener("blur",fr),this.data.comb){const Jn=(this.data.rect[2]-this.data.rect[0])/Kn;Kt.classList.add("comb"),Kt.style.letterSpacing=`calc(${Jn}px * var(--scale-factor) - 1ch)`}}else Kt=document.createElement("div"),Kt.textContent=this.data.fieldValue,Kt.style.verticalAlign="middle",Kt.style.display="table-cell";return this._setTextStyle(Kt),this._setBackgroundColor(Kt),this._setDefaultPropertiesFromJS(Kt),this.container.append(Kt),this.container}}class pt extends ct{constructor(Ft){super(Ft,{isRenderable:!!Ft.data.hasOwnCanvas})}}class mt extends ct{constructor(Ft){super(Ft,{isRenderable:Ft.renderForms})}render(){const Ft=this.annotationStorage,Dt=this.data,Kt=Dt.id;let gn=Ft.getValue(Kt,{value:Dt.exportValue===Dt.fieldValue}).value;typeof gn=="string"&&(gn=gn!=="Off",Ft.setValue(Kt,{value:gn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const yn=document.createElement("input");return st.add(yn),yn.setAttribute("data-element-id",Kt),yn.disabled=Dt.readOnly,this._setRequired(yn,this.data.required),yn.type="checkbox",yn.name=Dt.fieldName,gn&&yn.setAttribute("checked",!0),yn.setAttribute("exportValue",Dt.exportValue),yn.tabIndex=rt,yn.addEventListener("change",Tn=>{const{name:On,checked:Kn}=Tn.target;for(const Un of this._getElementsByName(On,Kt)){const Bn=Kn&&Un.exportValue===Dt.exportValue;Un.domElement&&(Un.domElement.checked=Bn),Ft.setValue(Un.id,{value:Bn})}Ft.setValue(Kt,{value:Kn})}),yn.addEventListener("resetform",Tn=>{const On=Dt.defaultFieldValue||"Off";Tn.target.checked=On===Dt.exportValue}),this.enableScripting&&this.hasJSActions&&(yn.addEventListener("updatefromsandbox",Tn=>{const On={value(Kn){Kn.target.checked=Kn.detail.value!=="Off",Ft.setValue(Kt,{value:Kn.target.checked})}};this._dispatchEventFromSandbox(On,Tn)}),this._setEventListeners(yn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Tn=>Tn.target.checked)),this._setBackgroundColor(yn),this._setDefaultPropertiesFromJS(yn),this.container.append(yn),this.container}}class ft extends ct{constructor(Ft){super(Ft,{isRenderable:Ft.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Ft=this.annotationStorage,Dt=this.data,Kt=Dt.id;let gn=Ft.getValue(Kt,{value:Dt.fieldValue===Dt.buttonValue}).value;typeof gn=="string"&&(gn=gn!==Dt.buttonValue,Ft.setValue(Kt,{value:gn}));const yn=document.createElement("input");if(st.add(yn),yn.setAttribute("data-element-id",Kt),yn.disabled=Dt.readOnly,this._setRequired(yn,this.data.required),yn.type="radio",yn.name=Dt.fieldName,gn&&yn.setAttribute("checked",!0),yn.tabIndex=rt,yn.addEventListener("change",Tn=>{const{name:On,checked:Kn}=Tn.target;for(const Un of this._getElementsByName(On,Kt))Ft.setValue(Un.id,{value:!1});Ft.setValue(Kt,{value:Kn})}),yn.addEventListener("resetform",Tn=>{const On=Dt.defaultFieldValue;Tn.target.checked=On!=null&&On===Dt.buttonValue}),this.enableScripting&&this.hasJSActions){const Tn=Dt.buttonValue;yn.addEventListener("updatefromsandbox",On=>{const Kn={value:Un=>{const Bn=Tn===Un.detail.value;for(const fr of this._getElementsByName(Un.target.name)){const Wn=Bn&&fr.id===Kt;fr.domElement&&(fr.domElement.checked=Wn),Ft.setValue(fr.id,{value:Wn})}}};this._dispatchEventFromSandbox(Kn,On)}),this._setEventListeners(yn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],On=>On.target.checked)}return this._setBackgroundColor(yn),this._setDefaultPropertiesFromJS(yn),this.container.append(yn),this.container}}class gt extends ut{constructor(Ft){super(Ft,{ignoreBorder:Ft.data.hasAppearance})}render(){const Ft=super.render();Ft.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Ft.title=this.data.alternativeText);const Dt=Ft.lastChild;return this.enableScripting&&this.hasJSActions&&Dt&&(this._setDefaultPropertiesFromJS(Dt),Dt.addEventListener("updatefromsandbox",Kt=>{this._dispatchEventFromSandbox({},Kt)})),Ft}}class xt extends ct{constructor(Ft){super(Ft,{isRenderable:Ft.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Ft=this.annotationStorage,Dt=this.data.id,Kt=Ft.getValue(Dt,{value:this.data.fieldValue}),gn=document.createElement("select");st.add(gn),gn.setAttribute("data-element-id",Dt),gn.disabled=this.data.readOnly,this._setRequired(gn,this.data.required),gn.name=this.data.fieldName,gn.tabIndex=rt;let yn=this.data.combo&&this.data.options.length>0;this.data.combo||(gn.size=this.data.options.length,this.data.multiSelect&&(gn.multiple=!0)),gn.addEventListener("resetform",Bn=>{const fr=this.data.defaultFieldValue;for(const Wn of gn.options)Wn.selected=Wn.value===fr});for(const Bn of this.data.options){const fr=document.createElement("option");fr.textContent=Bn.displayValue,fr.value=Bn.exportValue,Kt.value.includes(Bn.exportValue)&&(fr.setAttribute("selected",!0),yn=!1),gn.append(fr)}let Tn=null;if(yn){const Bn=document.createElement("option");Bn.value=" ",Bn.setAttribute("hidden",!0),Bn.setAttribute("selected",!0),gn.prepend(Bn),Tn=()=>{Bn.remove(),gn.removeEventListener("input",Tn),Tn=null},gn.addEventListener("input",Tn)}const On=Bn=>{const fr=Bn?"value":"textContent",{options:Wn,multiple:Jn}=gn;return Jn?Array.prototype.filter.call(Wn,ar=>ar.selected).map(ar=>ar[fr]):Wn.selectedIndex===-1?null:Wn[Wn.selectedIndex][fr]};let Kn=On(!1);const Un=Bn=>{const fr=Bn.target.options;return Array.prototype.map.call(fr,Wn=>({displayValue:Wn.textContent,exportValue:Wn.value}))};return this.enableScripting&&this.hasJSActions?(gn.addEventListener("updatefromsandbox",Bn=>{const fr={value(Wn){Tn==null||Tn();const Jn=Wn.detail.value,ar=new Set(Array.isArray(Jn)?Jn:[Jn]);for(const vr of gn.options)vr.selected=ar.has(vr.value);Ft.setValue(Dt,{value:On(!0)}),Kn=On(!1)},multipleSelection(Wn){gn.multiple=!0},remove(Wn){const Jn=gn.options,ar=Wn.detail.remove;Jn[ar].selected=!1,gn.remove(ar),Jn.length>0&&Array.prototype.findIndex.call(Jn,Ar=>Ar.selected)===-1&&(Jn[0].selected=!0),Ft.setValue(Dt,{value:On(!0),items:Un(Wn)}),Kn=On(!1)},clear(Wn){for(;gn.length!==0;)gn.remove(0);Ft.setValue(Dt,{value:null,items:[]}),Kn=On(!1)},insert(Wn){const{index:Jn,displayValue:ar,exportValue:vr}=Wn.detail.insert,Ar=gn.children[Jn],Fr=document.createElement("option");Fr.textContent=ar,Fr.value=vr,Ar?Ar.before(Fr):gn.append(Fr),Ft.setValue(Dt,{value:On(!0),items:Un(Wn)}),Kn=On(!1)},items(Wn){const{items:Jn}=Wn.detail;for(;gn.length!==0;)gn.remove(0);for(const ar of Jn){const{displayValue:vr,exportValue:Ar}=ar,Fr=document.createElement("option");Fr.textContent=vr,Fr.value=Ar,gn.append(Fr)}gn.options.length>0&&(gn.options[0].selected=!0),Ft.setValue(Dt,{value:On(!0),items:Un(Wn)}),Kn=On(!1)},indices(Wn){const Jn=new Set(Wn.detail.indices);for(const ar of Wn.target.options)ar.selected=Jn.has(ar.index);Ft.setValue(Dt,{value:On(!0)}),Kn=On(!1)},editable(Wn){Wn.target.disabled=!Wn.detail.editable}};this._dispatchEventFromSandbox(fr,Bn)}),gn.addEventListener("input",Bn=>{var Wn;const fr=On(!0);Ft.setValue(Dt,{value:fr}),Bn.preventDefault(),(Wn=this.linkService.eventBus)==null||Wn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Dt,name:"Keystroke",value:Kn,changeEx:fr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(gn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Bn=>Bn.target.value)):gn.addEventListener("input",function(Bn){Ft.setValue(Dt,{value:On(!0)})}),this.data.combo&&this._setTextStyle(gn),this._setBackgroundColor(gn),this._setDefaultPropertiesFromJS(gn),this.container.append(gn),this.container}}class vt extends at{constructor(Ft){const{data:Dt,elements:Kt}=Ft;super(Ft,{isRenderable:at._hasPopupData(Dt)}),this.elements=Kt}render(){this.container.classList.add("popupAnnotation");const Ft=new St({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Dt=[];for(const Kt of this.elements)Kt.popup=Ft,Dt.push(Kt.data.id),Kt.addHighlightArea();return this.container.setAttribute("aria-controls",Dt.map(Kt=>`${j.AnnotationPrefix}${Kt}`).join(",")),this.container}}class St{constructor({container:Ft,color:Dt,elements:Kt,titleObj:gn,modificationDate:yn,contentsObj:Tn,richText:On,parent:Kn,rect:Un,parentRect:Bn,open:fr}){fn(this,Dn);fn(this,mn,null);fn(this,vn,Qt(this,Dn,ou).bind(this));fn(this,xn,Qt(this,Dn,Jo).bind(this));fn(this,En,Qt(this,Dn,Yo).bind(this));fn(this,An,Qt(this,Dn,so).bind(this));fn(this,kn,null);fn(this,ln,null);fn(this,un,null);fn(this,Mt,null);fn(this,Bt,null);fn(this,nn,null);fn(this,dn,!1);fn(this,Sn,null);fn(this,_n,null);fn(this,Cn,null);fn(this,tn,null);fn(this,Ln,!1);var Jn;pn(this,ln,Ft),pn(this,tn,gn),pn(this,un,Tn),pn(this,Cn,On),pn(this,Bt,Kn),pn(this,kn,Dt),pn(this,_n,Un),pn(this,nn,Bn),pn(this,Mt,Kt);const Wn=$.PDFDateString.toDateObject(yn);Wn&&pn(this,mn,Kn.l10n.get("annotation_date_string",{date:Wn.toLocaleDateString(),time:Wn.toLocaleTimeString()})),this.trigger=Kt.flatMap(ar=>ar.getElementsToTriggerPopup());for(const ar of this.trigger)ar.addEventListener("click",yt(this,An)),ar.addEventListener("mouseenter",yt(this,En)),ar.addEventListener("mouseleave",yt(this,xn)),ar.classList.add("popupTriggerArea");for(const ar of Kt)(Jn=ar.container)==null||Jn.addEventListener("keydown",yt(this,vn));yt(this,ln).hidden=!0,fr&&Qt(this,Dn,so).call(this)}render(){if(yt(this,Sn))return;const{page:{view:Ft},viewport:{rawDims:{pageWidth:Dt,pageHeight:Kt,pageX:gn,pageY:yn}}}=yt(this,Bt),Tn=pn(this,Sn,document.createElement("div"));if(Tn.className="popup",yt(this,kn)){const Gr=Tn.style.outlineColor=j.Util.makeHexColor(...yt(this,kn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Tn.style.backgroundColor=`color-mix(in srgb, ${Gr} 30%, white)`:Tn.style.backgroundColor=j.Util.makeHexColor(...yt(this,kn).map(hs=>Math.floor(.7*(255-hs)+hs)))}const On=document.createElement("span");On.className="header";const Kn=document.createElement("h1");if(On.append(Kn),{dir:Kn.dir,str:Kn.textContent}=yt(this,tn),Tn.append(On),yt(this,mn)){const Gr=document.createElement("span");Gr.classList.add("popupDate"),yt(this,mn).then(us=>{Gr.textContent=us}),On.append(Gr)}const Un=yt(this,un),Bn=yt(this,Cn);if(Bn!=null&&Bn.str&&(!(Un!=null&&Un.str)||Un.str===Bn.str))nt.XfaLayer.render({xfaHtml:Bn.html,intent:"richText",div:Tn}),Tn.lastChild.classList.add("richText","popupContent");else{const Gr=this._formatContents(Un);Tn.append(Gr)}let fr=!!yt(this,nn),Wn=fr?yt(this,nn):yt(this,_n);for(const Gr of yt(this,Mt))if(!Wn||j.Util.intersect(Gr.data.rect,Wn)!==null){Wn=Gr.data.rect,fr=!0;break}const Jn=j.Util.normalizeRect([Wn[0],Ft[3]-Wn[1]+Ft[1],Wn[2],Ft[3]-Wn[3]+Ft[1]]),vr=fr?Wn[2]-Wn[0]+5:0,Ar=Jn[0]+vr,Fr=Jn[1],{style:Qr}=yt(this,ln);Qr.left=`${100*(Ar-gn)/Dt}%`,Qr.top=`${100*(Fr-yn)/Kt}%`,yt(this,ln).append(Tn)}_formatContents({str:Ft,dir:Dt}){const Kt=document.createElement("p");Kt.classList.add("popupContent"),Kt.dir=Dt;const gn=Ft.split(/(?:\r\n?|\n)/);for(let yn=0,Tn=gn.length;yn<Tn;++yn){const On=gn[yn];Kt.append(document.createTextNode(On)),yn<Tn-1&&Kt.append(document.createElement("br"))}return Kt}forceHide(){pn(this,Ln,this.isVisible),yt(this,Ln)&&(yt(this,ln).hidden=!0)}maybeShow(){yt(this,Ln)&&(pn(this,Ln,!1),yt(this,ln).hidden=!1)}get isVisible(){return yt(this,ln).hidden===!1}}mn=new WeakMap,vn=new WeakMap,xn=new WeakMap,En=new WeakMap,An=new WeakMap,kn=new WeakMap,ln=new WeakMap,un=new WeakMap,Mt=new WeakMap,Bt=new WeakMap,nn=new WeakMap,dn=new WeakMap,Sn=new WeakMap,_n=new WeakMap,Cn=new WeakMap,tn=new WeakMap,Ln=new WeakMap,Dn=new WeakSet,ou=function(Ft){Ft.altKey||Ft.shiftKey||Ft.ctrlKey||Ft.metaKey||(Ft.key==="Enter"||Ft.key==="Escape"&&yt(this,dn))&&Qt(this,Dn,so).call(this)},so=function(){pn(this,dn,!yt(this,dn)),yt(this,dn)?(Qt(this,Dn,Yo).call(this),yt(this,ln).addEventListener("click",yt(this,An)),yt(this,ln).addEventListener("keydown",yt(this,vn))):(Qt(this,Dn,Jo).call(this),yt(this,ln).removeEventListener("click",yt(this,An)),yt(this,ln).removeEventListener("keydown",yt(this,vn)))},Yo=function(){yt(this,Sn)||this.render(),this.isVisible?yt(this,dn)&&yt(this,ln).classList.add("focused"):(yt(this,ln).hidden=!1,yt(this,ln).style.zIndex=parseInt(yt(this,ln).style.zIndex)+1e3)},Jo=function(){yt(this,ln).classList.remove("focused"),!(yt(this,dn)||!this.isVisible)&&(yt(this,ln).hidden=!0,yt(this,ln).style.zIndex=parseInt(yt(this,ln).style.zIndex)-1e3)};class Tt extends at{constructor(Ft){super(Ft,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Ft.data.textContent,this.textPosition=Ft.data.textPosition,this.annotationEditorType=j.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Ft=document.createElement("div");Ft.classList.add("annotationTextContent"),Ft.setAttribute("role","comment");for(const Dt of this.textContent){const Kt=document.createElement("span");Kt.textContent=Dt,Ft.append(Kt)}this.container.append(Ft)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}g.FreeTextAnnotationElement=Tt;class bt extends at{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0});fn(this,Zn,null)}render(){this.container.classList.add("lineAnnotation");const Dt=this.data,{width:Kt,height:gn}=ot(Dt.rect),yn=this.svgFactory.create(Kt,gn,!0),Tn=pn(this,Zn,this.svgFactory.createElement("svg:line"));return Tn.setAttribute("x1",Dt.rect[2]-Dt.lineCoordinates[0]),Tn.setAttribute("y1",Dt.rect[3]-Dt.lineCoordinates[1]),Tn.setAttribute("x2",Dt.rect[2]-Dt.lineCoordinates[2]),Tn.setAttribute("y2",Dt.rect[3]-Dt.lineCoordinates[3]),Tn.setAttribute("stroke-width",Dt.borderStyle.width||1),Tn.setAttribute("stroke","transparent"),Tn.setAttribute("fill","transparent"),yn.append(Tn),this.container.append(yn),!Dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return yt(this,Zn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zn=new WeakMap;class At extends at{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0});fn(this,mr,null)}render(){this.container.classList.add("squareAnnotation");const Dt=this.data,{width:Kt,height:gn}=ot(Dt.rect),yn=this.svgFactory.create(Kt,gn,!0),Tn=Dt.borderStyle.width,On=pn(this,mr,this.svgFactory.createElement("svg:rect"));return On.setAttribute("x",Tn/2),On.setAttribute("y",Tn/2),On.setAttribute("width",Kt-Tn),On.setAttribute("height",gn-Tn),On.setAttribute("stroke-width",Tn||1),On.setAttribute("stroke","transparent"),On.setAttribute("fill","transparent"),yn.append(On),this.container.append(yn),!Dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return yt(this,mr)}addHighlightArea(){this.container.classList.add("highlightArea")}}mr=new WeakMap;class Pt extends at{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0});fn(this,Rr,null)}render(){this.container.classList.add("circleAnnotation");const Dt=this.data,{width:Kt,height:gn}=ot(Dt.rect),yn=this.svgFactory.create(Kt,gn,!0),Tn=Dt.borderStyle.width,On=pn(this,Rr,this.svgFactory.createElement("svg:ellipse"));return On.setAttribute("cx",Kt/2),On.setAttribute("cy",gn/2),On.setAttribute("rx",Kt/2-Tn/2),On.setAttribute("ry",gn/2-Tn/2),On.setAttribute("stroke-width",Tn||1),On.setAttribute("stroke","transparent"),On.setAttribute("fill","transparent"),yn.append(On),this.container.append(yn),!Dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return yt(this,Rr)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rr=new WeakMap;class en extends at{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0});fn(this,wn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Dt=this.data,{width:Kt,height:gn}=ot(Dt.rect),yn=this.svgFactory.create(Kt,gn,!0);let Tn=[];for(const Kn of Dt.vertices){const Un=Kn.x-Dt.rect[0],Bn=Dt.rect[3]-Kn.y;Tn.push(Un+","+Bn)}Tn=Tn.join(" ");const On=pn(this,wn,this.svgFactory.createElement(this.svgElementName));return On.setAttribute("points",Tn),On.setAttribute("stroke-width",Dt.borderStyle.width||1),On.setAttribute("stroke","transparent"),On.setAttribute("fill","transparent"),yn.append(On),this.container.append(yn),!Dt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return yt(this,wn)}addHighlightArea(){this.container.classList.add("highlightArea")}}wn=new WeakMap;class Wt extends en{constructor(Ft){super(Ft),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Jt extends at{constructor(Ft){super(Ft,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class zt extends at{constructor(Dt){super(Dt,{isRenderable:!0,ignoreBorder:!0});fn(this,rn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=j.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Dt=this.data,{width:Kt,height:gn}=ot(Dt.rect),yn=this.svgFactory.create(Kt,gn,!0);for(const Tn of Dt.inkLists){let On=[];for(const Un of Tn){const Bn=Un.x-Dt.rect[0],fr=Dt.rect[3]-Un.y;On.push(`${Bn},${fr}`)}On=On.join(" ");const Kn=this.svgFactory.createElement(this.svgElementName);yt(this,rn).push(Kn),Kn.setAttribute("points",On),Kn.setAttribute("stroke-width",Dt.borderStyle.width||1),Kn.setAttribute("stroke","transparent"),Kn.setAttribute("fill","transparent"),!Dt.popupRef&&this.hasPopupData&&this._createPopup(),yn.append(Kn)}return this.container.append(yn),this.container}getElementsToTriggerPopup(){return yt(this,rn)}addHighlightArea(){this.container.classList.add("highlightArea")}}rn=new WeakMap,g.InkAnnotationElement=zt;class Ht extends at{constructor(Ft){super(Ft,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Rt extends at{constructor(Ft){super(Ft,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class jt extends at{constructor(Ft){super(Ft,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Zt extends at{constructor(Ft){super(Ft,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ot extends at{constructor(Ft){super(Ft,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}g.StampAnnotationElement=Ot;class wt extends at{constructor(Dt){var yn;super(Dt,{isRenderable:!0});fn(this,zn);fn(this,on,null);const{filename:Kt,content:gn}=this.data.file;this.filename=(0,$.getFilenameFromUrl)(Kt,!0),this.content=gn,(yn=this.linkService.eventBus)==null||yn.dispatch("fileattachmentannotation",{source:this,filename:Kt,content:gn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Dt,data:Kt}=this;let gn;Kt.hasAppearance||Kt.fillAlpha===0?gn=document.createElement("div"):(gn=document.createElement("img"),gn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Kt.name)?"paperclip":"pushpin"}.svg`,Kt.fillAlpha&&Kt.fillAlpha<1&&(gn.style=`filter: opacity(${Math.round(Kt.fillAlpha*100)}%);`)),gn.addEventListener("dblclick",Qt(this,zn,Zo).bind(this)),pn(this,on,gn);const{isMac:yn}=j.FeatureTest.platform;return Dt.addEventListener("keydown",Tn=>{Tn.key==="Enter"&&(yn?Tn.metaKey:Tn.ctrlKey)&&Qt(this,zn,Zo).call(this)}),!Kt.popupRef&&this.hasPopupData?this._createPopup():gn.classList.add("popupTriggerArea"),Dt.append(gn),Dt}getElementsToTriggerPopup(){return yt(this,on)}addHighlightArea(){this.container.classList.add("highlightArea")}}on=new WeakMap,zn=new WeakSet,Zo=function(){var Dt;(Dt=this.downloadManager)==null||Dt.openOrDownloadData(this.container,this.content,this.filename)};class Ct{constructor({div:Ft,accessibilityManager:Dt,annotationCanvasMap:Kt,l10n:gn,page:yn,viewport:Tn}){fn(this,In);fn(this,nr,null);fn(this,Vt,null);fn(this,bn,new Map);this.div=Ft,pn(this,nr,Dt),pn(this,Vt,Kt),this.l10n=gn,this.page=yn,this.viewport=Tn,this.zIndex=0,this.l10n||(this.l10n=tt.NullL10n)}async render(Ft){const{annotations:Dt}=Ft,Kt=this.div;(0,$.setLayerDimensions)(Kt,this.viewport);const gn=new Map,yn={data:null,layer:Kt,linkService:Ft.linkService,downloadManager:Ft.downloadManager,imageResourcesPath:Ft.imageResourcesPath||"",renderForms:Ft.renderForms!==!1,svgFactory:new $.DOMSVGFactory,annotationStorage:Ft.annotationStorage||new _e.AnnotationStorage,enableScripting:Ft.enableScripting===!0,hasJSActions:Ft.hasJSActions,fieldObjects:Ft.fieldObjects,parent:this,elements:null};for(const Tn of Dt){if(Tn.noHTML)continue;const On=Tn.annotationType===j.AnnotationType.POPUP;if(On){const Bn=gn.get(Tn.id);if(!Bn)continue;yn.elements=Bn}else{const{width:Bn,height:fr}=ot(Tn.rect);if(Bn<=0||fr<=0)continue}yn.data=Tn;const Kn=lt.create(yn);if(!Kn.isRenderable)continue;if(!On&&Tn.popupRef){const Bn=gn.get(Tn.popupRef);Bn?Bn.push(Kn):gn.set(Tn.popupRef,[Kn])}Kn.annotationEditorType>0&&yt(this,bn).set(Kn.data.id,Kn);const Un=Kn.render();Tn.hidden&&(Un.style.visibility="hidden"),Qt(this,In,au).call(this,Un,Tn.id)}Qt(this,In,Qo).call(this),await this.l10n.translate(Kt)}update({viewport:Ft}){const Dt=this.div;this.viewport=Ft,(0,$.setLayerDimensions)(Dt,{rotation:Ft.rotation}),Qt(this,In,Qo).call(this),Dt.hidden=!1}getEditableAnnotations(){return Array.from(yt(this,bn).values())}getEditableAnnotation(Ft){return yt(this,bn).get(Ft)}}nr=new WeakMap,Vt=new WeakMap,bn=new WeakMap,In=new WeakSet,au=function(Ft,Dt){var gn;const Kt=Ft.firstChild||Ft;Kt.id=`${j.AnnotationPrefix}${Dt}`,this.div.append(Ft),(gn=yt(this,nr))==null||gn.moveElementInDOM(this.div,Ft,Kt,!1)},Qo=function(){if(!yt(this,Vt))return;const Ft=this.div;for(const[Dt,Kt]of yt(this,Vt)){const gn=Ft.querySelector(`[data-annotation-id="${Dt}"]`);if(!gn)continue;const{firstChild:yn}=gn;yn?yn.nodeName==="CANVAS"?yn.replaceWith(Kt):yn.before(Kt):gn.append(Kt)}yt(this,Vt).clear()},g.AnnotationLayer=Ct},(b,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ColorConverters=void 0;function _(_e){return Math.floor(Math.max(0,Math.min(1,_e))*255).toString(16).padStart(2,"0")}function j(_e){return Math.max(0,Math.min(255,255*_e))}class ${static CMYK_G([et,tt,nt,rt]){return["G",1-Math.min(1,.3*et+.59*nt+.11*tt+rt)]}static G_CMYK([et]){return["CMYK",0,0,0,1-et]}static G_RGB([et]){return["RGB",et,et,et]}static G_rgb([et]){return et=j(et),[et,et,et]}static G_HTML([et]){const tt=_(et);return`#${tt}${tt}${tt}`}static RGB_G([et,tt,nt]){return["G",.3*et+.59*tt+.11*nt]}static RGB_rgb(et){return et.map(j)}static RGB_HTML(et){return`#${et.map(_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([et,tt,nt,rt]){return["RGB",1-Math.min(1,et+rt),1-Math.min(1,nt+rt),1-Math.min(1,tt+rt)]}static CMYK_rgb([et,tt,nt,rt]){return[j(1-Math.min(1,et+rt)),j(1-Math.min(1,nt+rt)),j(1-Math.min(1,tt+rt))]}static CMYK_HTML(et){const tt=this.CMYK_RGB(et).slice(1);return this.RGB_HTML(tt)}static RGB_CMYK([et,tt,nt]){const rt=1-et,it=1-tt,st=1-nt,ot=Math.min(rt,it,st);return["CMYK",rt,it,st,ot]}}g.ColorConverters=$},(b,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NullL10n=void 0,g.getL10nFallback=j;const _={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};_.print_progress_percent="{{progress}}%";function j(et,tt){switch(et){case"find_match_count":et=`find_match_count[${tt.total===1?"one":"other"}]`;break;case"find_match_count_limit":et=`find_match_count_limit[${tt.limit===1?"one":"other"}]`;break}return _[et]||""}function $(et,tt){return tt?et.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(nt,rt)=>rt in tt?tt[rt]:"{{"+rt+"}}"):et}const _e={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(et,tt=null,nt=j(et,tt)){return $(nt,tt)},async translate(et){}};g.NullL10n=_e},(b,g,_)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaLayer=void 0;var j=_(25);class ${static setupStorage(et,tt,nt,rt,it){const st=rt.getValue(tt,{value:null});switch(nt.name){case"textarea":if(st.value!==null&&(et.textContent=st.value),it==="print")break;et.addEventListener("input",ot=>{rt.setValue(tt,{value:ot.target.value})});break;case"input":if(nt.attributes.type==="radio"||nt.attributes.type==="checkbox"){if(st.value===nt.attributes.xfaOn?et.setAttribute("checked",!0):st.value===nt.attributes.xfaOff&&et.removeAttribute("checked"),it==="print")break;et.addEventListener("change",ot=>{rt.setValue(tt,{value:ot.target.checked?ot.target.getAttribute("xfaOn"):ot.target.getAttribute("xfaOff")})})}else{if(st.value!==null&&et.setAttribute("value",st.value),it==="print")break;et.addEventListener("input",ot=>{rt.setValue(tt,{value:ot.target.value})})}break;case"select":if(st.value!==null){et.setAttribute("value",st.value);for(const ot of nt.children)ot.attributes.value===st.value?ot.attributes.selected=!0:ot.attributes.hasOwnProperty("selected")&&delete ot.attributes.selected}et.addEventListener("input",ot=>{const lt=ot.target.options,at=lt.selectedIndex===-1?"":lt[lt.selectedIndex].value;rt.setValue(tt,{value:at})});break}}static setAttributes({html:et,element:tt,storage:nt=null,intent:rt,linkService:it}){const{attributes:st}=tt,ot=et instanceof HTMLAnchorElement;st.type==="radio"&&(st.name=`${st.name}-${rt}`);for(const[lt,at]of Object.entries(st))if(at!=null)switch(lt){case"class":at.length&&et.setAttribute(lt,at.join(" "));break;case"dataId":break;case"id":et.setAttribute("data-element-id",at);break;case"style":Object.assign(et.style,at);break;case"textContent":et.textContent=at;break;default:(!ot||lt!=="href"&&lt!=="newWindow")&&et.setAttribute(lt,at)}ot&&it.addLinkAttributes(et,st.href,st.newWindow),nt&&st.dataId&&this.setupStorage(et,st.dataId,tt,nt)}static render(et){var ut;const tt=et.annotationStorage,nt=et.linkService,rt=et.xfaHtml,it=et.intent||"display",st=document.createElement(rt.name);rt.attributes&&this.setAttributes({html:st,element:rt,intent:it,linkService:nt});const ot=[[rt,-1,st]],lt=et.div;if(lt.append(st),et.viewport){const dt=`matrix(${et.viewport.transform.join(",")})`;lt.style.transform=dt}it!=="richText"&&lt.setAttribute("class","xfaLayer xfaFont");const at=[];for(;ot.length>0;){const[dt,ct,ht]=ot.at(-1);if(ct+1===dt.children.length){ot.pop();continue}const pt=dt.children[++ot.at(-1)[1]];if(pt===null)continue;const{name:mt}=pt;if(mt==="#text"){const gt=document.createTextNode(pt.value);at.push(gt),ht.append(gt);continue}const ft=(ut=pt==null?void 0:pt.attributes)!=null&&ut.xmlns?document.createElementNS(pt.attributes.xmlns,mt):document.createElement(mt);if(ht.append(ft),pt.attributes&&this.setAttributes({html:ft,element:pt,storage:tt,intent:it,linkService:nt}),pt.children&&pt.children.length>0)ot.push([pt,-1,ft]);else if(pt.value){const gt=document.createTextNode(pt.value);j.XfaText.shouldBuildText(mt)&&at.push(gt),ft.append(gt)}}for(const dt of lt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))dt.setAttribute("readOnly",!0);return{textDivs:at}}static update(et){const tt=`matrix(${et.viewport.transform.join(",")})`;et.div.style.transform=tt,et.div.hidden=!1}}g.XfaLayer=$},(b,g,_)=>{var rt,it,st,ot,lt,at,ut,dt,ct,ht,pt,mt,ft,gt,xt,lu,cu,uu,du,na,hu,ga,fu,pu,mu,gu,yu,ys,xa,oo,ao,Os,ba,lo,Lt,vu,_a,xu,Su,$a,co,Ds;Object.defineProperty(g,"__esModule",{value:!0}),g.InkEditor=void 0;var j=_(1),$=_(4),_e=_(29),et=_(6),tt=_(5);const kn=class kn extends $.AnnotationEditor{constructor(Mt){super({...Mt,name:"inkEditor"});fn(this,xt);fn(this,rt,0);fn(this,it,0);fn(this,st,this.canvasPointermove.bind(this));fn(this,ot,this.canvasPointerleave.bind(this));fn(this,lt,this.canvasPointerup.bind(this));fn(this,at,this.canvasPointerdown.bind(this));fn(this,ut,new Path2D);fn(this,dt,!1);fn(this,ct,!1);fn(this,ht,!1);fn(this,pt,null);fn(this,mt,0);fn(this,ft,0);fn(this,gt,null);this.color=Mt.color||null,this.thickness=Mt.thickness||null,this.opacity=Mt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Mt){$.AnnotationEditor.initialize(Mt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Mt,Bt){switch(Mt){case j.AnnotationEditorParamsType.INK_THICKNESS:kn._defaultThickness=Bt;break;case j.AnnotationEditorParamsType.INK_COLOR:kn._defaultColor=Bt;break;case j.AnnotationEditorParamsType.INK_OPACITY:kn._defaultOpacity=Bt/100;break}}updateParams(Mt,Bt){switch(Mt){case j.AnnotationEditorParamsType.INK_THICKNESS:Qt(this,xt,lu).call(this,Bt);break;case j.AnnotationEditorParamsType.INK_COLOR:Qt(this,xt,cu).call(this,Bt);break;case j.AnnotationEditorParamsType.INK_OPACITY:Qt(this,xt,uu).call(this,Bt);break}}static get defaultPropertiesToUpdate(){return[[j.AnnotationEditorParamsType.INK_THICKNESS,kn._defaultThickness],[j.AnnotationEditorParamsType.INK_COLOR,kn._defaultColor||$.AnnotationEditor._defaultLineColor],[j.AnnotationEditorParamsType.INK_OPACITY,Math.round(kn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[j.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||kn._defaultThickness],[j.AnnotationEditorParamsType.INK_COLOR,this.color||kn._defaultColor||$.AnnotationEditor._defaultLineColor],[j.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??kn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Qt(this,xt,oo).call(this),Qt(this,xt,ao).call(this)),this.isAttachedToDOM||(this.parent.add(this),Qt(this,xt,Os).call(this)),Qt(this,xt,Ds).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,yt(this,pt).disconnect(),pn(this,pt,null),super.remove())}setParent(Mt){!this.parent&&Mt?this._uiManager.removeShouldRescale(this):this.parent&&Mt===null&&this._uiManager.addShouldRescale(this),super.setParent(Mt)}onScaleChanging(){const[Mt,Bt]=this.parentDimensions,nn=this.width*Mt,dn=this.height*Bt;this.setDimensions(nn,dn)}enableEditMode(){yt(this,dt)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",yt(this,at)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",yt(this,at)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){yt(this,dt)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pn(this,dt,!0),this.div.classList.add("disabled"),Qt(this,xt,Ds).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Mt){this._focusEventsAllowed&&(super.focusin(Mt),this.enableEditMode())}canvasPointerdown(Mt){Mt.button!==0||!this.isInEditMode()||yt(this,dt)||(this.setInForeground(),Mt.preventDefault(),Mt.type!=="mouse"&&this.div.focus(),Qt(this,xt,hu).call(this,Mt.offsetX,Mt.offsetY))}canvasPointermove(Mt){Mt.preventDefault(),Qt(this,xt,ga).call(this,Mt.offsetX,Mt.offsetY)}canvasPointerup(Mt){Mt.preventDefault(),Qt(this,xt,xa).call(this,Mt)}canvasPointerleave(Mt){Qt(this,xt,xa).call(this,Mt)}get isResizable(){return!this.isEmpty()&&yt(this,dt)}render(){if(this.div)return this.div;let Mt,Bt;this.width&&(Mt=this.x,Bt=this.y),super.render(),$.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Cn=>{var tn;return(tn=this.div)==null?void 0:tn.setAttribute("aria-label",Cn)});const[nn,dn,Sn,_n]=Qt(this,xt,du).call(this);if(this.setAt(nn,dn,0,0),this.setDims(Sn,_n),Qt(this,xt,oo).call(this),this.width){const[Cn,tn]=this.parentDimensions;this.setAspectRatio(this.width*Cn,this.height*tn),this.setAt(Mt*Cn,Bt*tn,this.width*Cn,this.height*tn),pn(this,ht,!0),Qt(this,xt,Os).call(this),this.setDims(this.width*Cn,this.height*tn),Qt(this,xt,ys).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Qt(this,xt,ao).call(this),this.div}setDimensions(Mt,Bt){const nn=Math.round(Mt),dn=Math.round(Bt);if(yt(this,mt)===nn&&yt(this,ft)===dn)return;pn(this,mt,nn),pn(this,ft,dn),this.canvas.style.visibility="hidden";const[Sn,_n]=this.parentDimensions;this.width=Mt/Sn,this.height=Bt/_n,this.fixAndSetPosition(),yt(this,dt)&&Qt(this,xt,ba).call(this,Mt,Bt),Qt(this,xt,Os).call(this),Qt(this,xt,ys).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Mt,Bt,nn){var Zn,mr,Rr;if(Mt instanceof _e.InkAnnotationElement)return null;const dn=super.deserialize(Mt,Bt,nn);dn.thickness=Mt.thickness,dn.color=j.Util.makeHexColor(...Mt.color),dn.opacity=Mt.opacity;const[Sn,_n]=dn.pageDimensions,Cn=dn.width*Sn,tn=dn.height*_n,Ln=dn.parentScale,Dn=Mt.thickness/2;pn(dn,dt,!0),pn(dn,mt,Math.round(Cn)),pn(dn,ft,Math.round(tn));const{paths:ur,rect:rr,rotation:br}=Mt;for(let{bezier:wn}of ur){wn=Qt(Zn=kn,Lt,xu).call(Zn,wn,rr,br);const rn=[];dn.paths.push(rn);let on=Ln*(wn[0]-Dn),zn=Ln*(wn[1]-Dn);for(let nr=2,Vt=wn.length;nr<Vt;nr+=6){const bn=Ln*(wn[nr]-Dn),In=Ln*(wn[nr+1]-Dn),qn=Ln*(wn[nr+2]-Dn),Yn=Ln*(wn[nr+3]-Dn),$n=Ln*(wn[nr+4]-Dn),Ft=Ln*(wn[nr+5]-Dn);rn.push([[on,zn],[bn,In],[qn,Yn],[$n,Ft]]),on=$n,zn=Ft}const Gn=Qt(this,Lt,vu).call(this,rn);dn.bezierPath2D.push(Gn)}const Hn=Qt(mr=dn,xt,$a).call(mr);return pn(dn,it,Math.max($.AnnotationEditor.MIN_SIZE,Hn[2]-Hn[0])),pn(dn,rt,Math.max($.AnnotationEditor.MIN_SIZE,Hn[3]-Hn[1])),Qt(Rr=dn,xt,ba).call(Rr,Cn,tn),dn}serialize(){if(this.isEmpty())return null;const Mt=this.getRect(0,0),Bt=$.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:j.AnnotationEditorType.INK,color:Bt,thickness:this.thickness,opacity:this.opacity,paths:Qt(this,xt,Su).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Mt),pageIndex:this.pageIndex,rect:Mt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};rt=new WeakMap,it=new WeakMap,st=new WeakMap,ot=new WeakMap,lt=new WeakMap,at=new WeakMap,ut=new WeakMap,dt=new WeakMap,ct=new WeakMap,ht=new WeakMap,pt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,xt=new WeakSet,lu=function(Mt){const Bt=this.thickness;this.addCommands({cmd:()=>{this.thickness=Mt,Qt(this,xt,Ds).call(this)},undo:()=>{this.thickness=Bt,Qt(this,xt,Ds).call(this)},mustExec:!0,type:j.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},cu=function(Mt){const Bt=this.color;this.addCommands({cmd:()=>{this.color=Mt,Qt(this,xt,ys).call(this)},undo:()=>{this.color=Bt,Qt(this,xt,ys).call(this)},mustExec:!0,type:j.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},uu=function(Mt){Mt/=100;const Bt=this.opacity;this.addCommands({cmd:()=>{this.opacity=Mt,Qt(this,xt,ys).call(this)},undo:()=>{this.opacity=Bt,Qt(this,xt,ys).call(this)},mustExec:!0,type:j.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},du=function(){const{parentRotation:Mt,parentDimensions:[Bt,nn]}=this;switch(Mt){case 90:return[0,nn,nn,Bt];case 180:return[Bt,nn,Bt,nn];case 270:return[Bt,0,nn,Bt];default:return[0,0,Bt,nn]}},na=function(){const{ctx:Mt,color:Bt,opacity:nn,thickness:dn,parentScale:Sn,scaleFactor:_n}=this;Mt.lineWidth=dn*Sn/_n,Mt.lineCap="round",Mt.lineJoin="round",Mt.miterLimit=10,Mt.strokeStyle=`${Bt}${(0,tt.opacityToHex)(nn)}`},hu=function(Mt,Bt){this.canvas.addEventListener("contextmenu",et.noContextMenu),this.canvas.addEventListener("pointerleave",yt(this,ot)),this.canvas.addEventListener("pointermove",yt(this,st)),this.canvas.addEventListener("pointerup",yt(this,lt)),this.canvas.removeEventListener("pointerdown",yt(this,at)),this.isEditing=!0,yt(this,ht)||(pn(this,ht,!0),Qt(this,xt,Os).call(this),this.thickness||(this.thickness=kn._defaultThickness),this.color||(this.color=kn._defaultColor||$.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=kn._defaultOpacity)),this.currentPath.push([Mt,Bt]),pn(this,ct,!1),Qt(this,xt,na).call(this),pn(this,gt,()=>{Qt(this,xt,mu).call(this),yt(this,gt)&&window.requestAnimationFrame(yt(this,gt))}),window.requestAnimationFrame(yt(this,gt))},ga=function(Mt,Bt){const[nn,dn]=this.currentPath.at(-1);if(this.currentPath.length>1&&Mt===nn&&Bt===dn)return;const Sn=this.currentPath;let _n=yt(this,ut);if(Sn.push([Mt,Bt]),pn(this,ct,!0),Sn.length<=2){_n.moveTo(...Sn[0]),_n.lineTo(Mt,Bt);return}Sn.length===3&&(pn(this,ut,_n=new Path2D),_n.moveTo(...Sn[0])),Qt(this,xt,gu).call(this,_n,...Sn.at(-3),...Sn.at(-2),Mt,Bt)},fu=function(){if(this.currentPath.length===0)return;const Mt=this.currentPath.at(-1);yt(this,ut).lineTo(...Mt)},pu=function(Mt,Bt){pn(this,gt,null),Mt=Math.min(Math.max(Mt,0),this.canvas.width),Bt=Math.min(Math.max(Bt,0),this.canvas.height),Qt(this,xt,ga).call(this,Mt,Bt),Qt(this,xt,fu).call(this);let nn;if(this.currentPath.length!==1)nn=Qt(this,xt,yu).call(this);else{const tn=[Mt,Bt];nn=[[tn,tn.slice(),tn.slice(),tn]]}const dn=yt(this,ut),Sn=this.currentPath;this.currentPath=[],pn(this,ut,new Path2D);const _n=()=>{this.allRawPaths.push(Sn),this.paths.push(nn),this.bezierPath2D.push(dn),this.rebuild()},Cn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Qt(this,xt,oo).call(this),Qt(this,xt,ao).call(this)),Qt(this,xt,Ds).call(this))};this.addCommands({cmd:_n,undo:Cn,mustExec:!0})},mu=function(){if(!yt(this,ct))return;pn(this,ct,!1);const Mt=Math.ceil(this.thickness*this.parentScale),Bt=this.currentPath.slice(-3),nn=Bt.map(_n=>_n[0]),dn=Bt.map(_n=>_n[1]);Math.min(...nn)-Mt,Math.max(...nn)+Mt,Math.min(...dn)-Mt,Math.max(...dn)+Mt;const{ctx:Sn}=this;Sn.save(),Sn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const _n of this.bezierPath2D)Sn.stroke(_n);Sn.stroke(yt(this,ut)),Sn.restore()},gu=function(Mt,Bt,nn,dn,Sn,_n,Cn){const tn=(Bt+dn)/2,Ln=(nn+Sn)/2,Dn=(dn+_n)/2,ur=(Sn+Cn)/2;Mt.bezierCurveTo(tn+2*(dn-tn)/3,Ln+2*(Sn-Ln)/3,Dn+2*(dn-Dn)/3,ur+2*(Sn-ur)/3,Dn,ur)},yu=function(){const Mt=this.currentPath;if(Mt.length<=2)return[[Mt[0],Mt[0],Mt.at(-1),Mt.at(-1)]];const Bt=[];let nn,[dn,Sn]=Mt[0];for(nn=1;nn<Mt.length-2;nn++){const[rr,br]=Mt[nn],[Hn,Zn]=Mt[nn+1],mr=(rr+Hn)/2,Rr=(br+Zn)/2,wn=[dn+2*(rr-dn)/3,Sn+2*(br-Sn)/3],rn=[mr+2*(rr-mr)/3,Rr+2*(br-Rr)/3];Bt.push([[dn,Sn],wn,rn,[mr,Rr]]),[dn,Sn]=[mr,Rr]}const[_n,Cn]=Mt[nn],[tn,Ln]=Mt[nn+1],Dn=[dn+2*(_n-dn)/3,Sn+2*(Cn-Sn)/3],ur=[tn+2*(_n-tn)/3,Ln+2*(Cn-Ln)/3];return Bt.push([[dn,Sn],Dn,ur,[tn,Ln]]),Bt},ys=function(){if(this.isEmpty()){Qt(this,xt,lo).call(this);return}Qt(this,xt,na).call(this);const{canvas:Mt,ctx:Bt}=this;Bt.setTransform(1,0,0,1,0,0),Bt.clearRect(0,0,Mt.width,Mt.height),Qt(this,xt,lo).call(this);for(const nn of this.bezierPath2D)Bt.stroke(nn)},xa=function(Mt){this.canvas.removeEventListener("pointerleave",yt(this,ot)),this.canvas.removeEventListener("pointermove",yt(this,st)),this.canvas.removeEventListener("pointerup",yt(this,lt)),this.canvas.addEventListener("pointerdown",yt(this,at)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",et.noContextMenu)},10),Qt(this,xt,pu).call(this,Mt.offsetX,Mt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},oo=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",$.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Mt=>{var Bt;return(Bt=this.canvas)==null?void 0:Bt.setAttribute("aria-label",Mt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ao=function(){pn(this,pt,new ResizeObserver(Mt=>{const Bt=Mt[0].contentRect;Bt.width&&Bt.height&&this.setDimensions(Bt.width,Bt.height)})),yt(this,pt).observe(this.div)},Os=function(){if(!yt(this,ht))return;const[Mt,Bt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Mt),this.canvas.height=Math.ceil(this.height*Bt),Qt(this,xt,lo).call(this)},ba=function(Mt,Bt){const nn=Qt(this,xt,co).call(this),dn=(Mt-nn)/yt(this,it),Sn=(Bt-nn)/yt(this,rt);this.scaleFactor=Math.min(dn,Sn)},lo=function(){const Mt=Qt(this,xt,co).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Mt,this.translationY*this.scaleFactor+Mt)},Lt=new WeakSet,vu=function(Mt){const Bt=new Path2D;for(let nn=0,dn=Mt.length;nn<dn;nn++){const[Sn,_n,Cn,tn]=Mt[nn];nn===0&&Bt.moveTo(...Sn),Bt.bezierCurveTo(_n[0],_n[1],Cn[0],Cn[1],tn[0],tn[1])}return Bt},_a=function(Mt,Bt,nn){const[dn,Sn,_n,Cn]=Bt;switch(nn){case 0:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2)Mt[tn]+=dn,Mt[tn+1]=Cn-Mt[tn+1];break;case 90:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2){const Dn=Mt[tn];Mt[tn]=Mt[tn+1]+dn,Mt[tn+1]=Dn+Sn}break;case 180:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2)Mt[tn]=_n-Mt[tn],Mt[tn+1]+=Sn;break;case 270:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2){const Dn=Mt[tn];Mt[tn]=_n-Mt[tn+1],Mt[tn+1]=Cn-Dn}break;default:throw new Error("Invalid rotation")}return Mt},xu=function(Mt,Bt,nn){const[dn,Sn,_n,Cn]=Bt;switch(nn){case 0:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2)Mt[tn]-=dn,Mt[tn+1]=Cn-Mt[tn+1];break;case 90:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2){const Dn=Mt[tn];Mt[tn]=Mt[tn+1]-Sn,Mt[tn+1]=Dn-dn}break;case 180:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2)Mt[tn]=_n-Mt[tn],Mt[tn+1]-=Sn;break;case 270:for(let tn=0,Ln=Mt.length;tn<Ln;tn+=2){const Dn=Mt[tn];Mt[tn]=Cn-Mt[tn+1],Mt[tn+1]=_n-Dn}break;default:throw new Error("Invalid rotation")}return Mt},Su=function(Mt,Bt,nn,dn){var Ln,Dn;const Sn=[],_n=this.thickness/2,Cn=Mt*Bt+_n,tn=Mt*nn+_n;for(const ur of this.paths){const rr=[],br=[];for(let Hn=0,Zn=ur.length;Hn<Zn;Hn++){const[mr,Rr,wn,rn]=ur[Hn],on=Mt*mr[0]+Cn,zn=Mt*mr[1]+tn,Gn=Mt*Rr[0]+Cn,nr=Mt*Rr[1]+tn,Vt=Mt*wn[0]+Cn,bn=Mt*wn[1]+tn,In=Mt*rn[0]+Cn,qn=Mt*rn[1]+tn;Hn===0&&(rr.push(on,zn),br.push(on,zn)),rr.push(Gn,nr,Vt,bn,In,qn),br.push(Gn,nr),Hn===Zn-1&&br.push(In,qn)}Sn.push({bezier:Qt(Ln=kn,Lt,_a).call(Ln,rr,dn,this.rotation),points:Qt(Dn=kn,Lt,_a).call(Dn,br,dn,this.rotation)})}return Sn},$a=function(){let Mt=1/0,Bt=-1/0,nn=1/0,dn=-1/0;for(const Sn of this.paths)for(const[_n,Cn,tn,Ln]of Sn){const Dn=j.Util.bezierBoundingBox(..._n,...Cn,...tn,...Ln);Mt=Math.min(Mt,Dn[0]),nn=Math.min(nn,Dn[1]),Bt=Math.max(Bt,Dn[2]),dn=Math.max(dn,Dn[3])}return[Mt,nn,Bt,dn]},co=function(){return yt(this,dt)?Math.ceil(this.thickness*this.parentScale):0},Ds=function(Mt=!1){if(this.isEmpty())return;if(!yt(this,dt)){Qt(this,xt,ys).call(this);return}const Bt=Qt(this,xt,$a).call(this),nn=Qt(this,xt,co).call(this);pn(this,it,Math.max($.AnnotationEditor.MIN_SIZE,Bt[2]-Bt[0])),pn(this,rt,Math.max($.AnnotationEditor.MIN_SIZE,Bt[3]-Bt[1]));const dn=Math.ceil(nn+yt(this,it)*this.scaleFactor),Sn=Math.ceil(nn+yt(this,rt)*this.scaleFactor),[_n,Cn]=this.parentDimensions;this.width=dn/_n,this.height=Sn/Cn,this.setAspectRatio(dn,Sn);const tn=this.translationX,Ln=this.translationY;this.translationX=-Bt[0],this.translationY=-Bt[1],Qt(this,xt,Os).call(this),Qt(this,xt,ys).call(this),pn(this,mt,dn),pn(this,ft,Sn),this.setDims(dn,Sn);const Dn=Mt?nn/this.scaleFactor/2:0;this.translate(tn-this.translationX-Dn,Ln-this.translationY-Dn)},fn(kn,Lt),$r(kn,"_defaultColor",null),$r(kn,"_defaultOpacity",1),$r(kn,"_defaultThickness",1),$r(kn,"_type","ink");let nt=kn;g.InkEditor=nt},(b,g,_)=>{var nt,rt,it,st,ot,lt,at,ut,dt,ct,ht,zs,Hs,uo,yl,bu,Eu,xl,ho,wu;Object.defineProperty(g,"__esModule",{value:!0}),g.StampEditor=void 0;var j=_(1),$=_(4),_e=_(6),et=_(29);const At=class At extends $.AnnotationEditor{constructor(Wt){super({...Wt,name:"stampEditor"});fn(this,ht);fn(this,nt,null);fn(this,rt,null);fn(this,it,null);fn(this,st,null);fn(this,ot,null);fn(this,lt,null);fn(this,at,null);fn(this,ut,null);fn(this,dt,!1);fn(this,ct,!1);pn(this,st,Wt.bitmapUrl),pn(this,ot,Wt.bitmapFile)}static initialize(Wt){$.AnnotationEditor.initialize(Wt)}static get supportedTypes(){const Wt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,j.shadow)(this,"supportedTypes",Wt.map(Jt=>`image/${Jt}`))}static get supportedTypesStr(){return(0,j.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Wt){return this.supportedTypes.includes(Wt)}static paste(Wt,Jt){Jt.pasteEditor(j.AnnotationEditorType.STAMP,{bitmapFile:Wt.getAsFile()})}remove(){var Wt,Jt;yt(this,rt)&&(pn(this,nt,null),this._uiManager.imageManager.deleteId(yt(this,rt)),(Wt=yt(this,lt))==null||Wt.remove(),pn(this,lt,null),(Jt=yt(this,at))==null||Jt.disconnect(),pn(this,at,null)),super.remove()}rebuild(){if(!this.parent){yt(this,rt)&&Qt(this,ht,uo).call(this);return}super.rebuild(),this.div!==null&&(yt(this,rt)&&Qt(this,ht,uo).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(yt(this,it)||yt(this,nt)||yt(this,st)||yt(this,ot))}get isResizable(){return!0}render(){if(this.div)return this.div;let Wt,Jt;if(this.width&&(Wt=this.x,Jt=this.y),super.render(),this.div.hidden=!0,yt(this,nt)?Qt(this,ht,yl).call(this):Qt(this,ht,uo).call(this),this.width){const[zt,Ht]=this.parentDimensions;this.setAt(Wt*zt,Jt*Ht,this.width*zt,this.height*Ht)}return this.div}static deserialize(Wt,Jt,zt){if(Wt instanceof et.StampAnnotationElement)return null;const Ht=super.deserialize(Wt,Jt,zt),{rect:Rt,bitmapUrl:jt,bitmapId:Zt,isSvg:Ot,accessibilityData:wt}=Wt;Zt&&zt.imageManager.isValidId(Zt)?pn(Ht,rt,Zt):pn(Ht,st,jt),pn(Ht,dt,Ot);const[Ct,_t]=Ht.pageDimensions;return Ht.width=(Rt[2]-Rt[0])/Ct,Ht.height=(Rt[3]-Rt[1])/_t,wt&&(Ht.altTextData=wt),Ht}serialize(Wt=!1,Jt=null){if(this.isEmpty())return null;const zt={annotationType:j.AnnotationEditorType.STAMP,bitmapId:yt(this,rt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:yt(this,dt),structTreeParentId:this._structTreeParentId};if(Wt)return zt.bitmapUrl=Qt(this,ht,ho).call(this,!0),zt.accessibilityData=this.altTextData,zt;const{decorative:Ht,altText:Rt}=this.altTextData;if(!Ht&&Rt&&(zt.accessibilityData={type:"Figure",alt:Rt}),Jt===null)return zt;Jt.stamps||(Jt.stamps=new Map);const jt=yt(this,dt)?(zt.rect[2]-zt.rect[0])*(zt.rect[3]-zt.rect[1]):null;if(!Jt.stamps.has(yt(this,rt)))Jt.stamps.set(yt(this,rt),{area:jt,serialized:zt}),zt.bitmap=Qt(this,ht,ho).call(this,!1);else if(yt(this,dt)){const Zt=Jt.stamps.get(yt(this,rt));jt>Zt.area&&(Zt.area=jt,Zt.serialized.bitmap.close(),Zt.serialized.bitmap=Qt(this,ht,ho).call(this,!1))}return zt}};nt=new WeakMap,rt=new WeakMap,it=new WeakMap,st=new WeakMap,ot=new WeakMap,lt=new WeakMap,at=new WeakMap,ut=new WeakMap,dt=new WeakMap,ct=new WeakMap,ht=new WeakSet,zs=function(Wt,Jt=!1){if(!Wt){this.remove();return}pn(this,nt,Wt.bitmap),Jt||(pn(this,rt,Wt.id),pn(this,dt,Wt.isSvg)),Qt(this,ht,yl).call(this)},Hs=function(){pn(this,it,null),this._uiManager.enableWaiting(!1),yt(this,lt)&&this.div.focus()},uo=function(){if(yt(this,rt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(yt(this,rt)).then(Jt=>Qt(this,ht,zs).call(this,Jt,!0)).finally(()=>Qt(this,ht,Hs).call(this));return}if(yt(this,st)){const Jt=yt(this,st);pn(this,st,null),this._uiManager.enableWaiting(!0),pn(this,it,this._uiManager.imageManager.getFromUrl(Jt).then(zt=>Qt(this,ht,zs).call(this,zt)).finally(()=>Qt(this,ht,Hs).call(this)));return}if(yt(this,ot)){const Jt=yt(this,ot);pn(this,ot,null),this._uiManager.enableWaiting(!0),pn(this,it,this._uiManager.imageManager.getFromFile(Jt).then(zt=>Qt(this,ht,zs).call(this,zt)).finally(()=>Qt(this,ht,Hs).call(this)));return}const Wt=document.createElement("input");Wt.type="file",Wt.accept=At.supportedTypesStr,pn(this,it,new Promise(Jt=>{Wt.addEventListener("change",async()=>{if(!Wt.files||Wt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const zt=await this._uiManager.imageManager.getFromFile(Wt.files[0]);Qt(this,ht,zs).call(this,zt)}Jt()}),Wt.addEventListener("cancel",()=>{this.remove(),Jt()})}).finally(()=>Qt(this,ht,Hs).call(this))),Wt.click()},yl=function(){const{div:Wt}=this;let{width:Jt,height:zt}=yt(this,nt);const[Ht,Rt]=this.pageDimensions,jt=.75;if(this.width)Jt=this.width*Ht,zt=this.height*Rt;else if(Jt>jt*Ht||zt>jt*Rt){const Ct=Math.min(jt*Ht/Jt,jt*Rt/zt);Jt*=Ct,zt*=Ct}const[Zt,Ot]=this.parentDimensions;this.setDims(Jt*Zt/Ht,zt*Ot/Rt),this._uiManager.enableWaiting(!1);const wt=pn(this,lt,document.createElement("canvas"));Wt.append(wt),Wt.hidden=!1,Qt(this,ht,xl).call(this,Jt,zt),Qt(this,ht,wu).call(this),yt(this,ct)||(this.parent.addUndoableEditor(this),pn(this,ct,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},bu=function(Wt,Jt){var jt;const[zt,Ht]=this.parentDimensions;this.width=Wt/zt,this.height=Jt/Ht,this.setDims(Wt,Jt),(jt=this._initialOptions)!=null&&jt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,yt(this,ut)!==null&&clearTimeout(yt(this,ut)),pn(this,ut,setTimeout(()=>{pn(this,ut,null),Qt(this,ht,xl).call(this,Wt,Jt)},200))},Eu=function(Wt,Jt){const{width:zt,height:Ht}=yt(this,nt);let Rt=zt,jt=Ht,Zt=yt(this,nt);for(;Rt>2*Wt||jt>2*Jt;){const Ot=Rt,wt=jt;Rt>2*Wt&&(Rt=Rt>=16384?Math.floor(Rt/2)-1:Math.ceil(Rt/2)),jt>2*Jt&&(jt=jt>=16384?Math.floor(jt/2)-1:Math.ceil(jt/2));const Ct=new OffscreenCanvas(Rt,jt);Ct.getContext("2d").drawImage(Zt,0,0,Ot,wt,0,0,Rt,jt),Zt=Ct.transferToImageBitmap()}return Zt},xl=function(Wt,Jt){Wt=Math.ceil(Wt),Jt=Math.ceil(Jt);const zt=yt(this,lt);if(!zt||zt.width===Wt&&zt.height===Jt)return;zt.width=Wt,zt.height=Jt;const Ht=yt(this,dt)?yt(this,nt):Qt(this,ht,Eu).call(this,Wt,Jt),Rt=zt.getContext("2d");Rt.filter=this._uiManager.hcmFilter,Rt.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,Wt,Jt)},ho=function(Wt){if(Wt){if(yt(this,dt)){const Ht=this._uiManager.imageManager.getSvgUrl(yt(this,rt));if(Ht)return Ht}const Jt=document.createElement("canvas");return{width:Jt.width,height:Jt.height}=yt(this,nt),Jt.getContext("2d").drawImage(yt(this,nt),0,0),Jt.toDataURL()}if(yt(this,dt)){const[Jt,zt]=this.pageDimensions,Ht=Math.round(this.width*Jt*_e.PixelsPerInch.PDF_TO_CSS_UNITS),Rt=Math.round(this.height*zt*_e.PixelsPerInch.PDF_TO_CSS_UNITS),jt=new OffscreenCanvas(Ht,Rt);return jt.getContext("2d").drawImage(yt(this,nt),0,0,yt(this,nt).width,yt(this,nt).height,0,0,Ht,Rt),jt.transferToImageBitmap()}return structuredClone(yt(this,nt))},wu=function(){pn(this,at,new ResizeObserver(Wt=>{const Jt=Wt[0].contentRect;Jt.width&&Jt.height&&Qt(this,ht,bu).call(this,Jt.width,Jt.height)})),yt(this,at).observe(this.div)},$r(At,"_type","stamp");let tt=At;g.StampEditor=tt}],__webpack_module_cache__={};function __w_pdfjs_require__(b){var g=__webpack_module_cache__[b];if(g!==void 0)return g.exports;var _=__webpack_module_cache__[b]={exports:{}};return __webpack_modules__[b](_,_.exports,__w_pdfjs_require__),_.exports}var __webpack_exports__={};return(()=>{var b=__webpack_exports__;Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"AbortException",{enumerable:!0,get:function(){return g.AbortException}}),Object.defineProperty(b,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _e.AnnotationEditorLayer}}),Object.defineProperty(b,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return g.AnnotationEditorParamsType}}),Object.defineProperty(b,"AnnotationEditorType",{enumerable:!0,get:function(){return g.AnnotationEditorType}}),Object.defineProperty(b,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return et.AnnotationEditorUIManager}}),Object.defineProperty(b,"AnnotationLayer",{enumerable:!0,get:function(){return tt.AnnotationLayer}}),Object.defineProperty(b,"AnnotationMode",{enumerable:!0,get:function(){return g.AnnotationMode}}),Object.defineProperty(b,"CMapCompressionType",{enumerable:!0,get:function(){return g.CMapCompressionType}}),Object.defineProperty(b,"DOMSVGFactory",{enumerable:!0,get:function(){return j.DOMSVGFactory}}),Object.defineProperty(b,"FeatureTest",{enumerable:!0,get:function(){return g.FeatureTest}}),Object.defineProperty(b,"GlobalWorkerOptions",{enumerable:!0,get:function(){return nt.GlobalWorkerOptions}}),Object.defineProperty(b,"ImageKind",{enumerable:!0,get:function(){return g.ImageKind}}),Object.defineProperty(b,"InvalidPDFException",{enumerable:!0,get:function(){return g.InvalidPDFException}}),Object.defineProperty(b,"MissingPDFException",{enumerable:!0,get:function(){return g.MissingPDFException}}),Object.defineProperty(b,"OPS",{enumerable:!0,get:function(){return g.OPS}}),Object.defineProperty(b,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _.PDFDataRangeTransport}}),Object.defineProperty(b,"PDFDateString",{enumerable:!0,get:function(){return j.PDFDateString}}),Object.defineProperty(b,"PDFWorker",{enumerable:!0,get:function(){return _.PDFWorker}}),Object.defineProperty(b,"PasswordResponses",{enumerable:!0,get:function(){return g.PasswordResponses}}),Object.defineProperty(b,"PermissionFlag",{enumerable:!0,get:function(){return g.PermissionFlag}}),Object.defineProperty(b,"PixelsPerInch",{enumerable:!0,get:function(){return j.PixelsPerInch}}),Object.defineProperty(b,"PromiseCapability",{enumerable:!0,get:function(){return g.PromiseCapability}}),Object.defineProperty(b,"RenderingCancelledException",{enumerable:!0,get:function(){return j.RenderingCancelledException}}),Object.defineProperty(b,"SVGGraphics",{enumerable:!0,get:function(){return _.SVGGraphics}}),Object.defineProperty(b,"UnexpectedResponseException",{enumerable:!0,get:function(){return g.UnexpectedResponseException}}),Object.defineProperty(b,"Util",{enumerable:!0,get:function(){return g.Util}}),Object.defineProperty(b,"VerbosityLevel",{enumerable:!0,get:function(){return g.VerbosityLevel}}),Object.defineProperty(b,"XfaLayer",{enumerable:!0,get:function(){return rt.XfaLayer}}),Object.defineProperty(b,"build",{enumerable:!0,get:function(){return _.build}}),Object.defineProperty(b,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return g.createValidAbsoluteUrl}}),Object.defineProperty(b,"getDocument",{enumerable:!0,get:function(){return _.getDocument}}),Object.defineProperty(b,"getFilenameFromUrl",{enumerable:!0,get:function(){return j.getFilenameFromUrl}}),Object.defineProperty(b,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return j.getPdfFilenameFromUrl}}),Object.defineProperty(b,"getXfaPageViewport",{enumerable:!0,get:function(){return j.getXfaPageViewport}}),Object.defineProperty(b,"isDataScheme",{enumerable:!0,get:function(){return j.isDataScheme}}),Object.defineProperty(b,"isPdfFile",{enumerable:!0,get:function(){return j.isPdfFile}}),Object.defineProperty(b,"loadScript",{enumerable:!0,get:function(){return j.loadScript}}),Object.defineProperty(b,"noContextMenu",{enumerable:!0,get:function(){return j.noContextMenu}}),Object.defineProperty(b,"normalizeUnicode",{enumerable:!0,get:function(){return g.normalizeUnicode}}),Object.defineProperty(b,"renderTextLayer",{enumerable:!0,get:function(){return $.renderTextLayer}}),Object.defineProperty(b,"setLayerDimensions",{enumerable:!0,get:function(){return j.setLayerDimensions}}),Object.defineProperty(b,"shadow",{enumerable:!0,get:function(){return g.shadow}}),Object.defineProperty(b,"updateTextLayer",{enumerable:!0,get:function(){return $.updateTextLayer}}),Object.defineProperty(b,"version",{enumerable:!0,get:function(){return _.version}});var g=__w_pdfjs_require__(1),_=__w_pdfjs_require__(2),j=__w_pdfjs_require__(6),$=__w_pdfjs_require__(26),_e=__w_pdfjs_require__(27),et=__w_pdfjs_require__(5),tt=__w_pdfjs_require__(29),nt=__w_pdfjs_require__(14),rt=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(b){var g=reactExports,_=pdfExports;function j(Et){var kt=Object.create(null);return Et&&Object.keys(Et).forEach(function($t){if($t!=="default"){var Ut=Object.getOwnPropertyDescriptor(Et,$t);Object.defineProperty(kt,$t,Ut.get?Ut:{enumerable:!0,get:function(){return Et[$t]}})}}),kt.default=Et,Object.freeze(kt)}var $,_e=j(g),et=j(_);b.AnnotationType=void 0,($=b.AnnotationType||(b.AnnotationType={}))[$.Text=1]="Text",$[$.Link=2]="Link",$[$.FreeText=3]="FreeText",$[$.Line=4]="Line",$[$.Square=5]="Square",$[$.Circle=6]="Circle",$[$.Polygon=7]="Polygon",$[$.Polyline=8]="Polyline",$[$.Highlight=9]="Highlight",$[$.Underline=10]="Underline",$[$.Squiggly=11]="Squiggly",$[$.StrikeOut=12]="StrikeOut",$[$.Stamp=13]="Stamp",$[$.Caret=14]="Caret",$[$.Ink=15]="Ink",$[$.Popup=16]="Popup",$[$.FileAttachment=17]="FileAttachment";var tt=function(Et,kt){return tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($t,Ut){$t.__proto__=Ut}||function($t,Ut){for(var qt in Ut)Object.prototype.hasOwnProperty.call(Ut,qt)&&($t[qt]=Ut[qt])},tt(Et,kt)};function nt(Et,kt){if(typeof kt!="function"&&kt!==null)throw new TypeError("Class extends value "+String(kt)+" is not a constructor or null");function $t(){this.constructor=Et}tt(Et,kt),Et.prototype=kt===null?Object.create(kt):($t.prototype=kt.prototype,new $t)}var rt,it=function(){return it=Object.assign||function(Et){for(var kt,$t=1,Ut=arguments.length;$t<Ut;$t++)for(var qt in kt=arguments[$t])Object.prototype.hasOwnProperty.call(kt,qt)&&(Et[qt]=kt[qt]);return Et},it.apply(this,arguments)};b.TextDirection=void 0,(rt=b.TextDirection||(b.TextDirection={})).RightToLeft="RTL",rt.LeftToRight="LTR";var st,ot=_e.createContext({currentTheme:"light",direction:b.TextDirection.LeftToRight,setCurrentTheme:function(){}}),lt=function(Et){var kt=[];return Object.keys(Et).forEach(function($t){$t&&Et[$t]&&kt.push($t)}),kt.join(" ")},at=typeof window<"u"?_e.useLayoutEffect:_e.useEffect,ut=function(Et){var kt=_e.useRef(null),$t=Et.once,Ut=Et.threshold,qt=Et.onVisibilityChanged;return at(function(){var Xt=kt.current;if(Xt){var hn=new IntersectionObserver(function(sn){sn.forEach(function(Gt){var cn=Gt.isIntersecting,an=Gt.intersectionRatio;qt({isVisible:cn,ratio:an}),cn&&$t&&(hn.unobserve(Xt),hn.disconnect())})},{threshold:Ut||0});return hn.observe(Xt),function(){hn.unobserve(Xt),hn.disconnect()}}},[]),kt},dt=function(Et){var kt=Et.children,$t=Et.ignoreDirection,Ut=$t!==void 0&&$t,qt=Et.size,Xt=qt===void 0?24:qt,hn=_e.useContext(ot).direction,sn=!Ut&&hn===b.TextDirection.RightToLeft,Gt="".concat(Xt||24,"px");return _e.createElement("svg",{"aria-hidden":"true",className:lt({"rpv-core__icon":!0,"rpv-core__icon--rtl":sn}),focusable:"false",height:Gt,viewBox:"0 0 24 24",width:Gt},kt)},ct=function(){return _e.createElement(dt,{size:16},_e.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},ht=function(Et){var kt=Et.children,$t=Et.testId,Ut=Et.onClick,qt=_e.useContext(ot).direction===b.TextDirection.RightToLeft,Xt=$t?{"data-testid":$t}:{};return _e.createElement("button",it({className:lt({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":qt}),type:"button",onClick:Ut},Xt),kt)},pt=function(Et){var kt=Et.size,$t=kt===void 0?"4rem":kt,Ut=Et.testId,qt=_e.useState(!1),Xt=qt[0],hn=qt[1],sn=Ut?{"data-testid":Ut}:{},Gt=ut({onVisibilityChanged:function(cn){hn(cn.isVisible)}});return _e.createElement("div",it({},sn,{className:lt({"rpv-core__spinner":!0,"rpv-core__spinner--animating":Xt}),ref:Gt,style:{height:$t,width:$t}}))},mt=function(Et){var kt=Et.ariaLabel,$t=kt===void 0?"":kt,Ut=Et.autoFocus,qt=Ut!==void 0&&Ut,Xt=Et.placeholder,hn=Xt===void 0?"":Xt,sn=Et.testId,Gt=Et.type,cn=Gt===void 0?"text":Gt,an=Et.value,Mn=an===void 0?"":an,Pn=Et.onChange,Rn=Et.onKeyDown,Vn=Rn===void 0?function(){}:Rn,jn=_e.useContext(ot).direction,Fn=_e.useRef(),Cr=jn===b.TextDirection.RightToLeft,or={ref:Fn,"data-testid":"","aria-label":$t,className:lt({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Cr}),placeholder:hn,value:Mn,onChange:function(lr){return Pn(lr.target.value)},onKeyDown:Vn};return sn&&(or["data-testid"]=sn),at(function(){if(qt){var lr=Fn.current;if(lr){var pr=window.scrollX,Qn=window.scrollY;lr.focus(),window.scrollTo(pr,Qn)}}},[]),cn==="text"?_e.createElement("input",it({type:"text"},or)):_e.createElement("input",it({type:"password"},or))};(function(Et){Et[Et.ExitFullScreen=0]="ExitFullScreen",Et[Et.FullScreenChange=1]="FullScreenChange",Et[Et.FullScreenElement=2]="FullScreenElement",Et[Et.FullScreenEnabled=3]="FullScreenEnabled",Et[Et.RequestFullScreen=4]="RequestFullScreen"})(st||(st={}));var ft,gt={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},xt={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},vt={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},St=typeof window<"u",Tt=St&&(st.FullScreenEnabled in document&&gt||xt.FullScreenEnabled in document&&xt||vt.FullScreenEnabled in document&&vt)||gt,bt=function(){return St&&Tt.FullScreenEnabled in document&&document[Tt.FullScreenEnabled]===!0},At=function(Et){return St?Et[Tt.ExitFullScreen]():Promise.resolve({})},Pt=function(){return St?document[Tt.FullScreenElement]:null},en=function(Et,kt){var $t=_e.useRef(),Ut=function(){$t.current&&clearTimeout($t.current)};return _e.useEffect(function(){return function(){return Ut()}},[]),_e.useCallback(function(){for(var qt=[],Xt=0;Xt<arguments.length;Xt++)qt[Xt]=arguments[Xt];Ut(),$t.current=setTimeout(function(){Et.apply(void 0,qt)},kt)},[Et,kt])},Wt=function(){var Et=_e.useRef(!1);return _e.useEffect(function(){return Et.current=!0,function(){Et.current=!1}},[]),Et},Jt=function(Et){var kt=_e.useRef(Et);return _e.useEffect(function(){kt.current=Et},[Et]),kt.current};(function(Et){Et.NotRenderedYet="NotRenderedYet",Et.Rendering="Rendering",Et.Rendered="Rendered"})(ft||(ft={}));var zt,Ht=-9999,Rt=function(Et){var kt=Et.doc,$t=kt.numPages,Ut=kt.loadingTask.docId,qt=_e.useMemo(function(){return Array($t).fill(null).map(function(sn,Gt){return{pageIndex:Gt,renderStatus:ft.NotRenderedYet,visibility:Ht}})},[Ut]),Xt=_e.useRef({currentRenderingPage:-1,startRange:0,endRange:$t-1,visibilities:qt}),hn=function(sn,Gt){Xt.current.visibilities[sn].visibility=Gt};return{getHighestPriorityPage:function(){var sn=Xt.current.visibilities.slice(Xt.current.startRange,Xt.current.endRange+1).filter(function(Pn){return Pn.visibility>Ht});if(!sn.length)return-1;for(var Gt=sn[0].pageIndex,cn=sn[sn.length-1].pageIndex,an=sn.length,Mn=0;Mn<an;Mn++){if(sn[Mn].renderStatus===ft.Rendering)return-1;if(sn[Mn].renderStatus===ft.NotRenderedYet)return sn[Mn].pageIndex}return cn+1<$t&&Xt.current.visibilities[cn+1].renderStatus!==ft.Rendered?cn+1:Gt-1>=0&&Xt.current.visibilities[Gt-1].renderStatus!==ft.Rendered?Gt-1:-1},isInRange:function(sn){return sn>=Xt.current.startRange&&sn<=Xt.current.endRange},markNotRendered:function(){for(var sn=0;sn<$t;sn++)Xt.current.visibilities[sn].renderStatus=ft.NotRenderedYet},markRendered:function(sn){Xt.current.visibilities[sn].renderStatus=ft.Rendered},markRendering:function(sn){Xt.current.currentRenderingPage!==-1&&Xt.current.currentRenderingPage!==sn&&Xt.current.visibilities[Xt.current.currentRenderingPage].renderStatus===ft.Rendering&&(Xt.current.visibilities[Xt.current.currentRenderingPage].renderStatus=ft.NotRenderedYet),Xt.current.visibilities[sn].renderStatus=ft.Rendering,Xt.current.currentRenderingPage=sn},setOutOfRange:function(sn){hn(sn,Ht)},setRange:function(sn,Gt){Xt.current.startRange=sn,Xt.current.endRange=Gt;for(var cn=0;cn<$t;cn++)(cn<sn||cn>Gt)&&(Xt.current.visibilities[cn].visibility=Ht,Xt.current.visibilities[cn].renderStatus=ft.NotRenderedYet)},setVisibility:hn}},jt={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},Zt=_e.createContext({l10n:jt,setL10n:function(){}}),Ot=0,wt=function(){return Ot++},Ct=function(Et,kt,$t){var Ut=function(qt){var Xt=kt.current;if(Xt){var hn=qt.target;if(hn instanceof Element&&hn.shadowRoot){var sn=qt.composedPath();sn.length>0&&!Xt.contains(sn[0])&&$t()}else Xt.contains(hn)||$t()}};_e.useEffect(function(){if(Et){var qt={capture:!0};return document.addEventListener("click",Ut,qt),function(){document.removeEventListener("click",Ut,qt)}}},[])},_t=function(Et){var kt=function($t){$t.key==="Escape"&&Et()};_e.useEffect(function(){return document.addEventListener("keyup",kt),function(){document.removeEventListener("keyup",kt)}},[])},Nt=function(Et){var kt=Et.ariaControlsSuffix,$t=Et.children,Ut=Et.closeOnClickOutside,qt=Et.closeOnEscape,Xt=Et.onToggle,hn=_e.useRef(),sn=_e.useContext(ot).direction===b.TextDirection.RightToLeft;return _e.useEffect(function(){var Gt=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=Gt}},[]),_t(function(){hn.current&&qt&&Xt()}),Ct(Ut,hn,Xt),at(function(){var Gt=hn.current;if(Gt){var cn=.75*document.body.clientHeight;Gt.getBoundingClientRect().height>=cn&&(Gt.style.overflow="auto",Gt.style.maxHeight="".concat(cn,"px"))}},[]),_e.createElement("div",{"aria-modal":"true",className:lt({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":sn}),id:"rpv-core__modal-body-".concat(kt),ref:hn,role:"dialog",tabIndex:-1},$t)},Lt=function(Et){var kt=Et.children;return _e.createElement("div",{className:"rpv-core__modal-overlay"},kt)};b.ToggleStatus=void 0,(zt=b.ToggleStatus||(b.ToggleStatus={})).Close="Close",zt.Open="Open",zt.Toggle="Toggle";var It,Yt=function(Et){var kt=_e.useState(Et),$t=kt[0],Ut=kt[1];return{opened:$t,toggle:function(qt){switch(qt){case b.ToggleStatus.Close:Ut(!1);break;case b.ToggleStatus.Open:Ut(!0);break;case b.ToggleStatus.Toggle:default:Ut(function(Xt){return!Xt})}}}},mn=function(Et){var kt=Et.content,$t=Et.isOpened,Ut=$t!==void 0&&$t,qt=Et.target,Xt=Yt(Ut),hn=Xt.opened,sn=Xt.toggle;return _e.createElement(_e.Fragment,null,qt&&qt(sn,hn),hn&&kt(sn))};b.Position=void 0,(It=b.Position||(b.Position={})).TopLeft="TOP_LEFT",It.TopCenter="TOP_CENTER",It.TopRight="TOP_RIGHT",It.RightTop="RIGHT_TOP",It.RightCenter="RIGHT_CENTER",It.RightBottom="RIGHT_BOTTOM",It.BottomLeft="BOTTOM_LEFT",It.BottomCenter="BOTTOM_CENTER",It.BottomRight="BOTTOM_RIGHT",It.LeftTop="LEFT_TOP",It.LeftCenter="LEFT_CENTER",It.LeftBottom="LEFT_BOTTOM";var vn,xn,En,An,kn,ln,un,Mt,Bt=function(Et,kt,$t,Ut,qt){at(function(){var Xt=kt.current,hn=Et.current,sn=$t.current;if(hn&&Xt&&sn){var Gt=sn.getBoundingClientRect(),cn=function(Pn,Rn,Vn,jn){var Fn=Rn.getBoundingClientRect(),Cr=Pn.getBoundingClientRect(),or=Cr.height,lr=Cr.width,pr=0,Qn=0;switch(Vn){case b.Position.TopLeft:pr=Fn.top-or,Qn=Fn.left;break;case b.Position.TopCenter:pr=Fn.top-or,Qn=Fn.left+Fn.width/2-lr/2;break;case b.Position.TopRight:pr=Fn.top-or,Qn=Fn.left+Fn.width-lr;break;case b.Position.RightTop:pr=Fn.top,Qn=Fn.left+Fn.width;break;case b.Position.RightCenter:pr=Fn.top+Fn.height/2-or/2,Qn=Fn.left+Fn.width;break;case b.Position.RightBottom:pr=Fn.top+Fn.height-or,Qn=Fn.left+Fn.width;break;case b.Position.BottomLeft:pr=Fn.top+Fn.height,Qn=Fn.left;break;case b.Position.BottomCenter:pr=Fn.top+Fn.height,Qn=Fn.left+Fn.width/2-lr/2;break;case b.Position.BottomRight:pr=Fn.top+Fn.height,Qn=Fn.left+Fn.width-lr;break;case b.Position.LeftTop:pr=Fn.top,Qn=Fn.left-lr;break;case b.Position.LeftCenter:pr=Fn.top+Fn.height/2-or/2,Qn=Fn.left-lr;break;case b.Position.LeftBottom:pr=Fn.top+Fn.height-or,Qn=Fn.left-lr}return{left:Qn+(jn.left||0),top:pr+(jn.top||0)}}(hn,Xt,Ut,qt),an=cn.top,Mn=cn.left;hn.style.top="".concat(an-Gt.top,"px"),hn.style.left="".concat(Mn-Gt.left,"px")}},[])},nn=function(Et){var kt,$t=Et.customClassName,Ut=Et.position;return _e.createElement("div",{className:lt((kt={"rpv-core__arrow":!0,"rpv-core__arrow--tl":Ut===b.Position.TopLeft,"rpv-core__arrow--tc":Ut===b.Position.TopCenter,"rpv-core__arrow--tr":Ut===b.Position.TopRight,"rpv-core__arrow--rt":Ut===b.Position.RightTop,"rpv-core__arrow--rc":Ut===b.Position.RightCenter,"rpv-core__arrow--rb":Ut===b.Position.RightBottom,"rpv-core__arrow--bl":Ut===b.Position.BottomLeft,"rpv-core__arrow--bc":Ut===b.Position.BottomCenter,"rpv-core__arrow--br":Ut===b.Position.BottomRight,"rpv-core__arrow--lt":Ut===b.Position.LeftTop,"rpv-core__arrow--lc":Ut===b.Position.LeftCenter,"rpv-core__arrow--lb":Ut===b.Position.LeftBottom},kt["".concat($t)]=$t!=="",kt))})},dn=function(Et){var kt=Et.ariaControlsSuffix,$t=Et.children,Ut=Et.closeOnClickOutside,qt=Et.offset,Xt=Et.position,hn=Et.targetRef,sn=Et.onClose,Gt=_e.useRef(),cn=_e.useRef(),an=_e.useRef(),Mn=_e.useContext(ot).direction===b.TextDirection.RightToLeft;Ct(Ut,Gt,sn),Bt(Gt,hn,an,Xt,qt),at(function(){var Rn=cn.current;if(Rn){var Vn=.75*document.body.clientHeight;Rn.getBoundingClientRect().height>=Vn&&(Rn.style.overflow="auto",Rn.style.maxHeight="".concat(Vn,"px"))}},[]);var Pn="rpv-core__popover-body-inner-".concat(kt);return _e.createElement(_e.Fragment,null,_e.createElement("div",{ref:an,style:{left:0,position:"absolute",top:0}}),_e.createElement("div",{"aria-describedby":Pn,className:lt({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Mn}),id:"rpv-core__popover-body-".concat(kt),ref:Gt,role:"dialog",tabIndex:-1},_e.createElement(nn,{customClassName:"rpv-core__popover-body-arrow",position:Xt}),_e.createElement("div",{id:Pn,ref:cn},$t)))},Sn=function(Et){var kt=Et.closeOnEscape,$t=Et.onClose,Ut=_e.useRef();return _t(function(){Ut.current&&kt&&$t()}),_e.createElement("div",{className:"rpv-core__popover-overlay",ref:Ut})},_n=function(Et){var kt=Et.ariaControlsSuffix,$t=Et.children,Ut=Et.contentRef,qt=Et.offset,Xt=Et.position,hn=Et.targetRef,sn=_e.useRef(),Gt=_e.useContext(ot).direction===b.TextDirection.RightToLeft;return Bt(Ut,hn,sn,Xt,qt),_e.createElement(_e.Fragment,null,_e.createElement("div",{ref:sn,style:{left:0,position:"absolute",top:0}}),_e.createElement("div",{className:lt({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":Gt}),id:"rpv-core__tooltip-body-".concat(kt),ref:Ut,role:"tooltip"},_e.createElement(nn,{customClassName:"rpv-core__tooltip-body-arrow",position:Xt}),_e.createElement("div",{className:"rpv-core__tooltip-body-content"},$t)))};b.FullScreenMode=void 0,(vn=b.FullScreenMode||(b.FullScreenMode={})).Normal="Normal",vn.Entering="Entering",vn.Entered="Entered",vn.EnteredCompletely="EnteredCompletely",vn.Exitting="Exitting",vn.Exited="Exited",b.LayerRenderStatus=void 0,(xn=b.LayerRenderStatus||(b.LayerRenderStatus={}))[xn.PreRender=0]="PreRender",xn[xn.DidRender=1]="DidRender",b.PageMode=void 0,(En=b.PageMode||(b.PageMode={})).Attachments="UseAttachments",En.Bookmarks="UseOutlines",En.ContentGroup="UseOC",En.Default="UserNone",En.FullScreen="FullScreen",En.Thumbnails="UseThumbs",b.PasswordStatus=void 0,(An=b.PasswordStatus||(b.PasswordStatus={})).RequiredPassword="RequiredPassword",An.WrongPassword="WrongPassword",b.RotateDirection=void 0,(kn=b.RotateDirection||(b.RotateDirection={})).Backward="Backward",kn.Forward="Forward",b.ScrollMode=void 0,(ln=b.ScrollMode||(b.ScrollMode={})).Page="Page",ln.Horizontal="Horizontal",ln.Vertical="Vertical",ln.Wrapped="Wrapped",b.SpecialZoomLevel=void 0,(un=b.SpecialZoomLevel||(b.SpecialZoomLevel={})).ActualSize="ActualSize",un.PageFit="PageFit",un.PageWidth="PageWidth",b.ViewMode=void 0,(Mt=b.ViewMode||(b.ViewMode={})).DualPage="DualPage",Mt.DualPageWithCover="DualPageWithCover",Mt.SinglePage="SinglePage";var Cn,tn=function(Et,kt){return Et.reduce(function($t,Ut,qt){return qt%kt?$t[$t.length-1].push(Ut):$t.push([Ut]),$t},[])},Ln=function(Et,kt){switch(kt[1].name){case"XYZ":return{bottomOffset:function($t,Ut){return kt[3]===null?Ut:kt[3]},leftOffset:function($t,Ut){return kt[2]===null?0:kt[2]},pageIndex:Et,scaleTo:kt[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:Et,scaleTo:b.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:kt[2],leftOffset:0,pageIndex:Et,scaleTo:b.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:Et,scaleTo:1}}},Dn=new Map,ur=new Map,rr=function(Et,kt){return"".concat(Et.loadingTask.docId,"___").concat(kt.num,"R").concat(kt.gen===0?"":kt.gen)},br=function(Et,kt,$t){Dn.set(rr(Et,kt),$t)},Hn=function(Et,kt){if(!Et)return Promise.reject("The document is not loaded yet");var $t="".concat(Et.loadingTask.docId,"___").concat(kt),Ut=ur.get($t);return Ut?Promise.resolve(Ut):new Promise(function(qt,Xt){Et.getPage(kt+1).then(function(hn){ur.set($t,hn),hn.ref&&br(Et,hn.ref,kt),qt(hn)})})},Zn=function(Et,kt){return new Promise(function($t){new Promise(function(Ut){typeof kt=="string"?Et.getDestination(kt).then(function(qt){Ut(qt)}):Ut(kt)}).then(function(Ut){if(typeof Ut[0]=="object"&&Ut[0]!==null){var qt=Ut[0],Xt=function(sn,Gt){var cn=rr(sn,Gt);return Dn.has(cn)?Dn.get(cn):null}(Et,qt);Xt===null?Et.getPageIndex(qt).then(function(sn){br(Et,qt,sn),Zn(Et,kt).then(function(Gt){return $t(Gt)})}):$t(Ln(Xt,Ut))}else{var hn=Ln(Ut[0],Ut);$t(hn)}})})};(function(Et){Et[Et.Solid=1]="Solid",Et[Et.Dashed=2]="Dashed",Et[Et.Beveled=3]="Beveled",Et[Et.Inset=4]="Inset",Et[Et.Underline=5]="Underline"})(Cn||(Cn={}));var mr,Rr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),wn=function(Et,kt,$t,Ut){var qt=parseInt(Et,10);return qt>=kt&&qt<=$t?qt:Ut},rn=function(Et){return Et.contentsObj?Et.contentsObj.str:Et.contents||""},on=function(Et){return Et.titleObj?Et.titleObj.str:Et.title||""},zn=function(Et){var kt=Et.annotation,$t=_e.useContext(ot).direction,Ut=on(kt),qt=rn(kt),Xt=$t===b.TextDirection.RightToLeft,hn=_e.useRef(),sn="";if(kt.modificationDate){var Gt=function(cn){var an=Rr.exec(cn);if(!an)return null;var Mn=parseInt(an[1],10),Pn=wn(an[2],1,12,1)-1,Rn=wn(an[3],1,31,1),Vn=wn(an[4],0,23,0),jn=wn(an[5],0,59,0),Fn=wn(an[6],0,59,0),Cr=an[7]||"Z",or=wn(an[8],0,23,0),lr=wn(an[9],0,59,0);switch(Cr){case"-":Vn+=or,jn+=lr;break;case"+":Vn-=or,jn-=lr}return new Date(Date.UTC(Mn,Pn,Rn,Vn,jn,Fn))}(kt.modificationDate);sn=Gt?"".concat(Gt.toLocaleDateString(),", ").concat(Gt.toLocaleTimeString()):""}return _e.useLayoutEffect(function(){if(hn.current){var cn=document.querySelector('[data-annotation-id="'.concat(kt.id,'"]'));if(cn){var an=cn;return an.style.zIndex+=1,function(){an.style.zIndex="".concat(parseInt(an.style.zIndex,10)-1)}}}},[]),_e.createElement("div",{ref:hn,className:lt({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":Xt}),style:{top:kt.annotationType===b.AnnotationType.Popup?"":"100%"}},Ut&&_e.createElement(_e.Fragment,null,_e.createElement("div",{className:lt({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!Xt,"rpv-core__annotation-popup-title--rtl":Xt})},Ut),_e.createElement("div",{className:"rpv-core__annotation-popup-date"},sn)),qt&&_e.createElement("div",{className:"rpv-core__annotation-popup-content"},qt.split(`
`).map(function(cn,an){return _e.createElement(_e.Fragment,{key:an},cn,_e.createElement("br",null))})))};(function(Et){Et.Click="Click",Et.Hover="Hover"})(mr||(mr={}));var Gn,nr=function(Et){var kt,$t=Et.annotation,Ut=Et.children,qt=Et.ignoreBorder,Xt=Et.hasPopup,hn=Et.isRenderable,sn=Et.page,Gt=Et.viewport,cn=$t.rect,an=function(){var dr=Yt(!1),Mr=dr.opened,Pr=dr.toggle,Or=_e.useState(mr.Hover),Dr=Or[0],Ir=Or[1];return{opened:Mr,closeOnHover:function(){Dr===mr.Hover&&Pr(b.ToggleStatus.Close)},openOnHover:function(){Dr===mr.Hover&&Pr(b.ToggleStatus.Open)},toggleOnClick:function(){switch(Dr){case mr.Click:Mr&&Ir(mr.Hover),Pr(b.ToggleStatus.Toggle);break;case mr.Hover:Ir(mr.Click),Pr(b.ToggleStatus.Open)}}}}(),Mn=an.closeOnHover,Pn=an.opened,Rn=an.openOnHover,Vn=an.toggleOnClick,jn=(kt=[cn[0],sn.view[3]+sn.view[1]-cn[1],cn[2],sn.view[3]+sn.view[1]-cn[3]],[Math.min(kt[0],kt[2]),Math.min(kt[1],kt[3]),Math.max(kt[0],kt[2]),Math.max(kt[1],kt[3])]),Fn=cn[2]-cn[0],Cr=cn[3]-cn[1],or={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!qt&&$t.borderStyle.width>0){switch($t.borderStyle.style){case Cn.Dashed:or.borderStyle="dashed";break;case Cn.Solid:or.borderStyle="solid";break;case Cn.Underline:or=Object.assign({borderBottomStyle:"solid"},or);case Cn.Beveled:case Cn.Inset:}var lr=$t.borderStyle.width;or.borderWidth="".concat(lr,"px"),$t.borderStyle.style!==Cn.Underline&&(Fn-=2*lr,Cr-=2*lr);var pr=$t.borderStyle,Qn=pr.horizontalCornerRadius,gr=pr.verticalCornerRadius;(Qn>0||gr>0)&&(or.borderRadius="".concat(Qn,"px / ").concat(gr,"px")),$t.color?or.borderColor="rgb(".concat(0|$t.color[0],", ").concat(0|$t.color[1],", ").concat(0|$t.color[2],")"):or.borderWidth="0"}return _e.createElement(_e.Fragment,null,hn&&Ut({popup:{opened:Pn,closeOnHover:Mn,openOnHover:Rn,toggleOnClick:Vn},slot:{attrs:{style:Object.assign({height:"".concat(Cr,"px"),left:"".concat(jn[0],"px"),top:"".concat(jn[1],"px"),transform:"matrix(".concat(Gt.transform.join(","),")"),transformOrigin:"-".concat(jn[0],"px -").concat(jn[1],"px"),width:"".concat(Fn,"px")},or)},children:_e.createElement(_e.Fragment,null,Xt&&Pn&&_e.createElement(zn,{annotation:$t}))}}))},Vt=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn);return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":kt.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children)})},bn=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn),Gt=kt.rect,cn=Gt[2]-Gt[0],an=Gt[3]-Gt[1],Mn=kt.borderStyle.width;return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Pn){return _e.createElement("div",it({},Pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":kt.id,onClick:Pn.popup.toggleOnClick,onMouseEnter:Pn.popup.openOnHover,onMouseLeave:Pn.popup.closeOnHover}),_e.createElement("svg",{height:"".concat(an,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(cn," ").concat(an),width:"".concat(cn,"px")},_e.createElement("circle",{cy:an/2,fill:"none",rx:cn/2-Mn/2,ry:an/2-Mn/2,stroke:"transparent",strokeWidth:Mn||1})),Pn.slot.children)})},In=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=on(kt),Xt=rn(kt),hn=!(kt.hasPopup!==!1||!qt&&!Xt),sn=function(){var Gt,cn,an,Mn,Pn=kt.file;Pn&&(Gt=Pn.filename,cn=Pn.content,an=typeof cn=="string"?"":URL.createObjectURL(new Blob([cn],{type:""})),(Mn=document.createElement("a")).style.display="none",Mn.href=an||Gt,Mn.setAttribute("download",function(Rn){var Vn=Rn.split("/").pop();return Vn?Vn.split("#")[0].split("?")[0]:Rn}(Gt)),document.body.appendChild(Mn),Mn.click(),document.body.removeChild(Mn),an&&URL.revokeObjectURL(an))};return _e.createElement(nr,{annotation:kt,hasPopup:hn,ignoreBorder:!0,isRenderable:!0,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":kt.id,onClick:Gt.popup.toggleOnClick,onDoubleClick:sn,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children)})},qn=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn);return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":kt.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children)})},Yn=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=on(kt),Xt=rn(kt),hn=!(!qt&&!Xt),sn=!kt.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(kt.parentType)!==-1;return at(function(){if(kt.parentId){var Gt=document.querySelector('[data-annotation-id="'.concat(kt.parentId,'"]')),cn=document.querySelector('[data-annotation-id="'.concat(kt.id,'"]'));if(Gt&&cn){var an=parseFloat(Gt.style.left),Mn=parseFloat(Gt.style.top)+parseFloat(Gt.style.height);cn.style.left="".concat(an,"px"),cn.style.top="".concat(Mn,"px"),cn.style.transformOrigin="-".concat(an,"px -").concat(Mn,"px")}}},[]),_e.createElement(nr,{annotation:kt,hasPopup:sn,ignoreBorder:!1,isRenderable:hn,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":kt.id}),_e.createElement(zn,{annotation:kt}))})},$n=function(Et){var kt=Et.annotation,$t=Et.childAnnotation,Ut=Et.page,qt=Et.viewport,Xt=kt.hasPopup===!1,hn=on(kt),sn=rn(kt),Gt=!!(kt.hasPopup||hn||sn);if(kt.quadPoints&&kt.quadPoints.length>0){var cn=kt.quadPoints.map(function(an){return Object.assign({},kt,{rect:[an[2].x,an[2].y,an[1].x,an[1].y],quadPoints:[]})});return _e.createElement(_e.Fragment,null,cn.map(function(an,Mn){return _e.createElement($n,{key:Mn,annotation:an,childAnnotation:$t,page:Ut,viewport:qt})}))}return _e.createElement(nr,{annotation:kt,hasPopup:Xt,ignoreBorder:!0,isRenderable:Gt,page:Ut,viewport:qt},function(an){return _e.createElement(_e.Fragment,null,_e.createElement("div",it({},an.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":kt.id,onClick:an.popup.toggleOnClick,onMouseEnter:an.popup.openOnHover,onMouseLeave:an.popup.closeOnHover}),an.slot.children),$t&&$t.annotationType===b.AnnotationType.Popup&&an.popup.opened&&_e.createElement(Yn,{annotation:$t,page:Ut,viewport:qt}))})},Ft=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn),Gt=kt.rect,cn=Gt[2]-Gt[0],an=Gt[3]-Gt[1],Mn=kt.borderStyle.width;return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Pn){return _e.createElement("div",it({},Pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":kt.id,onClick:Pn.popup.toggleOnClick,onMouseEnter:Pn.popup.openOnHover,onMouseLeave:Pn.popup.closeOnHover}),kt.inkLists&&kt.inkLists.length&&_e.createElement("svg",{height:"".concat(an,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(cn," ").concat(an),width:"".concat(cn,"px")},kt.inkLists.map(function(Rn,Vn){return _e.createElement("polyline",{key:Vn,fill:"none",stroke:"transparent",strokeWidth:Mn||1,points:Rn.map(function(jn){return"".concat(jn.x-Gt[0],",").concat(Gt[3]-jn.y)}).join(" ")})})),Pn.slot.children)})},Dt=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn),Gt=kt.rect,cn=Gt[2]-Gt[0],an=Gt[3]-Gt[1],Mn=kt.borderStyle.width;return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Pn){return _e.createElement("div",it({},Pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":kt.id,onClick:Pn.popup.toggleOnClick,onMouseEnter:Pn.popup.openOnHover,onMouseLeave:Pn.popup.closeOnHover}),_e.createElement("svg",{height:"".concat(an,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(cn," ").concat(an),width:"".concat(cn,"px")},_e.createElement("line",{stroke:"transparent",strokeWidth:Mn||1,x1:Gt[2]-kt.lineCoordinates[0],x2:Gt[2]-kt.lineCoordinates[2],y1:Gt[3]-kt.lineCoordinates[1],y2:Gt[3]-kt.lineCoordinates[3]})),Pn.slot.children)})},Kt=/^([^\w]*)(javascript|data|vbscript)/im,gn=/&#(\w+)(^\w|;)?/g,yn=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Tn=/^([^:]+):/gm,On=function(Et,kt){var $t,Ut=($t=Et||"",$t.replace(gn,function(sn,Gt){return String.fromCharCode(Gt)})).replace(yn,"").trim();if(!Ut)return kt;var qt=Ut[0];if(qt==="."||qt==="/")return Ut;var Xt=Ut.match(Tn);if(!Xt)return Ut;var hn=Xt[0];return Kt.test(hn)?kt:Ut},Kn=function(Et){var kt,$t=Et.annotation,Ut=Et.annotationContainerRef,qt=Et.doc,Xt=Et.outlines,hn=Et.page,sn=Et.pageIndex,Gt=Et.scale,cn=Et.viewport,an=Et.onExecuteNamedAction,Mn=Et.onJumpFromLinkAnnotation,Pn=Et.onJumpToDest,Rn=_e.useRef(),Vn=Xt&&Xt.length&&$t.dest&&typeof $t.dest=="string"?(kt=Xt.find(function(or){return or.dest===$t.dest}))===null||kt===void 0?void 0:kt.title:"",jn=!!($t.url||$t.dest||$t.action||$t.unsafeUrl),Fn={};if($t.url||$t.unsafeUrl){var Cr=On($t.url||$t.unsafeUrl,"");Cr?Fn={"data-target":"external",href:Cr,rel:"noopener noreferrer nofollow",target:$t.newWindow?"_blank":"",title:Cr}:jn=!1}else Fn={href:"","data-annotation-link":$t.id,onClick:function(or){or.preventDefault(),$t.action?an($t.action):Zn(qt,$t.dest).then(function(lr){var pr=Rn.current,Qn=Ut.current;if(pr&&Qn){var gr=pr.getBoundingClientRect();Qn.style.setProperty("height","100%"),Qn.style.setProperty("width","100%");var dr=Qn.getBoundingClientRect();Qn.style.removeProperty("height"),Qn.style.removeProperty("width");var Mr=(gr.left-dr.left)/Gt,Pr=(dr.bottom-gr.bottom+gr.height)/Gt;Mn({bottomOffset:Pr,label:Vn,leftOffset:Mr,pageIndex:sn})}Pn(lr)})}};return Vn&&(Fn=Object.assign({},Fn,{title:Vn,"aria-label":Vn})),_e.createElement(nr,{annotation:$t,hasPopup:!1,ignoreBorder:!1,isRenderable:jn,page:hn,viewport:cn},function(or){return _e.createElement("div",it({},or.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":$t.id,"data-testid":"core__annotation--link-".concat($t.id)}),_e.createElement("a",it({ref:Rn},Fn)))})},Un=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn),Gt=kt.rect,cn=Gt[2]-Gt[0],an=Gt[3]-Gt[1],Mn=kt.borderStyle.width;return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Pn){return _e.createElement("div",it({},Pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":kt.id,onClick:Pn.popup.toggleOnClick,onMouseEnter:Pn.popup.openOnHover,onMouseLeave:Pn.popup.closeOnHover}),kt.vertices&&kt.vertices.length&&_e.createElement("svg",{height:"".concat(an,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(cn," ").concat(an),width:"".concat(cn,"px")},_e.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Mn||1,points:kt.vertices.map(function(Rn){return"".concat(Rn.x-Gt[0],",").concat(Gt[3]-Rn.y)}).join(" ")})),Pn.slot.children)})},Bn=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn),Gt=kt.rect,cn=Gt[2]-Gt[0],an=Gt[3]-Gt[1],Mn=kt.borderStyle.width;return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Pn){return _e.createElement("div",it({},Pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":kt.id,onClick:Pn.popup.toggleOnClick,onMouseEnter:Pn.popup.openOnHover,onMouseLeave:Pn.popup.closeOnHover}),kt.vertices&&kt.vertices.length&&_e.createElement("svg",{height:"".concat(an,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(cn," ").concat(an),width:"".concat(cn,"px")},_e.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Mn||1,points:kt.vertices.map(function(Rn){return"".concat(Rn.x-Gt[0],",").concat(Gt[3]-Rn.y)}).join(" ")})),Pn.slot.children)})},fr=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn),Gt=kt.rect,cn=Gt[2]-Gt[0],an=Gt[3]-Gt[1],Mn=kt.borderStyle.width;return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Pn){return _e.createElement("div",it({},Pn.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":kt.id,onClick:Pn.popup.toggleOnClick,onMouseEnter:Pn.popup.openOnHover,onMouseLeave:Pn.popup.closeOnHover}),_e.createElement("svg",{height:"".concat(an,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(cn," ").concat(an),width:"".concat(cn,"px")},_e.createElement("rect",{height:an-Mn,fill:"none",stroke:"transparent",strokeWidth:Mn||1,x:Mn/2,y:Mn/2,width:cn-Mn})),Pn.slot.children)})},Wn=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn);return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":kt.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children)})},Jn=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn);return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":kt.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children)})},ar=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn);return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":kt.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children)})},vr=function(){return _e.createElement(dt,{size:16},_e.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),_e.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),_e.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),_e.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},Ar=function(){return _e.createElement(dt,{size:16},_e.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),_e.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),_e.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),_e.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),_e.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),_e.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),_e.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),_e.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),_e.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),_e.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},Fr=function(){return _e.createElement(dt,{size:16},_e.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),_e.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Qr=function(){return _e.createElement(dt,{size:16},_e.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),_e.createElement("path",{d:"M6 4.5L6 0.5"}),_e.createElement("path",{d:"M18 4.5L18 0.5"}),_e.createElement("path",{d:"M10 4.5L10 0.5"}),_e.createElement("path",{d:"M14 4.5L14 0.5"}))},Gr=function(){return _e.createElement(dt,{size:16},_e.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),_e.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),_e.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},us=function(){return _e.createElement(dt,{size:16},_e.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},hs=function(Et){var kt=Et.annotation,$t=Et.childAnnotation,Ut=Et.page,qt=Et.viewport,Xt=kt.hasPopup===!1,hn=on(kt),sn=rn(kt),Gt=!!(kt.hasPopup||hn||sn),cn=kt.name?kt.name.toLowerCase():"";return _e.createElement(nr,{annotation:kt,hasPopup:Xt,ignoreBorder:!1,isRenderable:Gt,page:Ut,viewport:qt},function(an){return _e.createElement(_e.Fragment,null,_e.createElement("div",it({},an.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":kt.id,onClick:an.popup.toggleOnClick,onMouseEnter:an.popup.openOnHover,onMouseLeave:an.popup.closeOnHover}),cn&&_e.createElement("div",{className:"rpv-core__annotation-text-icon"},cn==="check"&&_e.createElement(ct,null),cn==="comment"&&_e.createElement(vr,null),cn==="help"&&_e.createElement(Ar,null),cn==="insert"&&_e.createElement(us,null),cn==="key"&&_e.createElement(Fr,null),cn==="note"&&_e.createElement(Qr,null),(cn==="newparagraph"||cn==="paragraph")&&_e.createElement(Gr,null)),an.slot.children),$t&&$t.annotationType===b.AnnotationType.Popup&&an.popup.opened&&_e.createElement(Yn,{annotation:$t,page:Ut,viewport:qt}))})},fs=function(Et){var kt=Et.annotation,$t=Et.page,Ut=Et.viewport,qt=kt.hasPopup===!1,Xt=on(kt),hn=rn(kt),sn=!!(kt.hasPopup||Xt||hn);return _e.createElement(nr,{annotation:kt,hasPopup:qt,ignoreBorder:!0,isRenderable:sn,page:$t,viewport:Ut},function(Gt){return _e.createElement("div",it({},Gt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":kt.id,onClick:Gt.popup.toggleOnClick,onMouseEnter:Gt.popup.openOnHover,onMouseLeave:Gt.popup.closeOnHover}),Gt.slot.children)})},Us=function(Et){var kt=Et.annotations,$t=Et.doc,Ut=Et.outlines,qt=Et.page,Xt=Et.pageIndex,hn=Et.plugins,sn=Et.rotation,Gt=Et.scale,cn=Et.onExecuteNamedAction,an=Et.onJumpFromLinkAnnotation,Mn=Et.onJumpToDest,Pn=_e.useRef(),Rn=qt.getViewport({rotation:sn,scale:Gt}).clone({dontFlip:!0}),Vn=kt.filter(function(jn){return!jn.parentId});return at(function(){var jn=Pn.current;jn&&hn.forEach(function(Fn){Fn.onAnnotationLayerRender&&Fn.onAnnotationLayerRender({annotations:Vn,container:jn,pageIndex:Xt,rotation:sn,scale:Gt})})},[]),_e.createElement("div",{ref:Pn,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(Xt)},Vn.map(function(jn){var Fn=kt.find(function(Cr){return Cr.parentId===jn.id});switch(jn.annotationType){case b.AnnotationType.Caret:return _e.createElement(Vt,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Circle:return _e.createElement(bn,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.FileAttachment:return _e.createElement(In,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.FreeText:return _e.createElement(qn,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Highlight:return _e.createElement($n,{key:jn.id,annotation:jn,childAnnotation:Fn,page:qt,viewport:Rn});case b.AnnotationType.Ink:return _e.createElement(Ft,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Line:return _e.createElement(Dt,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Link:return _e.createElement(Kn,{key:jn.id,annotation:jn,annotationContainerRef:Pn,doc:$t,outlines:Ut,page:qt,pageIndex:Xt,scale:Gt,viewport:Rn,onExecuteNamedAction:cn,onJumpFromLinkAnnotation:an,onJumpToDest:Mn});case b.AnnotationType.Polygon:return _e.createElement(Un,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Polyline:return _e.createElement(Bn,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Popup:return _e.createElement(Yn,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Square:return _e.createElement(fr,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Squiggly:return _e.createElement(Wn,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Stamp:return _e.createElement(Jn,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.StrikeOut:return _e.createElement(ar,{key:jn.id,annotation:jn,page:qt,viewport:Rn});case b.AnnotationType.Text:return _e.createElement(hs,{key:jn.id,annotation:jn,childAnnotation:Fn,page:qt,viewport:Rn});case b.AnnotationType.Underline:return _e.createElement(fs,{key:jn.id,annotation:jn,page:qt,viewport:Rn});default:return _e.createElement(_e.Fragment,{key:jn.id})}}))},Cu=function(Et){var kt=Et.page,$t=Et.renderAnnotations,Ut=Wt(),qt=_e.useState({loading:!0,annotations:[]}),Xt=qt[0],hn=qt[1];return _e.useEffect(function(){kt.getAnnotations({intent:"display"}).then(function(sn){Ut.current&&hn({loading:!1,annotations:sn})})},[]),Xt.loading?_e.createElement(_e.Fragment,null):$t(Xt.annotations)},Tu=function(Et){var kt=Et.doc,$t=Et.outlines,Ut=Et.page,qt=Et.pageIndex,Xt=Et.plugins,hn=Et.rotation,sn=Et.scale,Gt=Et.onExecuteNamedAction,cn=Et.onJumpFromLinkAnnotation,an=Et.onJumpToDest;return _e.createElement(Cu,{page:Ut,renderAnnotations:function(Mn){return _e.createElement(Us,{annotations:Mn,doc:kt,outlines:$t,page:Ut,pageIndex:qt,plugins:Xt,rotation:hn,scale:sn,onExecuteNamedAction:Gt,onJumpFromLinkAnnotation:cn,onJumpToDest:an})}})},Ws=function(Et,kt){var $t=Et%kt;return $t===0?Et:Math.floor(Et-$t)},Au=function(Et){var kt=Et.canvasLayerRef,$t=Et.height,Ut=Et.page,qt=Et.pageIndex,Xt=Et.plugins,hn=Et.rotation,sn=Et.scale,Gt=Et.width,cn=Et.onRenderCanvasCompleted,an=_e.useRef();return at(function(){var Mn=an.current;Mn&&Mn.cancel();var Pn=kt.current;Pn.removeAttribute("data-testid"),Xt.forEach(function(dr){dr.onCanvasLayerRender&&dr.onCanvasLayerRender({ele:Pn,pageIndex:qt,rotation:hn,scale:sn,status:b.LayerRenderStatus.PreRender})});var Rn=Ut.getViewport({rotation:hn,scale:sn}),Vn=window.devicePixelRatio||1,jn=Math.sqrt(16777216/(Rn.width*Rn.height)),Fn=Vn>jn;Fn?Pn.style.transform="scale(1, 1)":Pn.style.removeProperty("transform");var Cr=Math.min(jn,Vn),or=function(dr,Mr){var Pr,Or;if(Math.floor(dr)===dr)return[dr,1];var Dr=1/dr;if(Dr>Mr)return[1,Mr];if(Math.floor(Dr)===Dr)return[1,Dr];for(var Ir=dr>1?Dr:dr,Jr=0,Ur=1,Zr=1,qr=1;;){var Xr=Jr+Zr,Yr=Ur+qr;if(Yr>Mr)break;Ir<=Xr/Yr?(Zr=(Pr=[Xr,Yr])[0],qr=Pr[1]):(Jr=(Or=[Xr,Yr])[0],Ur=Or[1])}return Ir<(Jr/Ur+Zr/qr)/2?Ir===dr?[Jr,Ur]:[Ur,Jr]:Ir===dr?[Zr,qr]:[qr,Zr]}(Cr,8),lr=or[0],pr=or[1];Pn.width=Ws(Rn.width*Cr,lr),Pn.height=Ws(Rn.height*Cr,lr),Pn.style.width="".concat(Ws(Rn.width,pr),"px"),Pn.style.height="".concat(Ws(Rn.height,pr),"px"),Pn.hidden=!0;var Qn=Pn.getContext("2d",{alpha:!1}),gr=Fn||Vn!==1?[Cr,0,0,Cr,0,0]:null;return an.current=Ut.render({canvasContext:Qn,transform:gr,viewport:Rn}),an.current.promise.then(function(){Pn.hidden=!1,Pn.setAttribute("data-testid","core__canvas-layer-".concat(qt)),Xt.forEach(function(dr){dr.onCanvasLayerRender&&dr.onCanvasLayerRender({ele:Pn,pageIndex:qt,rotation:hn,scale:sn,status:b.LayerRenderStatus.DidRender})}),cn()},function(){cn()}),function(){Pn&&(Pn.width=0,Pn.height=0)}},[]),_e.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat($t,"px"),width:"".concat(Gt,"px")}},_e.createElement("canvas",{ref:kt}))},ku=function(Et){var kt=Et.height,$t=Et.page,Ut=Et.rotation,qt=Et.scale,Xt=Et.width,hn=_e.useRef();return at(function(){var sn=hn.current,Gt=$t.getViewport({rotation:Ut,scale:qt});$t.getOperatorList().then(function(cn){(function(){var an=hn.current;an&&(an.innerHTML="")})(),new et.SVGGraphics($t.commonObjs,$t.objs).getSVG(cn,Gt).then(function(an){an.style.height="".concat(kt,"px"),an.style.width="".concat(Xt,"px"),sn.appendChild(an)})})},[]),_e.createElement("div",{className:"rpv-core__svg-layer",ref:hn})},_u=function(Et){var kt=Et.containerRef,$t=Et.page,Ut=Et.pageIndex,qt=Et.plugins,Xt=Et.rotation,hn=Et.scale,sn=Et.onRenderTextCompleted,Gt=_e.useRef(),cn=function(){var an=kt.current;an&&([].slice.call(an.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Mn){return an.removeChild(Mn)}),[].slice.call(an.querySelectorAll('br[role="presentation"]')).forEach(function(Mn){return an.removeChild(Mn)}))};return at(function(){var an=Gt.current;an&&an.cancel();var Mn=kt.current;if(Mn){Mn.removeAttribute("data-testid");var Pn=$t.getViewport({rotation:Xt,scale:hn});return qt.forEach(function(Rn){Rn.onTextLayerRender&&Rn.onTextLayerRender({ele:Mn,pageIndex:Ut,scale:hn,status:b.LayerRenderStatus.PreRender})}),$t.getTextContent().then(function(Rn){cn(),Gt.current=et.renderTextLayer({container:Mn,textContent:Rn,textContentSource:Rn,viewport:Pn}),Gt.current.promise.then(function(){Mn.setAttribute("data-testid","core__text-layer-".concat(Ut)),[].slice.call(Mn.children).forEach(function(Vn){Vn.classList.contains("rpv-core__text-layer-text--not")||Vn.classList.add("rpv-core__text-layer-text")}),qt.forEach(function(Vn){Vn.onTextLayerRender&&Vn.onTextLayerRender({ele:Mn,pageIndex:Ut,scale:hn,status:b.LayerRenderStatus.DidRender})}),sn()},function(){Mn.removeAttribute("data-testid"),sn()})}),function(){var Rn;cn(),(Rn=Gt.current)===null||Rn===void 0||Rn.cancel()}}},[]),_e.createElement("div",{className:"rpv-core__text-layer",ref:kt})},Ru=function(Et){var kt=Et.doc,$t=Et.measureRef,Ut=Et.outlines,qt=Et.pageIndex,Xt=Et.pageRotation,hn=Et.pageSize,sn=Et.plugins,Gt=Et.renderPage,cn=Et.renderQueueKey,an=Et.rotation,Mn=Et.scale,Pn=Et.shouldRender,Rn=Et.viewMode,Vn=Et.onExecuteNamedAction,jn=Et.onJumpFromLinkAnnotation,Fn=Et.onJumpToDest,Cr=Et.onRenderCompleted,or=Et.onRotatePage,lr=Wt(),pr=_e.useState(null),Qn=pr[0],gr=pr[1],dr=_e.useState(!1),Mr=dr[0],Pr=dr[1],Or=_e.useState(!1),Dr=Or[0],Ir=Or[1],Jr=_e.useRef(),Ur=_e.useRef(),Zr=Math.abs(an+Xt)%180==0,qr=hn.pageWidth*Mn,Xr=hn.pageHeight*Mn,Yr=Zr?qr:Xr,Kr=Zr?Xr:qr,is=(hn.rotation+an+Xt)%360,ps=_e.useRef(0),ds=Gt||function(ts){return _e.createElement(_e.Fragment,null,ts.canvasLayer.children,ts.textLayer.children,ts.annotationLayer.children)};return _e.useEffect(function(){gr(null),Pr(!1),Ir(!1)},[Xt,an,Mn]),_e.useEffect(function(){Pn&&lr.current&&!Qn&&Hn(kt,qt).then(function(ts){lr.current&&(ps.current=cn,gr(ts))})},[Pn,Qn]),_e.useEffect(function(){Mr&&Dr&&(cn!==ps.current?(gr(null),Pr(!1),Ir(!1)):Cr(qt))},[Mr,Dr]),_e.createElement("div",{className:lt({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":Rn===b.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":Rn===b.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":Rn===b.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(qt),ref:$t,style:{height:"".concat(Kr,"px"),width:"".concat(Yr,"px")}},Qn?_e.createElement(_e.Fragment,null,ds({annotationLayer:{attrs:{},children:_e.createElement(Tu,{doc:kt,outlines:Ut,page:Qn,pageIndex:qt,plugins:sn,rotation:is,scale:Mn,onExecuteNamedAction:Vn,onJumpFromLinkAnnotation:jn,onJumpToDest:Fn})},canvasLayer:{attrs:{},children:_e.createElement(Au,{canvasLayerRef:Jr,height:Kr,page:Qn,pageIndex:qt,plugins:sn,rotation:is,scale:Mn,width:Yr,onRenderCanvasCompleted:function(){lr.current&&Pr(!0)}})},canvasLayerRendered:Mr,doc:kt,height:Kr,pageIndex:qt,rotation:is,scale:Mn,svgLayer:{attrs:{},children:_e.createElement(ku,{height:Kr,page:Qn,rotation:is,scale:Mn,width:Yr})},textLayer:{attrs:{},children:_e.createElement(_u,{containerRef:Ur,page:Qn,pageIndex:qt,plugins:sn,rotation:is,scale:Mn,onRenderTextCompleted:function(){lr.current&&Ir(!0)}})},textLayerRendered:Dr,width:Yr,markRendered:Cr,onRotatePage:function(ts){return or(qt,ts)}}),sn.map(function(ts,ss){return ts.renderPageLayer?_e.createElement(_e.Fragment,{key:ss},ts.renderPageLayer({canvasLayerRef:Jr,canvasLayerRendered:Mr,doc:kt,height:Kr,pageIndex:qt,rotation:is,scale:Mn,textLayerRef:Ur,textLayerRendered:Dr,width:Yr})):_e.createElement(_e.Fragment,{key:ss})})):_e.createElement(pt,{testId:"core__page-layer-loading-".concat(qt)}))},Pu=function(Et,kt){var $t=kt.rect;return Et.height!==$t.height||Et.width!==$t.width?$t:Et};(function(Et){Et.Horizontal="Horizontal",Et.Vertical="Vertical",Et.Both="Both"})(Gn||(Gn={}));var Mu=function(Et){return 1-Math.pow(1-Et,4)},Gs=1e-4,Sl={left:0,top:0},El={capture:!1,passive:!0},Ou=function(Et){var kt=Et.elementRef,$t=Et.enableSmoothScroll,Ut=Et.isRtl,qt=Et.scrollDirection,Xt=Et.onSmoothScroll,hn=_e.useState(Sl),sn=hn[0],Gt=hn[1],cn=_e.useState(kt.current),an=cn[0],Mn=cn[1],Pn=Ut?-1:1,Rn=_e.useRef(qt);Rn.current=qt;var Vn=_e.useRef(Sl),jn=_e.useRef(!0),Fn=_e.useCallback(function(){jn.current=!0,$t&&Gt(Vn.current),Xt(!1)},[]),Cr=_e.useCallback(function(){if(an){switch(Rn.current){case Gn.Horizontal:Vn.current={left:Pn*an.scrollLeft,top:0};break;case Gn.Both:Vn.current={left:Pn*an.scrollLeft,top:an.scrollTop};break;case Gn.Vertical:default:Vn.current={left:0,top:an.scrollTop}}$t&&!jn.current||Gt(Vn.current)}},[an]);at(function(){Mn(kt.current)}),at(function(){if(an)return an.addEventListener("scroll",Cr,El),function(){an.removeEventListener("scroll",Cr,El)}},[an]);var or=_e.useCallback(function(lr,pr){var Qn=kt.current;if(!Qn)return Promise.resolve();var gr={left:0,top:0};switch(Rn.current){case Gn.Horizontal:gr.left=Pn*lr.left;break;case Gn.Both:gr.left=Pn*lr.left,gr.top=lr.top;break;case Gn.Vertical:default:gr.top=lr.top}return pr?(jn.current=!1,Xt(!0),new Promise(function(dr,Mr){(function(Pr,Or,Dr,Ir,Jr,Ur){Jr===void 0&&(Jr=function(ss){return ss}),Ur===void 0&&(Ur=function(){});var Zr=0,qr=0,Xr=!1;switch(Or){case Gn.Horizontal:qr=Pr.scrollLeft,Zr=0;case Gn.Both:qr=Pr.scrollLeft,Zr=Pr.scrollTop;break;case Gn.Vertical:default:qr=0,Zr=Pr.scrollTop}var Yr=function(){Xr||(Xr=!0,Pr.scrollLeft=Dr.left,Pr.scrollTop=Dr.top,Ur())};if(Math.abs(Zr-Dr.top)<=Gs&&Or===Gn.Vertical)Yr();else if(Math.abs(qr-Dr.left)<=Gs&&Or===Gn.Horizontal)Yr();else{var Kr,is=-1,ps=qr-Dr.left,ds=Zr-Dr.top,ts=function(ss){is===-1&&(is=ss);var ms=ss-is,hr=Math.min(ms/Ir,1),cr=Jr(hr),er={left:qr-ps*cr,top:Zr-ds*cr};switch(Or){case Gn.Horizontal:Pr.scrollLeft=er.left;break;case Gn.Both:Pr.scrollLeft=er.left,Pr.scrollTop=er.top;break;case Gn.Vertical:default:Pr.scrollTop=er.top}Math.abs(er.top-Dr.top)<=Gs&&Math.abs(er.left-Dr.left)<=Gs&&!Xr&&(window.cancelAnimationFrame(Kr),Yr()),ms<Ir?Kr=window.requestAnimationFrame(ts):window.cancelAnimationFrame(Kr)};Kr=window.requestAnimationFrame(ts)}})(Qn,Rn.current,gr,400,Mu,function(){Fn(),dr()})})):new Promise(function(dr,Mr){switch(Rn.current){case Gn.Horizontal:Qn.scrollLeft=gr.left;break;case Gn.Both:Qn.scrollLeft=gr.left,Qn.scrollTop=gr.top;break;case Gn.Vertical:default:Qn.scrollTop=gr.top}dr()})},[kt]);return{scrollOffset:sn,scrollTo:or}},Ns=function(Et,kt,$t){return Math.max(Et,Math.min($t,kt))},Du=function(Et,kt){if(kt!==b.ViewMode.DualPageWithCover)return 0;if(!function(qt){var Xt=qt.length;if(Xt===1)return!1;for(var hn=1;hn<Xt;hn++)if(qt[hn].height!==qt[0].height||qt[hn].width!==qt[0].width)return!0;return!1}(Et))return 2*Et[0].width;var $t=tn(Et.slice(1),2).map(function(qt){return qt.length===2?qt[0].width+qt[1].width:qt[0].width}),Ut=[Et[0].width].concat($t);return Math.max.apply(Math,Ut)},Nu={left:0,top:0},Fu={left:0,top:0},fo={left:0,top:0},Iu={left:0,top:0},Lu={height:0,width:0},wl={left:0,top:0},Cl="data-virtual-index",ju=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Bu=function(Et){var kt=Et.enableSmoothScroll,$t=Et.isRtl,Ut=Et.numberOfItems,qt=Et.parentRef,Xt=Et.setRenderRange,hn=Et.sizes,sn=Et.scrollMode,Gt=Et.viewMode,cn=_e.useState(!1),an=cn[0],Mn=cn[1],Pn=_e.useCallback(function(hr){return Mn(hr)},[]),Rn=_e.useRef(sn);Rn.current=sn;var Vn=_e.useRef(Gt);Vn.current=Gt;var jn=sn===b.ScrollMode.Wrapped||Gt===b.ViewMode.DualPageWithCover||Gt===b.ViewMode.DualPage?Gn.Both:sn===b.ScrollMode.Horizontal?Gn.Horizontal:Gn.Vertical,Fn=Ou({elementRef:qt,enableSmoothScroll:kt,isRtl:$t,scrollDirection:jn,onSmoothScroll:Pn}),Cr=Fn.scrollOffset,or=Fn.scrollTo,lr=function(hr){var cr=hr.elementRef,er=_e.useState(cr.current),ir=er[0],tr=er[1],yr=_e.useRef(!1),xr=_e.useReducer(Pu,{height:0,width:0}),sr=xr[0],Xn=xr[1];return at(function(){cr.current!==ir&&tr(cr.current)}),at(function(){if(ir&&!yr.current){yr.current=!0;var Er=ir.getBoundingClientRect(),Tr=Er.height,zr=Er.width;Xn({rect:{height:Tr,width:zr}})}},[ir]),_e.useEffect(function(){if(ir){var Er=new ResizeObserver(function(Tr,zr){Tr.forEach(function(Br){if(Br.target===ir){var ns=Br.contentRect,as=ns.height,wr=ns.width;Xn({rect:{height:as,width:wr}})}})});return Er.observe(ir),function(){Er.unobserve(ir)}}},[ir]),sr}({elementRef:qt}),pr=_e.useRef({scrollOffset:wl,measurements:[]});pr.current.scrollOffset=Cr;var Qn=_e.useMemo(function(){return Array(Ut).fill(-1)},[]),gr=_e.useState(Qn),dr=gr[0],Mr=gr[1],Pr=_e.useMemo(function(){var hr=new IntersectionObserver(function(cr){cr.forEach(function(er){var ir=er.isIntersecting?er.intersectionRatio:-1,tr=er.target.getAttribute(Cl);if(tr){var yr=parseInt(tr,10);0<=yr&&yr<Ut&&Mr(function(xr){return xr[yr]=ir,function(sr,Xn,Er){for(var Tr,zr=0,Br=Xn.length;zr<Br;zr++)!Tr&&zr in Xn||(Tr||(Tr=Array.prototype.slice.call(Xn,0,zr)),Tr[zr]=Xn[zr]);return sr.concat(Tr||Array.prototype.slice.call(Xn))}([],xr)})}})},{threshold:ju});return hr},[]),Or=_e.useMemo(function(){return sn===b.ScrollMode.Page&&Gt===b.ViewMode.SinglePage?function(hr,cr,er){for(var ir=[],tr=0;tr<hr;tr++){var yr={height:Math.max(cr.height,er[tr].height),width:Math.max(cr.width,er[tr].width)},xr=tr===0?Iu:ir[tr-1].end,sr={left:xr.left+yr.width,top:xr.top+yr.height};ir[tr]={index:tr,start:xr,size:yr,end:sr,visibility:-1}}return ir}(Ut,lr,hn):Gt===b.ViewMode.DualPageWithCover?function(hr,cr,er,ir){for(var tr=[],yr=0,xr=0,sr=fo,Xn=0;Xn<hr;Xn++){var Er=Xn===0?{height:ir===b.ScrollMode.Page?Math.max(cr.height,er[Xn].height):er[Xn].height,width:ir===b.ScrollMode.Page?Math.max(cr.width,er[Xn].width):er[Xn].width}:{height:ir===b.ScrollMode.Page?Math.max(cr.height,er[Xn].height):er[Xn].height,width:Math.max(cr.width/2,er[Xn].width)};ir===b.ScrollMode.Page?sr=Xn===0?fo:{left:Xn%2==0?Er.width:0,top:Math.floor((Xn-1)/2)*Er.height+tr[0].end.top}:Xn===0?(sr=fo,yr=er[0].height,xr=0):Xn%2==1?(sr={left:0,top:yr+=xr},xr=Xn===hr-1?er[Xn].height:Math.max(er[Xn].height,er[Xn+1].height)):sr={left:tr[Xn-1].end.left,top:yr};var Tr={left:sr.left+Er.width,top:sr.top+Er.height};tr[Xn]={index:Xn,start:sr,size:Er,end:Tr,visibility:-1}}return tr}(Ut,lr,hn,sn):Gt===b.ViewMode.DualPage?function(hr,cr,er,ir){for(var tr=[],yr=0,xr=0,sr=Fu,Xn=0;Xn<hr;Xn++){var Er={height:ir===b.ScrollMode.Page?Math.max(cr.height,er[Xn].height):er[Xn].height,width:Math.max(cr.width/2,er[Xn].width)};ir===b.ScrollMode.Page?sr={left:Xn%2==0?0:Er.width,top:Math.floor(Xn/2)*Er.height}:Xn%2==0?(sr={left:0,top:yr+=xr},xr=Xn===hr-1?er[Xn].height:Math.max(er[Xn].height,er[Xn+1].height)):sr={left:tr[Xn-1].end.left,top:yr};var Tr={left:sr.left+Er.width,top:sr.top+Er.height};tr[Xn]={index:Xn,start:sr,size:Er,end:Tr,visibility:-1}}return tr}(Ut,lr,hn,sn):function(hr,cr,er,ir){for(var tr=[],yr=0,xr={left:0,top:0},sr=0,Xn=Nu,Er=0;Er<hr;Er++){var Tr=er[Er];if(Er===0)yr=Tr.width,xr={left:0,top:0},sr=Tr.height;else switch(ir){case b.ScrollMode.Wrapped:(yr+=Tr.width)<cr.width?(Xn={left:tr[Er-1].end.left,top:xr.top},sr=Math.max(sr,Tr.height)):(yr=Tr.width,xr={left:(Xn={left:xr.left,top:xr.top+sr}).left,top:Xn.top},sr=Tr.height);break;case b.ScrollMode.Horizontal:case b.ScrollMode.Vertical:default:Xn=tr[Er-1].end}var zr={left:Xn.left+Tr.width,top:Xn.top+Tr.height};tr[Er]={index:Er,start:Xn,size:Tr,end:zr,visibility:-1}}return tr}(Ut,lr,hn,sn)},[sn,hn,Gt,lr]),Dr=Or[Ut-1]?{height:Or[Ut-1].end.top,width:Or[Ut-1].end.left}:Lu;pr.current.measurements=Or;var Ir=_e.useMemo(function(){var hr=function(Er,Tr,zr,Br){var ns=0;switch(Er){case Gn.Horizontal:ns=Br.left;break;case Gn.Vertical:default:ns=Br.top}var as=Tr.length-1,wr=function(jr,vs,ks,Ks){for(;jr<=vs;){var ws=(jr+vs)/2|0,Fs=Ks(ws);if(Fs<ks)jr=ws+1;else{if(!(Fs>ks))return ws;vs=ws-1}}return jr>0?jr-1:0}(0,as,ns,function(jr){switch(Er){case Gn.Horizontal:return Tr[jr].start.left;case Gn.Both:case Gn.Vertical:default:return Tr[jr].start.top}});if(Er===Gn.Both)for(var rs=Tr[wr].start.top;wr-1>=0&&Tr[wr-1].start.top===rs&&Tr[wr-1].start.left>=Br.left;)wr--;for(var Hr=wr;Hr<=as;){var Wr={top:Tr[Hr].start.top-Br.top,left:Tr[Hr].start.left-Br.left},_i={height:zr.height-Wr.top,width:zr.width-Wr.left};if(Er===Gn.Horizontal&&_i.width<0||Er===Gn.Vertical&&_i.height<0||Er===Gn.Both&&(_i.width<0||_i.height<0))break;Hr++}return{start:wr,end:Hr}}(jn,Or,lr,Cr),cr=hr.start,er=hr.end,ir=dr.slice(Ns(0,Ut,cr),Ns(0,Ut,er)),tr=cr+ir.reduce(function(Er,Tr,zr,Br){return Tr>Br[Er]?zr:Er},0),yr=tr=Ns(0,Ut-1,tr),xr=Xt({endPage:er,numPages:Ut,startPage:cr}),sr=xr.startPage,Xn=xr.endPage;switch(sr=Math.max(sr,0),Xn=Math.min(Xn,Ut-1),Gt){case b.ViewMode.DualPageWithCover:tr>0&&(yr=tr%2==1?tr:tr-1),sr=sr===0?0:sr%2==1?sr:sr-1,Ut-(Xn=Xn%2==1?Xn-1:Xn)<=2&&(Xn=Ut-1);break;case b.ViewMode.DualPage:yr=tr%2==0?tr:tr-1,sr=sr%2==0?sr:sr-1,Xn=Xn%2==1?Xn:Xn-1;break;case b.ViewMode.SinglePage:default:yr=tr}return{startPage:sr,endPage:Xn,maxVisbilityIndex:yr}},[Or,lr,Cr,Gt,dr]),Jr=Ir.startPage,Ur=Ir.endPage,Zr=Ir.maxVisbilityIndex,qr=_e.useMemo(function(){for(var hr=[],cr=function(ir){var tr=Or[ir],yr=it(it({},tr),{visibility:dr[ir]!==void 0?dr[ir]:-1,measureRef:function(xr){xr&&(xr.setAttribute(Cl,"".concat(ir)),Pr.observe(xr))}});hr.push(yr)},er=Jr;er<=Ur;er++)cr(er);return hr},[Jr,Ur,dr,Or]),Xr=_e.useCallback(function(hr,cr){var er=pr.current.measurements[Ns(0,Ut-1,hr)],ir=Rn.current===b.ScrollMode.Page?wl:cr;return er?or({left:ir.left+er.start.left,top:ir.top+er.start.top},kt):Promise.resolve()},[or,kt]),Yr=_e.useCallback(function(hr,cr){var er=pr.current.measurements,ir=er[hr].start,tr=er.find(function(xr){return xr.start.top-ir.top>1e-12});if(!tr)return Promise.resolve();var yr=tr.index;switch(Vn.current){case b.ViewMode.DualPage:yr=yr%2==0?yr:yr+1;break;case b.ViewMode.DualPageWithCover:yr=yr%2==1?yr:yr+1}return Xr(yr,cr)},[]),Kr=_e.useCallback(function(hr,cr){for(var er=pr.current.measurements,ir=er[hr].start,tr=hr,yr=!1,xr=Ut-1;xr>=0;xr--)if(ir.top-er[xr].start.top>1e-12){yr=!0,tr=er[xr].index;break}if(!yr)return Promise.resolve();switch(Vn.current){case b.ViewMode.DualPage:tr=tr%2==0?tr:tr-1;break;case b.ViewMode.DualPageWithCover:tr=tr%2==0?tr-1:tr}return tr===hr&&(tr=hr-1),Xr(tr,cr)},[]),is=_e.useCallback(function(hr,cr){if(Vn.current===b.ViewMode.DualPageWithCover||Vn.current===b.ViewMode.DualPage)return Yr(hr,cr);switch(Rn.current){case b.ScrollMode.Wrapped:return Yr(hr,cr);case b.ScrollMode.Horizontal:case b.ScrollMode.Vertical:default:return Xr(hr+1,cr)}},[]),ps=_e.useCallback(function(hr,cr){if(Vn.current===b.ViewMode.DualPageWithCover||Vn.current===b.ViewMode.DualPage)return Kr(hr,cr);switch(Rn.current){case b.ScrollMode.Wrapped:return Kr(hr,cr);case b.ScrollMode.Horizontal:case b.ScrollMode.Vertical:default:return Xr(hr-1,cr)}},[]),ds=_e.useCallback(function(){return function(hr,cr){switch(cr){case b.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(hr.width,"px")};case b.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(hr.height,"px"),width:"100%"}}}(Dr,Rn.current)},[Dr]),ts=_e.useCallback(function(hr){return function(cr,er,ir){return ir!==b.ScrollMode.Page?{}:{height:"".concat(er.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(cr.start.top,"px)")}}(hr,lr,Rn.current)},[lr]),ss=_e.useCallback(function(hr){return function(cr,er,ir,tr,yr){var xr,sr,Xn,Er,Tr,zr,Br,ns=er?"right":"left",as=er?-1:1,wr=ir.length,rs=cr.start.left*as,Hr=cr.size,Wr=Hr.height,_i=Hr.width;if(tr===b.ViewMode.DualPageWithCover){var jr=yr===b.ScrollMode.Page?0:cr.start.top;return cr.index===0||wr%2==0&&cr.index===wr-1?((xr={height:"".concat(Wr,"px"),minWidth:"".concat(Du(ir,tr),"px"),width:"100%"})[ns]=0,xr.position="absolute",xr.top=0,xr.transform="translate(".concat(rs,"px, ").concat(jr,"px)"),xr):((sr={height:"".concat(Wr,"px"),width:"".concat(_i,"px")})[ns]=0,sr.position="absolute",sr.top=0,sr.transform="translate(".concat(rs,"px, ").concat(jr,"px)"),sr)}if(tr===b.ViewMode.DualPage)return(Xn={height:"".concat(Wr,"px"),width:"".concat(_i,"px")})[ns]=0,Xn.position="absolute",Xn.top=0,Xn.transform="translate(".concat(rs,"px, ").concat(yr===b.ScrollMode.Page?0:cr.start.top,"px)"),Xn;switch(yr){case b.ScrollMode.Horizontal:return(Er={height:"100%",width:"".concat(_i,"px")})[ns]=0,Er.position="absolute",Er.top=0,Er.transform="translateX(".concat(rs,"px)"),Er;case b.ScrollMode.Page:return(Tr={height:"".concat(Wr,"px"),width:"".concat(_i,"px")})[ns]=0,Tr.position="absolute",Tr.top=0,Tr;case b.ScrollMode.Wrapped:return(zr={height:"".concat(Wr,"px"),width:"".concat(_i,"px")})[ns]=0,zr.position="absolute",zr.top=0,zr.transform="translate(".concat(rs,"px, ").concat(cr.start.top,"px)"),zr;case b.ScrollMode.Vertical:default:return(Br={height:"".concat(Wr,"px"),width:"100%"})[ns]=0,Br.position="absolute",Br.top=0,Br.transform="translateY(".concat(cr.start.top,"px)"),Br}}(hr,$t,hn,Vn.current,Rn.current)},[$t,hn]),ms=_e.useCallback(function(hr,cr){var er=pr.current,ir=er.measurements,tr=er.scrollOffset,yr=ir[Ns(0,Ut-1,cr)];if(yr){var xr=Rn.current===b.ScrollMode.Page?{left:yr.start.left,top:yr.start.top}:{left:tr.left*hr,top:tr.top*hr};return or(xr,!1)}return Promise.resolve()},[]);return _e.useEffect(function(){return function(){Pr.disconnect()}},[]),{boundingClientRect:lr,isSmoothScrolling:an,startPage:Jr,endPage:Ur,maxVisbilityIndex:Zr,virtualItems:qr,getContainerStyles:ds,getItemContainerStyles:ts,getItemStyles:ss,scrollToItem:Xr,scrollToNextItem:is,scrollToPreviousItem:ps,zoom:ms}},po=function(Et,kt,$t,Ut,qt,Xt){var hn=$t;switch(!0){case(qt===b.ViewMode.DualPageWithCover&&Xt>=3):case(qt===b.ViewMode.DualPage&&Xt>=3):hn=2*$t;break;default:hn=$t}switch(Ut){case b.SpecialZoomLevel.ActualSize:return 1;case b.SpecialZoomLevel.PageFit:return Math.min((Et.clientWidth-17)/hn,(Et.clientHeight-16)/kt);case b.SpecialZoomLevel.PageWidth:return(Et.clientWidth-17)/hn}},Vu=function(Et){var kt,$t,Ut=Et.getCurrentPage,qt=(kt=50,$t=_e.useRef([]),_e.useEffect(function(){return function(){$t.current=[]}},[]),{push:function(cn){var an=$t.current;an.length+1>kt&&an.shift(),an.push(cn),$t.current=an},map:function(cn){return $t.current.map(function(an){return cn(an)})},pop:function(){var cn=$t.current;if(cn.length===0)return null;var an=cn.pop();return $t.current=cn,an}}),Xt=function(cn){var an=_e.useRef([]);return _e.useEffect(function(){return function(){an.current=[]}},[]),{dequeue:function(){var Mn=an.current;if(Mn.length===0)return null;var Pn=Mn.shift();return an.current=Mn,Pn||null},enqueue:function(Mn){var Pn=an.current;Pn.length+1>cn&&Pn.pop(),an.current=[Mn].concat(Pn)},map:function(Mn){return an.current.map(function(Pn){return Mn(Pn)})}}}(50),hn=function(){var cn=Xt.dequeue();return cn&&qt.push(cn),cn&&cn.pageIndex===Ut()?hn():cn},sn=function(){var cn=qt.pop();return cn&&Xt.enqueue(cn),cn&&cn.pageIndex===Ut()?sn():cn},Gt=_e.useCallback(function(cn){qt.push(cn)},[]);return{getNextDestination:hn,getPreviousDestination:sn,markVisitedDestination:Gt}},Tl=function(Et){var kt=[];return Et.map(function($t){kt=kt.concat($t).concat(function(Ut){var qt=[];return Ut.items&&Ut.items.length>0&&(qt=qt.concat(Tl(Ut.items))),qt}($t))}),kt},Al={capture:!1,passive:!0},$u={height:0,width:0},mo={height:0,width:0},zu=function(Et){var kt=Et.getCurrentPage,$t=Et.getCurrentScrollMode,Ut=Et.jumpToPage,qt=Et.targetRef,Xt=_e.useState(b.FullScreenMode.Normal),hn=Xt[0],sn=Xt[1],Gt=function(){var dr=_e.useState($u),Mr=dr[0],Pr=dr[1],Or=en(function(){Pr({height:window.innerHeight,width:window.innerWidth})},100);return at(function(){return window.addEventListener("resize",Or,Al),function(){window.removeEventListener("resize",Or,Al)}},[]),Mr}(),cn=_e.useState(mo),an=cn[0],Mn=cn[1],Pn=_e.useRef(mo),Rn=_e.useRef(kt()),Vn=_e.useRef(mo),jn=_e.useState(qt.current),Fn=jn[0],Cr=jn[1],or=_e.useRef();at(function(){qt.current!==Fn&&Cr(qt.current)},[]),at(function(){if(Fn){var dr=new ResizeObserver(function(Mr){Mr.forEach(function(Pr){var Or=Pr.target.getBoundingClientRect(),Dr=Or.height,Ir=Or.width;Mn({height:Dr,width:Ir})})});return dr.observe(Fn),function(){dr.unobserve(Fn),dr.disconnect()}}},[Fn]);var lr=_e.useCallback(function(dr){var Mr=Pt();return Mr&&Mr!==dr?(sn(b.FullScreenMode.Normal),At(Mr)):Promise.resolve()},[]),pr=_e.useCallback(function(dr){dr&&bt()&&(Cr(dr),lr(dr).then(function(){or.current=dr,sn(b.FullScreenMode.Entering),function(Mr){St&&Mr[Tt.RequestFullScreen]()}(dr)}))},[]),Qn=_e.useCallback(function(){Pt()&&(sn(b.FullScreenMode.Exitting),At(document))},[]),gr=_e.useCallback(function(){Fn&&Pt()!==Fn&&sn(b.FullScreenMode.Exitting)},[Fn]);return _e.useEffect(function(){switch(hn){case b.FullScreenMode.Entering:or.current&&(or.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),Rn.current=kt(),Pn.current={height:window.innerHeight,width:window.innerWidth};break;case b.FullScreenMode.Entered:$t()===b.ScrollMode.Page?Ut(Rn.current).then(function(){sn(b.FullScreenMode.EnteredCompletely)}):sn(b.FullScreenMode.EnteredCompletely);break;case b.FullScreenMode.Exitting:or.current&&(or.current.style.backgroundColor="",or.current=null),Rn.current=kt();break;case b.FullScreenMode.Exited:sn(b.FullScreenMode.Normal),$t()===b.ScrollMode.Page&&Ut(Rn.current)}},[hn]),_e.useEffect(function(){if(hn!==b.FullScreenMode.Normal)return hn===b.FullScreenMode.Entering&&Gt.height===an.height&&Gt.width===an.width&&Gt.height>0&&Gt.width>0&&(Vn.current.height===0||Gt.height==Vn.current.height)?(Vn.current={height:window.innerHeight,width:window.innerWidth},void sn(b.FullScreenMode.Entered)):void(hn===b.FullScreenMode.Exitting&&Pn.current.height===Gt.height&&Pn.current.width===Gt.width&&Gt.height>0&&Gt.width>0&&sn(b.FullScreenMode.Exited))},[hn,Gt,an]),_e.useEffect(function(){var dr;return dr=gr,St&&document.addEventListener(Tt.FullScreenChange,dr),function(){(function(Mr){St&&document.removeEventListener(Tt.FullScreenChange,Mr)})(gr)}},[Fn]),{enterFullScreenMode:pr,exitFullScreenMode:Qn,fullScreenMode:hn}},Hu={buildPageStyles:function(){return{}},transformSize:function(Et){return Et.size}},As={left:0,top:0},Uu=function(Et){var kt=Et.currentFile,$t=Et.defaultScale,Ut=Et.doc,qt=Et.enableSmoothScroll,Xt=Et.initialPage,hn=Et.initialRotation,sn=Et.initialScale,Gt=Et.pageLayout,cn=Et.pageSizes,an=Et.plugins,Mn=Et.renderPage,Pn=Et.scrollMode,Rn=Et.setRenderRange,Vn=Et.viewMode,jn=Et.viewerState,Fn=Et.onDocumentLoad,Cr=Et.onOpenFile,or=Et.onPageChange,lr=Et.onRotate,pr=Et.onRotatePage,Qn=Et.onZoom,gr=Ut.numPages,dr=Ut.loadingTask.docId,Mr=_e.useContext(Zt).l10n,Pr=_e.useContext(ot),Or=Pr.direction===b.TextDirection.RightToLeft,Dr=_e.useRef(),Ir=_e.useRef(),Jr=_e.useState(Xt),Ur=Jr[0],Zr=Jr[1],qr=_e.useRef(null),Xr=Vu({getCurrentPage:function(){return wr.current.pageIndex}}),Yr=_e.useState(hn),Kr=Yr[0],is=Yr[1],ps=Jt(Kr),ds=_e.useState(!1),ts=ds[0],ss=ds[1],ms=_e.useState(new Map),hr=ms[0],cr=ms[1],er=_e.useState(Pn),ir=er[0],tr=er[1],yr=Jt(ir),xr=_e.useState(Vn),sr=xr[0],Xn=xr[1],Er=Jt(sr),Tr=function(Nn){var Sr=Wt(),kr=_e.useState([]),Lr=kr[0],Nr=kr[1];return _e.useEffect(function(){Nn.getOutline().then(function(_r){if(Sr.current&&_r!==null){var es=Tl(_r);Nr(es)}})},[]),Lr}(Ut),zr=_e.useState(sn),Br=zr[0],ns=zr[1],as=Jt(Br),wr=_e.useRef(jn),rs=_e.useRef(typeof $t=="string"?$t:null),Hr=_e.useRef(-1),Wr=_e.useRef(-1),_i=_e.useRef(Xt),jr=zu({getCurrentPage:function(){return wr.current.pageIndex},getCurrentScrollMode:function(){return wr.current.scrollMode},jumpToPage:function(Nn){return Ss(Nn)},targetRef:Ir}),vs=_e.useState(-1),ks=vs[0],Ks=vs[1],ws=_e.useState(0),Fs=ws[0],Yu=ws[1],ls=Rt({doc:Ut});_e.useEffect(function(){return function(){Dn.clear(),ur.clear()}},[dr]);var Ml=_e.useMemo(function(){return Object.assign({},Hu,Gt)},[]),Ju=_e.useMemo(function(){return Array(gr).fill(0).map(function(Nn,Sr){var kr=[cn[Sr].pageHeight,cn[Sr].pageWidth],Lr=Math.abs(Kr)%180==0?{height:kr[0],width:kr[1]}:{height:kr[1],width:kr[0]},Nr={height:Lr.height*Br,width:Lr.width*Br};return Ml.transformSize({numPages:gr,pageIndex:Sr,size:Nr})})},[Kr,Br]),Vr=Bu({enableSmoothScroll:qt,isRtl:Or,numberOfItems:gr,parentRef:Ir,scrollMode:ir,setRenderRange:Rn,sizes:Ju,viewMode:sr}),Zu=en(function(){!rs.current||wr.current.fullScreenMode!==b.FullScreenMode.Normal||Xt>0&&_i.current===Xt||Cs(rs.current)},200);(function(Nn){var Sr=Nn.targetRef,kr=Nn.onResize;at(function(){var Lr=new ResizeObserver(function(_r){_r.forEach(function(es){kr(es.target)})}),Nr=Sr.current;if(Nr)return Lr.observe(Nr),function(){Lr.unobserve(Nr)}},[])})({targetRef:Ir,onResize:Zu});var xs=function(Nn){var Sr=Nn;an.forEach(function(kr){kr.onViewerStateChange&&(Sr=kr.onViewerStateChange(Sr))}),wr.current=Sr},Qu=function(){return Ir.current},_d=function(){return wr.current},_h=_e.useCallback(function(Nn){Xr.markVisitedDestination(Nn)},[]),vo=_e.useCallback(function(Nn){var Sr=Nn.pageIndex,kr=Nn.bottomOffset,Lr=Nn.leftOffset,Nr=Nn.scaleTo,_r=Ir.current,es=wr.current;return _r&&es?new Promise(function(bs,Co){Hn(Ut,Sr).then(function(Xs){var Es=Xs.getViewport({scale:1}),Ys=0,Vl=(typeof kr=="function"?kr(Es.width,Es.height):kr)||0,Js=(typeof Lr=="function"?Lr(Es.width,Es.height):Lr)||0,_s=es.scale;switch(Nr){case b.SpecialZoomLevel.PageFit:Ys=0,Js=0,Cs(b.SpecialZoomLevel.PageFit);break;case b.SpecialZoomLevel.PageWidth:_s=po(_r,cn[Sr].pageHeight,cn[Sr].pageWidth,b.SpecialZoomLevel.PageWidth,Vn,gr),Ys=(Es.height-Vl)*_s,Js*=_s,Cs(_s);break;default:Ys=(Es.height-Vl)*_s,Js*=_s}switch(es.scrollMode){case b.ScrollMode.Horizontal:Vr.scrollToItem(Sr,{left:Js,top:0}).then(function(){bs()});break;case b.ScrollMode.Vertical:default:Vr.scrollToItem(Sr,{left:0,top:Ys}).then(function(){bs()})}})}):Promise.resolve()},[]),Ol=_e.useCallback(function(Nn){return Xr.markVisitedDestination(Nn),vo(Nn)},[]),_f=_e.useCallback(function(){var Nn=Xr.getNextDestination();return Nn?vo(Nn):Promise.resolve()},[]),ep=_e.useCallback(function(){var Nn=Xr.getPreviousDestination();return Nn?vo(Nn):Promise.resolve()},[]),tp=_e.useCallback(function(){return Vr.scrollToNextItem(wr.current.pageIndex,As)},[]),Ss=_e.useCallback(function(Nn){return 0<=Nn&&Nn<gr?Vr.scrollToItem(Nn,As):Promise.resolve()},[]),np=_e.useCallback(function(){return Vr.scrollToPreviousItem(wr.current.pageIndex,As)},[]),Dl=_e.useCallback(function(Nn){var Sr,kr;(Sr=Nn.name,kr=Sr.split(/\./).pop(),kr?kr.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Lr){var Nr=new FileReader;Nr.readAsArrayBuffer(Nn),Nr.onload=function(){var _r=new Uint8Array(Nr.result);Lr(_r)}}).then(function(Lr){Cr(Nn.name,Lr)})},[Cr]),Nl=_e.useCallback(function(Nn){var Sr=Nn===b.RotateDirection.Backward?-90:90,kr=wr.current.rotation,Lr=kr===360||kr===-360?Sr:kr+Sr;ls.markNotRendered(),is(Lr),xs(it(it({},wr.current),{rotation:Lr})),lr({direction:Nn,doc:Ut,rotation:Lr})},[]),xo=_e.useCallback(function(Nn,Sr){var kr=Sr===b.RotateDirection.Backward?-90:90,Lr=wr.current.pagesRotation,Nr=(Lr.has(Nn)?Lr.get(Nn):hn)+kr,_r=Lr.set(Nn,Nr);cr(_r),ss(function(es){return!es}),xs(it(it({},wr.current),{pagesRotation:_r,rotatedPage:Nn})),pr({direction:Sr,doc:Ut,pageIndex:Nn,rotation:Nr}),ls.markRendering(Nn),Ks(Nn)},[]),Fl=_e.useCallback(function(Nn){xs(it(it({},wr.current),{scrollMode:Nn})),tr(Nn)},[]),Il=_e.useCallback(function(Nn){xs(it(it({},wr.current),{viewMode:Nn})),Xn(Nn)},[]),Cs=_e.useCallback(function(Nn){var Sr=Ir.current,kr=wr.current.pageIndex;if(!(kr<0||kr>=gr)){var Lr=cn[kr].pageHeight,Nr=cn[kr].pageWidth,_r=Sr?typeof Nn=="string"?po(Sr,Lr,Nr,Nn,wr.current.viewMode,gr):Nn:1;rs.current=typeof Nn=="string"?Nn:null,_r!==wr.current.scale&&(Yu(function(es){return es+1}),ls.markNotRendered(),ns(_r),Qn({doc:Ut,scale:_r}),xs(it(it({},wr.current),{scale:_r})))}},[]),rp=_e.useCallback(function(Nn){jr.enterFullScreenMode(Nn)},[]),ip=_e.useCallback(function(){jr.exitFullScreenMode()},[]);_e.useEffect(function(){xs(it(it({},wr.current),{fullScreenMode:jr.fullScreenMode}))},[jr.fullScreenMode]),_e.useEffect(function(){var Nn={enterFullScreenMode:rp,exitFullScreenMode:ip,getPagesContainer:Qu,getViewerState:_d,jumpToDestination:Ol,jumpToNextDestination:_f,jumpToPreviousDestination:ep,jumpToNextPage:tp,jumpToPreviousPage:np,jumpToPage:Ss,openFile:Dl,rotate:Nl,rotatePage:xo,setViewerState:xs,switchScrollMode:Fl,switchViewMode:Il,zoom:Cs};return an.forEach(function(Sr){Sr.install&&Sr.install(Nn)}),function(){an.forEach(function(Sr){Sr.uninstall&&Sr.uninstall(Nn)})}},[dr]),_e.useEffect(function(){Fn({doc:Ut,file:kt}),an.forEach(function(Nn){Nn.onDocumentLoad&&Nn.onDocumentLoad({doc:Ut,file:kt})})},[dr]);var So,bo,Eo,Ll=Vr.boundingClientRect;So=function(){Xt&&Ss(Xt)},bo=Ll.height>0&&Ll.width>0,Eo=_e.useRef(!1),at(function(){bo&&!Eo.current&&(Eo.current=!0,So())},[So,bo]),at(function(){var Nn=wr.current.pageIndex;Nn>-1&&yr!==ir&&Vr.scrollToItem(Nn,As).then(function(){jr.fullScreenMode===b.FullScreenMode.EnteredCompletely&&(qt||ls.markNotRendered(),Hr.current=-1)})},[ir]),at(function(){var Nn=wr.current.pageIndex;Nn>-1&&ps!==Kr&&Vr.scrollToItem(Nn,As)},[Kr]),at(function(){as!=0&&as!=wr.current.scale&&Vr.zoom(wr.current.scale/as,wr.current.pageIndex).then(function(){jr.fullScreenMode===b.FullScreenMode.EnteredCompletely&&(Wr.current=-1)})},[Br]),at(function(){if(Er!==wr.current.viewMode){var Nn=Vr.startPage,Sr=Vr.endPage,kr=Vr.virtualItems;ls.markNotRendered(),ls.setRange(Nn,Sr);for(var Lr=function(_r){var es=kr.find(function(bs){return bs.index===_r});es&&ls.setVisibility(_r,es.visibility)},Nr=Nn;Nr<=Sr;Nr++)Lr(Nr);wo()}},[sr]),at(function(){var Nn=wr.current.pageIndex;Nn>-1&&Er!==sr&&Vr.scrollToItem(Nn,As)},[sr]),at(function(){var Nn=wr.current.pageIndex;Nn>0&&Nn===Xt&&_i.current===Xt&&rs.current&&(_i.current=-1,Cs(rs.current))},[Ur]),_e.useEffect(function(){Vr.isSmoothScrolling||qr.current!==null&&qr.current===Ur||(qr.current=Ur,or({currentPage:Ur,doc:Ut}))},[Ur,Vr.isSmoothScrolling]),_e.useEffect(function(){jr.fullScreenMode===b.FullScreenMode.Entering&&wr.current.scrollMode===b.ScrollMode.Page&&(Hr.current=wr.current.pageIndex),jr.fullScreenMode===b.FullScreenMode.EnteredCompletely&&wr.current.scrollMode===b.ScrollMode.Page&&qt&&(Hr.current=-1),jr.fullScreenMode===b.FullScreenMode.EnteredCompletely&&rs.current&&(Wr.current=wr.current.pageIndex,Cs(rs.current))},[jr.fullScreenMode]),_e.useEffect(function(){if(jr.fullScreenMode!==b.FullScreenMode.Entering&&jr.fullScreenMode!==b.FullScreenMode.Exitting&&!Vr.isSmoothScrolling){var Nn=Vr.startPage,Sr=Vr.endPage,kr=Vr.maxVisbilityIndex,Lr=Vr.virtualItems,Nr=kr,_r=jr.fullScreenMode===b.FullScreenMode.Entered||jr.fullScreenMode===b.FullScreenMode.EnteredCompletely;if(!(_r&&Nr!==Hr.current&&Hr.current>-1||_r&&Nr!==Wr.current&&Wr.current>-1)){Zr(Nr),xs(it(it({},wr.current),{pageIndex:Nr})),ls.setRange(Nn,Sr);for(var es=function(Co){var Xs=Lr.find(function(Es){return Es.index===Co});Xs&&ls.setVisibility(Co,Xs.visibility)},bs=Nn;bs<=Sr;bs++)es(bs);wo()}}},[Vr.startPage,Vr.endPage,Vr.isSmoothScrolling,Vr.maxVisbilityIndex,jr.fullScreenMode,ts,Kr,Br]);var sp=_e.useCallback(function(Nn){ls.markRendered(Nn),wo()},[Fs]),wo=function(){var Nn=ls.getHighestPriorityPage();Nn>-1&&ls.isInRange(Nn)&&(ls.markRendering(Nn),Ks(Nn))},op=function(Nn){var Sr=Ur-1,kr=Ur+1;switch(Nn){case"FirstPage":Ss(0);break;case"LastPage":Ss(gr-1);break;case"NextPage":kr<gr&&Ss(kr);break;case"PrevPage":Sr>=0&&Ss(Sr)}},ap=_e.useCallback(function(){var Nn=Vr.virtualItems,Sr=[];switch(sr){case b.ViewMode.DualPage:Sr=tn(Nn,2);break;case b.ViewMode.DualPageWithCover:Nn.length&&(Sr=Nn[0].index===0?[[Nn[0]]].concat(tn(Nn.slice(1),2)):tn(Nn,2));break;case b.ViewMode.SinglePage:default:Sr=tn(Nn,1)}var kr=Mr&&Mr.core?Mr.core.pageLabel:"Page {{pageIndex}}",Lr={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:Dr,style:{height:"100%"}},children:_e.createElement(_e.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:lt({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":ir===b.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":Or,"rpv-core__inner-pages--single":ir===b.ScrollMode.Page,"rpv-core__inner-pages--vertical":ir===b.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":ir===b.ScrollMode.Wrapped}),ref:Ir,style:{height:"100%",position:"relative"}},children:_e.createElement("div",{"data-testid":"core__inner-current-page-".concat(Ur),style:Object.assign({"--scale-factor":Br},Vr.getContainerStyles())},Sr.map(function(Nr){return _e.createElement("div",{className:lt({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":ir===b.ScrollMode.Page}),style:Vr.getItemContainerStyles(Nr[0]),key:"".concat(Nr[0].index,"-").concat(sr)},Nr.map(function(_r){var es=sr===b.ViewMode.DualPageWithCover&&(_r.index===0||gr%2==0&&_r.index===gr-1);return _e.createElement("div",{"aria-label":kr.replace("{{pageIndex}}","".concat(_r.index+1)),className:lt({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":sr===b.ViewMode.DualPage&&_r.index%2==0,"rpv-core__inner-page--dual-odd":sr===b.ViewMode.DualPage&&_r.index%2==1,"rpv-core__inner-page--dual-cover":es,"rpv-core__inner-page--dual-cover-even":sr===b.ViewMode.DualPageWithCover&&!es&&_r.index%2==0,"rpv-core__inner-page--dual-cover-odd":sr===b.ViewMode.DualPageWithCover&&!es&&_r.index%2==1,"rpv-core__inner-page--single":sr===b.ViewMode.SinglePage&&ir===b.ScrollMode.Page}),role:"region",key:"".concat(_r.index,"-").concat(sr),style:Object.assign({},Vr.getItemStyles(_r),Ml.buildPageStyles({numPages:gr,pageIndex:_r.index,scrollMode:ir,viewMode:sr}))},_e.createElement(Ru,{doc:Ut,measureRef:_r.measureRef,outlines:Tr,pageIndex:_r.index,pageRotation:hr.has(_r.index)?hr.get(_r.index):0,pageSize:cn[_r.index],plugins:an,renderPage:Mn,renderQueueKey:Fs,rotation:Kr,scale:Br,shouldRender:ks===_r.index,viewMode:sr,onExecuteNamedAction:op,onJumpFromLinkAnnotation:_h,onJumpToDest:Ol,onRenderCompleted:sp,onRotatePage:xo}))}))}))}};return an.forEach(function(Nr){Nr.renderViewer&&(Lr=Nr.renderViewer({containerRef:Dr,doc:Ut,pagesContainerRef:Ir,pagesRotation:hr,pageSizes:cn,rotation:Kr,slot:Lr,themeContext:Pr,jumpToPage:Ss,openFile:Dl,rotate:Nl,rotatePage:xo,switchScrollMode:Fl,switchViewMode:Il,zoom:Cs}))}),Lr},[an,Vr]),Bl=_e.useCallback(function(Nn){return _e.createElement("div",it({},Nn.attrs,{style:Nn.attrs&&Nn.attrs.style?Nn.attrs.style:{}}),Nn.children,Nn.subSlot&&Bl(Nn.subSlot))},[]);return Bl(ap())},_l=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Wu=function(Et){var kt=Et.defaultScale,$t=Et.doc,Ut=Et.render,qt=Et.scrollMode,Xt=Et.viewMode,hn=_e.useRef(),sn=_e.useState({pageSizes:[],scale:0}),Gt=sn[0],cn=sn[1];return _e.useLayoutEffect(function(){var an=Array($t.numPages).fill(0).map(function(Mn,Pn){return new Promise(function(Rn,Vn){Hn($t,Pn).then(function(jn){var Fn=jn.getViewport({scale:1});Rn({pageHeight:Fn.height,pageWidth:Fn.width,rotation:Fn.rotation})})})});Promise.all(an).then(function(Mn){var Pn=hn.current;if(Pn&&Mn.length!==0){var Rn=Mn[0].pageWidth,Vn=Mn[0].pageHeight,jn=Pn.parentElement,Fn=(jn.clientWidth-45)/Rn,Cr=(jn.clientHeight-45)/Vn,or=Fn;switch(qt){case b.ScrollMode.Horizontal:or=Math.min(Fn,Cr);break;case b.ScrollMode.Vertical:default:or=Fn}var lr,pr,Qn=kt?typeof kt=="string"?po(jn,Vn,Rn,kt,Xt,$t.numPages):kt:(lr=or,(pr=_l.findIndex(function(gr){return gr>=lr}))===-1||pr===0?lr:_l[pr-1]);cn({pageSizes:Mn,scale:Qn})}})},[$t.loadingTask.docId]),Gt.pageSizes.length===0||Gt.scale===0?_e.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:hn},_e.createElement(pt,null)):Ut(Gt.pageSizes,Gt.scale)},qs=function(){},go=function(Et){function kt($t,Ut){var qt=Et.call(this)||this;return qt.verifyPassword=$t,qt.passwordStatus=Ut,qt}return nt(kt,Et),kt}(qs),Gu=function(Et){var kt=Et.passwordStatus,$t=Et.renderProtectedView,Ut=Et.verifyPassword,qt=Et.onDocumentAskPassword,Xt=_e.useContext(Zt).l10n,hn=_e.useState(""),sn=hn[0],Gt=hn[1],cn=_e.useContext(ot).direction===b.TextDirection.RightToLeft,an=function(){return Ut(sn)};return _e.useEffect(function(){qt&&qt({verifyPassword:Ut})},[]),$t?$t({passwordStatus:kt,verifyPassword:Ut}):_e.createElement("div",{className:"rpv-core__asking-password-wrapper"},_e.createElement("div",{className:lt({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":cn})},_e.createElement("div",{className:"rpv-core__asking-password-message"},kt===b.PasswordStatus.RequiredPassword&&Xt.core.askingPassword.requirePasswordToOpen,kt===b.PasswordStatus.WrongPassword&&Xt.core.wrongPassword.tryAgain),_e.createElement("div",{className:"rpv-core__asking-password-body"},_e.createElement("div",{className:lt({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!cn,"rpv-core__asking-password-input--rtl":cn})},_e.createElement(mt,{testId:"core__asking-password-input",type:"password",value:sn,onChange:Gt,onKeyDown:function(Mn){Mn.key==="Enter"&&an()}})),_e.createElement(ht,{onClick:an},Xt.core.askingPassword.submit))))},Rl=function(Et){function kt($t){var Ut=Et.call(this)||this;return Ut.doc=$t,Ut}return nt(kt,Et),kt}(qs),Pl=function(Et){function kt($t){var Ut=Et.call(this)||this;return Ut.error=$t,Ut}return nt(kt,Et),kt}(qs),yo=function(Et){function kt($t){var Ut=Et.call(this)||this;return Ut.percentages=$t,Ut}return nt(kt,Et),kt}(qs),qu=function(Et){var kt=Et.characterMap,$t=Et.file,Ut=Et.httpHeaders,qt=Et.render,Xt=Et.renderError,hn=Et.renderLoader,sn=Et.renderProtectedView,Gt=Et.transformGetDocumentParams,cn=Et.withCredentials,an=Et.onDocumentAskPassword,Mn=_e.useContext(ot).direction===b.TextDirection.RightToLeft,Pn=_e.useState(new yo(0)),Rn=Pn[0],Vn=Pn[1],jn=_e.useRef(""),Fn=Wt();return _e.useEffect(function(){jn.current="",Vn(new yo(0));var Cr=new et.PDFWorker({name:"PDFWorker_".concat(Date.now())}),or=Object.assign({httpHeaders:Ut,withCredentials:cn,worker:Cr},typeof $t=="string"?{url:$t}:{data:$t},kt?{cMapUrl:kt.url,cMapPacked:kt.isCompressed}:{}),lr=Gt?Gt(or):or,pr=et.getDocument(lr);return pr.onPassword=function(Qn,gr){switch(gr){case et.PasswordResponses.NEED_PASSWORD:Fn.current&&Vn(new go(Qn,b.PasswordStatus.RequiredPassword));break;case et.PasswordResponses.INCORRECT_PASSWORD:Fn.current&&Vn(new go(Qn,b.PasswordStatus.WrongPassword))}},pr.onProgress=function(Qn){var gr=Qn.total>0?Math.min(100,100*Qn.loaded/Qn.total):100;Fn.current&&jn.current===""&&Vn(new yo(gr))},pr.promise.then(function(Qn){jn.current=Qn.loadingTask.docId,Fn.current&&Vn(new Rl(Qn))},function(Qn){return Fn.current&&!Cr.destroyed&&Vn(new Pl({message:Qn.message||"Cannot load document",name:Qn.name}))}),function(){pr.destroy(),Cr.destroy()}},[$t]),Rn instanceof go?_e.createElement(Gu,{passwordStatus:Rn.passwordStatus,renderProtectedView:sn,verifyPassword:Rn.verifyPassword,onDocumentAskPassword:an}):Rn instanceof Rl?qt(Rn.doc):Rn instanceof Pl?Xt?Xt(Rn.error):_e.createElement("div",{className:lt({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Mn})},_e.createElement("div",{className:"rpv-core__doc-error-text"},Rn.error.message)):_e.createElement("div",{"data-testid":"core__doc-loading",className:lt({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Mn})},hn?hn(Rn.percentages):_e.createElement(pt,null))},Ku=function(Et,kt){var $t=_e.useMemo(function(){return Et==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Et},[]),Ut=_e.useState($t),qt=Ut[0],Xt=Ut[1],hn=Jt(qt);return _e.useEffect(function(){if(Et==="auto"){var sn=window.matchMedia("(prefers-color-scheme: dark)"),Gt=function(cn){Xt(cn.matches?"dark":"light")};return sn.addEventListener("change",Gt),function(){return sn.removeEventListener("change",Gt)}}},[]),_e.useEffect(function(){qt!==hn&&kt&&kt(qt)},[qt]),_e.useEffect(function(){Et!==qt&&Xt(Et)},[Et]),{currentTheme:qt,setCurrentTheme:Xt}},Xu=function(Et){return{startPage:Et.startPage-3,endPage:Et.endPage+3}};b.Button=function(Et){var kt=Et.children,$t=Et.testId,Ut=Et.onClick,qt=_e.useContext(ot).direction===b.TextDirection.RightToLeft,Xt=$t?{"data-testid":$t}:{};return _e.createElement("button",it({className:lt({"rpv-core__button":!0,"rpv-core__button--rtl":qt}),type:"button",onClick:Ut},Xt),kt)},b.Icon=dt,b.LazyRender=function(Et){var kt=Et.attrs,$t=Et.children,Ut=Et.testId,qt=_e.useState(!1),Xt=qt[0],hn=qt[1],sn=Ut?it(it({},kt),{"data-testid":Ut}):kt,Gt=ut({once:!0,onVisibilityChanged:function(cn){cn.isVisible&&hn(!0)}});return _e.createElement("div",it({ref:Gt},sn),Xt&&$t)},b.LocalizationContext=Zt,b.Menu=function(Et){var kt=Et.children,$t=_e.useRef(),Ut=_e.useRef([]),qt=_e.useContext(ot).direction===b.TextDirection.RightToLeft,Xt=function(sn){if($t.current)switch(sn.key){case"Tab":sn.preventDefault();break;case"ArrowDown":sn.preventDefault(),hn(function(Gt,cn){return cn+1});break;case"ArrowUp":sn.preventDefault(),hn(function(Gt,cn){return cn-1});break;case"End":sn.preventDefault(),hn(function(Gt,cn){return Gt.length-1});break;case"Home":sn.preventDefault(),hn(function(Gt,cn){return 0})}},hn=function(sn){if($t.current){var Gt=Ut.current,cn=Gt.findIndex(function(Mn){return Mn.getAttribute("tabindex")==="0"}),an=Math.min(Gt.length-1,Math.max(0,sn(Gt,cn)));cn>=0&&cn<=Gt.length-1&&Gt[cn].setAttribute("tabindex","-1"),Gt[an].setAttribute("tabindex","0"),Gt[an].focus()}};return at(function(){var sn=$t.current;if(sn){var Gt=function(cn){var an=[];return cn.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Mn){if(Mn instanceof HTMLElement){var Pn=Mn.parentElement;(Pn===cn||window.getComputedStyle(Pn).display!=="none")&&an.push(Mn)}}),an}(sn);Ut.current=Gt}},[]),at(function(){return document.addEventListener("keydown",Xt),function(){document.removeEventListener("keydown",Xt)}},[]),_e.createElement("div",{ref:$t,"aria-orientation":"vertical",className:lt({"rpv-core__menu":!0,"rpv-core__menu--rtl":qt}),role:"menu",tabIndex:0},kt)},b.MenuDivider=function(){return _e.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},b.MenuItem=function(Et){var kt=Et.checked,$t=kt!==void 0&&kt,Ut=Et.children,qt=Et.icon,Xt=qt===void 0?null:qt,hn=Et.isDisabled,sn=hn!==void 0&&hn,Gt=Et.testId,cn=Et.onClick,an=_e.useContext(ot).direction===b.TextDirection.RightToLeft,Mn=Gt?{"data-testid":Gt}:{};return _e.createElement("button",it({className:lt({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":sn,"rpv-core__menu-item--ltr":!an,"rpv-core__menu-item--rtl":an}),role:"menuitem",tabIndex:-1,type:"button",onClick:cn},Mn),_e.createElement("div",{className:lt({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!an,"rpv-core__menu-item-icon--rtl":an})},Xt),_e.createElement("div",{className:lt({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!an,"rpv-core__menu-item-label--rtl":an})},Ut),_e.createElement("div",{className:lt({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!an,"rpv-core__menu-item-check--rtl":an})},$t&&_e.createElement(ct,null)))},b.MinimalButton=function(Et){var kt=Et.ariaLabel,$t=kt===void 0?"":kt,Ut=Et.ariaKeyShortcuts,qt=Ut===void 0?"":Ut,Xt=Et.children,hn=Et.isDisabled,sn=hn!==void 0&&hn,Gt=Et.isSelected,cn=Gt!==void 0&&Gt,an=Et.testId,Mn=Et.onClick,Pn=_e.useContext(ot).direction===b.TextDirection.RightToLeft,Rn=an?{"data-testid":an}:{};return _e.createElement("button",it({"aria-label":$t},qt&&{"aria-keyshortcuts":qt},sn&&{"aria-disabled":!0},{className:lt({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":sn,"rpv-core__minimal-button--rtl":Pn,"rpv-core__minimal-button--selected":cn}),type:"button",onClick:Mn},Rn),Xt)},b.Modal=function(Et){var kt=Et.ariaControlsSuffix,$t=Et.closeOnClickOutside,Ut=Et.closeOnEscape,qt=Et.content,Xt=Et.isOpened,hn=Xt!==void 0&&Xt,sn=Et.target,Gt=kt||"".concat(wt());return _e.createElement(mn,{target:sn?function(cn,an){return _e.createElement("div",{"aria-expanded":an?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(Gt)},sn(cn,an))}:null,content:function(cn){return _e.createElement(Lt,null,_e.createElement(Nt,{ariaControlsSuffix:Gt,closeOnClickOutside:$t,closeOnEscape:Ut,onToggle:cn},qt(cn)))},isOpened:hn})},b.Popover=function(Et){var kt=Et.ariaHasPopup,$t=kt===void 0?"dialog":kt,Ut=Et.ariaControlsSuffix,qt=Et.closeOnClickOutside,Xt=Et.closeOnEscape,hn=Et.content,sn=Et.lockScroll,Gt=sn===void 0||sn,cn=Et.offset,an=Et.position,Mn=Et.target,Pn=Yt(!1),Rn=Pn.opened,Vn=Pn.toggle,jn=_e.useRef(),Fn=_e.useMemo(function(){return Ut||"".concat(wt())},[]);return _e.createElement("div",{ref:jn,"aria-expanded":Rn?"true":"false","aria-haspopup":$t,"aria-controls":"rpv-core__popver-body-".concat(Fn)},Mn(Vn,Rn),Rn&&_e.createElement(_e.Fragment,null,Gt&&_e.createElement(Sn,{closeOnEscape:Xt,onClose:Vn}),_e.createElement(dn,{ariaControlsSuffix:Fn,closeOnClickOutside:qt,offset:cn,position:an,targetRef:jn,onClose:Vn},hn(Vn))))},b.PrimaryButton=ht,b.ProgressBar=function(Et){var kt=Et.progress,$t=_e.useContext(ot).direction===b.TextDirection.RightToLeft;return _e.createElement("div",{className:lt({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":$t})},_e.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(kt,"%")}},kt,"%"))},b.Separator=function(){return _e.createElement("div",{className:"rpv-core__separator"})},b.Spinner=pt,b.Splitter=function(Et){var kt=Et.constrain,$t=_e.useContext(ot).direction===b.TextDirection.RightToLeft,Ut=_e.useRef(),qt=_e.useRef(),Xt=_e.useRef(),hn=_e.useRef(0),sn=_e.useRef(0),Gt=_e.useRef(0),cn=_e.useRef(0),an={capture:!0},Mn=function(Rn){var Vn=Ut.current,jn=qt.current,Fn=Xt.current;if(Vn&&jn&&Fn){var Cr=cn.current,or=Rn.clientX-hn.current,lr=Gt.current+($t?-or:or),pr=Vn.parentElement.getBoundingClientRect().width,Qn=100*lr/pr;if(Vn.classList.add("rpv-core__splitter--resizing"),kt){var gr=pr-lr-Cr;if(!kt({firstHalfPercentage:Qn,firstHalfSize:lr,secondHalfPercentage:100*gr/pr,secondHalfSize:gr}))return}jn.style.width="".concat(Qn,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),jn.classList.add("rpv-core__splitter-sibling--resizing"),Fn.classList.add("rpv-core__splitter-sibling--resizing")}},Pn=function(Rn){var Vn=Ut.current,jn=qt.current,Fn=Xt.current;Vn&&jn&&Fn&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Vn.classList.remove("rpv-core__splitter--resizing"),jn.classList.remove("rpv-core__splitter-sibling--resizing"),Fn.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Mn,an),document.removeEventListener("mouseup",Pn,an))};return _e.useEffect(function(){var Rn=Ut.current;Rn&&(cn.current=Rn.getBoundingClientRect().width,qt.current=Rn.previousElementSibling,Xt.current=Rn.nextElementSibling)},[]),_e.createElement("div",{ref:Ut,className:"rpv-core__splitter",onMouseDown:function(Rn){var Vn=qt.current;Vn&&(hn.current=Rn.clientX,sn.current=Rn.clientY,Gt.current=Vn.getBoundingClientRect().width,document.addEventListener("mousemove",Mn,an),document.addEventListener("mouseup",Pn,an))}})},b.TextBox=mt,b.ThemeContext=ot,b.Tooltip=function(Et){var kt=Et.ariaControlsSuffix,$t=Et.content,Ut=Et.offset,qt=Et.position,Xt=Et.target,hn=Yt(!1),sn=hn.opened,Gt=hn.toggle,cn=_e.useRef(),an=_e.useRef(),Mn=_e.useMemo(function(){return kt||"".concat(wt())},[]);_t(function(){cn.current&&document.activeElement&&cn.current.contains(document.activeElement)&&Rn()});var Pn=function(){Gt(b.ToggleStatus.Open)},Rn=function(){Gt(b.ToggleStatus.Close)};return _e.createElement(_e.Fragment,null,_e.createElement("div",{ref:cn,"aria-describedby":"rpv-core__tooltip-body-".concat(Mn),onBlur:function(Vn){Vn.relatedTarget instanceof HTMLElement&&Vn.currentTarget.parentElement&&Vn.currentTarget.parentElement.contains(Vn.relatedTarget)?an.current&&(an.current.style.display="none"):Rn()},onFocus:Pn,onMouseEnter:Pn,onMouseLeave:Rn},Xt),sn&&_e.createElement(_n,{ariaControlsSuffix:Mn,contentRef:an,offset:Ut,position:qt,targetRef:cn},$t()))},b.Viewer=function(Et){var kt=Et.characterMap,$t=Et.defaultScale,Ut=Et.enableSmoothScroll,qt=Ut===void 0||Ut,Xt=Et.fileUrl,hn=Et.httpHeaders,sn=hn===void 0?{}:hn,Gt=Et.initialPage,cn=Gt===void 0?0:Gt,an=Et.pageLayout,Mn=Et.initialRotation,Pn=Mn===void 0?0:Mn,Rn=Et.localization,Vn=Et.plugins,jn=Vn===void 0?[]:Vn,Fn=Et.renderError,Cr=Et.renderLoader,or=Et.renderPage,lr=Et.renderProtectedView,pr=Et.scrollMode,Qn=pr===void 0?b.ScrollMode.Vertical:pr,gr=Et.setRenderRange,dr=gr===void 0?Xu:gr,Mr=Et.transformGetDocumentParams,Pr=Et.theme,Or=Pr===void 0?{direction:b.TextDirection.LeftToRight,theme:"light"}:Pr,Dr=Et.viewMode,Ir=Dr===void 0?b.ViewMode.SinglePage:Dr,Jr=Et.withCredentials,Ur=Jr!==void 0&&Jr,Zr=Et.onDocumentAskPassword,qr=Et.onDocumentLoad,Xr=qr===void 0?function(){}:qr,Yr=Et.onPageChange,Kr=Yr===void 0?function(){}:Yr,is=Et.onRotate,ps=is===void 0?function(){}:is,ds=Et.onRotatePage,ts=ds===void 0?function(){}:ds,ss=Et.onSwitchTheme,ms=ss===void 0?function(){}:ss,hr=Et.onZoom,cr=hr===void 0?function(){}:hr,er=_e.useState({data:Xt,name:typeof Xt=="string"?Xt:"",shouldLoad:!1}),ir=er[0],tr=er[1],yr=function(Hr,Wr){tr({data:Wr,name:Hr,shouldLoad:!0})},xr=_e.useState(!1),sr=xr[0],Xn=xr[1],Er=Jt(ir);_e.useEffect(function(){var Hr,Wr,_i,jr;Hr=Er.data,jr=typeof(Wr=Xt),(_i=typeof Hr)=="string"&&jr==="string"&&Hr===Wr||_i==="object"&&jr==="object"&&Hr.length===Wr.length&&Hr.every(function(vs,ks){return vs===Wr[ks]})||tr({data:Xt,name:typeof Xt=="string"?Xt:"",shouldLoad:sr})},[Xt,sr]);var Tr=ut({onVisibilityChanged:function(Hr){Xn(Hr.isVisible),Hr.isVisible&&tr(function(Wr){return Object.assign({},Wr,{shouldLoad:!0})})}}),zr=typeof Or=="string"?{direction:b.TextDirection.LeftToRight,theme:Or}:Or,Br=_e.useState(Rn||jt),ns=Br[0],as=Br[1],wr={l10n:ns,setL10n:as},rs=Object.assign({},{direction:zr.direction},Ku(zr.theme||"light",ms));return _e.useEffect(function(){Rn&&as(Rn)},[Rn]),_e.createElement(Zt.Provider,{value:wr},_e.createElement(ot.Provider,{value:rs},_e.createElement("div",{ref:Tr,className:"rpv-core__viewer rpv-core__viewer--".concat(rs.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},ir.shouldLoad&&_e.createElement(qu,{characterMap:kt,file:ir.data,httpHeaders:sn,render:function(Hr){return _e.createElement(Wu,{defaultScale:$t,doc:Hr,render:function(Wr,_i){return _e.createElement(Uu,{currentFile:{data:ir.data,name:ir.name},defaultScale:$t,doc:Hr,enableSmoothScroll:qt,initialPage:cn,initialRotation:Pn,initialScale:_i,pageLayout:an,pageSizes:Wr,plugins:jn,renderPage:or,scrollMode:Qn,setRenderRange:dr,viewMode:Ir,viewerState:{file:ir,fullScreenMode:b.FullScreenMode.Normal,pageIndex:-1,pageHeight:Wr[0].pageHeight,pageWidth:Wr[0].pageWidth,pagesRotation:new Map,rotation:Pn,scale:_i,scrollMode:Qn,viewMode:Ir},onDocumentLoad:Xr,onOpenFile:yr,onPageChange:Kr,onRotate:ps,onRotatePage:ts,onZoom:cr})},scrollMode:Qn,viewMode:Ir})},renderError:Fn,renderLoader:Cr,renderProtectedView:lr,transformGetDocumentParams:Mr,withCredentials:Ur,onDocumentAskPassword:Zr}))))},b.Worker=function(Et){var kt=Et.children,$t=Et.workerUrl;return et.GlobalWorkerOptions.workerSrc=$t,_e.createElement(_e.Fragment,null,kt)},b.chunk=tn,b.classNames=lt,b.createStore=function(Et){var kt=Et||{},$t={},Ut=function(Xt,hn){var sn;kt=it(it({},kt),((sn={})[Xt]=hn,sn)),($t[Xt]||[]).forEach(function(Gt){return Gt(kt[Xt])})},qt=function(Xt){return kt[Xt]};return{subscribe:function(Xt,hn){$t[Xt]=($t[Xt]||[]).concat(hn)},unsubscribe:function(Xt,hn){$t[Xt]=($t[Xt]||[]).filter(function(sn){return sn!==hn})},update:function(Xt,hn){Ut(Xt,hn)},updateCurrentValue:function(Xt,hn){var sn=qt(Xt);sn!==void 0&&Ut(Xt,hn(sn))},get:function(Xt){return qt(Xt)}}},b.getDestination=Zn,b.getPage=Hn,b.isFullScreenEnabled=bt,b.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},b.useDebounceCallback=en,b.useIntersectionObserver=ut,b.useIsMounted=Wt,b.useIsomorphicLayoutEffect=at,b.usePrevious=Jt,b.useRenderQueue=Rt})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib.exports=core_min;var libExports=lib.exports;function RenderFilePreview({url:b,formatFileSize:g,token:_,isImage:j,openImageModal:$,filename:_e,isVideo:et,fileExtension:tt,isAudio:nt,isPDF:rt,isZip:it,isCSV:st,isExcel:ot,ContentWrapper:lt}){var ct;const at=b,ut=g((ct=_.content)==null?void 0:ct.size);if(j&&b)return jsxRuntimeExports.jsx(lt,{children:jsxRuntimeExports.jsxs("div",{className:"max-w-xs w-full min-h-full overflow-hidden rounded-[14px] cursor-pointer relative group",onClick:()=>$(b,_e),children:[jsxRuntimeExports.jsx("img",{src:b,alt:_e,className:"w-full h-auto transition-opacity group-hover:opacity-90"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-lg"})]})});if(et&&at){const ht=pt=>({mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mov:"video/quicktime",avi:"video/x-msvideo",MOV:"video/quicktime"})[pt]||`video/${pt}`;return jsxRuntimeExports.jsx(lt,{children:jsxRuntimeExports.jsx("div",{className:"max-w-xs w-full min-h-full overflow-hidden rounded-[14px]",children:jsxRuntimeExports.jsxs("video",{controls:!0,className:"w-full h-auto",children:[jsxRuntimeExports.jsx("source",{src:at,type:ht(tt)}),"Your browser does not support the video tag."]})})})}if(nt&&at)return jsxRuntimeExports.jsx(lt,{children:jsxRuntimeExports.jsx(AudioPlayer,{audioUrl:at,filename:_e,fileSize:ut})});if(rt&&at)return jsxRuntimeExports.jsx(lt,{children:jsxRuntimeExports.jsx("div",{className:"rounded-[14px] max-w-xs w-full overflow-hidden",children:jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:jsxRuntimeExports.jsx("div",{className:"h-[350px]",children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:at,defaultScale:libExports.SpecialZoomLevel.PageWidth,scrollMode:libExports.ScrollMode.Page})})})})});const dt=(ht,pt,mt)=>jsxRuntimeExports.jsx(lt,{children:jsxRuntimeExports.jsxs("div",{className:"flex max-w-xs w-full p-3 flex-col gap-3 rounded-[14px] bg-white border border-solid border-[#1919191a]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center self-stretch gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center self-stretch gap-3 flex-nowrap",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded border border-solid border-[#1919191a] flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-base",children:ht})}),jsxRuntimeExports.jsx("div",{className:`inline-block items-center gap-1.5 text-xs font-medium ${mt} whitespace-nowrap max-w-[137px] truncate overflow-hidden`,children:_e})]}),at&&jsxRuntimeExports.jsxs("a",{href:at,target:"_blank",rel:"noopener noreferrer",className:"bg-transparent border border-solid border-[#1919191A] text-xs text-[#191919] px-2 py-1 rounded-full",children:["Open ",pt]})]}),jsxRuntimeExports.jsx("div",{className:"inline-block self-stretch text-[#7e7e7e] max-w-xs truncate overflow-hidden text-sm",children:ut&&`File size: ${ut}`})]})});return it?dt("📦","Archive","text-amber-500"):st?dt("📊","CSV","text-green-500"):ot?dt("📑","Excel","text-emerald-500"):dt("📎","File","text-gray-500")}function TokenPreviewSpecial({currentIndex:b,allTokens:g,onTokenSwipe:_,setIsDraggingDisabled:j}){const $=reactExports.useRef(null),[_e,et]=reactExports.useState(!1),[tt,nt]=reactExports.useState({url:"",alt:""});reactExports.useEffect(()=>{$.current&&$.current.swiper.slideTo(b)},[b]);const rt=(ot,lt)=>{nt({url:ot,alt:lt}),et(!0)},it=()=>et(!1),st=({token:ot})=>{var St;const lt=((St=ot.content)==null?void 0:St.name)||ot.name||"",ut=(Tt=>{var bt;return((bt=Tt.split(".").pop())==null?void 0:bt.toLowerCase())||""})(lt),dt=ot.type==="LINK"||!ut&&(ot.url??"").startsWith("http"),ct=/^(jpg|jpeg|png|gif|bmp|webp|heic)$/i.test(ut),ht=/^(mp4|webm|ogg|mov|avi|MOV)$/i.test(ut),pt=/^(mp3|wav|ogg|m4a)$/i.test(ut),mt=/^pdf$/i.test(ut),ft=/^(zip|rar|7z)$/i.test(ut),gt=/^csv$/i.test(ut),xt=/^(xls|xlsx)$/i.test(ut),vt=Tt=>{if(!Tt)return"";const bt=["B","KB","MB","GB"];let At=Tt,Pt=0;for(;At>=1024&&Pt<bt.length-1;)At/=1024,Pt++;return`${At.toFixed(1)} ${bt[Pt]}`};return dt?jsxRuntimeExports.jsx(RenderLinkPreview,{token:ot,setFaviconError:()=>{},faviconError:!1,openImageModal:rt,ContentWrapper:({children:Tt})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Tt}),getDisplayUrl:Tt=>{const{hostname:bt,origin:At}=new URL(Tt);return{hostname:bt,origin:At}}}):jsxRuntimeExports.jsx(RenderFilePreview,{url:(ot==null?void 0:ot.cloudFrontDownloadLink)??"",filename:lt,fileExtension:ut,token:ot,isImage:ct,isVideo:ht,isAudio:pt,isPDF:mt,isZip:ft,isCSV:gt,isExcel:xt,formatFileSize:vt,openImageModal:rt,ContentWrapper:({children:Tt})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Tt})})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex flex-col w-full bg-white rounded-2xl border relative overflow-hidden",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:jsxRuntimeExports.jsx(Swiper,{ref:$,spaceBetween:0,slidesPerView:1,initialSlide:b,onSlideChange:ot=>{ot.activeIndex!==b&&_(ot.activeIndex)},className:"w-full rounded-none",children:g.map((ot,lt)=>jsxRuntimeExports.jsx(SwiperSlide,{className:"relative",children:jsxRuntimeExports.jsx(st,{token:ot})},lt))})}),jsxRuntimeExports.jsx(ImageModal,{isOpen:_e,onClose:it,imageUrl:tt.url,altText:tt.alt})]})}const imageIcon="/assets/imageIcon-mvvZ1frE.svg",videoIcon="/assets/videoIcon-_LGTn3b4.svg",audioIcon="data:image/svg+xml,%3csvg%20width='12'%20height='13'%20viewBox='0%200%2012%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.90039%2012.8926C4.63672%2012.8926%204.4375%2012.6816%204.4375%2012.418V1.12695C4.4375%200.863281%204.63672%200.652344%204.90039%200.652344C5.16992%200.652344%205.38086%200.863281%205.38086%201.12695V12.418C5.38086%2012.6816%205.16992%2012.8926%204.90039%2012.8926ZM8.84961%2011.5918C8.57422%2011.5918%208.375%2011.3809%208.375%2011.123V2.42188C8.375%202.16406%208.57422%201.94727%208.84961%201.94727C9.11328%201.94727%209.31836%202.16406%209.31836%202.42188V11.123C9.31836%2011.3809%209.11328%2011.5918%208.84961%2011.5918ZM2.93164%2010.5312C2.66797%2010.5312%202.46289%2010.3203%202.46289%2010.0566V3.48828C2.46289%203.22461%202.66797%203.00781%202.93164%203.00781C3.20117%203.00781%203.40625%203.22461%203.40625%203.48828V10.0566C3.40625%2010.3203%203.20117%2010.5312%202.93164%2010.5312ZM6.875%209.81641C6.60547%209.81641%206.40625%209.61133%206.40625%209.34766V4.19727C6.40625%203.93359%206.60547%203.72266%206.875%203.72266C7.14453%203.72266%207.34961%203.93359%207.34961%204.19727V9.34766C7.34961%209.61133%207.14453%209.81641%206.875%209.81641ZM10.8184%208.63867C10.5488%208.63867%2010.3496%208.42773%2010.3496%208.16992V5.375C10.3496%205.11719%2010.5488%204.90039%2010.8184%204.90039C11.082%204.90039%2011.293%205.11719%2011.293%205.375V8.16992C11.293%208.42773%2011.082%208.63867%2010.8184%208.63867ZM0.957031%208.13477C0.693359%208.13477%200.494141%207.92383%200.494141%207.66016V5.88477C0.494141%205.62109%200.693359%205.4043%200.957031%205.4043C1.23242%205.4043%201.4375%205.62109%201.4375%205.88477V7.66016C1.4375%207.92383%201.23242%208.13477%200.957031%208.13477Z'%20fill='%23ffff'/%3e%3c/svg%3e",blueAudio="data:image/svg+xml,%3csvg%20width='12'%20height='13'%20viewBox='0%200%2012%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.90039%2012.8926C4.63672%2012.8926%204.4375%2012.6816%204.4375%2012.418V1.12695C4.4375%200.863281%204.63672%200.652344%204.90039%200.652344C5.16992%200.652344%205.38086%200.863281%205.38086%201.12695V12.418C5.38086%2012.6816%205.16992%2012.8926%204.90039%2012.8926ZM8.84961%2011.5918C8.57422%2011.5918%208.375%2011.3809%208.375%2011.123V2.42188C8.375%202.16406%208.57422%201.94727%208.84961%201.94727C9.11328%201.94727%209.31836%202.16406%209.31836%202.42188V11.123C9.31836%2011.3809%209.11328%2011.5918%208.84961%2011.5918ZM2.93164%2010.5312C2.66797%2010.5312%202.46289%2010.3203%202.46289%2010.0566V3.48828C2.46289%203.22461%202.66797%203.00781%202.93164%203.00781C3.20117%203.00781%203.40625%203.22461%203.40625%203.48828V10.0566C3.40625%2010.3203%203.20117%2010.5312%202.93164%2010.5312ZM6.875%209.81641C6.60547%209.81641%206.40625%209.61133%206.40625%209.34766V4.19727C6.40625%203.93359%206.60547%203.72266%206.875%203.72266C7.14453%203.72266%207.34961%203.93359%207.34961%204.19727V9.34766C7.34961%209.61133%207.14453%209.81641%206.875%209.81641ZM10.8184%208.63867C10.5488%208.63867%2010.3496%208.42773%2010.3496%208.16992V5.375C10.3496%205.11719%2010.5488%204.90039%2010.8184%204.90039C11.082%204.90039%2011.293%205.11719%2011.293%205.375V8.16992C11.293%208.42773%2011.082%208.63867%2010.8184%208.63867ZM0.957031%208.13477C0.693359%208.13477%200.494141%207.92383%200.494141%207.66016V5.88477C0.494141%205.62109%200.693359%205.4043%200.957031%205.4043C1.23242%205.4043%201.4375%205.62109%201.4375%205.88477V7.66016C1.4375%207.92383%201.23242%208.13477%200.957031%208.13477Z'%20fill='%233076FF'/%3e%3c/svg%3e",getFileIcon=(b,g,_,j)=>{var _e;const $=(_e=b.split(".").pop())==null?void 0:_e.toLowerCase();if(g.type==="LINK"&&g.content.url)return jsxRuntimeExports.jsx("img",{src:(_==null?void 0:_.content.id)===g.content.id&&!j?links:whitelinks,alt:"link icon",className:"w-4 h-4"});switch($){case"zip":case"rar":return"📦";case"mp3":case"wav":case"ogg":return jsxRuntimeExports.jsx("img",{src:(_==null?void 0:_.content.id)===g.content.id&&!j?blueAudio:audioIcon,alt:"audio icon",className:"w-4 h-4"});case"mp4":case"avi":case"mkv":return jsxRuntimeExports.jsx("img",{src:videoIcon,alt:"video icon",className:"w-4 h-4"});case"pdf":case"doc":case"docx":return"📄";case"xls":case"xlsx":return"📊";case"csv":return"📑";case"jpg":case"jpeg":case"png":case"gif":case"heic":return jsxRuntimeExports.jsx("img",{src:imageIcon,alt:"image icon",className:"w-4 h-4"});default:return"📄"}},SPECIAL_BUBBLE_BASE_URL="https://production-1016379130133.us-central1.run.app",USER_ID="8463e7b6-19cd-4568-8f1d-aa5b0513aa2e",BubbleSpecial=()=>{const{slug:b}=useParams(),[g,_]=reactExports.useState(null),[j,$]=reactExports.useState(""),[_e,et]=reactExports.useState(null),[tt,nt]=reactExports.useState(0),[rt,it]=reactExports.useState(!1),st=useMotionValue(0),ot=useMotionValue(0),lt=useSpring(st,{stiffness:400,damping:50}),at=useSpring(ot,{stiffness:400,damping:50}),[ut,dt]=reactExports.useState(!1);reactExports.useEffect(()=>{b&&(async()=>{try{const ft=await axios.post(`${SPECIAL_BUBBLE_BASE_URL}/api/artifacts/details`,{artifactId:b,isDev:!0},{headers:{"x-user-id":USER_ID,accept:"*/*"}}),gt=ft.data.artifact;$(ft.data.ownerProfile.displayName),_(gt),et(gt.attachments[0]),nt(0)}catch(ft){console.error("Error fetching bubble data",ft)}})()},[b]);const ct=(mt,ft)=>{!g||rt||(it(!0),et(g.attachments[ft]),nt(ft),setTimeout(()=>{it(!1)},200))},ht=(mt,ft)=>{if(!mt)return jsxRuntimeExports.jsx("p",{children:"No content available"});const gt=mt.split("$");return gt.flatMap((xt,vt)=>{const St=jsxRuntimeExports.jsx("span",{className:"text-white inline",dangerouslySetInnerHTML:{__html:xt}},`text-${vt}`),Tt=vt<gt.length-1&&ft[vt]?pt(ft[vt],vt):null;return[St,Tt]})},pt=(mt,ft)=>{const xt=(_e==null?void 0:_e.content.id)===mt.content.id&&!rt?"bg-white text-secondary":"bg-[#FFFFFF33] text-white",vt=truncateFilename(mt.type==="LINK"?new URL(mt.content.url||"").hostname.replace("www.",""):mt.content.name||"");return jsxRuntimeExports.jsxs("button",{onClick:()=>ct(mt,ft),className:`inline-flex items-center gap-0.5 text-xs py-1 px-2 mx-0.5 rounded-3xl w-fit cursor-pointer ${xt}`,children:[jsxRuntimeExports.jsx("span",{children:getFileIcon(mt.content.name||"",mt,_e,rt)}),jsxRuntimeExports.jsx("span",{className:"text-inherit max-w-20 w-full truncate",children:vt})]},`attachment-${mt.content.id}-${ft}`)};return g?jsxRuntimeExports.jsx("div",{className:"w-full min-h-screen flex justify-center items-center flex-col py-16 relative p-4",children:jsxRuntimeExports.jsxs(motion.div,{className:"flex flex-col w-[360px] mx-auto p-6",drag:!ut,dragMomentum:!1,style:{x:lt,y:at},onDrag:(mt,ft)=>{st.set(ft.offset.x),ot.set(ft.offset.y)},onDragEnd:()=>{st.set(0),ot.set(0)},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[jsxRuntimeExports.jsxs("article",{className:"bg-gradient-to-b from-[#3076FF] to-[#1D49E5] w-full text-[17px] pt-3 rounded-2xl",children:[jsxRuntimeExports.jsx("div",{className:"px-3 font-light text-white whitespace-pre-wrap break-words",children:ht(g.contentText,g.attachments)}),jsxRuntimeExports.jsx("div",{className:"bubble-bottom mt-2 w-full",children:_e&&jsxRuntimeExports.jsx(TokenPreviewSpecial,{currentIndex:tt,onTokenSwipe:mt=>ct(g.attachments[mt],mt),allTokens:g.attachments,setIsDraggingDisabled:dt})})]}),jsxRuntimeExports.jsx("h2",{className:"text-[#7E7E7E] text-xs mt-1",children:j})]})}):jsxRuntimeExports.jsx("div",{children:"Loading..."})};createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(App,{})}),jsxRuntimeExports.jsx(Route,{path:"/bubble/:slug",element:jsxRuntimeExports.jsx(Bubble,{})}),jsxRuntimeExports.jsx(Route,{path:"/bubble-special/:slug",element:jsxRuntimeExports.jsx(BubbleSpecial,{})})]})})}));
